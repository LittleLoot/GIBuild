(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return u}),n.d(e,"c",function(){return a});var r=n("mAIw"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:s,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);try{var o=this.getOrInitializeService(i);if(!o){if(n)return null;throw Error("Service "+this.name+" is not available")}return o}catch(a){if(n)return null;throw a}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService(s)}catch(h){}try{for(var i=Object(r.h)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.e)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService(c);u.resolve(l)}catch(h){}}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,function(){var t;return Object(r.d)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}),t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()})))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return t===s?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"0EUg":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("bHdf");function i(){return Object(r.a)(1)}},"1uah":function(t,e,n){"use strict";n.d(e,"b",function(){return u}),n.d(e,"a",function(){return c});var r=n("yCtX"),i=n("DH7j"),o=n("7o/Q"),s=n("Lhse"),a=n("zx2A");function u(...t){const e=t[t.length-1];return"function"==typeof e&&t.pop(),Object(r.a)(t,void 0).lift(new c(e))}class c{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new l(t,this.resultSelector))}}class l extends o.a{constructor(t,e,n=Object.create(null)){super(t),this.resultSelector=e,this.iterators=[],this.active=0,this.resultSelector="function"==typeof e?e:void 0}_next(t){const e=this.iterators;Object(i.a)(t)?e.push(new f(t)):e.push("function"==typeof t[s.a]?new h(t[s.a]()):new d(this.destination,this,t))}_complete(){const t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(let n=0;n<e;n++){let e=t[n];e.stillUnsubscribed?this.destination.add(e.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const t=this.iterators,e=t.length,n=this.destination;for(let o=0;o<e;o++){let e=t[o];if("function"==typeof e.hasValue&&!e.hasValue())return}let r=!1;const i=[];for(let o=0;o<e;o++){let e=t[o],s=e.next();if(e.hasCompleted()&&(r=!0),s.done)return void n.complete();i.push(s.value)}this.resultSelector?this._tryresultSelector(i):n.next(i),r&&n.complete()}_tryresultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class h{constructor(t){this.iterator=t,this.nextResult=t.next()}hasValue(){return!0}next(){const t=this.nextResult;return this.nextResult=this.iterator.next(),t}hasCompleted(){const t=this.nextResult;return Boolean(t&&t.done)}}class f{constructor(t){this.array=t,this.index=0,this.length=0,this.length=t.length}[s.a](){return this}next(t){const e=this.index++;return e<this.length?{value:this.array[e],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class d extends a.b{constructor(t,e,n){super(t),this.parent=e,this.observable=n,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[s.a](){return this}next(){const t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(t){this.buffer.push(t),this.parent.checkIterators()}subscribe(){return Object(a.c)(this.observable,new a.a(this))}}},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2Vo4":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("XNiG"),i=n("9ppp");class o extends r.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new i.a;return this._value}next(t){super.next(this._value=t)}}},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"4I5i":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})()},"4XzM":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n("89kA")},"5+tZ":function(t,e,n){"use strict";n.d(e,"b",function(){return s}),n.d(e,"a",function(){return c});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.a(this),n=this.destination;n.add(e);const r=Object(o.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}const c=s},"6Uf2":function(t,e,n){"use strict";(function(t){var e,r=n("zIRd"),i=n("mAIw"),o=n("qOnz"),s=n("q/0M"),a=n("/6Yf"),u=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(o.J)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(o.D)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),c=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(o.k)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),l=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new u(e)}}catch(n){}return new c},h=l("localStorage"),f=l("sessionStorage"),d=new s.b("@firebase/database"),p=(e=1,function(){return e++}),g=function(t){var e=Object(o.I)(t),n=new o.d;n.update(e);var r=n.digest();return o.h.encodeByteArray(r)},v=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=v.apply(null,i):n+="object"==typeof i?Object(o.J)(i):i,n+=" "}return n},m=null,y=!0,b=function(t,e){Object(o.f)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(d.logLevel=s.a.VERBOSE,m=d.log.bind(d),e&&f.set("logging_enabled",!0)):"function"==typeof t?m=t:(m=null,f.remove("logging_enabled"))},_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===y&&(y=!1,null===m&&!0===f.get("logging_enabled")&&b(!0)),m){var n=v.apply(null,t);m(n)}},w=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];_.apply(void 0,Object(i.f)([t],e))}},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+v.apply(void 0,Object(i.f)(t));d.error(n)},O=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+v.apply(void 0,Object(i.f)(t));throw d.error(n),new Error(n)},S=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+v.apply(void 0,Object(i.f)(t));d.warn(n)},C=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},T="[MIN_NAME]",I="[MAX_NAME]",x=function(t,e){if(t===e)return 0;if(t===T||e===I)return-1;if(e===T||t===I)return 1;var n=M(t),r=M(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},j=function(t,e){return t===e?0:t<e?-1:1},k=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(o.J)(e))},A=function(t){if("object"!=typeof t||null===t)return Object(o.J)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=Object(o.J)(e[i]),r+=":",r+=A(t[e[i]]);return r+"}"},N=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function P(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var R=function(t){var e,n,r,i,s;Object(o.f)(!C(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(s=0;s<64;s+=8){var l=parseInt(u.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},D=new RegExp("^-?(0*)\\d{1,10}$"),M=function(t){if(D.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},L=function(t){try{t()}catch(e){setTimeout(function(){throw S("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},V=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},F=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();function U(){return new F("")}function q(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function H(t){return t.pieces_.length-t.pieceNum_}function B(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new F(t.pieces_,e)}function z(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function W(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function G(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function K(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new F(e,0)}function Q(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof F)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new F(n,0)}function $(t){return t.pieceNum_>=t.pieces_.length}function Y(t,e){var n=q(t),r=q(e);if(null===n)return e;if(n===r)return Y(B(t),B(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function X(t,e){for(var n=G(t,0),r=G(e,0),i=0;i<n.length&&i<r.length;i++){var o=x(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function J(t,e){if(H(t)!==H(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Z(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(H(t)>H(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var tt,et,nt,rt,it,ot,st,at,ut,ct=function(){function t(t,e){this.errorPrefix_=e,this.parts_=G(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(o.H)(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=Object(o.H)(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=Object(o.H)(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),lt=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ht="websocket",ft="long_polling",dt=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=h.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&h.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(Object(o.f)("string"==typeof t,"typeof type must == string"),Object(o.f)("object"==typeof e,"typeof params must == object"),t===ht)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==ft)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return P(e,function(t,e){r.push(t+"="+e)}),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},t}(),pt=function(t,e){var n=gt(t),r=n.namespace;return"firebase.com"===n.domain&&O(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||O("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&S("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new dt(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new F(n.pathString)}},gt=function(t){var e="",n="",r="",o="",s="",a=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var f=t.indexOf("?");-1===f&&(f=t.length),e=t.substring(0,Math.min(h,f)),h<f&&(o=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,f)));var d=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var o=Object(i.h)(t.split("&")),s=o.next();!s.done;s=o.next()){var a=s.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):S("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,f)));(l=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),s=r}"ns"in d&&(s=d.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:o,namespace:s}},vt=/[\[\].#$\/\u0000-\u001F\u007F]/,mt=/[\[\].#$\u0000-\u001F\u007F]/,yt=10485760,bt=function(t){return"string"==typeof t&&0!==t.length&&!vt.test(t)},_t=function(t){return"string"==typeof t&&0!==t.length&&!mt.test(t)},wt=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!C(t)||t&&"object"==typeof t&&Object(o.k)(t,".sv")},Et=function(t,e,n,r,i){i&&void 0===n||Ot(Object(o.o)(t,e,i),n,r)},Ot=function(t,e,n){var r=n instanceof F?new ct(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+r.toErrorString());if("function"==typeof e)throw new Error(t+"contains a function "+r.toErrorString()+" with contents = "+e.toString());if(C(e))throw new Error(t+"contains "+e.toString()+" "+r.toErrorString());if("string"==typeof e&&e.length>yt/3&&Object(o.H)(e)>yt)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+r.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,s=!1;if(P(e,function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!bt(e)))throw new Error(t+" contains an invalid key ("+e+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(e),Ot(t,n,r),r.pop()}),i&&s)throw new Error(t+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},St=function(t,e,n,r,i){if(!i||void 0!==n){var s=Object(o.o)(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(s+" must be an object containing the children to replace.");var a=[];P(n,function(t,e){var n=new F(t);if(Ot(s,e,Q(r,n)),".priority"===z(n)&&!wt(e))throw new Error(s+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=G(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!bt(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(X);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&Z(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(s,a)}},Ct=function(t,e,n,r){if(!r||void 0!==n){if(C(n))throw new Error(Object(o.o)(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!wt(n))throw new Error(Object(o.o)(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Tt=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(o.o)(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},It=function(t,e,n,r){if(!(r&&void 0===n||bt(n)))throw new Error(Object(o.o)(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},xt=function(t,e,n,r){if(!(r&&void 0===n||_t(n)))throw new Error(Object(o.o)(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},jt=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),xt(t,e,n,r)},kt=function(t,e){if(".info"===q(e))throw new Error(t+" failed = Can't modify data under /.info/")},At=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!bt(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),_t(t)}(r))throw new Error(Object(o.o)(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Nt=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(o.o)(t,e,r)+"must be a boolean.")},Pt=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){Object(o.K)("OnDisconnect.cancel",0,1,arguments.length),Object(o.L)("OnDisconnect.cancel",1,t,!0);var e=new o.a;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){Object(o.K)("OnDisconnect.remove",0,1,arguments.length),kt("OnDisconnect.remove",this.path_),Object(o.L)("OnDisconnect.remove",1,t,!0);var e=new o.a;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){Object(o.K)("OnDisconnect.set",1,2,arguments.length),kt("OnDisconnect.set",this.path_),Et("OnDisconnect.set",1,t,this.path_,!1),Object(o.L)("OnDisconnect.set",2,e,!0);var n=new o.a;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){Object(o.K)("OnDisconnect.setWithPriority",2,3,arguments.length),kt("OnDisconnect.setWithPriority",this.path_),Et("OnDisconnect.setWithPriority",1,t,this.path_,!1),Ct("OnDisconnect.setWithPriority",2,e,!1),Object(o.L)("OnDisconnect.setWithPriority",3,n,!0);var r=new o.a;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(Object(o.K)("OnDisconnect.update",1,2,arguments.length),kt("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,S("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}St("OnDisconnect.update",1,t,this.path_,!1),Object(o.L)("OnDisconnect.update",2,e,!0);var i=new o.a;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),Rt=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(o.K)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Dt="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Mt=(tt=0,et=[],function(t){var e,n=t===tt;tt=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=Dt.charAt(t%64),t=Math.floor(t/64);Object(o.f)(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===et[e];e--)et[e]=0;et[e]++}else for(e=0;e<12;e++)et[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=Dt.charAt(et[e]);return Object(o.f)(20===i.length,"nextPushId: Length should be 20."),i}),Lt=function(t){if("2147483647"===t)return"-";var e=M(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return I;var o=Dt.charAt(Dt.indexOf(n[i])+1);return n[i]=o,n.slice(0,i+1).join("")},Vt=function(t){if("-2147483648"===t)return T;var e=M(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=Dt.charAt(Dt.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))},Ft=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Ut=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Ft(T,t),r=new Ft(T,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Ft.MIN},t}(),qt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return nt},set:function(t){nt=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return x(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(o.g)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Ft.MIN},e.prototype.maxPost=function(){return new Ft(I,nt)},e.prototype.makePost=function(t,e){return Object(o.f)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Ft(t,nt)},e.prototype.toString=function(){return".key"},e}(Ut),Ht=new qt,Bt=function(t){return"number"==typeof t?"number:"+R(t):"string:"+t},zt=function(t){if(t.isLeafNode()){var e=t.val();Object(o.f)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(o.k)(e,".sv"),"Priority must be a string or number.")}else Object(o.f)(t===rt||t.isEmpty(),"priority of unexpected type.");Object(o.f)(t===rt||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Wt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(o.f)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),zt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return it},set:function(t){it=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return $(e)?this:".priority"===q(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=q(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(o.f)(".priority"!==r||1===H(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(B(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Bt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?R(this.value_):this.value_,this.lazyHash_=g(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(o.f)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return Object(o.f)(i>=0,"Unknown leaf type: "+n),Object(o.f)(s>=0,"Unknown leaf type: "+r),i===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Gt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Ft.MIN},e.prototype.maxPost=function(){return new Ft(I,new Wt("[PRIORITY-POST]",st))},e.prototype.makePost=function(t,e){var n=ot(t);return new Ft(e,new Wt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Ut)),Kt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Qt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Yt.EMPTY_NODE,this.right=null!=o?o:Yt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Yt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Yt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),$t=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Qt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Yt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Qt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Qt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Kt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Kt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Kt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Kt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new $t,t}(),Xt=Math.log(2),Jt=function(){function t(t){this.count=parseInt(Math.log(t+1)/Xt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Zt=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new Qt(s,o.node,Qt.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new Qt(s,o.node,Qt.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new Qt(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,Qt.BLACK):(a(h,Qt.BLACK),a(h,Qt.RED))}return o}(new Jt(t.length));return new Yt(r||e,o)},te={},ee=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(o.f)(te&&Gt,"ChildrenNode.ts has not been loaded"),at=at||new t({".priority":te},{".priority":Gt})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(o.G)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Yt?e:null},t.prototype.hasIndex=function(t){return Object(o.k)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(o.f)(e!==Ht,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,s=[],a=!1,u=n.getIterator(Ft.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),s.push(c),c=u.getNext();r=a?Zt(s,e.getCompare()):te;var l=e.toString(),h=Object(i.a)({},this.indexSet_);h[l]=e;var f=Object(i.a)({},this.indexes_);return f[l]=r,new t(f,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(o.E)(this.indexes_,function(t,i){var s=Object(o.G)(r.indexSet_,i);if(Object(o.f)(s,"Missing index implementation for "+i),t===te){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(Ft.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),Zt(a,s.getCompare())}return te}var l=n.get(e.name),h=t;return l&&(h=h.remove(new Ft(e.name,l))),h.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(o.E)(this.indexes_,function(t){if(t===te)return t;var r=n.get(e.name);return r?t.remove(new Ft(e.name,r)):t}),this.indexSet_)},t}();function ne(t,e){return x(t.name,e.name)}function re(t,e){return x(t,e)}var ie=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&zt(this.priorityNode_),this.children_.isEmpty()&&Object(o.f)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return ut||(ut=new t(new Yt(re),null,ee.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||ut},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?ut:e},t.prototype.getChild=function(t){var e=q(t);return null===e?this:this.getImmediateChild(e).getChild(B(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(o.f)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Ft(e,n),i=void 0,s=void 0;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?ut:this.priorityNode_;return new t(i,a,s)},t.prototype.updateChild=function(t,e){var n=q(t);if(null===n)return e;Object(o.f)(".priority"!==q(t)||1===H(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(B(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Gt,function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1}),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Bt(this.getPriority().val())+":"),this.forEachChild(Gt,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":g(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Ft(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Ft(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Ft(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,Ft.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,Ft.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===oe?-1:0},t.prototype.withIndex=function(e){if(e===Ht||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Ht||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Gt),r=e.getIterator(Gt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Ht?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),oe=new(function(t){function e(){return t.call(this,new Yt(re),ie.EMPTY_NODE,ee.Default)||this}return Object(i.c)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return ie.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(ie));function se(t,e){if(void 0===e&&(e=null),null===t)return ie.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(o.f)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Wt(t,se(e));if(t instanceof Array){var n=ie.EMPTY_NODE;return P(t,function(e,r){if(Object(o.k)(t,e)&&"."!==e.substring(0,1)){var i=se(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}}),n.updatePriority(se(e))}var r=[],i=!1;if(P(t,function(t,e){if("."!==t.substring(0,1)){var n=se(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Ft(t,n)))}}),0===r.length)return ie.EMPTY_NODE;var s=Zt(r,ne,function(t){return t.name},re);if(i){var a=Zt(r,Gt.getCompare());return new ie(s,se(e),new ee({".priority":a},{".priority":Gt}))}return new ie(s,se(e),ee.Default)}Object.defineProperties(Ft,{MIN:{value:new Ft(T,ie.EMPTY_NODE)},MAX:{value:new Ft(I,oe)}}),qt.__EMPTY_NODE=ie.EMPTY_NODE,Wt.__childrenNodeConstructor=ie,rt=oe,st=oe,ot=se;var ae=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?x(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Ft.MIN},e.prototype.maxPost=function(){return Ft.MAX},e.prototype.makePost=function(t,e){var n=se(t);return new Ft(e,n)},e.prototype.toString=function(){return".value"},e}(Ut)),ue=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(o.f)(!$(e)&&".priority"!==q(e),"Can't create PathIndex with empty path or .priority key"),n}return Object(i.c)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=se(t),r=ie.EMPTY_NODE.updateChild(this.indexPath_,n);return new Ft(e,r)},e.prototype.maxPost=function(){var t=ie.EMPTY_NODE.updateChild(this.indexPath_,oe);return new Ft(I,t)},e.prototype.toString=function(){return G(this.indexPath_,0).join("/")},e}(Ut),ce=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return Object(o.K)("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return Object(o.K)("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return Object(o.K)("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return Object(o.K)("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){Object(o.K)("DataSnapshot.child",0,1,arguments.length),e=String(e),xt("DataSnapshot.child",1,e,!1);var n=new F(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,Gt)},t.prototype.hasChild=function(t){Object(o.K)("DataSnapshot.hasChild",1,1,arguments.length),xt("DataSnapshot.hasChild",1,t,!1);var e=new F(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return Object(o.K)("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(Object(o.K)("DataSnapshot.forEach",1,1,arguments.length),Object(o.L)("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,function(r,i){return e(new t(i,n.ref_.child(r),Gt))})},t.prototype.hasChildren=function(){return Object(o.K)("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(o.K)("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return Object(o.K)("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),le=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(o.J)(this.snapshot.exportVal())},t}(),he=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),fe=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new le("value",this,new ce(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.f)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new he(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),de=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,Object(o.k)(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new he(this,t,e):null},t.prototype.createEvent=function(t,e){Object(o.f)(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new le(t.type,this,new ce(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.f)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var s=r[0],a=i[0];return!(a!==s||e.callbacks_[s]&&this.callbacks_[a]&&e.callbacks_[s]!==this.callbacks_[a])}return i.every(function(t){return e.callbacks_[t]===n.callbacks_[t]})}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}();function pe(t){return{type:"value",snapshotNode:t}}function ge(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ve(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function me(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var ye,be=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,s){Object(o.f)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(ve(e,a)):Object(o.f)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(ge(e,n)):s.trackChildChange(me(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Gt,function(t,r){e.hasChild(t)||n.trackChildChange(ve(t,r))}),e.isLeafNode()||e.forEachChild(Gt,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(me(e,r,i))}else n.trackChildChange(ge(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?ie.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),_e=function(){function t(e){this.indexedFilter_=new be(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Ft(e,n))||(n=ie.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=ie.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(ie.EMPTY_NODE);var i=this;return e.forEachChild(Gt,function(t,e){i.matches(new Ft(t,e))||(r=r.updateImmediateChild(t,ie.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),we=function(){function t(t){this.rangedFilter_=new _e(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Ft(e,n))||(n=ie.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=ie.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=ie.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(ie.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,ie.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;Object(o.f)(u.numChildren()===this.limit_,"");var c=new Ft(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var f=u.getImmediateChild(e),d=r.getChildAfterChild(this.index_,l,this.reverse_);null!=d&&(d.name===e||u.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);var p=null==d?1:s(d,c);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(me(e,n,f)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(ve(e,f));var g=u.updateImmediateChild(e,ie.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=i&&i.trackChildChange(ge(d.name,d.node)),g.updateImmediateChild(d.name,d.node)):g}return n.isEmpty()?t:h&&s(l,c)>=0?(null!=i&&(i.trackChildChange(ve(l.name,l.node)),i.trackChildChange(ge(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,ie.EMPTY_NODE)):t},t}(),Ee=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Gt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return Object(o.f)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(o.f)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:T},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(o.f)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(o.f)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:I},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(o.f)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Gt},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();function Oe(t,e){var n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function Se(t,e){var n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function Ce(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Te(t,e,n){var r;return t.index_===Ht?("string"==typeof e&&(e=Lt(e)),r=Ce(t,e,n)):r=Ce(t,e,null==n?I:Lt(n)),r.startAfterSet_=!0,r}function Ie(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function xe(t,e,n){var r;return t.index_===Ht?("string"==typeof e&&(e=Vt(e)),r=Ie(t,e,n)):r=Ie(t,e,null==n?T:Vt(n)),r.endBeforeSet_=!0,r}function je(t,e){var n=t.copy();return n.index_=e,n}function ke(t){var e,n={};return t.isDefault()||(t.index_===Gt?e="$priority":t.index_===ae?e="$value":t.index_===Ht?e="$key":(Object(o.f)(t.index_ instanceof ue,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=Object(o.J)(e),t.startSet_&&(n.startAt=Object(o.J)(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+Object(o.J)(t.indexStartName_))),t.endSet_&&(n.endAt=Object(o.J)(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+Object(o.J)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}var Ae=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.f)(ye,"Reference.ts has not been loaded"),ye},set:function(t){ye=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Ht){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==T)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==I)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Gt){if(null!=e&&!wt(e)||null!=n&&!wt(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(o.f)(t.getIndex()instanceof ue||t.getIndex()===ae,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return Object(o.K)("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){Object(o.K)("Query.on",2,4,arguments.length),Tt("Query.on",1,e,!1),Object(o.L)("Query.on",2,n,!1);var s=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,s.cancel,s.context);else{var a={};a[e]=n,this.onChildEvent(a,s.cancel,s.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new fe(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new de(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){Object(o.K)("Query.off",0,3,arguments.length),Tt("Query.off",1,t,!0),Object(o.L)("Query.off",2,e,!0),Object(o.M)("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var s=e||null;r=new fe(s,null,n||null)}else t&&(e&&((i={})[t]=e),r=new de(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},t.prototype.get=function(){return this.repo.getValue(this)},t.prototype.once=function(e,n,r,i){var s=this;Object(o.K)("Query.once",1,4,arguments.length),Tt("Query.once",1,e,!1),Object(o.L)("Query.once",2,n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),u=!0,c=new o.a;c.promise.catch(function(){});var l=function(t){u&&(u=!1,s.off(e,l),n&&n.bind(a.context)(t),c.resolve(t))};return this.on(e,l,function(t){s.off(e,l),a.cancel&&a.cancel.bind(a.context)(t),c.reject(t)}),c.promise},t.prototype.limitToFirst=function(e){if(Object(o.K)("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,Oe(this.queryParams_,e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(Object(o.K)("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,Se(this.queryParams_,e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(Object(o.K)("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');xt("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new F(e);if($(n))throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new ue(n),i=je(this.queryParams_,r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){Object(o.K)("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=je(this.queryParams_,Ht);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){Object(o.K)("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=je(this.queryParams_,Gt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){Object(o.K)("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=je(this.queryParams_,ae);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),Object(o.K)("Query.startAt",0,2,arguments.length),Et("Query.startAt",1,e,this.path,!0),It("Query.startAt",2,n,!0);var r=Ce(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.startAfter=function(e,n){void 0===e&&(e=null),Object(o.K)("Query.startAfter",0,2,arguments.length),Et("Query.startAfter",1,e,this.path,!1),It("Query.startAfter",2,n,!0);var r=Te(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAfter: Starting point was already set (by another call to startAt, startAfter or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),Object(o.K)("Query.endAt",0,2,arguments.length),Et("Query.endAt",1,e,this.path,!0),It("Query.endAt",2,n,!0);var r=Ie(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endBefore=function(e,n){void 0===e&&(e=null),Object(o.K)("Query.endBefore",0,2,arguments.length),Et("Query.endBefore",1,e,this.path,!1),It("Query.endBefore",2,n,!0);var r=xe(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endBefore: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(Object(o.K)("Query.equalTo",1,2,arguments.length),Et("Query.equalTo",1,t,this.path,!1),It("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return Object(o.K)("Query.toString",0,0,arguments.length),this.repo.toString()+W(this.path)},t.prototype.toJSON=function(){return Object(o.K)("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return function(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Gt&&(e.i=t.index_.toString()),e}(this.queryParams_)},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=A(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(Object(o.K)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=J(this.path,e.path),s=this.queryIdentifier()===e.queryIdentifier();return r&&i&&s},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,Object(o.L)(t,3,r.cancel,!0),r.context=n,Object(o.M)(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(o.o)(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Ne=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),Pe=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=Q(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},t}(),Re=function(t,e,n){return t&&"object"==typeof t?(Object(o.f)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?De(t[".sv"],e,n):"object"==typeof t[".sv"]?Me(t[".sv"],e):void Object(o.f)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},De=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(o.f)(!1,"Unexpected server value: "+t)}},Me=function(t,e,n){t.hasOwnProperty("increment")||Object(o.f)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(o.f)(!1,"Unexpected increment value: "+r);var i=e.node();if(Object(o.f)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var s=i.getValue();return"number"!=typeof s?r:s+r},Le=function(t,e,n,r){return Fe(e,new Pe(n,t),r)},Ve=function(t,e,n){return Fe(t,new Ne(e),n)};function Fe(t,e,n){var r,i=t.getPriority().val(),o=Re(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=Re(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new Wt(a,se(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Wt(o))),u.forEachChild(Gt,function(t,i){var o=Fe(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))}),r}var Ue=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!$(t)&&this.children.size>0){var e=q(t);return t=B(t),this.children.has(e)?this.children.get(e).find(t):null}return null},t.prototype.remember=function(e,n){if($(e))this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,n);else{var r=q(e);this.children.has(r)||this.children.set(r,new t);var i=this.children.get(r);e=B(e),i.remember(e,n)}},t.prototype.forget=function(t){if($(t))return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(Gt,function(t,e){n.remember(new F(t),e)}),this.forget(t)}if(this.children.size>0){var r=q(t);return t=B(t),this.children.has(r)&&this.children.get(r).forget(t)&&this.children.delete(r),0===this.children.size}return!0},t.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild(function(n,r){var i=new F(t.toString()+"/"+n);r.forEachTree(i,e)})},t.prototype.forEachChild=function(t){this.children.forEach(function(e,n){t(n,e)})},t}(),qe=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({});function He(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var Be,ze=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=qe.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if($(this.path)){if(null!=this.affectedTree.value)return Object(o.f)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new F(e));return new t(U(),n,this.revert)}return Object(o.f)(q(this.path)===e,"operationForChild called for unrelated child."),new t(B(this.path),this.affectedTree,this.revert)},t}(),We=function(){function t(t,e){void 0===e&&(Be||(Be=new Yt(j)),e=Be),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return P(e,function(t,e){n=n.set(new F(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:U(),value:this.value};if($(t))return null;var n=q(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(B(t),e);return null!=i?{path:Q(new F(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if($(e))return this;var n=q(e),r=this.children.get(n);return null!==r?r.subtree(B(e)):new t(null)},t.prototype.set=function(e,n){if($(e))return new t(n,this.children);var r=q(e),i=(this.children.get(r)||new t(null)).set(B(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if($(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=q(e),r=this.children.get(n);if(r){var i=r.remove(B(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if($(t))return this.value;var e=q(t),n=this.children.get(e);return n?n.get(B(t)):null},t.prototype.setTree=function(e,n){if($(e))return n;var r,i=q(e),o=(this.children.get(i)||new t(null)).setTree(B(e),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(U(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(Q(t,r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,U(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if($(t))return null;var i=q(t),o=this.children.get(i);return o?o.findOnPath_(B(t),Q(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,U(),e)},t.prototype.foreachOnPath_=function(e,n,r){if($(e))return this;this.value&&r(n,this.value);var i=q(e),o=this.children.get(i);return o?o.foreachOnPath_(B(e),Q(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(U(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(Q(t,n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t}(),Ge=function(){function t(t,e){this.source=t,this.path=e,this.type=qe.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return $(this.path)?new t(this.source,U()):new t(this.source,B(this.path))},t}(),Ke=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=qe.OVERWRITE}return t.prototype.operationForChild=function(e){return $(this.path)?new t(this.source,U(),this.snap.getImmediateChild(e)):new t(this.source,B(this.path),this.snap)},t}(),Qe=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=qe.MERGE}return t.prototype.operationForChild=function(e){if($(this.path)){var n=this.children.subtree(new F(e));return n.isEmpty()?null:n.value?new Ke(this.source,U(),n.value):new t(this.source,U(),n)}return Object(o.f)(q(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,B(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),$e=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if($(t))return this.isFullyInitialized()&&!this.filtered_;var e=q(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),Ye=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new $e(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new $e(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t}(),Xe=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(o.f)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),Object(o.f)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,me(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,ve(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,ge(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw Object(o.g)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,me(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),Je=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Ze=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new $e(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),tn=function(){return function(t,e){this.viewCache=t,this.changes=e}}(),en=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){Object(o.f)(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),Object(o.f)(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var s,a,u=new Xe;if(n.type===qe.OVERWRITE){var c=n;c.source.fromUser?s=this.applyUserOverwrite_(e,c.path,c.snap,r,i,u):(Object(o.f)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.getServerCache().isFiltered()&&!$(c.path),s=this.applyServerOverwrite_(e,c.path,c.snap,r,i,a,u))}else if(n.type===qe.MERGE){var l=n;l.source.fromUser?s=this.applyUserMerge_(e,l.path,l.children,r,i,u):(Object(o.f)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.getServerCache().isFiltered(),s=this.applyServerMerge_(e,l.path,l.children,r,i,a,u))}else if(n.type===qe.ACK_USER_WRITE){var h=n;s=h.revert?this.revertUserWrite_(e,h.path,r,i,u):this.ackUserWrite_(e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==qe.LISTEN_COMPLETE)throw Object(o.g)("Unknown operation type: "+n.type);s=this.listenComplete_(e,n.path,r,u)}var f=u.getChanges();return t.maybeAddValueEvent_(e,s,f),new tn(s,f)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(pe(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var s=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var a=void 0,u=void 0;if($(e))if(Object(o.f)(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var c=t.getCompleteServerSnap(),l=n.calcCompleteEventChildren(c instanceof ie?c:ie.EMPTY_NODE);a=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var h=n.calcCompleteEventCache(t.getCompleteServerSnap());a=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var f=q(e);if(".priority"===f){Object(o.f)(1===H(e),"Can't have a priority with additional path components");var d=s.getNode();u=t.getServerCache().getNode();var p=n.calcEventCacheAfterServerOverwrite(e,d,u);a=null!=p?this.filter_.updatePriority(d,p):s.getNode()}else{var g=B(e),v=void 0;if(s.isCompleteForChild(f)){u=t.getServerCache().getNode();var m=n.calcEventCacheAfterServerOverwrite(e,s.getNode(),u);v=null!=m?s.getNode().getImmediateChild(f).updateChild(g,m):s.getNode().getImmediateChild(f)}else v=n.calcCompleteChild(f,t.getServerCache());a=null!=v?this.filter_.updateChild(s.getNode(),f,v,g,r,i):s.getNode()}}return t.updateEventSnap(a,s.isFullyInitialized()||$(e),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if($(e))a=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(e,n);a=c.updateFullNode(u.getNode(),l,null)}else{var h=q(e);if(!u.isCompleteForPath(e)&&H(e)>1)return t;var f=B(e),d=u.getNode().getImmediateChild(h).updateChild(f,n);a=".priority"===h?c.updatePriority(u.getNode(),d):c.updateChild(u.getNode(),h,d,f,Je,null)}var p=t.updateServerSnap(a,u.isFullyInitialized()||$(e),c.filtersNodes()),g=new Ze(r,p,i);return this.generateEventCacheAfterServerEvent_(p,e,r,g,s)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u=t.getEventCache(),c=new Ze(r,t,i);if($(e))a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),s=t.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var l=q(e);if(".priority"===l)a=this.filter_.updatePriority(t.getEventCache().getNode(),n),s=t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered());else{var h=B(e),f=u.getNode().getImmediateChild(l),d=void 0;if($(h))d=n;else{var p=c.getCompleteChild(l);d=null!=p?".priority"===z(h)&&p.getChild(K(h)).isEmpty()?p:p.updateChild(h,n):ie.EMPTY_NODE}if(f.equals(d))s=t;else{var g=this.filter_.updateChild(u.getNode(),l,d,h,c,o);s=t.updateEventSnap(g,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,s){var a=this,u=e;return r.foreach(function(r,c){var l=Q(n,r);t.cacheHasChild_(e,q(l))&&(u=a.applyUserOverwrite_(u,l,c,i,o,s))}),r.foreach(function(r,c){var l=Q(n,r);t.cacheHasChild_(e,q(l))||(u=a.applyUserOverwrite_(u,l,c,i,o,s))}),u},t.prototype.applyMerge_=function(t,e){return e.foreach(function(e,n){t=t.updateChild(e,n)}),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,s){var a=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=$(e)?n:new We(null).setTree(e,n);var l=t.getServerCache().getNode();return u.children.inorderTraversal(function(e,n){if(l.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),h=a.applyMerge_(u,n);c=a.applyServerOverwrite_(c,new F(e),h,r,i,o,s)}}),u.children.inorderTraversal(function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!l.hasChild(e)&&!u){var h=t.getServerCache().getNode().getImmediateChild(e),f=a.applyMerge_(h,n);c=a.applyServerOverwrite_(c,new F(e),f,r,i,o,s)}}),c},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=n.value){if($(e)&&a.isFullyInitialized()||a.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,a.getNode().getChild(e),r,i,s,o);if($(e)){var u=new We(null);return a.getNode().forEachChild(Ht,function(t,e){u=u.set(new F(t),e)}),this.applyServerMerge_(t,e,u,r,i,s,o)}return t}var c=new We(null);return n.foreach(function(t,n){var r=Q(e,t);a.isCompleteForPath(r)&&(c=c.set(t,a.getNode().getChild(r)))}),this.applyServerMerge_(t,e,c,r,i,s,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||$(e),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,Je,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var s;if(null!=n.shadowingWrite(e))return t;var a=new Ze(n,t,r),u=t.getEventCache().getNode(),c=void 0;if($(e)||".priority"===q(e)){var l=void 0;if(t.getServerCache().isFullyInitialized())l=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var h=t.getServerCache().getNode();Object(o.f)(h instanceof ie,"serverChildren would be complete if leaf node"),l=n.calcCompleteEventChildren(h)}c=this.filter_.updateFullNode(u,l=l,i)}else{var f=q(e),d=n.calcCompleteChild(f,t.getServerCache());null==d&&t.getServerCache().isCompleteForChild(f)&&(d=u.getImmediateChild(f)),(c=null!=d?this.filter_.updateChild(u,f,d,B(e),a,i):t.getEventCache().getNode().hasChild(f)?this.filter_.updateChild(u,f,ie.EMPTY_NODE,B(e),a,i):u).isEmpty()&&t.getServerCache().isFullyInitialized()&&(s=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(c=this.filter_.updateFullNode(c,s,i))}return s=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(U()),t.updateEventSnap(c,s,this.filter_.filtersNodes())},t}(),nn=function(){return function(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}}();function rn(t,e,n,r,i,s){var a=r.filter(function(t){return t.type===n});a.sort(function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw Object(o.g)("Should only compare child_ events.");var r=new Ft(e.childName,e.snapshotNode),i=new Ft(n.childName,n.snapshotNode);return t.index_.compare(r,i)}(t,e,n)}),a.forEach(function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,s);i.forEach(function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))})})}var on,sn=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_.getQueryParams(),i=new be(r.getIndex()),o=(n=r).loadsAllData()?new be(n.getIndex()):n.hasLimit()?new we(n):new _e(n);this.processor_=new en(o);var s=e.getServerCache(),a=e.getEventCache(),u=i.updateFullNode(ie.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(ie.EMPTY_NODE,a.getNode(),null),l=new $e(u,s.isFullyInitialized(),i.filtersNodes()),h=new $e(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=new Ye(h,l),this.eventGenerator_=new nn(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteNode=function(){return this.viewCache_.getCompleteEventSnap()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!$(t)&&!e.getImmediateChild(q(t)).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){Object(o.f)(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach(function(t){var i=t.createCancelEvent(e,r);i&&n.push(i)})}if(t){for(var i=[],s=0;s<this.eventRegistrations_.length;++s){var a=this.eventRegistrations_[s];if(a.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(s+1));break}}else i.push(a)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===qe.MERGE&&null!==t.source.queryId&&(Object(o.f)(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),Object(o.f)(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),Object(o.f)(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Gt,function(t,e){n.push(ge(t,e))}),e.isFullyInitialized()&&n.push(pe(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){return function(t,e,n,r){var i=[],o=[];return e.forEach(function(e){"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push({type:"child_moved",snapshotNode:e.snapshotNode,childName:e.childName})}),rn(t,i,"child_removed",e,r,n),rn(t,i,"child_added",e,r,n),rn(t,i,"child_moved",o,r,n),rn(t,i,"child_changed",e,r,n),rn(t,i,"value",e,r,n),i}(this.eventGenerator_,t,e,n?[n]:this.eventRegistrations_)},t}(),an=function(){function t(){this.views=new Map}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.f)(on,"Reference.ts has not been loaded"),on},set:function(t){Object(o.f)(!on,"__referenceConstructor has already been defined"),on=t},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.views.size},t.prototype.applyOperation=function(t,e,n){var r,s,a=t.source.queryId;if(null!==a){var u=this.views.get(a);return Object(o.f)(null!=u,"SyncTree gave us an op for an invalid query."),u.applyOperation(t,e,n)}var c=[];try{for(var l=Object(i.h)(this.views.values()),h=l.next();!h.done;h=l.next())c=c.concat((u=h.value).applyOperation(t,e,n))}catch(f){r={error:f}}finally{try{h&&!h.done&&(s=l.return)&&s.call(l)}finally{if(r)throw r.error}}return c},t.prototype.getView=function(t,e,n,r){var i=t.queryIdentifier(),o=this.views.get(i);if(!o){var s=e.calcCompleteEventCache(r?n:null),a=!1;s?a=!0:n instanceof ie?(s=e.calcCompleteEventChildren(n),a=!1):(s=ie.EMPTY_NODE,a=!1);var u=new Ye(new $e(s,a,!1),new $e(n,r,!1));return new sn(t,u)}return o},t.prototype.addEventRegistration=function(t,e,n,r,i){var o=this.getView(t,n,r,i);return this.views.has(t.queryIdentifier())||this.views.set(t.queryIdentifier(),o),o.addEventRegistration(e),o.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var o,s,a=e.queryIdentifier(),u=[],c=[],l=this.hasCompleteView();if("default"===a)try{for(var h=Object(i.h)(this.views.entries()),f=h.next();!f.done;f=h.next()){var d,p=Object(i.e)(f.value,2),g=p[0];c=c.concat((d=p[1]).removeEventRegistration(n,r)),d.isEmpty()&&(this.views.delete(g),d.getQuery().getQueryParams().loadsAllData()||u.push(d.getQuery()))}}catch(v){o={error:v}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(o)throw o.error}}else(d=this.views.get(a))&&(c=c.concat(d.removeEventRegistration(n,r)),d.isEmpty()&&(this.views.delete(a),d.getQuery().getQueryParams().loadsAllData()||u.push(d.getQuery())));return l&&!this.hasCompleteView()&&u.push(new t.__referenceConstructor(e.repo,e.path)),{removed:u,events:c}},t.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=Object(i.h)(this.views.values()),o=r.next();!o.done;o=r.next()){var s=o.value;s.getQuery().getQueryParams().loadsAllData()||n.push(s)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var o=Object(i.h)(this.views.values()),s=o.next();!s.done;s=o.next())r=r||s.value.getCompleteServerCache(t)}catch(a){e={error:a}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,e;try{for(var n=Object(i.h)(this.views.values()),r=n.next();!r.done;r=n.next()){var o=r.value;if(o.getQuery().getQueryParams().loadsAllData())return o}}catch(s){t={error:s}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},t}(),un=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new We(null))},t}();function cn(t,e,n){if($(e))return new un(new We(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=Y(i,e);return o=o.updateChild(s,n),new un(t.writeTree_.set(i,o))}var a=new We(n),u=t.writeTree_.setTree(e,a);return new un(u)}function ln(t,e,n){var r=t;return P(n,function(t,n){r=cn(r,Q(e,t),n)}),r}function hn(t,e){if($(e))return un.empty();var n=t.writeTree_.setTree(e,new We(null));return new un(n)}function fn(t,e){return null!=dn(t,e)}function dn(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(Y(n.path,e)):null}function pn(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Gt,function(t,n){e.push(new Ft(t,n))}):t.writeTree_.children.inorderTraversal(function(t,n){null!=n.value&&e.push(new Ft(t,n.value))}),e}function gn(t,e){if($(e))return t;var n=dn(t,e);return new un(null!=n?new We(n):t.writeTree_.subtree(e))}function vn(t){return t.writeTree_.isEmpty()}function mn(t,e){return yn(U(),t.writeTree_,e)}function yn(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal(function(e,i){".priority"===e?(Object(o.f)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=yn(Q(t,e),i,n)}),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(Q(t,".priority"),r)),n}var bn=function(){function t(){this.visibleWrites_=un.empty(),this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new _n(t,this)},t.prototype.addOverwrite=function(t,e,n,r){Object(o.f)(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=cn(this.visibleWrites_,t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){Object(o.f)(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=ln(this.visibleWrites_,t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex(function(e){return e.writeId===t});Object(o.f)(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,s=!1,a=this.allWrites_.length-1;i&&a>=0;){var u=this.allWrites_[a];u.visible&&(a>=n&&this.recordContainsPath_(u,r.path)?i=!1:Z(r.path,u.path)&&(s=!0)),a--}return!!i&&(s?(this.resetTree_(),!0):(r.snap?this.visibleWrites_=hn(this.visibleWrites_,r.path):P(r.children,function(t){e.visibleWrites_=hn(e.visibleWrites_,Q(r.path,t))}),!0))},t.prototype.getCompleteWriteData=function(t){return dn(this.visibleWrites_,t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=gn(this.visibleWrites_,e);return!i&&vn(o)?n:i||null!=n||fn(o,U())?mn(t.layerTree_(this.allWrites_,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(Z(t.path,e)||Z(e,t.path))},e),n||ie.EMPTY_NODE):null}var s=dn(this.visibleWrites_,e);if(null!=s)return s;var a=gn(this.visibleWrites_,e);return vn(a)?n:null!=n||fn(a,U())?mn(a,n||ie.EMPTY_NODE):null},t.prototype.calcCompleteEventChildren=function(t,e){var n=ie.EMPTY_NODE,r=dn(this.visibleWrites_,t);if(r)return r.isLeafNode()||r.forEachChild(Gt,function(t,e){n=n.updateImmediateChild(t,e)}),n;if(e){var i=gn(this.visibleWrites_,t);return e.forEachChild(Gt,function(t,e){var r=mn(gn(i,new F(t)),e);n=n.updateImmediateChild(t,r)}),pn(i).forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n}return pn(gn(this.visibleWrites_,t)).forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){Object(o.f)(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=Q(t,e);if(fn(this.visibleWrites_,i))return null;var s=gn(this.visibleWrites_,i);return vn(s)?r.getChild(e):mn(s,r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=Q(t,e),i=dn(this.visibleWrites_,r);return null!=i?i:n.isCompleteForChild(e)?mn(gn(this.visibleWrites_,r),n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return dn(this.visibleWrites_,t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=gn(this.visibleWrites_,t),u=dn(a,U());if(null!=u)s=u;else{if(null==e)return[];s=mn(a,e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],l=o.getCompare(),h=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),f=h.getNext();f&&c.length<r;)0!==l(f,n)&&c.push(f),f=h.getNext();return c},t.prototype.recordContainsPath_=function(t,e){if(t.snap)return Z(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&Z(Q(t.path,n),e))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,U()),this.lastWriteId_=this.allWrites_.length>0?this.allWrites_[this.allWrites_.length-1].writeId:-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=un.empty(),i=0;i<t.length;++i){var s=t[i];if(e(s)){var a=s.path,u=void 0;if(s.snap)Z(n,a)?r=cn(r,u=Y(n,a),s.snap):Z(a,n)&&(u=Y(a,n),r=cn(r,U(),s.snap.getChild(u)));else{if(!s.children)throw Object(o.g)("WriteRecord should have .snap or .children");if(Z(n,a))r=ln(r,u=Y(n,a),s.children);else if(Z(a,n))if($(u=Y(a,n)))r=ln(r,U(),s.children);else{var c=Object(o.G)(s.children,q(u));if(c){var l=c.getChild(B(u));r=cn(r,U(),l)}}}}}return r},t}(),_n=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(Q(this.treePath_,t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(Q(this.treePath_,e),this.writeTree_)},t}(),wn=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=new We(null),this.pendingWriteTree_=new bn,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new Ke({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=We.fromObject(e);return this.applyOperationToSyncPoints_(new Qe({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=new We(null);return null!=n.snap?r=r.set(U(),!0):P(n.children,function(t){r=r.set(new F(t),!0)}),this.applyOperationToSyncPoints_(new ze(n.path,r,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new Ke({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))},t.prototype.applyServerMerge=function(t,e){var n=We.fromObject(e);return this.applyOperationToSyncPoints_(new Qe({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new Ge({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=Y(s,e),c=new Ke(He(a),u,n);return this.applyTaggedOperation_(s,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=Y(s,e),c=We.fromObject(n),l=new Qe(He(a),u,c);return this.applyTaggedOperation_(s,l)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,s=i.queryId,a=Y(o,e),u=new Ge(He(s),a);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,s=!1;this.syncPointTree_.foreachOnPath(r,function(t,e){var n=Y(t,r);i=i||e.getCompleteServerCache(n),s=s||e.hasCompleteView()});var a,u=this.syncPointTree_.get(r);u?(s=s||u.hasCompleteView(),i=i||u.getCompleteServerCache(U())):(u=new an,this.syncPointTree_=this.syncPointTree_.set(r,u)),null!=i?a=!0:(a=!1,i=ie.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=e.getCompleteServerCache(U());n&&(i=i.updateImmediateChild(t,n))}));var c=u.viewExistsForQuery(e);if(!c&&!e.getQueryParams().loadsAllData()){var l=t.makeQueryKey_(e);Object(o.f)(!this.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=t.getNextQueryTag_();this.queryToTagMap.set(l,h),this.tagToQueryMap.set(h,l)}var f=this.pendingWriteTree_.childWrites(r),d=u.addEventRegistration(e,n,f,i,a);if(!c&&!s){var p=u.viewForQuery(e);d=d.concat(this.setupListener_(e,p))}return d},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,s=this.syncPointTree_.get(o),a=[];if(s&&("default"===e.queryIdentifier()||s.viewExistsForQuery(e))){var u=s.removeEventRegistration(e,n,r);s.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;a=u.events;var l=-1!==c.findIndex(function(t){return t.getQueryParams().loadsAllData()}),h=this.syncPointTree_.findOnPath(o,function(t,e){return e.hasCompleteView()});if(l&&!h){var f=this.syncPointTree_.subtree(o);if(!f.isEmpty())for(var d=this.collectDistinctViewsForSubTree_(f),p=0;p<d.length;++p){var g=d[p],v=g.getQuery(),m=this.createListenerForView_(g);this.listenProvider_.startListening(t.queryForListening_(v),this.tagForQuery_(v),m.hashFn,m.onComplete)}}!h&&c.length>0&&!r&&(l?this.listenProvider_.stopListening(t.queryForListening_(e),null):c.forEach(function(e){var n=i.queryToTagMap.get(t.makeQueryKey_(e));i.listenProvider_.stopListening(t.queryForListening_(e),n)})),this.removeTags_(c)}return a},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,function(e,n){var r=Y(e,t),i=n.getCompleteServerCache(r);if(i)return i});return n.calcCompleteEventCache(t,r,e,!0)},t.prototype.getServerValue=function(t){var e=t.path,n=null;this.syncPointTree_.foreachOnPath(e,function(t,r){var i=Y(t,e);n=n||r.getCompleteServerCache(i)});var r=this.syncPointTree_.get(e);r?n=n||r.getCompleteServerCache(U()):(r=new an,this.syncPointTree_=this.syncPointTree_.set(e,r));var i=null!=n,o=i?new $e(n,!0,!1):null,s=this.pendingWriteTree_.childWrites(t.path);return r.getView(t,s,i?o.getNode():ie.EMPTY_NODE,i).getCompleteNode()},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),P(n,function(t,e){r=r.concat(e)}),r})},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),s=this.createListenerForView_(n),a=this.listenProvider_.startListening(t.queryForListening_(e),i,s.hashFn,s.onComplete),u=this.syncPointTree_.subtree(r);if(i)Object(o.f)(!u.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold(function(t,e,n){if(!$(t)&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map(function(t){return t.getQuery()}))),P(n,function(t,e){r=r.concat(e)}),r}),l=0;l<c.length;++l){var h=c[l];this.listenProvider_.stopListening(t.queryForListening_(h),this.tagForQuery_(h))}return a},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||ie.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return Object(o.f)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new F(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);Object(o.f)(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(U()))},t.prototype.applyOperationHelper_=function(t,e,n,r){if($(t.path))return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(U());null==n&&null!=i&&(n=i.getCompleteServerCache(U()));var o=[],s=q(t.path),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=r.child(s);o=o.concat(this.applyOperationHelper_(a,u,c,l))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(U());null==n&&null!=o&&(n=o.getCompleteServerCache(U()));var s=[];return e.children.inorderTraversal(function(e,o){var a=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(s=s.concat(i.applyOperationDescendantsHelper_(c,o,a,u)))}),o&&(s=s.concat(o.applyOperation(t,r,n))),s},t.nextQueryTag_=1,t}(),En=function(){function t(){this.rootNode_=ie.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),On=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(o.k)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(o.m)(this.counters_)},t}(),Sn=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new On),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),Cn=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(i.a)({},t);return this.last_&&P(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),Tn=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Cn(t);var n=1e4+2e4*Math.random();V(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;P(e,function(e,i){i>0&&Object(o.k)(t.statsToReport_,e)&&(n[e]=i,r=!0)}),r&&this.server_.reportStats(n),V(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),In=function(){return function(){this.eventLists_=[],this.recursionDepth_=0}}();function xn(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||J(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function jn(t,e,n){xn(t,n),An(t,function(t){return J(t,e)})}function kn(t,e,n){xn(t,n),An(t,function(t){return Z(t,e)||Z(e,t)})}function An(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(Nn(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function Nn(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();m&&_("event: "+n.toString()),L(r)}}}var Pn=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(o.f)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(i.f)(this.listeners_[t]),o=0;o<r.length;o++)r[o].callback.apply(r[o].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(o.f)(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),Rn=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return Object(i.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.f)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(Pn),Dn=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(o.x)()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return Object(i.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.f)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(Pn),Mn=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&L(function(){n.onMessage_(t[e])})},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),Ln="start",Vn="close",Fn=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=w(t),this.stats_=Sn.getCollection(e),this.urlFn=function(t){return e.connectionURL(ft,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Mn(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if(Object(o.z)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new Un(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(i.e)(t,5),o=r[0],s=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,o===Ln)n.id=s,n.password=a;else{if(o!==Vn)throw new Error("Unrecognized command received: "+o);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(i.e)(t,2),o=r[0],s=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(o,s)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.hostname&&lt.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(o.z)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(o.J)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(o.i)(e),r=N(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(o.z)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(o.J)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),Un=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(o.z)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=p(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){_("frame writing exception"),u.stack&&_(u.stack),_(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||_("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;Object(o.z)()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){_("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}},Math.floor(1))},t}(),qn="";function Hn(t){qn=t}var Bn=null;"undefined"!=typeof MozWebSocket?Bn=MozWebSocket:"undefined"!=typeof WebSocket&&(Bn=WebSocket);var zn=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=w(this.connId),this.stats_=Sn.getCollection(n),this.connURL=t.connectionURL_(n,i,o),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n){var r={v:"5"};return!Object(o.z)()&&"undefined"!=typeof location&&location.hostname&&lt.test(location.hostname)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL(ht,r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,h.set("previous_websocket_failure",!0);try{if(Object(o.z)()){var r={headers:{"User-Agent":"Firebase/5/"+qn+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}},i=process.env,s=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;s&&(r.proxy={origin:s}),this.mySock=new Bn(this.connURL,[],r)}else this.mySock=new Bn(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||""}})}catch(u){this.log_("Error instantiating WebSocket.");var a=u.message||u.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Bn&&!t.forceDisallow_},t.previouslyFailed=function(){return h.isInMemoryStorage||!0===h.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){h.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(o.D)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(o.f)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(o.J)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=N(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),Wn=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Fn,zn]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,o=zn&&zn.isAvailable(),s=o&&!zn.previouslyFailed();if(e.webSocketOnly&&(o||S("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[zn];else{var a=this.transports_=[];try{for(var u=Object(i.h)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),Gn=function(){function t(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=w("c:"+this.id+":"),this.transportManager_=new Wn(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=V(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=k("t",t),n=k("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=k("t",t),n=k("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=k("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?E("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):E("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&S("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),V(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):V(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(h.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),Kn=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),Qn=1e3,$n=function(t){function e(n,r,i,s,a,u,c){var l=t.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=s,l.onServerInfoUpdate_=a,l.authTokenProvider_=u,l.authOverride_=c,l.id=e.nextPersistentConnectionId_++,l.log_=w("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=Qn,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Object(o.z)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return l.scheduleConnect_(0),Rn.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&Dn.getInstance().on("online",l.onOnline_,l),l}return Object(i.c)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(Object(o.J)(i)),Object(o.f)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this,n=new o.a,r={p:t.path.toString(),q:t.queryObject()},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=e.outstandingGets_[s];void 0!==t&&i===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),s=t.path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),Object(o.f)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Object(o.f)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r.queryObject(),s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(o.k)(t,"w")){var n=Object(o.G)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();S("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(o.q)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(o.C)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),Object(o.f)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(o.J)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):E("Unrecognized action received from server: "+Object(o.J)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(o.f)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Qn,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Qn,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Qn),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+e.nextConnectionId_++,a=this,u=this.lastSessionId,c=!1,l=null,h=function(){l?l.close():(c=!0,i())};this.realtime_={close:h,sendRequest:function(t){Object(o.f)(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(t)}};var f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(f).then(function(t){c?_("getToken() completed but was canceled"):(_("getToken() completed. Creating connection."),a.authToken_=t&&t.accessToken,l=new Gn(s,a.repoInfo_,a.applicationId_,n,r,i,function(t){S(t+" ("+a.repoInfo_.toString()+")"),a.interrupt("server_kill")},u))}).then(null,function(e){a.log_("Failed to get token: "+e),c||(t.repoInfo_.nodeAdmin&&S(e),h())})}},e.prototype.interrupt=function(t){_("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){_("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(o.u)(this.interruptReasons_)&&(this.reconnectDelay_=Qn,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return A(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new F(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){_("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var o=Object(i.h)(this.listens.values()),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(f){n={error:f}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(d){t={error:d}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(o.z)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+qn.replace(/\./g,"-")]=1,Object(o.x)()?t["framework.cordova"]=1:Object(o.A)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=Dn.getInstance().currentlyOnline();return Object(o.u)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(Kn),Yn=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=w("p:rest:"),i.listens_={},i}return Object(i.c)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(o.f)(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var s=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=ke(t.getQueryParams());this.restRequest_(a+".json",l,function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),Object(o.G)(s.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=ke(t.getQueryParams()),r=t.path.toString(),i=new o.a;return this.restRequest_(r+".json",n,function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))}),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then(function(i){var s=i&&i.accessToken;s&&(e.auth=s);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(o.F)(e);r.log_("Sending REST request for "+a);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+a+" received. status:",u.status,"response:",u.responseText);var t=null;if(u.status>=200&&u.status<300){try{t=Object(o.D)(u.responseText)}catch(e){S("Failed to parse JSON response for "+a+": "+u.responseText)}n(null,t)}else 401!==u.status&&404!==u.status&&S("Got unsuccessful REST response for "+a+" Status: "+u.status),n(u.status);n=null}},u.open("GET",a,!0),u.send()})},e}(Kn),Xn=function(){return function(){this.children={},this.childCount=0,this.value=null}}(),Jn=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new Xn),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n=e instanceof F?e:new F(e),r=this,i=q(n);null!==i;)r=new t(i,r,Object(o.G)(r.node_.children,i)||new Xn),i=q(n=B(n));return r},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){Object(o.f)(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;P(this.node_.children,function(r,i){e(new t(r,n,i))})},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild(function(e){e.forEachDescendant(t,!0,n)}),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild(function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)})},t.prototype.path=function(){return new F(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=Object(o.k)(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}(),Zn="repo_interrupt",tr=function(t){return t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT",t}({}),er=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new In,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new Ue,this.transactionQueueTree_=new Jn,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.start=function(){var t=this;if(this.stats_=Sn.getCollection(this.repoInfo_),this.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new Yn(this.repoInfo_,this.onDataUpdate_.bind(this),this.authTokenProvider_),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var e=this.app.options.databaseAuthVariableOverride;if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(o.J)(e)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}this.persistentConnection_=new $n(this.repoInfo_,this.app.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),this.authTokenProvider_,e),this.server_=this.persistentConnection_}this.authTokenProvider_.addTokenChangeListener(function(e){t.server_.refreshAuthToken(e)}),this.statsReporter_=Sn.getOrCreateReporter(this.repoInfo_,function(){return new Tn(t.stats_,t.server_)}),this.infoData_=new En,this.infoSyncTree_=new wn({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e.path);return s.isEmpty()||(o=t.infoSyncTree_.applyServerOverwrite(e.path,s),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new wn({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,function(n,r){var o=i(n,r);kn(t.eventQueue_,e.path,o)}),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})},t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new F(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new F(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var s=[];if(r)if(n){var a=Object(o.E)(e,function(t){return se(t)});s=this.serverSyncTree_.applyTaggedQueryMerge(i,a,r)}else{var u=se(e);s=this.serverSyncTree_.applyTaggedQueryOverwrite(i,u,r)}else if(n){var c=Object(o.E)(e,function(t){return se(t)});s=this.serverSyncTree_.applyServerMerge(i,c)}else{var l=se(e);s=this.serverSyncTree_.applyServerOverwrite(i,l)}var h=i;s.length>0&&(h=this.rerunTransactions_(i)),kn(this.eventQueue_,h,s)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;P(t,function(t,n){e.updateInfo_(t,n)})},t.prototype.updateInfo_=function(t,e){var n=new F("/.info/"+t),r=se(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);kn(this.eventQueue_,n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.getValue=function(t){var e=this,n=this.serverSyncTree_.getServerValue(t);return null!=n?Promise.resolve(new ce(n,t.getRef(),t.getQueryParams().getIndex())):this.server_.get(t).then(function(n){var r=se(n),i=e.serverSyncTree_.applyServerOverwrite(t.path,r);return jn(e.eventQueue_,t.path,i),Promise.resolve(new ce(r,t.getRef(),t.getQueryParams().getIndex()))},function(n){return e.log_("get for query "+Object(o.J)(t)+" failed: "+n),Promise.reject(new Error(n))})},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),s=se(e,n),a=this.serverSyncTree_.calcCompleteEventCache(t),u=Ve(s,a,o),c=this.getNextWriteId_(),l=this.serverSyncTree_.applyUserOverwrite(t,u,c,!0);xn(this.eventQueue_,l),this.server_.put(t.toString(),s.val(!0),function(e,n){var o="ok"===e;o||S("set at "+t+" failed: "+e);var s=i.serverSyncTree_.ackUserWrite(c,!o);kn(i.eventQueue_,t,s),i.callOnCompleteCallback(r,e,n)});var h=this.abortTransactions_(t);this.rerunTransactions_(h),kn(this.eventQueue_,h,[])},t.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),s={};if(P(e,function(e,n){i=!1,s[e]=Le(Q(t,e),se(n),r.serverSyncTree_,o)}),i)_("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var a=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,s,a);xn(this.eventQueue_,u),this.server_.merge(t.toString(),e,function(e,i){var o="ok"===e;o||S("update at "+t+" failed: "+e);var s=r.serverSyncTree_.ackUserWrite(a,!o),u=s.length>0?r.rerunTransactions_(t):t;kn(r.eventQueue_,u,s),r.callOnCompleteCallback(n,e,i)}),P(e,function(e){var n=r.abortTransactions_(Q(t,e));r.rerunTransactions_(n)}),kn(this.eventQueue_,t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=new Ue;this.onDisconnect_.forEachTree(U(),function(r,i){var o=Le(r,i,t.serverSyncTree_,e);n.remember(r,o)});var r=[];n.forEachTree(U(),function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)}),this.onDisconnect_=new Ue,kn(this.eventQueue_,U(),r)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)})},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=se(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)})},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=se(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)})},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(Object(o.u)(e))return _("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,function(i,o){"ok"===i&&P(e,function(e,n){var i=se(n);r.onDisconnect_.remember(Q(t,e),i)}),r.callOnCompleteCallback(n,i,o)})},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===q(t.path)?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),jn(this.eventQueue_,t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===q(t.path)?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),jn(this.eventQueue_,t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(Zn)},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(Zn)},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new Cn(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce(function(t,e){return Math.max(e.length,t)},0);P(e,function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)})}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),_.apply(void 0,Object(i.f)([n],t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&L(function(){if("ok"===e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}})},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new ar(this))},enumerable:!1,configurable:!0}),t.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},s=new nr(this,t);s.on("value",i);var a={path:t,update:e,onComplete:n,status:null,order:p(),applyLocally:r,retryCount:0,unwatcher:function(){s.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=this.getLatestState_(t);a.currentInputSnapshot=u;var c=a.update(u.val());if(void 0===c){if(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete){var l=new ce(a.currentInputSnapshot,new nr(this,a.path),Gt);a.onComplete(null,!1,l)}}else{Ot("transaction failed: Data returned ",c,a.path),a.status=tr.RUN;var h=this.transactionQueueTree_.subTree(t),f=h.getValue()||[];f.push(a),h.setValue(f);var d=void 0;"object"==typeof c&&null!==c&&Object(o.k)(c,".priority")?(d=Object(o.G)(c,".priority"),Object(o.f)(wt(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(this.serverSyncTree_.calcCompleteEventCache(t)||ie.EMPTY_NODE).getPriority().val();var g=this.generateServerValues(),v=se(c,d),m=Ve(v,u,g);a.currentOutputSnapshotRaw=v,a.currentOutputSnapshotResolved=m,a.currentWriteId=this.getNextWriteId_();var y=this.serverSyncTree_.applyUserOverwrite(t,m,a.currentWriteId,a.applyLocally);kn(this.eventQueue_,t,y),this.sendReadyTransactions_()}},t.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||ie.EMPTY_NODE},t.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);Object(o.f)(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return t.status===tr.RUN})&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild(function(t){e.sendReadyTransactions_(t)})},t.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map(function(t){return t.currentWriteId}),i=this.getLatestState_(t,r),s=i,a=i.hash(),u=0;u<e.length;u++){var c=e[u];Object(o.f)(c.status===tr.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=tr.SENT,c.retryCount++;var l=Y(t,c.path);s=s.updateChild(l,c.currentOutputSnapshotRaw)}var h=s.val(!0),f=t;this.server_.put(f.toString(),h,function(r){n.log_("transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=0;s<e.length;s++){if(e[s].status=tr.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[s].currentWriteId)),e[s].onComplete){var a=e[s].currentOutputSnapshotResolved,u=new nr(n,e[s].path),c=new ce(a,u,Gt);o.push(e[s].onComplete.bind(null,null,!0,c))}e[s].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),kn(n.eventQueue_,t,i),s=0;s<o.length;s++)L(o[s])}else{if("datastale"===r)for(s=0;s<e.length;s++)e[s].status=e[s].status===tr.SENT_NEEDS_ABORT?tr.NEEDS_ABORT:tr.RUN;else for(S("transaction at "+f.toString()+" failed: "+r),s=0;s<e.length;s++)e[s].status=tr.NEEDS_ABORT,e[s].abortReason=r;n.rerunTransactions_(t)}},a)},t.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},t.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n=[],r=[],i=t.filter(function(t){return t.status===tr.RUN}).map(function(t){return t.currentWriteId}),s=0;s<t.length;s++){var a=t[s],u=Y(e,a.path),c=!1,l=void 0;if(Object(o.f)(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===tr.NEEDS_ABORT)c=!0,l=a.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else if(a.status===tr.RUN)if(a.retryCount>=25)c=!0,l="maxretry",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else{var h=this.getLatestState_(a.path,i);a.currentInputSnapshot=h;var f=t[s].update(h.val());if(void 0!==f){Ot("transaction failed: Data returned ",f,a.path);var d=se(f);"object"==typeof f&&null!=f&&Object(o.k)(f,".priority")||(d=d.updatePriority(h.getPriority()));var p=a.currentWriteId,g=this.generateServerValues(),v=Ve(d,h,g);a.currentOutputSnapshotRaw=d,a.currentOutputSnapshotResolved=v,a.currentWriteId=this.getNextWriteId_(),i.splice(i.indexOf(p),1),r=(r=r.concat(this.serverSyncTree_.applyUserOverwrite(a.path,v,a.currentWriteId,a.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(p,!0))}else c=!0,l="nodata",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0))}if(kn(this.eventQueue_,e,r),r=[],c&&(t[s].status=tr.COMPLETED,setTimeout(t[s].unwatcher,Math.floor(0)),t[s].onComplete))if("nodata"===l){var m=new nr(this,t[s].path),y=new ce(t[s].currentInputSnapshot,m,Gt);n.push(t[s].onComplete.bind(null,null,!1,y))}else n.push(t[s].onComplete.bind(null,new Error(l),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),s=0;s<n.length;s++)L(n[s]);this.sendReadyTransactions_()}},t.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=q(t);null!==e&&null===n.getValue();)n=n.subTree(e),e=q(t=B(t));return n},t.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort(function(t,e){return t.order-e.order}),e},t.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild(function(t){n.aggregateTransactionQueuesForNode_(t,e)})},t.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==tr.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild(function(t){e.pruneCompletedTransactionsBelowNode_(t)})},t.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor(function(t){e.abortTransactionsOnNode_(t)}),this.abortTransactionsOnNode_(r),r.forEachDescendant(function(t){e.abortTransactionsOnNode_(t)}),n},t.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,s=0;s<e.length;s++)e[s].status===tr.SENT_NEEDS_ABORT||(e[s].status===tr.SENT?(Object(o.f)(i===s-1,"All SENT items should be at beginning of queue."),i=s,e[s].status=tr.SENT_NEEDS_ABORT,e[s].abortReason="set"):(Object(o.f)(e[s].status===tr.RUN,"Unexpected transaction status in abort"),e[s].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[s].currentWriteId,!0)),e[s].onComplete&&n.push(e[s].onComplete.bind(null,new Error("set"),!1,null))));for(-1===i?t.setValue(null):e.length=i+1,kn(this.eventQueue_,t.path(),r),s=0;s<n.length;s++)L(n[s])}},t}(),nr=function(t){function e(e,n){if(!(e instanceof er))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,new Ee,!1)||this}return Object(i.c)(e,t),e.prototype.getKey=function(){return Object(o.K)("Reference.key",0,0,arguments.length),$(this.path)?null:z(this.path)},e.prototype.child=function(t){return Object(o.K)("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof F||(null===q(this.path)?jt("Reference.child",1,t,!1):xt("Reference.child",1,t,!1)),new e(this.repo,Q(this.path,t))},e.prototype.getParent=function(){Object(o.K)("Reference.parent",0,0,arguments.length);var t=K(this.path);return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){Object(o.K)("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){Object(o.K)("Reference.set",1,2,arguments.length),kt("Reference.set",this.path),Et("Reference.set",1,t,this.path,!1),Object(o.L)("Reference.set",2,e,!0);var n=new o.a;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(Object(o.K)("Reference.update",1,2,arguments.length),kt("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,S("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}St("Reference.update",1,t,this.path,!1),Object(o.L)("Reference.update",2,e,!0);var i=new o.a;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(Object(o.K)("Reference.setWithPriority",2,3,arguments.length),kt("Reference.setWithPriority",this.path),Et("Reference.setWithPriority",1,t,this.path,!1),Ct("Reference.setWithPriority",2,e,!1),Object(o.L)("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new o.a;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return Object(o.K)("Reference.remove",0,1,arguments.length),kt("Reference.remove",this.path),Object(o.L)("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(Object(o.K)("Reference.transaction",1,3,arguments.length),kt("Reference.transaction",this.path),Object(o.L)("Reference.transaction",1,t,!1),Object(o.L)("Reference.transaction",2,e,!0),Nt("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new o.a;"function"==typeof e&&r.promise.catch(function(){});var i=function(t,n,i){t?r.reject(t):r.resolve(new Rt(n,i)),"function"==typeof e&&e(t,n,i)};return this.repo.startTransaction(this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){Object(o.K)("Reference.setPriority",1,2,arguments.length),kt("Reference.setPriority",this.path),Ct("Reference.setPriority",1,t,!1),Object(o.L)("Reference.setPriority",2,e,!0);var n=new o.a;return this.repo.setWithPriority(Q(this.path,".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){Object(o.K)("Reference.push",0,2,arguments.length),kt("Reference.push",this.path),Et("Reference.push",1,t,this.path,!0),Object(o.L)("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=Mt(r),s=this.child(i),a=this.child(i);return n=null!=t?s.set(t,e).then(function(){return a}):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch(function(){}),s},e.prototype.onDisconnect=function(){return kt("Reference.onDisconnect",this.path),new Pt(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Ae);Ae.__referenceConstructor=nr,an.__referenceConstructor=nr;var rr,ir=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then(function(t){return n.auth_=t})}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(_("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout(function(){return t(null)},0),this.authProvider_.get().then(function(e){return e.addAuthTokenListener(t)}))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(e){return e.removeAuthTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';S(t+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),or=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),sr=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return rr||(rr=new t),rr},t.prototype.interrupt=function(){var t,e,n,r;try{for(var o=Object(i.h)(Object.keys(this.repos_)),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next())this.repos_[a][c.value].interrupt()}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.resume=function(){var t,e,n,r;try{for(var o=Object(i.h)(Object.keys(this.repos_)),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next())this.repos_[a][c.value].resume()}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.applyEmulatorSettings=function(t,e,n){t.repoInfo_=new dt(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new or)},t.prototype.databaseFromApp=function(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||O("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var o,s=pt(i,r),a=s.repoInfo,u=void 0;"undefined"!=typeof process&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(o=!0,a=(s=pt(i="http://"+u+"?ns="+a.namespace,r)).repoInfo):o=!s.repoInfo.secure;var c=r&&o?new or:new ir(t,e);return At("Invalid Firebase Database URL",1,s),$(s.path)||O("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(a,t,c).database},t.prototype.deleteRepo=function(t){var e=Object(o.G)(this.repos_,t.app.name);e&&Object(o.G)(e,t.key)===t||O("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.key]},t.prototype.createRepo=function(t,e,n){var r=Object(o.G)(this.repos_,e.name);r||(this.repos_[e.name]=r={});var i=Object(o.G)(r,t.toURLString());return i&&O("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new er(t,this.useRestClient_,e,n),r[t.toURLString()]=i,i},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),ar=function(){function t(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return Object(i.b)(e,void 0,void 0,function(){return Object(i.d)(this,function(t){return this.checkDeleted_("delete"),sr.getInstance().deleteRepo(this.repo_),this.repoInternal_=null,this.rootInternal_=null,[2]})})}},t instanceof er||O("Don't call new Database() directly - please use firebase.database().")}return Object.defineProperty(t.prototype,"repo_",{get:function(){return this.instanceStarted_||(this.repoInternal_.start(),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new nr(this.repo_,U())),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.useEmulator=function(t,e){this.checkDeleted_("useEmulator"),this.instanceStarted_?O("Cannot call useEmulator() after instance has already been initialized."):sr.getInstance().applyEmulatorSettings(this.repoInternal_,t,e)},t.prototype.ref=function(t){return this.checkDeleted_("ref"),Object(o.K)("database.ref",0,1,arguments.length),t instanceof nr?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),Object(o.K)(e,1,1,arguments.length);var n=pt(t,this.repo_.repoInfo_.nodeAdmin);At(e,1,n);var r=n.repoInfo;return this.repo_.repoInfo_.isCustomHost()||r.host===this.repo_.repoInfo_.host||O(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repoInternal_&&O("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){Object(o.K)("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){Object(o.K)("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}(),ur=Object.freeze({__proto__:null,forceLongPolling:function(){zn.forceDisallow(),Fn.forceAllow()},forceWebSockets:function(){Fn.forceDisallow()},isWebSocketsAvailable:function(){return zn.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.customAuthImpl,i=t.namespace,o=t.nodeAdmin,s=void 0!==o&&o;Hn(t.version);var u=new a.c("auth-internal",new a.b("database-standalone"));return u.setComponent(new a.a("auth-internal",function(){return r},"PRIVATE")),{instance:sr.getInstance().databaseFromApp(e,u,n,s),namespace:i}}}),cr=$n;$n.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},$n.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var lr=Object.freeze({__proto__:null,DataConnection:cr,RealTimeConnection:Gn,hijackHash:function(t){var e=$n.prototype.put;return $n.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){$n.prototype.put=e}},ConnectionTarget:dt,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){sr.getInstance().forceRestClient(t)}}),hr=ar.ServerValue;!function(e){Hn(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new a.a("database",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return sr.getInstance().databaseFromApp(n,r,e)},"PUBLIC").setServiceProps({Reference:nr,Query:Ae,Database:ar,DataSnapshot:ce,enableLogging:b,INTERNAL:ur,ServerValue:hr,TEST_ACCESS:lr}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.9.4"),Object(o.z)()&&(t.exports=n)}(r.a)}).call(this,n("3UD+")(t))},"7HRe":function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("quSY"),o=n("kJWO"),s=n("jZKg"),a=n("Lhse"),u=n("c2HN"),c=n("I55L");function l(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[o.a]}(t))return function(t,e){return new r.a(n=>{const r=new i.a;return r.add(e.schedule(()=>{const i=t[o.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(u.a)(t))return function(t,e){return new r.a(n=>{const r=new i.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(c.a)(t))return Object(s.a)(t,e);if(function(t){return t&&"function"==typeof t[a.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new i.a;let o;return r.add(()=>{o&&"function"==typeof o.return&&o.return()}),r.add(e.schedule(()=>{o=t[a.a](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=o.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}},"7Hc7":function(t,e,n){"use strict";n.d(e,"b",function(){return f}),n.d(e,"a",function(){return d});let r=1;const i=(()=>Promise.resolve())(),o={};function s(t){return t in o&&(delete o[t],!0)}const a={setImmediate(t){const e=r++;return o[e]=!0,i.then(()=>s(e)&&t()),e},clearImmediate(t){s(t)}};var u=n("3N8a");class c extends u.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=a.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(a.clearImmediate(e),t.scheduled=void 0)}}var l=n("IjjT");class h extends l.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const f=new h(c),d=f},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"89kA":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("qCKp"),i=n("ZR4w");r.Observable.prototype.map=i.map},"8Qeq":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},BFxc:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q"),i=n("4I5i"),o=n("EY2u");function s(t){return function(e){return 0===t?Object(o.b)():e.lift(new a(t))}}class a{constructor(t){if(this.total=t,this.total<0)throw new i.a}call(t,e){return e.subscribe(new u(t,this.total))}}class u extends r.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}},Cfvw:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("SeVD"),o=n("7HRe");function s(t,e){return e?Object(o.a)(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});var r=n("3N8a");const i=new(n("IjjT").a)(r.a),o=i},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EQ5u:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return u});var r=n("XNiG"),i=n("HDdC"),o=(n("7o/Q"),n("quSY")),s=n("x+ZX");class a extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new o.a,t.add(this.source.subscribe(new c(this.getSubject(),this))),t.closed&&(this._connection=null,t=o.a.EMPTY)),t}refCount(){return Object(s.a)()(this)}}const u=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class c extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},"F97/":function(t,e,n){"use strict";function r(t,e){function n(){return!n.pred.apply(n.thisArg,arguments)}return n.pred=t,n.thisArg=e,n}n.d(e,"a",function(){return r})},GyhO:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("LRne"),i=n("0EUg");function o(...t){return Object(i.a)()(Object(r.a)(...t))}},HDdC:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("8Qeq"),i=n("7o/Q"),o=n("2QA8"),s=n("gRHU"),a=n("kJWO"),u=n("mCNh"),c=n("2fFW");let l=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:r}=this,a=function(t,e,n){if(t){if(t instanceof i.a)return t;if(t[o.a])return t[o.a]()}return t||e||n?new i.a(t,e,n):new i.a(s.a)}(t,e,n);if(a.add(r?r.call(a,this.source):this.source||c.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),c.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){c.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),Object(r.a)(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=h(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[a.a](){return this}pipe(...t){return 0===t.length?this:Object(u.b)(t)(this)}toPromise(t){return new(t=h(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function h(t){if(t||(t=c.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("Y/cZ");class i extends r.a{constructor(t,e=r.a.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},IzEk:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q"),i=n("4I5i"),o=n("EY2u");function s(t){return e=>0===t?Object(o.b)():e.lift(new a(t))}class a{constructor(t){if(this.total=t,this.total<0)throw new i.a}call(t,e){return e.subscribe(new u(t,this.total))}}class u extends r.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}},JIr8:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("zx2A");function i(t){return function(e){const n=new o(t),r=e.lift(n);return n.caught=r}}class o{constructor(t){this.selector=t}call(t,e){return e.subscribe(new s(t,this.selector,this.caught))}}class s extends r.b{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const i=new r.a(this);this.add(i);const o=Object(r.c)(n,i);o!==i&&this.add(o)}}}},JX91:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("GyhO"),i=n("z+Ro");function o(...t){const e=t[t.length-1];return Object(i.a)(e)?(t.pop(),n=>Object(r.a)(t,n,e)):e=>Object(r.a)(t,e)}},Kqap:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new o(t,e,n))}}class o{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new s(t,this.accumulator,this.seed,this.hasSeed))}}class s extends r.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}},KqfI:function(t,e,n){"use strict";function r(){}n.d(e,"a",function(){return r})},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return i});const i=r()},"NHP+":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("XNiG"),i=n("quSY");class o extends r.a{constructor(){super(...arguments),this.value=null,this.hasNext=!1,this.hasCompleted=!1}_subscribe(t){return this.hasError?(t.error(this.thrownError),i.a.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),i.a.EMPTY):super._subscribe(t)}next(t){this.hasCompleted||(this.value=t,this.hasNext=!0)}error(t){this.hasCompleted||super.error(t)}complete(){this.hasCompleted=!0,this.hasNext&&super.next(this.value),super.complete()}}},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",function(){return r})},NJ9Y:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("sVev"),i=n("pLZG"),o=n("BFxc"),s=n("XDbj"),a=n("xbPD"),u=n("SpAZ");function c(t,e){const n=arguments.length>=2;return c=>c.pipe(t?Object(i.a)((e,n)=>t(e,n,c)):u.a,Object(o.a)(1),n?Object(a.a)(e):Object(s.a)(()=>new r.a))}},NXyV:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("Cfvw"),o=n("EY2u");function s(t){return new r.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(i.a)(n):Object(o.b)()).subscribe(e)})}},Nv8m:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("DH7j"),i=n("yCtX"),o=n("l7GE"),s=n("ZUHj");function a(...t){if(1===t.length){if(!Object(r.a)(t[0]))return t[0];t=t[0]}return Object(i.a)(t,void 0).lift(new u)}class u{call(t,e){return e.subscribe(new c(t))}}class c extends o.a{constructor(t){super(t),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(t){this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(let n=0;n<e&&!this.hasFirst;n++){const e=t[n],r=Object(s.a)(this,e,void 0,n);this.subscriptions&&this.subscriptions.push(r),this.add(r)}this.observables=null}}notifyNext(t,e,n){if(!this.hasFirst){this.hasFirst=!0;for(let t=0;t<this.subscriptions.length;t++)if(t!==n){let e=this.subscriptions[t];e.unsubscribe(),this.remove(e)}this.subscriptions=null}this.destination.next(e)}}},OQgR:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return h});var r=n("7o/Q"),i=n("quSY"),o=n("HDdC"),s=n("XNiG");function a(t,e,n,r){return i=>i.lift(new u(t,e,n,r))}class u{constructor(t,e,n,r){this.keySelector=t,this.elementSelector=e,this.durationSelector=n,this.subjectSelector=r}call(t,e){return e.subscribe(new c(t,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))}}class c extends r.a{constructor(t,e,n,r,i){super(t),this.keySelector=e,this.elementSelector=n,this.durationSelector=r,this.subjectSelector=i,this.groups=null,this.attemptedToUnsubscribe=!1,this.count=0}_next(t){let e;try{e=this.keySelector(t)}catch(n){return void this.error(n)}this._group(t,e)}_group(t,e){let n=this.groups;n||(n=this.groups=new Map);let r,i=n.get(e);if(this.elementSelector)try{r=this.elementSelector(t)}catch(o){this.error(o)}else r=t;if(!i){i=this.subjectSelector?this.subjectSelector():new s.a,n.set(e,i);const t=new h(e,i,this);if(this.destination.next(t),this.durationSelector){let t;try{t=this.durationSelector(new h(e,i))}catch(o){return void this.error(o)}this.add(t.subscribe(new l(e,i,this)))}}i.closed||i.next(r)}_error(t){const e=this.groups;e&&(e.forEach((e,n)=>{e.error(t)}),e.clear()),this.destination.error(t)}_complete(){const t=this.groups;t&&(t.forEach((t,e)=>{t.complete()}),t.clear()),this.destination.complete()}removeGroup(t){this.groups.delete(t)}unsubscribe(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&super.unsubscribe())}}class l extends r.a{constructor(t,e,n){super(e),this.key=t,this.group=e,this.parent=n}_next(t){this.complete()}_unsubscribe(){const{parent:t,key:e}=this;this.key=this.parent=null,t&&t.removeGroup(e)}}class h extends o.a{constructor(t,e,n){super(),this.key=t,this.groupSubject=e,this.refCountSubscription=n}_subscribe(t){const e=new i.a,{refCountSubscription:n,groupSubject:r}=this;return n&&!n.closed&&e.add(new f(n)),e.add(r.subscribe(t)),e}}class f extends i.a{constructor(t){super(),this.parent=t,t.count++}unsubscribe(){const t=this.parent;t.closed||this.closed||(super.unsubscribe(),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())}}},PqYM:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("D0XW"),o=n("Y7HM"),s=n("z+Ro");function a(t=0,e,n){let a=-1;return Object(o.a)(e)?a=Number(e)<1?1:Number(e):Object(s.a)(e)&&(n=e),Object(s.a)(n)||(n=i.a),new r.a(e=>{const r=Object(o.a)(t)?t:+t-n.now();return n.schedule(u,r,{index:0,period:a,subscriber:e})})}function u(t){const{index:e,period:n,subscriber:r}=t;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},SxV6:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("sVev"),i=n("pLZG"),o=n("IzEk"),s=n("xbPD"),a=n("XDbj"),u=n("SpAZ");function c(t,e){const n=arguments.length>=2;return c=>c.pipe(t?Object(i.a)((e,n)=>t(e,n,c)):u.a,Object(o.a)(1),n?Object(s.a)(e):Object(a.a)(()=>new r.a))}},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},WMd4:function(t,e,n){"use strict";n.d(e,"b",function(){return s}),n.d(e,"a",function(){return a});var r=n("EY2u"),i=n("LRne"),o=n("z6cu"),s=function(t){return t.NEXT="N",t.ERROR="E",t.COMPLETE="C",t}({});let a=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(i.a)(this.value);case"E":return Object(o.a)(this.error);case"C":return Object(r.b)()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})()},XDbj:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("sVev"),i=n("7o/Q");function o(t=u){return e=>e.lift(new s(t))}class s{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new a(t,this.errorFactory))}}class a extends i.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function u(){return new r.a}},XNiG:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},"Y/cZ":function(t,e,n){"use strict";n.d(e,"a",function(){return r});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})()},Y6u4:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return t.prototype=Object.create(Error.prototype),t})()},Y7HM:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("DH7j");function i(t){return!Object(r.a)(t)&&t-parseFloat(t)+1>=0}},Ylt2:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},ZR4w:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("kU1M");e.map=function(t,e){return r.map(t,e)(this)}},ZUHj:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("7o/Q");class i extends r.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var o=n("SeVD"),s=n("HDdC");function a(t,e,n,r,a=new i(t,n,r)){if(!a.closed)return e instanceof s.a?e.subscribe(a):Object(o.a)(e)(a)}},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.b)(i.a,t)}},bOdf:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("5+tZ");function i(t,e){return Object(r.b)(t,e,1)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},cp0P:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n("HDdC"),i=n("DH7j"),o=n("lJxs"),s=n("XoHu"),a=n("Cfvw");function u(...t){if(1===t.length){const e=t[0];if(Object(i.a)(e))return c(e,null);if(Object(s.a)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return c(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return c(t=1===t.length&&Object(i.a)(t[0])?t[0]:t,null).pipe(Object(o.a)(t=>e(...t)))}return c(t,null)}function c(t,e){return new r.a(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let u=0;u<r;u++){const c=Object(a.a)(t[u]);let l=!1;n.add(c.subscribe({next:t=>{l||(l=!0,s++),i[u]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&l||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}},eIep:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e){return"function"==typeof e?n=>n.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))))):e=>e.lift(new a(t))}class a{constructor(t){this.project=t}call(t,e){return e.subscribe(new u(t,this.project))}}class u extends o.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new o.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(o.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},itXk:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return l});var r=n("z+Ro"),i=n("DH7j"),o=n("l7GE"),s=n("ZUHj"),a=n("yCtX");const u={};function c(...t){let e,n;return Object(r.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(i.a)(t[0])&&(t=t[0]),Object(a.a)(t,n).lift(new l(e))}class l{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new h(t,this.resultSelector))}}class h extends o.a{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(u),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++){const e=t[n];this.add(Object(s.a)(this,e,void 0,n))}}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===u?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},jtHE:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("XNiG"),i=n("qgXg"),o=n("quSY"),s=n("pxpQ"),a=n("9ppp"),u=n("Ylt2");class c extends r.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new l(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let c;if(this.closed)throw new a.a;if(this.isStopped||this.hasError?c=o.a.EMPTY:(this.observers.push(t),c=new u.a(this,t)),r&&t.add(t=new s.a(t,r)),e)for(let o=0;o<i&&!t.closed;o++)t.next(n[o]);else for(let o=0;o<i&&!t.closed;o++)t.next(n[o].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),c}_getNow(){return(this.scheduler||i.a).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class l{constructor(t,e){this.time=t,this.value=e}}},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},kU1M:function(t,e,n){"use strict";n.r(e),n.d(e,"audit",function(){return i}),n.d(e,"auditTime",function(){return c}),n.d(e,"buffer",function(){return l}),n.d(e,"bufferCount",function(){return p}),n.d(e,"bufferTime",function(){return b}),n.d(e,"bufferToggle",function(){return j}),n.d(e,"bufferWhen",function(){return N}),n.d(e,"catchError",function(){return D.a}),n.d(e,"combineAll",function(){return L}),n.d(e,"combineLatest",function(){return U}),n.d(e,"concat",function(){return H}),n.d(e,"concatAll",function(){return B.a}),n.d(e,"concatMap",function(){return z.a}),n.d(e,"concatMapTo",function(){return W}),n.d(e,"count",function(){return G}),n.d(e,"debounce",function(){return $}),n.d(e,"debounceTime",function(){return J}),n.d(e,"defaultIfEmpty",function(){return nt.a}),n.d(e,"delay",function(){return ot}),n.d(e,"delayWhen",function(){return lt}),n.d(e,"dematerialize",function(){return gt}),n.d(e,"distinct",function(){return yt}),n.d(e,"distinctUntilChanged",function(){return wt}),n.d(e,"distinctUntilKeyChanged",function(){return St}),n.d(e,"elementAt",function(){return jt}),n.d(e,"endWith",function(){return At}),n.d(e,"every",function(){return Nt}),n.d(e,"exhaust",function(){return Dt}),n.d(e,"exhaustMap",function(){return Ft}),n.d(e,"expand",function(){return Ht}),n.d(e,"filter",function(){return Tt.a}),n.d(e,"finalize",function(){return Wt.a}),n.d(e,"find",function(){return Gt}),n.d(e,"findIndex",function(){return $t}),n.d(e,"first",function(){return Yt.a}),n.d(e,"groupBy",function(){return Xt.b}),n.d(e,"ignoreElements",function(){return Jt}),n.d(e,"isEmpty",function(){return ee}),n.d(e,"last",function(){return ie.a}),n.d(e,"map",function(){return Vt.a}),n.d(e,"mapTo",function(){return oe}),n.d(e,"materialize",function(){return ue}),n.d(e,"max",function(){return ge}),n.d(e,"merge",function(){return me}),n.d(e,"mergeAll",function(){return ye.a}),n.d(e,"mergeMap",function(){return be.b}),n.d(e,"flatMap",function(){return be.a}),n.d(e,"mergeMapTo",function(){return _e}),n.d(e,"mergeScan",function(){return we}),n.d(e,"min",function(){return Se}),n.d(e,"multicast",function(){return Ce.a}),n.d(e,"observeOn",function(){return Te.b}),n.d(e,"onErrorResumeNext",function(){return Ie}),n.d(e,"pairwise",function(){return ke}),n.d(e,"partition",function(){return Re}),n.d(e,"pluck",function(){return De}),n.d(e,"publish",function(){return Le}),n.d(e,"publishBehavior",function(){return Fe}),n.d(e,"publishLast",function(){return qe}),n.d(e,"publishReplay",function(){return Be}),n.d(e,"race",function(){return We}),n.d(e,"reduce",function(){return pe}),n.d(e,"repeat",function(){return Ke}),n.d(e,"repeatWhen",function(){return Ye}),n.d(e,"retry",function(){return Ze}),n.d(e,"retryWhen",function(){return nn}),n.d(e,"refCount",function(){return sn.a}),n.d(e,"sample",function(){return an}),n.d(e,"sampleTime",function(){return ln}),n.d(e,"scan",function(){return he.a}),n.d(e,"sequenceEqual",function(){return pn}),n.d(e,"share",function(){return yn.a}),n.d(e,"shareReplay",function(){return bn}),n.d(e,"single",function(){return wn}),n.d(e,"skip",function(){return Sn}),n.d(e,"skipLast",function(){return In}),n.d(e,"skipUntil",function(){return kn}),n.d(e,"skipWhile",function(){return Pn}),n.d(e,"startWith",function(){return Mn.a}),n.d(e,"subscribeOn",function(){return Un}),n.d(e,"switchAll",function(){return zn}),n.d(e,"switchMap",function(){return Hn.a}),n.d(e,"switchMapTo",function(){return Wn}),n.d(e,"take",function(){return xt.a}),n.d(e,"takeLast",function(){return fe.a}),n.d(e,"takeUntil",function(){return Gn}),n.d(e,"takeWhile",function(){return $n}),n.d(e,"tap",function(){return Jn.a}),n.d(e,"throttle",function(){return tr}),n.d(e,"throttleTime",function(){return rr}),n.d(e,"throwIfEmpty",function(){return It.a}),n.d(e,"timeInterval",function(){return ur}),n.d(e,"timeout",function(){return gr}),n.d(e,"timeoutWith",function(){return hr}),n.d(e,"timestamp",function(){return vr}),n.d(e,"toArray",function(){return br}),n.d(e,"window",function(){return _r}),n.d(e,"windowCount",function(){return Or}),n.d(e,"windowTime",function(){return Tr}),n.d(e,"windowToggle",function(){return Pr}),n.d(e,"windowWhen",function(){return Mr}),n.d(e,"withLatestFrom",function(){return Fr}),n.d(e,"zip",function(){return Br}),n.d(e,"zipAll",function(){return zr});var r=n("zx2A");function i(t){return function(e){return e.lift(new o(t))}}class o{constructor(t){this.durationSelector=t}call(t,e){return e.subscribe(new s(t,this.durationSelector))}}class s extends r.b{constructor(t,e){super(t),this.durationSelector=e,this.hasValue=!1}_next(t){if(this.value=t,this.hasValue=!0,!this.throttled){let n;try{const{durationSelector:e}=this;n=e(t)}catch(e){return this.destination.error(e)}const i=Object(r.c)(n,new r.a(this));!i||i.closed?this.clearThrottle():this.add(this.throttled=i)}}clearThrottle(){const{value:t,hasValue:e,throttled:n}=this;n&&(this.remove(n),this.throttled=void 0,n.unsubscribe()),e&&(this.value=void 0,this.hasValue=!1,this.destination.next(t))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}var a=n("D0XW"),u=n("PqYM");function c(t,e=a.a){return i(()=>Object(u.a)(t,e))}function l(t){return function(e){return e.lift(new h(t))}}class h{constructor(t){this.closingNotifier=t}call(t,e){return e.subscribe(new f(t,this.closingNotifier))}}class f extends r.b{constructor(t,e){super(t),this.buffer=[],this.add(Object(r.c)(e,new r.a(this)))}_next(t){this.buffer.push(t)}notifyNext(){const t=this.buffer;this.buffer=[],this.destination.next(t)}}var d=n("7o/Q");function p(t,e=null){return function(n){return n.lift(new g(t,e))}}class g{constructor(t,e){this.bufferSize=t,this.startBufferEvery=e,this.subscriberClass=e&&t!==e?m:v}call(t,e){return e.subscribe(new this.subscriberClass(t,this.bufferSize,this.startBufferEvery))}}class v extends d.a{constructor(t,e){super(t),this.bufferSize=e,this.buffer=[]}_next(t){const e=this.buffer;e.push(t),e.length==this.bufferSize&&(this.destination.next(e),this.buffer=[])}_complete(){const t=this.buffer;t.length>0&&this.destination.next(t),super._complete()}}class m extends d.a{constructor(t,e,n){super(t),this.bufferSize=e,this.startBufferEvery=n,this.buffers=[],this.count=0}_next(t){const{bufferSize:e,startBufferEvery:n,buffers:r,count:i}=this;this.count++,i%n==0&&r.push([]);for(let o=r.length;o--;){const n=r[o];n.push(t),n.length===e&&(r.splice(o,1),this.destination.next(n))}}_complete(){const{buffers:t,destination:e}=this;for(;t.length>0;){let n=t.shift();n.length>0&&e.next(n)}super._complete()}}var y=n("z+Ro");function b(t){let e=arguments.length,n=a.a;Object(y.a)(arguments[arguments.length-1])&&(n=arguments[arguments.length-1],e--);let r=null;e>=2&&(r=arguments[1]);let i=Number.POSITIVE_INFINITY;return e>=3&&(i=arguments[2]),function(e){return e.lift(new _(t,r,i,n))}}class _{constructor(t,e,n,r){this.bufferTimeSpan=t,this.bufferCreationInterval=e,this.maxBufferSize=n,this.scheduler=r}call(t,e){return e.subscribe(new E(t,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))}}class w{constructor(){this.buffer=[]}}class E extends d.a{constructor(t,e,n,r,i){super(t),this.bufferTimeSpan=e,this.bufferCreationInterval=n,this.maxBufferSize=r,this.scheduler=i,this.contexts=[];const o=this.openContext();if(this.timespanOnly=null==n||n<0,this.timespanOnly)this.add(o.closeAction=i.schedule(O,e,{subscriber:this,context:o,bufferTimeSpan:e}));else{const t={bufferTimeSpan:e,bufferCreationInterval:n,subscriber:this,scheduler:i};this.add(o.closeAction=i.schedule(C,e,{subscriber:this,context:o})),this.add(i.schedule(S,n,t))}}_next(t){const e=this.contexts,n=e.length;let r;for(let i=0;i<n;i++){const n=e[i],o=n.buffer;o.push(t),o.length==this.maxBufferSize&&(r=n)}r&&this.onBufferFull(r)}_error(t){this.contexts.length=0,super._error(t)}_complete(){const{contexts:t,destination:e}=this;for(;t.length>0;){const n=t.shift();e.next(n.buffer)}super._complete()}_unsubscribe(){this.contexts=null}onBufferFull(t){this.closeContext(t);const e=t.closeAction;if(e.unsubscribe(),this.remove(e),!this.closed&&this.timespanOnly){t=this.openContext();const e=this.bufferTimeSpan;this.add(t.closeAction=this.scheduler.schedule(O,e,{subscriber:this,context:t,bufferTimeSpan:e}))}}openContext(){const t=new w;return this.contexts.push(t),t}closeContext(t){this.destination.next(t.buffer);const e=this.contexts;(e?e.indexOf(t):-1)>=0&&e.splice(e.indexOf(t),1)}}function O(t){const e=t.subscriber,n=t.context;n&&e.closeContext(n),e.closed||(t.context=e.openContext(),t.context.closeAction=this.schedule(t,t.bufferTimeSpan))}function S(t){const{bufferCreationInterval:e,bufferTimeSpan:n,subscriber:r,scheduler:i}=t,o=r.openContext();r.closed||(r.add(o.closeAction=i.schedule(C,n,{subscriber:r,context:o})),this.schedule(t,e))}function C(t){const{subscriber:e,context:n}=t;e.closeContext(n)}var T=n("quSY"),I=n("ZUHj"),x=n("l7GE");function j(t,e){return function(n){return n.lift(new k(t,e))}}class k{constructor(t,e){this.openings=t,this.closingSelector=e}call(t,e){return e.subscribe(new A(t,this.openings,this.closingSelector))}}class A extends x.a{constructor(t,e,n){super(t),this.closingSelector=n,this.contexts=[],this.add(Object(I.a)(this,e))}_next(t){const e=this.contexts,n=e.length;for(let r=0;r<n;r++)e[r].buffer.push(t)}_error(t){const e=this.contexts;for(;e.length>0;){const t=e.shift();t.subscription.unsubscribe(),t.buffer=null,t.subscription=null}this.contexts=null,super._error(t)}_complete(){const t=this.contexts;for(;t.length>0;){const e=t.shift();this.destination.next(e.buffer),e.subscription.unsubscribe(),e.buffer=null,e.subscription=null}this.contexts=null,super._complete()}notifyNext(t,e){t?this.closeBuffer(t):this.openBuffer(e)}notifyComplete(t){this.closeBuffer(t.context)}openBuffer(t){try{const e=this.closingSelector.call(this,t);e&&this.trySubscribe(e)}catch(e){this._error(e)}}closeBuffer(t){const e=this.contexts;if(e&&t){const{buffer:n,subscription:r}=t;this.destination.next(n),e.splice(e.indexOf(t),1),this.remove(r),r.unsubscribe()}}trySubscribe(t){const e=this.contexts,n=new T.a,r={buffer:[],subscription:n};e.push(r);const i=Object(I.a)(this,t,r);!i||i.closed?this.closeBuffer(r):(i.context=r,this.add(i),n.add(i))}}function N(t){return function(e){return e.lift(new P(t))}}class P{constructor(t){this.closingSelector=t}call(t,e){return e.subscribe(new R(t,this.closingSelector))}}class R extends r.b{constructor(t,e){super(t),this.closingSelector=e,this.subscribing=!1,this.openBuffer()}_next(t){this.buffer.push(t)}_complete(){const t=this.buffer;t&&this.destination.next(t),super._complete()}_unsubscribe(){this.buffer=void 0,this.subscribing=!1}notifyNext(){this.openBuffer()}notifyComplete(){this.subscribing?this.complete():this.openBuffer()}openBuffer(){let t,{closingSubscription:e}=this;e&&(this.remove(e),e.unsubscribe()),this.buffer&&this.destination.next(this.buffer),this.buffer=[];try{const{closingSelector:e}=this;t=e()}catch(n){return this.error(n)}e=new T.a,this.closingSubscription=e,this.add(e),this.subscribing=!0,e.add(Object(r.c)(t,new r.a(this))),this.subscribing=!1}}var D=n("JIr8"),M=n("itXk");function L(t){return e=>e.lift(new M.a(t))}var V=n("DH7j"),F=n("Cfvw");function U(...t){let e=null;return"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(V.a)(t[0])&&(t=t[0].slice()),n=>n.lift.call(Object(F.a)([n,...t]),new M.a(e))}var q=n("GyhO");function H(...t){return e=>e.lift.call(Object(q.a)(e,...t))}var B=n("0EUg"),z=n("bOdf");function W(t,e){return Object(z.a)(()=>t,e)}function G(t){return e=>e.lift(new K(t,e))}class K{constructor(t,e){this.predicate=t,this.source=e}call(t,e){return e.subscribe(new Q(t,this.predicate,this.source))}}class Q extends d.a{constructor(t,e,n){super(t),this.predicate=e,this.source=n,this.count=0,this.index=0}_next(t){this.predicate?this._tryPredicate(t):this.count++}_tryPredicate(t){let e;try{e=this.predicate(t,this.index++,this.source)}catch(n){return void this.destination.error(n)}e&&this.count++}_complete(){this.destination.next(this.count),this.destination.complete()}}function $(t){return e=>e.lift(new Y(t))}class Y{constructor(t){this.durationSelector=t}call(t,e){return e.subscribe(new X(t,this.durationSelector))}}class X extends r.b{constructor(t,e){super(t),this.durationSelector=e,this.hasValue=!1}_next(t){try{const e=this.durationSelector.call(this,t);e&&this._tryNext(t,e)}catch(e){this.destination.error(e)}}_complete(){this.emitValue(),this.destination.complete()}_tryNext(t,e){let n=this.durationSubscription;this.value=t,this.hasValue=!0,n&&(n.unsubscribe(),this.remove(n)),n=Object(r.c)(e,new r.a(this)),n&&!n.closed&&this.add(this.durationSubscription=n)}notifyNext(){this.emitValue()}notifyComplete(){this.emitValue()}emitValue(){if(this.hasValue){const t=this.value,e=this.durationSubscription;e&&(this.durationSubscription=void 0,e.unsubscribe(),this.remove(e)),this.value=void 0,this.hasValue=!1,super._next(t)}}}function J(t,e=a.a){return n=>n.lift(new Z(t,e))}class Z{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new tt(t,this.dueTime,this.scheduler))}}class tt extends d.a{constructor(t,e,n){super(t),this.dueTime=e,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(et,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function et(t){t.debouncedNext()}var nt=n("xbPD");function rt(t){return t instanceof Date&&!isNaN(+t)}var it=n("WMd4");function ot(t,e=a.a){const n=rt(t)?+t-e.now():Math.abs(t);return t=>t.lift(new st(n,e))}class st{constructor(t,e){this.delay=t,this.scheduler=e}call(t,e){return e.subscribe(new at(t,this.delay,this.scheduler))}}class at extends d.a{constructor(t,e,n){super(t),this.delay=e,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}static dispatch(t){const e=t.source,n=e.queue,r=t.scheduler,i=t.destination;for(;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){const e=Math.max(0,n[0].time-r.now());this.schedule(t,e)}else this.unsubscribe(),e.active=!1}_schedule(t){this.active=!0,this.destination.add(t.schedule(at.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}scheduleNotification(t){if(!0===this.errored)return;const e=this.scheduler,n=new ut(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}_next(t){this.scheduleNotification(it.a.createNext(t))}_error(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}_complete(){this.scheduleNotification(it.a.createComplete()),this.unsubscribe()}}class ut{constructor(t,e){this.time=t,this.notification=e}}var ct=n("HDdC");function lt(t,e){return e?n=>new dt(n,e).lift(new ht(t)):e=>e.lift(new ht(t))}class ht{constructor(t){this.delayDurationSelector=t}call(t,e){return e.subscribe(new ft(t,this.delayDurationSelector))}}class ft extends x.a{constructor(t,e){super(t),this.delayDurationSelector=e,this.completed=!1,this.delayNotifierSubscriptions=[],this.index=0}notifyNext(t,e,n,r,i){this.destination.next(t),this.removeSubscription(i),this.tryComplete()}notifyError(t,e){this._error(t)}notifyComplete(t){const e=this.removeSubscription(t);e&&this.destination.next(e),this.tryComplete()}_next(t){const e=this.index++;try{const n=this.delayDurationSelector(t,e);n&&this.tryDelay(n,t)}catch(n){this.destination.error(n)}}_complete(){this.completed=!0,this.tryComplete(),this.unsubscribe()}removeSubscription(t){t.unsubscribe();const e=this.delayNotifierSubscriptions.indexOf(t);return-1!==e&&this.delayNotifierSubscriptions.splice(e,1),t.outerValue}tryDelay(t,e){const n=Object(I.a)(this,t,e);n&&!n.closed&&(this.destination.add(n),this.delayNotifierSubscriptions.push(n))}tryComplete(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()}}class dt extends ct.a{constructor(t,e){super(),this.source=t,this.subscriptionDelay=e}_subscribe(t){this.subscriptionDelay.subscribe(new pt(t,this.source))}}class pt extends d.a{constructor(t,e){super(),this.parent=t,this.source=e,this.sourceSubscribed=!1}_next(t){this.subscribeToSource()}_error(t){this.unsubscribe(),this.parent.error(t)}_complete(){this.unsubscribe(),this.subscribeToSource()}subscribeToSource(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))}}function gt(){return function(t){return t.lift(new vt)}}class vt{call(t,e){return e.subscribe(new mt(t))}}class mt extends d.a{constructor(t){super(t)}_next(t){t.observe(this.destination)}}function yt(t,e){return n=>n.lift(new bt(t,e))}class bt{constructor(t,e){this.keySelector=t,this.flushes=e}call(t,e){return e.subscribe(new _t(t,this.keySelector,this.flushes))}}class _t extends r.b{constructor(t,e,n){super(t),this.keySelector=e,this.values=new Set,n&&this.add(Object(r.c)(n,new r.a(this)))}notifyNext(){this.values.clear()}notifyError(t){this._error(t)}_next(t){this.keySelector?this._useKeySelector(t):this._finalizeNext(t,t)}_useKeySelector(t){let e;const{destination:n}=this;try{e=this.keySelector(t)}catch(r){return void n.error(r)}this._finalizeNext(e,t)}_finalizeNext(t,e){const{values:n}=this;n.has(t)||(n.add(t),this.destination.next(e))}}function wt(t,e){return n=>n.lift(new Et(t,e))}class Et{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new Ot(t,this.compare,this.keySelector))}}class Ot extends d.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}function St(t,e){return wt((n,r)=>e?e(n[t],r[t]):n[t]===r[t])}var Ct=n("4I5i"),Tt=n("pLZG"),It=n("XDbj"),xt=n("IzEk");function jt(t,e){if(t<0)throw new Ct.a;const n=arguments.length>=2;return r=>r.pipe(Object(Tt.a)((e,n)=>n===t),Object(xt.a)(1),n?Object(nt.a)(e):Object(It.a)(()=>new Ct.a))}var kt=n("LRne");function At(...t){return e=>Object(q.a)(e,Object(kt.a)(...t))}function Nt(t,e){return n=>n.lift(new Pt(t,e,n))}class Pt{constructor(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}call(t,e){return e.subscribe(new Rt(t,this.predicate,this.thisArg,this.source))}}class Rt extends d.a{constructor(t,e,n,r){super(t),this.predicate=e,this.thisArg=n,this.source=r,this.index=0,this.thisArg=n||this}notifyComplete(t){this.destination.next(t),this.destination.complete()}_next(t){let e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(n){return void this.destination.error(n)}e||this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}function Dt(){return t=>t.lift(new Mt)}class Mt{call(t,e){return e.subscribe(new Lt(t))}}class Lt extends r.b{constructor(t){super(t),this.hasCompleted=!1,this.hasSubscription=!1}_next(t){this.hasSubscription||(this.hasSubscription=!0,this.add(Object(r.c)(t,new r.a(this))))}_complete(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()}notifyComplete(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()}}var Vt=n("lJxs");function Ft(t,e){return e?n=>n.pipe(Ft((n,r)=>Object(F.a)(t(n,r)).pipe(Object(Vt.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new Ut(t))}class Ut{constructor(t){this.project=t}call(t,e){return e.subscribe(new qt(t,this.project))}}class qt extends r.b{constructor(t,e){super(t),this.project=e,this.hasSubscription=!1,this.hasCompleted=!1,this.index=0}_next(t){this.hasSubscription||this.tryNext(t)}tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.hasSubscription=!0,this._innerSub(e)}_innerSub(t){const e=new r.a(this),n=this.destination;n.add(e);const i=Object(r.c)(t,e);i!==e&&n.add(i)}_complete(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()}}function Ht(t,e=Number.POSITIVE_INFINITY,n){return e=(e||0)<1?Number.POSITIVE_INFINITY:e,r=>r.lift(new Bt(t,e,n))}class Bt{constructor(t,e,n){this.project=t,this.concurrent=e,this.scheduler=n}call(t,e){return e.subscribe(new zt(t,this.project,this.concurrent,this.scheduler))}}class zt extends r.b{constructor(t,e,n,r){super(t),this.project=e,this.concurrent=n,this.scheduler=r,this.index=0,this.active=0,this.hasCompleted=!1,n<Number.POSITIVE_INFINITY&&(this.buffer=[])}static dispatch(t){const{subscriber:e,result:n,value:r,index:i}=t;e.subscribeToProjection(n,r,i)}_next(t){const e=this.destination;if(e.closed)return void this._complete();const n=this.index++;if(this.active<this.concurrent){e.next(t);try{const{project:e}=this,r=e(t,n);this.scheduler?this.destination.add(this.scheduler.schedule(zt.dispatch,0,{subscriber:this,result:r,value:t,index:n})):this.subscribeToProjection(r,t,n)}catch(r){e.error(r)}}else this.buffer.push(t)}subscribeToProjection(t,e,n){this.active++,this.destination.add(Object(r.c)(t,new r.a(this)))}_complete(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this._next(t)}notifyComplete(){const t=this.buffer;this.active--,t&&t.length>0&&this._next(t.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()}}var Wt=n("nYR2");function Gt(t,e){if("function"!=typeof t)throw new TypeError("predicate is not a function");return n=>n.lift(new Kt(t,n,!1,e))}class Kt{constructor(t,e,n,r){this.predicate=t,this.source=e,this.yieldIndex=n,this.thisArg=r}call(t,e){return e.subscribe(new Qt(t,this.predicate,this.source,this.yieldIndex,this.thisArg))}}class Qt extends d.a{constructor(t,e,n,r,i){super(t),this.predicate=e,this.source=n,this.yieldIndex=r,this.thisArg=i,this.index=0}notifyComplete(t){const e=this.destination;e.next(t),e.complete(),this.unsubscribe()}_next(t){const{predicate:e,thisArg:n}=this,r=this.index++;try{e.call(n||this,t,r,this.source)&&this.notifyComplete(this.yieldIndex?r:t)}catch(i){this.destination.error(i)}}_complete(){this.notifyComplete(this.yieldIndex?-1:void 0)}}function $t(t,e){return n=>n.lift(new Kt(t,n,!0,e))}var Yt=n("SxV6"),Xt=n("OQgR");function Jt(){return function(t){return t.lift(new Zt)}}class Zt{call(t,e){return e.subscribe(new te(t))}}class te extends d.a{_next(t){}}function ee(){return t=>t.lift(new ne)}class ne{call(t,e){return e.subscribe(new re(t))}}class re extends d.a{constructor(t){super(t)}notifyComplete(t){const e=this.destination;e.next(t),e.complete()}_next(t){this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}var ie=n("NJ9Y");function oe(t){return e=>e.lift(new se(t))}class se{constructor(t){this.value=t}call(t,e){return e.subscribe(new ae(t,this.value))}}class ae extends d.a{constructor(t,e){super(t),this.value=e}_next(t){this.destination.next(this.value)}}function ue(){return function(t){return t.lift(new ce)}}class ce{call(t,e){return e.subscribe(new le(t))}}class le extends d.a{constructor(t){super(t)}_next(t){this.destination.next(it.a.createNext(t))}_error(t){const e=this.destination;e.next(it.a.createError(t)),e.complete()}_complete(){const t=this.destination;t.next(it.a.createComplete()),t.complete()}}var he=n("Kqap"),fe=n("BFxc"),de=n("mCNh");function pe(t,e){return arguments.length>=2?function(n){return Object(de.a)(Object(he.a)(t,e),Object(fe.a)(1),Object(nt.a)(e))(n)}:function(e){return Object(de.a)(Object(he.a)((e,n,r)=>t(e,n,r+1)),Object(fe.a)(1))(e)}}function ge(t){return pe("function"==typeof t?(e,n)=>t(e,n)>0?e:n:(t,e)=>t>e?t:e)}var ve=n("VRyK");function me(...t){return e=>e.lift.call(Object(ve.a)(e,...t))}var ye=n("bHdf"),be=n("5+tZ");function _e(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?Object(be.b)(()=>t,e,n):("number"==typeof e&&(n=e),Object(be.b)(()=>t,n))}function we(t,e,n=Number.POSITIVE_INFINITY){return r=>r.lift(new Ee(t,e,n))}class Ee{constructor(t,e,n){this.accumulator=t,this.seed=e,this.concurrent=n}call(t,e){return e.subscribe(new Oe(t,this.accumulator,this.seed,this.concurrent))}}class Oe extends r.b{constructor(t,e,n,r){super(t),this.accumulator=e,this.acc=n,this.concurrent=r,this.hasValue=!1,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){if(this.active<this.concurrent){const n=this.index++,r=this.destination;let i;try{const{accumulator:e}=this;i=e(this.acc,t,n)}catch(e){return r.error(e)}this.active++,this._innerSub(i)}else this.buffer.push(t)}_innerSub(t){const e=new r.a(this),n=this.destination;n.add(e);const i=Object(r.c)(t,e);i!==e&&n.add(i)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete()),this.unsubscribe()}notifyNext(t){const{destination:e}=this;this.acc=t,this.hasValue=!0,e.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())}}function Se(t){return pe("function"==typeof t?(e,n)=>t(e,n)<0?e:n:(t,e)=>t<e?t:e)}var Ce=n("oB13"),Te=n("pxpQ");function Ie(...t){return 1===t.length&&Object(V.a)(t[0])&&(t=t[0]),e=>e.lift(new xe(t))}class xe{constructor(t){this.nextSources=t}call(t,e){return e.subscribe(new je(t,this.nextSources))}}class je extends r.b{constructor(t,e){super(t),this.destination=t,this.nextSources=e}notifyError(){this.subscribeToNextSource()}notifyComplete(){this.subscribeToNextSource()}_error(t){this.subscribeToNextSource(),this.unsubscribe()}_complete(){this.subscribeToNextSource(),this.unsubscribe()}subscribeToNextSource(){const t=this.nextSources.shift();if(t){const e=new r.a(this),n=this.destination;n.add(e);const i=Object(r.c)(t,e);i!==e&&n.add(i)}else this.destination.complete()}}function ke(){return t=>t.lift(new Ae)}class Ae{call(t,e){return e.subscribe(new Ne(t))}}class Ne extends d.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}var Pe=n("F97/");function Re(t,e){return n=>[Object(Tt.a)(t,e)(n),Object(Tt.a)(Object(Pe.a)(t,e))(n)]}function De(...t){const e=t.length;if(0===e)throw new Error("list of properties cannot be empty.");return n=>Object(Vt.a)(function(t,e){return n=>{let r=n;for(let i=0;i<e;i++){const e=null!=r?r[t[i]]:void 0;if(void 0===e)return;r=e}return r}}(t,e))(n)}var Me=n("XNiG");function Le(t){return t?Object(Ce.a)(()=>new Me.a,t):Object(Ce.a)(new Me.a)}var Ve=n("2Vo4");function Fe(t){return e=>Object(Ce.a)(new Ve.a(t))(e)}var Ue=n("NHP+");function qe(){return t=>Object(Ce.a)(new Ue.a)(t)}var He=n("jtHE");function Be(t,e,n,r){n&&"function"!=typeof n&&(r=n);const i="function"==typeof n?n:void 0,o=new He.a(t,e,r);return t=>Object(Ce.a)(()=>o,i)(t)}var ze=n("Nv8m");function We(...t){return function(e){return 1===t.length&&Object(V.a)(t[0])&&(t=t[0]),e.lift.call(Object(ze.a)(e,...t))}}var Ge=n("EY2u");function Ke(t=-1){return e=>0===t?Object(Ge.b)():e.lift(new Qe(t<0?-1:t-1,e))}class Qe{constructor(t,e){this.count=t,this.source=e}call(t,e){return e.subscribe(new $e(t,this.count,this.source))}}class $e extends d.a{constructor(t,e,n){super(t),this.count=e,this.source=n}complete(){if(!this.isStopped){const{source:t,count:e}=this;if(0===e)return super.complete();e>-1&&(this.count=e-1),t.subscribe(this._unsubscribeAndRecycle())}}}function Ye(t){return e=>e.lift(new Xe(t))}class Xe{constructor(t){this.notifier=t}call(t,e){return e.subscribe(new Je(t,this.notifier,e))}}class Je extends r.b{constructor(t,e,n){super(t),this.notifier=e,this.source=n,this.sourceIsBeingSubscribedTo=!0}notifyNext(){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)}notifyComplete(){if(!1===this.sourceIsBeingSubscribedTo)return super.complete()}complete(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return super.complete();this._unsubscribeAndRecycle(),this.notifications.next(void 0)}}_unsubscribe(){const{notifications:t,retriesSubscription:e}=this;t&&(t.unsubscribe(),this.notifications=void 0),e&&(e.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0}_unsubscribeAndRecycle(){const{_unsubscribe:t}=this;return this._unsubscribe=null,super._unsubscribeAndRecycle(),this._unsubscribe=t,this}subscribeToRetries(){let t;this.notifications=new Me.a;try{const{notifier:e}=this;t=e(this.notifications)}catch(e){return super.complete()}this.retries=t,this.retriesSubscription=Object(r.c)(t,new r.a(this))}}function Ze(t=-1){return e=>e.lift(new tn(t,e))}class tn{constructor(t,e){this.count=t,this.source=e}call(t,e){return e.subscribe(new en(t,this.count,this.source))}}class en extends d.a{constructor(t,e,n){super(t),this.count=e,this.source=n}error(t){if(!this.isStopped){const{source:e,count:n}=this;if(0===n)return super.error(t);n>-1&&(this.count=n-1),e.subscribe(this._unsubscribeAndRecycle())}}}function nn(t){return e=>e.lift(new rn(t,e))}class rn{constructor(t,e){this.notifier=t,this.source=e}call(t,e){return e.subscribe(new on(t,this.notifier,this.source))}}class on extends r.b{constructor(t,e,n){super(t),this.notifier=e,this.source=n}error(t){if(!this.isStopped){let n=this.errors,i=this.retries,o=this.retriesSubscription;if(i)this.errors=void 0,this.retriesSubscription=void 0;else{n=new Me.a;try{const{notifier:t}=this;i=t(n)}catch(e){return super.error(e)}o=Object(r.c)(i,new r.a(this))}this._unsubscribeAndRecycle(),this.errors=n,this.retries=i,this.retriesSubscription=o,n.next(t)}}_unsubscribe(){const{errors:t,retriesSubscription:e}=this;t&&(t.unsubscribe(),this.errors=void 0),e&&(e.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0}notifyNext(){const{_unsubscribe:t}=this;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=t,this.source.subscribe(this)}}var sn=n("x+ZX");function an(t){return e=>e.lift(new un(t))}class un{constructor(t){this.notifier=t}call(t,e){const n=new cn(t),i=e.subscribe(n);return i.add(Object(r.c)(this.notifier,new r.a(n))),i}}class cn extends r.b{constructor(){super(...arguments),this.hasValue=!1}_next(t){this.value=t,this.hasValue=!0}notifyNext(){this.emitValue()}notifyComplete(){this.emitValue()}emitValue(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))}}function ln(t,e=a.a){return n=>n.lift(new hn(t,e))}class hn{constructor(t,e){this.period=t,this.scheduler=e}call(t,e){return e.subscribe(new fn(t,this.period,this.scheduler))}}class fn extends d.a{constructor(t,e,n){super(t),this.period=e,this.scheduler=n,this.hasValue=!1,this.add(n.schedule(dn,e,{subscriber:this,period:e}))}_next(t){this.lastValue=t,this.hasValue=!0}notifyNext(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))}}function dn(t){let{subscriber:e,period:n}=t;e.notifyNext(),this.schedule(t,n)}function pn(t,e){return n=>n.lift(new gn(t,e))}class gn{constructor(t,e){this.compareTo=t,this.comparator=e}call(t,e){return e.subscribe(new vn(t,this.compareTo,this.comparator))}}class vn extends d.a{constructor(t,e,n){super(t),this.compareTo=e,this.comparator=n,this._a=[],this._b=[],this._oneComplete=!1,this.destination.add(e.subscribe(new mn(t,this)))}_next(t){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(t),this.checkValues())}_complete(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0,this.unsubscribe()}checkValues(){const{_a:t,_b:e,comparator:n}=this;for(;t.length>0&&e.length>0;){let i=t.shift(),o=e.shift(),s=!1;try{s=n?n(i,o):i===o}catch(r){this.destination.error(r)}s||this.emit(!1)}}emit(t){const{destination:e}=this;e.next(t),e.complete()}nextB(t){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(t),this.checkValues())}completeB(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0}}class mn extends d.a{constructor(t,e){super(t),this.parent=e}_next(t){this.parent.nextB(t)}_error(t){this.parent.error(t),this.unsubscribe()}_complete(){this.parent.completeB(),this.unsubscribe()}}var yn=n("w1tV");function bn(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new He.a(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}}),u&&(o=void 0)):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),l=void 0,o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}var _n=n("sVev");function wn(t){return e=>e.lift(new En(t,e))}class En{constructor(t,e){this.predicate=t,this.source=e}call(t,e){return e.subscribe(new On(t,this.predicate,this.source))}}class On extends d.a{constructor(t,e,n){super(t),this.predicate=e,this.source=n,this.seenValue=!1,this.index=0}applySingleValue(t){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=t)}_next(t){const e=this.index++;this.predicate?this.tryNext(t,e):this.applySingleValue(t)}tryNext(t,e){try{this.predicate(t,e,this.source)&&this.applySingleValue(t)}catch(n){this.destination.error(n)}}_complete(){const t=this.destination;this.index>0?(t.next(this.seenValue?this.singleValue:void 0),t.complete()):t.error(new _n.a)}}function Sn(t){return e=>e.lift(new Cn(t))}class Cn{constructor(t){this.total=t}call(t,e){return e.subscribe(new Tn(t,this.total))}}class Tn extends d.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){++this.count>this.total&&this.destination.next(t)}}function In(t){return e=>e.lift(new xn(t))}class xn{constructor(t){if(this._skipCount=t,this._skipCount<0)throw new Ct.a}call(t,e){return e.subscribe(0===this._skipCount?new d.a(t):new jn(t,this._skipCount))}}class jn extends d.a{constructor(t,e){super(t),this._skipCount=e,this._count=0,this._ring=new Array(e)}_next(t){const e=this._skipCount,n=this._count++;if(n<e)this._ring[n]=t;else{const r=n%e,i=this._ring,o=i[r];i[r]=t,this.destination.next(o)}}}function kn(t){return e=>e.lift(new An(t))}class An{constructor(t){this.notifier=t}call(t,e){return e.subscribe(new Nn(t,this.notifier))}}class Nn extends r.b{constructor(t,e){super(t),this.hasValue=!1;const n=new r.a(this);this.add(n),this.innerSubscription=n;const i=Object(r.c)(e,n);i!==n&&(this.add(i),this.innerSubscription=i)}_next(t){this.hasValue&&super._next(t)}notifyNext(){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()}notifyComplete(){}}function Pn(t){return e=>e.lift(new Rn(t))}class Rn{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new Dn(t,this.predicate))}}class Dn extends d.a{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}var Mn=n("JX91"),Ln=n("7Hc7"),Vn=n("Y7HM");class Fn extends ct.a{constructor(t,e=0,n=Ln.a){super(),this.source=t,this.delayTime=e,this.scheduler=n,(!Object(Vn.a)(e)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=Ln.a)}static create(t,e=0,n=Ln.a){return new Fn(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(Fn.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function Un(t,e=0){return function(n){return n.lift(new qn(t,e))}}class qn{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new Fn(e,this.delay,this.scheduler).subscribe(t)}}var Hn=n("eIep"),Bn=n("SpAZ");function zn(){return Object(Hn.a)(Bn.a)}function Wn(t,e){return e?Object(Hn.a)(()=>t,e):Object(Hn.a)(()=>t)}function Gn(t){return e=>e.lift(new Kn(t))}class Kn{constructor(t){this.notifier=t}call(t,e){const n=new Qn(t),i=Object(r.c)(this.notifier,new r.a(n));return i&&!n.seenValue?(n.add(i),e.subscribe(n)):n}}class Qn extends r.b{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}function $n(t,e=!1){return n=>n.lift(new Yn(t,e))}class Yn{constructor(t,e){this.predicate=t,this.inclusive=e}call(t,e){return e.subscribe(new Xn(t,this.predicate,this.inclusive))}}class Xn extends d.a{constructor(t,e,n){super(t),this.predicate=e,this.inclusive=n,this.index=0}_next(t){const e=this.destination;let n;try{n=this.predicate(t,this.index++)}catch(r){return void e.error(r)}this.nextOrComplete(t,n)}nextOrComplete(t,e){const n=this.destination;Boolean(e)?n.next(t):(this.inclusive&&n.next(t),n.complete())}}var Jn=n("vkgz");const Zn={leading:!0,trailing:!1};function tr(t,e=Zn){return n=>n.lift(new er(t,!!e.leading,!!e.trailing))}class er{constructor(t,e,n){this.durationSelector=t,this.leading=e,this.trailing=n}call(t,e){return e.subscribe(new nr(t,this.durationSelector,this.leading,this.trailing))}}class nr extends r.b{constructor(t,e,n,r){super(t),this.destination=t,this.durationSelector=e,this._leading=n,this._trailing=r,this._hasValue=!1}_next(t){this._hasValue=!0,this._sendValue=t,this._throttled||(this._leading?this.send():this.throttle(t))}send(){const{_hasValue:t,_sendValue:e}=this;t&&(this.destination.next(e),this.throttle(e)),this._hasValue=!1,this._sendValue=void 0}throttle(t){const e=this.tryDurationSelector(t);e&&this.add(this._throttled=Object(r.c)(e,new r.a(this)))}tryDurationSelector(t){try{return this.durationSelector(t)}catch(e){return this.destination.error(e),null}}throttlingDone(){const{_throttled:t,_trailing:e}=this;t&&t.unsubscribe(),this._throttled=void 0,e&&this.send()}notifyNext(){this.throttlingDone()}notifyComplete(){this.throttlingDone()}}function rr(t,e=a.a,n=Zn){return r=>r.lift(new ir(t,e,n.leading,n.trailing))}class ir{constructor(t,e,n,r){this.duration=t,this.scheduler=e,this.leading=n,this.trailing=r}call(t,e){return e.subscribe(new or(t,this.duration,this.scheduler,this.leading,this.trailing))}}class or extends d.a{constructor(t,e,n,r,i){super(t),this.duration=e,this.scheduler=n,this.leading=r,this.trailing=i,this._hasTrailingValue=!1,this._trailingValue=null}_next(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(sr,this.duration,{subscriber:this})),this.leading?this.destination.next(t):this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0))}_complete(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()}clearThrottle(){const t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)}}function sr(t){const{subscriber:e}=t;e.clearThrottle()}var ar=n("NXyV");function ur(t=a.a){return e=>Object(ar.a)(()=>e.pipe(Object(he.a)(({current:e},n)=>({value:n,current:t.now(),last:e}),{current:t.now(),value:void 0,last:void 0}),Object(Vt.a)(({current:t,last:e,value:n})=>new cr(n,t-e))))}class cr{constructor(t,e){this.value=t,this.interval=e}}var lr=n("Y6u4");function hr(t,e,n=a.a){return r=>{let i=rt(t),o=i?+t-n.now():Math.abs(t);return r.lift(new fr(o,i,e,n))}}class fr{constructor(t,e,n,r){this.waitFor=t,this.absoluteTimeout=e,this.withObservable=n,this.scheduler=r}call(t,e){return e.subscribe(new dr(t,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))}}class dr extends r.b{constructor(t,e,n,r,i){super(t),this.absoluteTimeout=e,this.waitFor=n,this.withObservable=r,this.scheduler=i,this.scheduleTimeout()}static dispatchTimeout(t){const{withObservable:e}=t;t._unsubscribeAndRecycle(),t.add(Object(r.c)(e,new r.a(t)))}scheduleTimeout(){const{action:t}=this;t?this.action=t.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(dr.dispatchTimeout,this.waitFor,this))}_next(t){this.absoluteTimeout||this.scheduleTimeout(),super._next(t)}_unsubscribe(){this.action=void 0,this.scheduler=null,this.withObservable=null}}var pr=n("z6cu");function gr(t,e=a.a){return hr(t,Object(pr.a)(new lr.a),e)}function vr(t=a.a){return Object(Vt.a)(e=>new mr(e,t.now()))}class mr{constructor(t,e){this.value=t,this.timestamp=e}}function yr(t,e,n){return 0===n?[e]:(t.push(e),t)}function br(){return pe(yr,[])}function _r(t){return function(e){return e.lift(new wr(t))}}class wr{constructor(t){this.windowBoundaries=t}call(t,e){const n=new Er(t),i=e.subscribe(n);return i.closed||n.add(Object(r.c)(this.windowBoundaries,new r.a(n))),i}}class Er extends r.b{constructor(t){super(t),this.window=new Me.a,t.next(this.window)}notifyNext(){this.openWindow()}notifyError(t){this._error(t)}notifyComplete(){this._complete()}_next(t){this.window.next(t)}_error(t){this.window.error(t),this.destination.error(t)}_complete(){this.window.complete(),this.destination.complete()}_unsubscribe(){this.window=null}openWindow(){const t=this.window;t&&t.complete();const e=this.destination,n=this.window=new Me.a;e.next(n)}}function Or(t,e=0){return function(n){return n.lift(new Sr(t,e))}}class Sr{constructor(t,e){this.windowSize=t,this.startWindowEvery=e}call(t,e){return e.subscribe(new Cr(t,this.windowSize,this.startWindowEvery))}}class Cr extends d.a{constructor(t,e,n){super(t),this.destination=t,this.windowSize=e,this.startWindowEvery=n,this.windows=[new Me.a],this.count=0,t.next(this.windows[0])}_next(t){const e=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,n=this.destination,r=this.windowSize,i=this.windows,o=i.length;for(let a=0;a<o&&!this.closed;a++)i[a].next(t);const s=this.count-r+1;if(s>=0&&s%e==0&&!this.closed&&i.shift().complete(),++this.count%e==0&&!this.closed){const t=new Me.a;i.push(t),n.next(t)}}_error(t){const e=this.windows;if(e)for(;e.length>0&&!this.closed;)e.shift().error(t);this.destination.error(t)}_complete(){const t=this.windows;if(t)for(;t.length>0&&!this.closed;)t.shift().complete();this.destination.complete()}_unsubscribe(){this.count=0,this.windows=null}}function Tr(t){let e=a.a,n=null,r=Number.POSITIVE_INFINITY;return Object(y.a)(arguments[3])&&(e=arguments[3]),Object(y.a)(arguments[2])?e=arguments[2]:Object(Vn.a)(arguments[2])&&(r=Number(arguments[2])),Object(y.a)(arguments[1])?e=arguments[1]:Object(Vn.a)(arguments[1])&&(n=Number(arguments[1])),function(i){return i.lift(new Ir(t,n,r,e))}}class Ir{constructor(t,e,n,r){this.windowTimeSpan=t,this.windowCreationInterval=e,this.maxWindowSize=n,this.scheduler=r}call(t,e){return e.subscribe(new jr(t,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))}}class xr extends Me.a{constructor(){super(...arguments),this._numberOfNextedValues=0}next(t){this._numberOfNextedValues++,super.next(t)}get numberOfNextedValues(){return this._numberOfNextedValues}}class jr extends d.a{constructor(t,e,n,r,i){super(t),this.destination=t,this.windowTimeSpan=e,this.windowCreationInterval=n,this.maxWindowSize=r,this.scheduler=i,this.windows=[];const o=this.openWindow();if(null!==n&&n>=0){const t={windowTimeSpan:e,windowCreationInterval:n,subscriber:this,scheduler:i};this.add(i.schedule(Nr,e,{subscriber:this,window:o,context:null})),this.add(i.schedule(Ar,n,t))}else this.add(i.schedule(kr,e,{subscriber:this,window:o,windowTimeSpan:e}))}_next(t){const e=this.windows,n=e.length;for(let r=0;r<n;r++){const n=e[r];n.closed||(n.next(t),n.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(n))}}_error(t){const e=this.windows;for(;e.length>0;)e.shift().error(t);this.destination.error(t)}_complete(){const t=this.windows;for(;t.length>0;){const e=t.shift();e.closed||e.complete()}this.destination.complete()}openWindow(){const t=new xr;return this.windows.push(t),this.destination.next(t),t}closeWindow(t){t.complete();const e=this.windows;e.splice(e.indexOf(t),1)}}function kr(t){const{subscriber:e,windowTimeSpan:n,window:r}=t;r&&e.closeWindow(r),t.window=e.openWindow(),this.schedule(t,n)}function Ar(t){const{windowTimeSpan:e,subscriber:n,scheduler:r,windowCreationInterval:i}=t,o=n.openWindow(),s=this;let a={action:s,subscription:null};a.subscription=r.schedule(Nr,e,{subscriber:n,window:o,context:a}),s.add(a.subscription),s.schedule(t,i)}function Nr(t){const{subscriber:e,window:n,context:r}=t;r&&r.action&&r.subscription&&r.action.remove(r.subscription),e.closeWindow(n)}function Pr(t,e){return n=>n.lift(new Rr(t,e))}class Rr{constructor(t,e){this.openings=t,this.closingSelector=e}call(t,e){return e.subscribe(new Dr(t,this.openings,this.closingSelector))}}class Dr extends x.a{constructor(t,e,n){super(t),this.openings=e,this.closingSelector=n,this.contexts=[],this.add(this.openSubscription=Object(I.a)(this,e,e))}_next(t){const{contexts:e}=this;if(e){const n=e.length;for(let r=0;r<n;r++)e[r].window.next(t)}}_error(t){const{contexts:e}=this;if(this.contexts=null,e){const n=e.length;let r=-1;for(;++r<n;){const n=e[r];n.window.error(t),n.subscription.unsubscribe()}}super._error(t)}_complete(){const{contexts:t}=this;if(this.contexts=null,t){const e=t.length;let n=-1;for(;++n<e;){const e=t[n];e.window.complete(),e.subscription.unsubscribe()}}super._complete()}_unsubscribe(){const{contexts:t}=this;if(this.contexts=null,t){const e=t.length;let n=-1;for(;++n<e;){const e=t[n];e.window.unsubscribe(),e.subscription.unsubscribe()}}}notifyNext(t,e,n,r,i){if(t===this.openings){let t;try{const{closingSelector:n}=this;t=n(e)}catch(o){return this.error(o)}const n=new Me.a,r=new T.a,i={window:n,subscription:r};this.contexts.push(i);const s=Object(I.a)(this,t,i);s.closed?this.closeWindow(this.contexts.length-1):(s.context=i,r.add(s)),this.destination.next(n)}else this.closeWindow(this.contexts.indexOf(t))}notifyError(t){this.error(t)}notifyComplete(t){t!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(t.context))}closeWindow(t){if(-1===t)return;const{contexts:e}=this,n=e[t],{window:r,subscription:i}=n;e.splice(t,1),r.complete(),i.unsubscribe()}}function Mr(t){return function(e){return e.lift(new Lr(t))}}class Lr{constructor(t){this.closingSelector=t}call(t,e){return e.subscribe(new Vr(t,this.closingSelector))}}class Vr extends x.a{constructor(t,e){super(t),this.destination=t,this.closingSelector=e,this.openWindow()}notifyNext(t,e,n,r,i){this.openWindow(i)}notifyError(t){this._error(t)}notifyComplete(t){this.openWindow(t)}_next(t){this.window.next(t)}_error(t){this.window.error(t),this.destination.error(t),this.unsubscribeClosingNotification()}_complete(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()}unsubscribeClosingNotification(){this.closingNotification&&this.closingNotification.unsubscribe()}openWindow(t=null){t&&(this.remove(t),t.unsubscribe());const e=this.window;e&&e.complete();const n=this.window=new Me.a;let r;this.destination.next(n);try{const{closingSelector:t}=this;r=t()}catch(i){return this.destination.error(i),void this.window.error(i)}this.add(this.closingNotification=Object(I.a)(this,r))}}function Fr(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new Ur(t,n))}}class Ur{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new qr(t,this.observables,this.project))}}class qr extends x.a{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++){let t=e[i];this.add(Object(I.a)(this,t,void 0,i))}}notifyNext(t,e,n){this.values[n]=e;const r=this.toRespond;if(r.length>0){const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}var Hr=n("1uah");function Br(...t){return function(e){return e.lift.call(Object(Hr.b)(e,...t))}}function zr(t){return e=>e.lift(new Hr.a(t))}},l7GE:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");class i extends r.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},mAIw:function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"d",function(){return a}),n.d(e,"h",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"f",function(){return l}),n.d(e,"g",function(){return h});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c(arguments[e]));return t}function h(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}},mCNh:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("SpAZ");function i(...t){return o(t)}function o(t){return 0===t.length?r.a:1===t.length?t[0]:function(e){return t.reduce((t,e)=>e(t),e)}}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},nYR2:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("7o/Q"),i=n("quSY");function o(t){return e=>e.lift(new s(t))}class s{constructor(t){this.callback=t}call(t,e){return e.subscribe(new a(t,this.callback))}}class a extends r.a{constructor(t,e){super(t),this.add(new i.a(e))}}},nbvr:function(t,e,n){!function(t){"use strict";function e(t){return Array.prototype.slice.call(t)}function n(t){return new Promise(function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function r(t,e,r){var i,o=new Promise(function(o,s){n(i=t[e].apply(t,r)).then(o,s)});return o.request=i,o}function i(t,e,n){var i=r(t,e,n);return i.then(function(t){if(t)return new l(t,i.request)})}function o(t,e,n){n.forEach(function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})})}function s(t,e,n,i){i.forEach(function(i){i in n.prototype&&(t.prototype[i]=function(){return r(this[e],i,arguments)})})}function a(t,e,n,r){r.forEach(function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})})}function u(t,e,n,r){r.forEach(function(r){r in n.prototype&&(t.prototype[r]=function(){return i(this[e],r,arguments)})})}function c(t){this._index=t}function l(t,e){this._cursor=t,this._request=e}function h(t){this._store=t}function f(t){this._tx=t,this.complete=new Promise(function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}})}function d(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new f(n)}function p(t){this._db=t}o(c,"_index",["name","keyPath","multiEntry","unique"]),s(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(l,"_cursor",["direction","key","primaryKey","value"]),s(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(t){t in IDBCursor.prototype&&(l.prototype[t]=function(){var e=this,r=arguments;return Promise.resolve().then(function(){return e._cursor[t].apply(e._cursor,r),n(e._request).then(function(t){if(t)return new l(t,e._request)})})})}),h.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},o(h,"_store",["name","keyPath","indexNames","autoIncrement"]),s(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),a(h,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},o(f,"_tx",["objectStoreNames","mode"]),a(f,"_tx",IDBTransaction,["abort"]),d.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},o(d,"_db",["name","version","objectStoreNames"]),a(d,"_db",IDBDatabase,["deleteObjectStore","close"]),p.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),a(p,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(t){[h,c].forEach(function(n){t in n.prototype&&(n.prototype[t.replace("open","iterate")]=function(){var n=e(arguments),r=n[n.length-1],i=this._store||this._index,o=i[t].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})})}),[c,h].forEach(function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise(function(i){n.iterateCursor(t,function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)})})})}),t.openDb=function(t,e,n){var i=r(indexedDB,"open",[t,e]),o=i.request;return o&&(o.onupgradeneeded=function(t){n&&n(new d(o.result,t.oldVersion,o.transaction))}),i.then(function(t){return new p(t)})},t.deleteDb=function(t){return r(indexedDB,"deleteDatabase",[t])},Object.defineProperty(t,"__esModule",{value:!0})}(e)},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},oB13:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("EQ5u");function i(t,e){return function(n){let i;if(i="function"==typeof t?t:function(){return t},"function"==typeof e)return n.lift(new o(i,e));const s=Object.create(n,r.b);return s.source=n,s.subjectFactory=i,s}}class o{constructor(t,e){this.subjectFactory=t,this.selector=e}call(t,e){const{selector:n}=this,r=this.subjectFactory(),i=n(r).subscribe(t);return i.add(e.subscribe(r)),i}}},pLZG:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){return n.lift(new o(t,e))}}class o{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.predicate,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}},pjAE:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})()},pxpQ:function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"a",function(){return a});var r=n("7o/Q"),i=n("WMd4");function o(t,e=0){return function(n){return n.lift(new s(t,e))}}class s{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new a(t,this.scheduler,this.delay))}}class a extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(a.dispatch,this.delay,new u(t,this.destination)))}_next(t){this.scheduleMessage(i.a.createNext(t))}_error(t){this.scheduleMessage(i.a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(i.a.createComplete()),this.unsubscribe()}}class u{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",function(){return s}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return f}),n.d(e,"d",function(){return d});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function f(t){o.forEach(function(e){e.setLogLevel(t)})}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qCKp:function(t,e,n){"use strict";n.r(e),n.d(e,"Observable",function(){return r.a}),n.d(e,"ConnectableObservable",function(){return i.a}),n.d(e,"GroupedObservable",function(){return o.a}),n.d(e,"observable",function(){return s.a}),n.d(e,"Subject",function(){return a.a}),n.d(e,"BehaviorSubject",function(){return u.a}),n.d(e,"ReplaySubject",function(){return c.a}),n.d(e,"AsyncSubject",function(){return l.a}),n.d(e,"asap",function(){return h.a}),n.d(e,"asapScheduler",function(){return h.b}),n.d(e,"async",function(){return f.a}),n.d(e,"asyncScheduler",function(){return f.b}),n.d(e,"queue",function(){return d.a}),n.d(e,"queueScheduler",function(){return d.b}),n.d(e,"animationFrame",function(){return b}),n.d(e,"animationFrameScheduler",function(){return y}),n.d(e,"VirtualTimeScheduler",function(){return _}),n.d(e,"VirtualAction",function(){return w}),n.d(e,"Scheduler",function(){return E.a}),n.d(e,"Subscription",function(){return O.a}),n.d(e,"Subscriber",function(){return S.a}),n.d(e,"Notification",function(){return C.a}),n.d(e,"NotificationKind",function(){return C.b}),n.d(e,"pipe",function(){return T.a}),n.d(e,"noop",function(){return I.a}),n.d(e,"identity",function(){return x.a}),n.d(e,"isObservable",function(){return j}),n.d(e,"ArgumentOutOfRangeError",function(){return k.a}),n.d(e,"EmptyError",function(){return A.a}),n.d(e,"ObjectUnsubscribedError",function(){return N.a}),n.d(e,"UnsubscriptionError",function(){return P.a}),n.d(e,"TimeoutError",function(){return R.a}),n.d(e,"bindCallback",function(){return F}),n.d(e,"bindNodeCallback",function(){return H}),n.d(e,"combineLatest",function(){return G.b}),n.d(e,"concat",function(){return K.a}),n.d(e,"defer",function(){return Q.a}),n.d(e,"empty",function(){return $.b}),n.d(e,"forkJoin",function(){return Y.a}),n.d(e,"from",function(){return X.a}),n.d(e,"fromEvent",function(){return Z}),n.d(e,"fromEventPattern",function(){return et}),n.d(e,"generate",function(){return nt}),n.d(e,"iif",function(){return it}),n.d(e,"interval",function(){return st}),n.d(e,"merge",function(){return ut.a}),n.d(e,"never",function(){return lt}),n.d(e,"of",function(){return ht.a}),n.d(e,"onErrorResumeNext",function(){return ft}),n.d(e,"pairs",function(){return dt}),n.d(e,"partition",function(){return yt}),n.d(e,"race",function(){return bt.a}),n.d(e,"range",function(){return _t}),n.d(e,"throwError",function(){return Et.a}),n.d(e,"timer",function(){return Ot.a}),n.d(e,"using",function(){return St}),n.d(e,"zip",function(){return Ct.b}),n.d(e,"scheduled",function(){return Tt.a}),n.d(e,"EMPTY",function(){return $.a}),n.d(e,"NEVER",function(){return ct}),n.d(e,"config",function(){return It.a});var r=n("HDdC"),i=n("EQ5u"),o=n("OQgR"),s=n("kJWO"),a=n("XNiG"),u=n("2Vo4"),c=n("jtHE"),l=n("NHP+"),h=n("7Hc7"),f=n("D0XW"),d=n("qgXg"),p=n("3N8a");class g extends p.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame(()=>t.flush(null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(cancelAnimationFrame(e),t.scheduled=void 0)}}var v=n("IjjT");class m extends v.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const y=new m(g),b=y;let _=(()=>{class t extends v.a{constructor(t=w,e=Number.POSITIVE_INFINITY){super(t,()=>this.frame),this.maxFrames=e,this.frame=0,this.index=-1}flush(){const{actions:t,maxFrames:e}=this;let n,r;for(;(r=t[0])&&r.delay<=e&&(t.shift(),this.frame=r.delay,!(n=r.execute(r.state,r.delay))););if(n){for(;r=t.shift();)r.unsubscribe();throw n}}}return t.frameTimeFactor=10,t})();class w extends p.a{constructor(t,e,n=(t.index+=1)){super(t,e),this.scheduler=t,this.work=e,this.index=n,this.active=!0,this.index=t.index=n}schedule(t,e=0){if(!this.id)return super.schedule(t,e);this.active=!1;const n=new w(this.scheduler,this.work);return this.add(n),n.schedule(t,e)}requestAsyncId(t,e,n=0){this.delay=t.frame+n;const{actions:r}=t;return r.push(this),r.sort(w.sortActions),!0}recycleAsyncId(t,e,n=0){}_execute(t,e){if(!0===this.active)return super._execute(t,e)}static sortActions(t,e){return t.delay===e.delay?t.index===e.index?0:t.index>e.index?1:-1:t.delay>e.delay?1:-1}}var E=n("Y/cZ"),O=n("quSY"),S=n("7o/Q"),C=n("WMd4"),T=n("mCNh"),I=n("KqfI"),x=n("SpAZ");function j(t){return!!t&&(t instanceof r.a||"function"==typeof t.lift&&"function"==typeof t.subscribe)}var k=n("4I5i"),A=n("sVev"),N=n("9ppp"),P=n("pjAE"),R=n("Y6u4"),D=n("lJxs"),M=n("8Qeq"),L=n("DH7j"),V=n("z+Ro");function F(t,e,n){if(e){if(!Object(V.a)(e))return(...r)=>F(t,n)(...r).pipe(Object(D.a)(t=>Object(L.a)(t)?e(...t):e(t)));n=e}return function(...e){const i=this;let o;const s={context:i,subject:o,callbackFunc:t,scheduler:n};return new r.a(r=>{if(n)return n.schedule(U,0,{args:e,subscriber:r,params:s});if(!o){o=new l.a;const n=(...t)=>{o.next(t.length<=1?t[0]:t),o.complete()};try{t.apply(i,[...e,n])}catch(a){Object(M.a)(o)?o.error(a):console.warn(a)}}return o.subscribe(r)})}}function U(t){const{args:e,subscriber:n,params:r}=t,{callbackFunc:i,context:o,scheduler:s}=r;let{subject:a}=r;if(!a){a=r.subject=new l.a;const t=(...t)=>{this.add(s.schedule(q,0,{value:t.length<=1?t[0]:t,subject:a}))};try{i.apply(o,[...e,t])}catch(u){a.error(u)}}this.add(a.subscribe(n))}function q(t){const{value:e,subject:n}=t;n.next(e),n.complete()}function H(t,e,n){if(e){if(!Object(V.a)(e))return(...r)=>H(t,n)(...r).pipe(Object(D.a)(t=>Object(L.a)(t)?e(...t):e(t)));n=e}return function(...e){const i={subject:void 0,args:e,callbackFunc:t,scheduler:n,context:this};return new r.a(r=>{const{context:o}=i;let{subject:s}=i;if(n)return n.schedule(B,0,{params:i,subscriber:r,context:o});if(!s){s=i.subject=new l.a;const n=(...t)=>{const e=t.shift();e?s.error(e):(s.next(t.length<=1?t[0]:t),s.complete())};try{t.apply(o,[...e,n])}catch(a){Object(M.a)(s)?s.error(a):console.warn(a)}}return s.subscribe(r)})}}function B(t){const{params:e,subscriber:n,context:r}=t,{callbackFunc:i,args:o,scheduler:s}=e;let a=e.subject;if(!a){a=e.subject=new l.a;const t=(...t)=>{const e=t.shift();this.add(e?s.schedule(W,0,{err:e,subject:a}):s.schedule(z,0,{value:t.length<=1?t[0]:t,subject:a}))};try{i.apply(r,[...o,t])}catch(u){this.add(s.schedule(W,0,{err:u,subject:a}))}}this.add(a.subscribe(n))}function z(t){const{value:e,subject:n}=t;n.next(e),n.complete()}function W(t){const{err:e,subject:n}=t;n.error(e)}var G=n("itXk"),K=n("GyhO"),Q=n("NXyV"),$=n("EY2u"),Y=n("cp0P"),X=n("Cfvw"),J=n("n6bG");function Z(t,e,n,i){return Object(J.a)(n)&&(i=n,n=void 0),i?Z(t,e,n).pipe(Object(D.a)(t=>Object(L.a)(t)?i(...t):i(t))):new r.a(r=>{tt(t,e,function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},r,n)})}function tt(t,e,n,r,i){let o;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){const r=t;t.addEventListener(e,n,i),o=()=>r.removeEventListener(e,n,i)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){const r=t;t.on(e,n),o=()=>r.off(e,n)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){const r=t;t.addListener(e,n),o=()=>r.removeListener(e,n)}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let o=0,s=t.length;o<s;o++)tt(t[o],e,n,r,i)}r.add(o)}function et(t,e,n){return n?et(t,e).pipe(Object(D.a)(t=>Object(L.a)(t)?n(...t):n(t))):new r.a(n=>{const r=(...t)=>n.next(1===t.length?t[0]:t);let i;try{i=t(r)}catch(o){return void n.error(o)}if(Object(J.a)(e))return()=>e(r,i)})}function nt(t,e,n,i,o){let s,a;return 1==arguments.length?(a=t.initialState,e=t.condition,n=t.iterate,s=t.resultSelector||x.a,o=t.scheduler):void 0===i||Object(V.a)(i)?(a=t,s=x.a,o=i):(a=t,s=i),new r.a(t=>{let r=a;if(o)return o.schedule(rt,0,{subscriber:t,iterate:n,condition:e,resultSelector:s,state:r});for(;;){if(e){let n;try{n=e(r)}catch(i){return void t.error(i)}if(!n){t.complete();break}}let o;try{o=s(r)}catch(i){return void t.error(i)}if(t.next(o),t.closed)break;try{r=n(r)}catch(i){return void t.error(i)}}})}function rt(t){const{subscriber:e,condition:n}=t;if(e.closed)return;if(t.needIterate)try{t.state=t.iterate(t.state)}catch(i){return void e.error(i)}else t.needIterate=!0;if(n){let r;try{r=n(t.state)}catch(i){return void e.error(i)}if(!r)return void e.complete();if(e.closed)return}let r;try{r=t.resultSelector(t.state)}catch(i){return void e.error(i)}return e.closed||(e.next(r),e.closed)?void 0:this.schedule(t)}function it(t,e=$.a,n=$.a){return Object(Q.a)(()=>t()?e:n)}var ot=n("Y7HM");function st(t=0,e=f.a){return(!Object(ot.a)(t)||t<0)&&(t=0),e&&"function"==typeof e.schedule||(e=f.a),new r.a(n=>(n.add(e.schedule(at,t,{subscriber:n,counter:0,period:t})),n))}function at(t){const{subscriber:e,counter:n,period:r}=t;e.next(n),this.schedule({subscriber:e,counter:n+1,period:r},r)}var ut=n("VRyK");const ct=new r.a(I.a);function lt(){return ct}var ht=n("LRne");function ft(...t){if(0===t.length)return $.a;const[e,...n]=t;return 1===t.length&&Object(L.a)(e)?ft(...e):new r.a(t=>{const r=()=>t.add(ft(...n).subscribe(t));return Object(X.a)(e).subscribe({next(e){t.next(e)},error:r,complete:r})})}function dt(t,e){return new r.a(e?n=>{const r=Object.keys(t),i=new O.a;return i.add(e.schedule(pt,0,{keys:r,index:0,subscriber:n,subscription:i,obj:t})),i}:e=>{const n=Object.keys(t);for(let r=0;r<n.length&&!e.closed;r++){const i=n[r];t.hasOwnProperty(i)&&e.next([i,t[i]])}e.complete()})}function pt(t){const{keys:e,index:n,subscriber:r,subscription:i,obj:o}=t;if(!r.closed)if(n<e.length){const t=e[n];r.next([t,o[t]]),i.add(this.schedule({keys:e,index:n+1,subscriber:r,subscription:i,obj:o}))}else r.complete()}var gt=n("F97/"),vt=n("SeVD"),mt=n("pLZG");function yt(t,e,n){return[Object(mt.a)(e,n)(new r.a(Object(vt.a)(t))),Object(mt.a)(Object(gt.a)(e,n))(new r.a(Object(vt.a)(t)))]}var bt=n("Nv8m");function _t(t=0,e,n){return new r.a(r=>{void 0===e&&(e=t,t=0);let i=0,o=t;if(n)return n.schedule(wt,0,{index:i,count:e,start:t,subscriber:r});for(;;){if(i++>=e){r.complete();break}if(r.next(o++),r.closed)break}})}function wt(t){const{start:e,index:n,count:r,subscriber:i}=t;n>=r?i.complete():(i.next(e),i.closed||(t.index=n+1,t.start=e+1,this.schedule(t)))}var Et=n("z6cu"),Ot=n("PqYM");function St(t,e){return new r.a(n=>{let r,i;try{r=t()}catch(s){return void n.error(s)}try{i=e(r)}catch(s){return void n.error(s)}const o=(i?Object(X.a)(i):$.a).subscribe(n);return()=>{o.unsubscribe(),r&&r.unsubscribe()}})}var Ct=n("1uah"),Tt=n("7HRe"),It=n("2fFW")},qOnz:function(t,e,n){"use strict";n.d(e,"a",function(){return f}),n.d(e,"b",function(){return I}),n.d(e,"c",function(){return T}),n.d(e,"d",function(){return U}),n.d(e,"e",function(){return C}),n.d(e,"f",function(){return i}),n.d(e,"g",function(){return o}),n.d(e,"h",function(){return a}),n.d(e,"i",function(){return u}),n.d(e,"j",function(){return Y}),n.d(e,"k",function(){return D}),n.d(e,"l",function(){return q}),n.d(e,"m",function(){return l}),n.d(e,"n",function(){return h}),n.d(e,"o",function(){return W}),n.d(e,"p",function(){return d}),n.d(e,"q",function(){return R}),n.d(e,"r",function(){return v}),n.d(e,"s",function(){return m}),n.d(e,"t",function(){return b}),n.d(e,"u",function(){return L}),n.d(e,"v",function(){return _}),n.d(e,"w",function(){return O}),n.d(e,"x",function(){return p}),n.d(e,"y",function(){return g}),n.d(e,"z",function(){return E}),n.d(e,"A",function(){return y}),n.d(e,"B",function(){return w}),n.d(e,"C",function(){return P}),n.d(e,"D",function(){return k}),n.d(e,"E",function(){return V}),n.d(e,"F",function(){return F}),n.d(e,"G",function(){return M}),n.d(e,"H",function(){return $}),n.d(e,"I",function(){return Q}),n.d(e,"J",function(){return A}),n.d(e,"K",function(){return z}),n.d(e,"L",function(){return G}),n.d(e,"M",function(){return K}),n.d(e,"N",function(){return S});var r=n("mAIw"),i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=s(t);return a.encodeByteArray(e,!0)},c=function(t){try{return a.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var f=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function d(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function p(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(d())}function g(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function v(){return"object"==typeof self&&self.self===self}function m(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function y(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function b(){return d().indexOf("Electron/")>=0}function _(){var t=d();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function w(){return d().indexOf("MSAppHost/")>=0}function E(){return!1}function O(){return"indexedDB"in self&&null!=indexedDB}function S(){return new Promise(function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=window.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||window.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(o){e(o)}})}function C(){return!(!navigator||!navigator.cookieEnabled)}var T=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,I.prototype.create),o}return Object(r.c)(e,t),e}(Error),I=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?x(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new T(i,a,r);return u},t}();function x(t,e){return t.replace(j,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var j=/\{\$([^}]+)}/g;function k(t){return JSON.parse(t)}function A(t){return JSON.stringify(t)}var N=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=k(c(o[0])||""),n=k(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},P=function(t){var e=N(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},R=function(t){var e=N(t).claims;return"object"==typeof e&&!0===e.admin};function D(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function M(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function L(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function V(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function F(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var U=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function q(t,e){var n=new H(t,e);return n.subscribe.bind(n)}var H=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=B),void 0===r.error&&(r.error=B),void 0===r.complete&&(r.complete=B);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function B(){}var z=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function W(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}function G(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(W(t,e,r)+"must be a valid function.")}function K(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(W(t,e,r)+"must be a valid context object.")}var Q=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var s=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},$=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};function Y(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var r=e*Math.pow(n,t),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}},qgXg:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return u});var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i),u=a},quSY:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("DH7j"),i=n("XoHu"),o=n("n6bG"),s=n("pjAE");let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s.a?u(h.errors):[h]}}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s.a?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s.a(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s.a?e.errors:e),[])}},sVev:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})()},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q"),i=n("KqfI"),o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i.a,this._tapError=i.a,this._tapComplete=i.a,this._tapError=n||i.a,this._tapComplete=r||i.a,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i.a,this._tapError=e.error||i.a,this._tapComplete=e.complete||i.a)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},w1tV:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("oB13"),i=n("x+ZX"),o=n("XNiG");function s(){return new o.a}function a(){return t=>Object(i.a)()(Object(r.a)(s)(t))}},"x+ZX":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(){return function(t){return t.lift(new o(t))}}class o{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new s(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class s extends r.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},xbPD:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t=null){return e=>e.lift(new o(t))}class o{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new s(t,this.defaultValue))}}class s extends r.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},z6cu:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("HDdC");function i(t,e){return new r.a(e?n=>e.schedule(o,0,{error:t,subscriber:n}):e=>e.error(t))}function o({error:t,subscriber:e}){e.error(t)}},zIRd:function(t,e,n){"use strict";var r,i,o=n("mAIw"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.b("@firebase/app"),g=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.m)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){return void 0===e&&(e=f),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var v=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.k)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new a.a(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.2.9",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||f,!Object(s.k)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Object(s.n)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.n)(e,t)},createSubscribe:s.l,ErrorFactory:s.b,deepExtend:s.n}),e}(),m=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if(Object(s.r)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var y=self.firebase.SDK_VERSION;y&&y.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=v.initializeApp;v.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.y)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var _=v;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",function(t){return new m(t)},"PRIVATE")),t.registerVersion(h,"0.6.15",void 0),t.registerVersion("fire-js","")}(_),e.a=_},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("w1tV");function u(t){for(let e in t)if(t[e]===u)return e;throw Error("Could not find renamed property on target object.")}function c(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function l(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(l).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function h(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const f=u({__forward_ref__:u});function d(t){return t.__forward_ref__=d,t.toString=function(){return l(this())},t}function p(t){return g(t)?t():t}function g(t){return"function"==typeof t&&t.hasOwnProperty(f)&&t.__forward_ref__===d}function v(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function m(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function y(t){return b(t,w)||b(t,O)}function b(t,e){return t.hasOwnProperty(e)?t[e]:null}function _(t){return t&&(t.hasOwnProperty(E)||t.hasOwnProperty(S))?t[E]:null}const w=u({"\u0275prov":u}),E=u({"\u0275inj":u}),O=u({ngInjectableDef:u}),S=u({ngInjectorDef:u});var C=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let T;function I(t){const e=T;return T=t,e}function x(t,e,n){const r=y(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&C.Optional)return null;if(void 0!==e)return e;throw new Error(`Injector: NOT_FOUND [${l(t)}]`)}function j(t){return{toString:t}.toString()}var k=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),A=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const N="undefined"!=typeof globalThis&&globalThis,P="undefined"!=typeof window&&window,R="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,D="undefined"!=typeof global&&global,M=N||D||P||R,L={},V=[],F=u({"\u0275cmp":u}),U=u({"\u0275dir":u}),q=u({"\u0275pipe":u}),H=u({"\u0275mod":u}),B=u({"\u0275loc":u}),z=u({"\u0275fac":u}),W=u({__NG_ELEMENT_ID__:u});let G=0;function K(t){return j(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===k.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||V,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||A.Emulated,id:"c",styles:t.styles||V,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=G++,n.inputs=J(t.inputs,e),n.outputs=J(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(Q):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map($):null,n})}function Q(t){return tt(t)||function(t){return t[U]||null}(t)}function $(t){return function(t){return t[q]||null}(t)}const Y={};function X(t){const e={type:t.type,bootstrap:t.bootstrap||V,declarations:t.declarations||V,imports:t.imports||V,exports:t.exports||V,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&j(()=>{Y[t.id]=t.type}),e}function J(t,e){if(null==t)return L;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const Z=K;function tt(t){return t[F]||null}function et(t,e){const n=t[H]||null;if(!n&&!0===e)throw new Error(`Type ${l(t)} does not have '\u0275mod' property.`);return n}const nt=20,rt=10;function it(t){return Array.isArray(t)&&"object"==typeof t[1]}function ot(t){return Array.isArray(t)&&!0===t[1]}function st(t){return 0!=(8&t.flags)}function at(t){return 2==(2&t.flags)}function ut(t){return 1==(1&t.flags)}function ct(t){return null!==t.template}function lt(t,e){return t.hasOwnProperty(z)?t[z]:null}class ht extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function ft(t){return"string"==typeof t?t:null==t?"":String(t)}function dt(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():ft(t)}function pt(t,e){const n=e?` in ${e}`:"";throw new ht("201",`No provider for ${dt(t)} found${n}`)}class gt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function vt(){return mt}function mt(t){return t.type.prototype.ngOnChanges&&(t.setInput=bt),yt}function yt(){const t=_t(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===L)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function bt(t,e,n,r){const i=_t(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:L,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new gt(u&&u.currentValue,e,s===L),t[r]=e}function _t(t){return t.__ngSimpleChanges__||null}let wt;function Et(t){return!!t.listen}vt.ngInherit=!0;const Ot={createRenderer:(t,e)=>void 0!==wt?wt:"undefined"!=typeof document?document:void 0};function St(t){for(;Array.isArray(t);)t=t[0];return t}function Ct(t,e){return St(e[t])}function Tt(t,e){return St(e[t.index])}function It(t,e){return t.data[e]}function xt(t,e){const n=e[t];return it(n)?n:n[0]}function jt(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function kt(t){return 128==(128&t[2])}function At(t,e){return null==e?null:t[e]}function Nt(t){t[18]=0}function Pt(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Rt={lFrame:Zt(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Dt(){return Rt.bindingsEnabled}function Mt(){return Rt.lFrame.lView}function Lt(){return Rt.lFrame.tView}function Vt(t){Rt.lFrame.contextLView=t}function Ft(){let t=Ut();for(;null!==t&&64===t.type;)t=t.parent;return t}function Ut(){return Rt.lFrame.currentTNode}function qt(t,e){const n=Rt.lFrame;n.currentTNode=t,n.isParent=e}function Ht(){return Rt.lFrame.isParent}function Bt(){return Rt.isInCheckNoChangesMode}function zt(t){Rt.isInCheckNoChangesMode=t}function Wt(){return Rt.lFrame.bindingIndex++}function Gt(t,e){const n=Rt.lFrame;n.bindingIndex=n.bindingRootIndex=t,Kt(e)}function Kt(t){Rt.lFrame.currentDirectiveIndex=t}function Qt(t){Rt.lFrame.currentQueryIndex=t}function $t(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function Yt(t,e,n){if(n&C.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&C.Host||(r=$t(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Rt.lFrame=Jt();return r.currentTNode=e,r.lView=t,!0}function Xt(t){const e=Jt(),n=t[1];Rt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Jt(){const t=Rt.lFrame,e=null===t?null:t.child;return null===e?Zt(t):e}function Zt(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function te(){const t=Rt.lFrame;return Rt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const ee=te;function ne(){const t=te();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function re(){return Rt.lFrame.selectedIndex}function ie(t){Rt.lFrame.selectedIndex=t}function oe(){const t=Rt.lFrame;return It(t.tView,t.selectedIndex)}function se(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function ae(t,e,n){le(t,e,3,n)}function ue(t,e,n,r){(3&t[2])===n&&le(t,e,n,r)}function ce(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function le(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(he(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function he(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(s)):o.call(s)}const fe=-1;class de{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function pe(t,e,n){const r=Et(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];ve(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function ge(t){return 3===t||4===t||6===t}function ve(t){return 64===t.charCodeAt(0)}function me(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||ye(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function ye(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function be(t){return t!==fe}function _e(t){return 32767&t}function we(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let Ee=!0;function Oe(t){const e=Ee;return Ee=t,e}let Se=0;function Ce(t,e){const n=Ie(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Te(r.data,t),Te(e,null),Te(r.blueprint,null));const i=xe(t,e),o=t.injectorIndex;if(be(i)){const t=_e(i),n=we(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function Te(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Ie(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function xe(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return fe;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return fe}function je(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(W)&&(r=n[W]),null==r&&(r=n[W]=Se++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function ke(t,e,n){if(n&C.Optional)return t;pt(e,"NodeInjector")}function Ae(t,e,n,r){if(n&C.Optional&&void 0===r&&(r=null),0==(n&(C.Self|C.Host))){const i=t[9],o=I(void 0);try{return i?i.get(e,r,n&C.Optional):x(e,r,n&C.Optional)}finally{I(o)}}return ke(r,e,n)}function Ne(t,e,n,r=C.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(W)?t[W]:void 0;return"number"==typeof e?e>=0?255&e:Re:e}(n);if("function"==typeof o){if(!Yt(e,t,r))return r&C.Host?ke(i,n,r):Ae(e,n,r,i);try{const t=o();if(null!=t||r&C.Optional)return t;pt(n)}finally{ee()}}else if("number"==typeof o){let i=null,s=Ie(t,e),a=fe,u=r&C.Host?e[16][6]:null;for((-1===s||r&C.SkipSelf)&&(a=-1===s?xe(t,e):e[s+8],a!==fe&&Ve(r,!1)?(i=e[1],s=_e(a),e=we(a,e)):s=-1);-1!==s;){const t=e[1];if(Le(o,s,t.data)){const t=De(s,e,n,i,r,u);if(t!==Pe)return t}a=e[s+8],a!==fe&&Ve(r,e[1].data[s+8]===u)&&Le(o,s,e)?(i=t,s=_e(a),e=we(a,e)):s=-1}}}return Ae(e,n,r,i)}const Pe={};function Re(){return new Fe(Ft(),Mt())}function De(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=function(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&ct(t)&&t.type===n)return u}return null}(a,s,n,null==r?at(a)&&Ee:r!=s&&0!=(3&a.type),i&C.Host&&o===a);return null!==u?Me(e,s,u,a):Pe}function Me(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof de){const s=i;s.resolving&&function(t,e){throw new ht("200",`Circular dependency in DI detected for ${t}`)}(dt(o[n]));const a=Oe(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?I(s.injectImpl):null;Yt(t,r,C.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=mt(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&I(u),Oe(a),s.resolving=!1,ee()}}return i}function Le(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Ve(t,e){return!(t&C.Self||t&C.Host&&e)}class Fe{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return Ne(this._tNode,this._lView,t,void 0,e)}}function Ue(t){const e=t;if(g(t))return()=>{const t=Ue(p(e));return t?t():null};let n=lt(e);if(null===n){const t=_(e);n=t&&t.factory}return n||null}function qe(t){return j(()=>{const e=t.prototype.constructor,n=e[z]||Ue(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[z]||Ue(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function He(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(ge(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Ft(),t)}const Be="__parameters__";function ze(t,e,n){return j(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(Be)?t[Be]:Object.defineProperty(t,Be,{value:[]})[Be];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class We{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=v({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Ge=new We("AnalyzeForEntryComponents"),Ke=Function;function Qe(t,e){t.forEach(t=>Array.isArray(t)?Qe(t,e):e(t))}function $e(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Ye(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Xe(t,e,n){let r=Ze(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function Je(t,e){const n=Ze(t,e);if(n>=0)return t[1|n]}function Ze(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const tn={},en=/\n/gm,nn="__source",rn=u({provide:String,useValue:u});let on;function sn(t){const e=on;return on=t,e}function an(t,e=C.Default){if(void 0===on)throw new Error("inject() must be called from an injection context");return null===on?x(t,void 0,e):on.get(t,e&C.Optional?null:void 0,e)}function un(t,e=C.Default){return(T||an)(p(t),e)}function cn(t){const e=[];for(let n=0;n<t.length;n++){const r=p(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=C.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(un(t,n))}else e.push(un(r))}return e}function ln(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const hn=ln(ze("Inject",t=>({token:t})),-1),fn=ln(ze("Optional"),8),dn=ln(ze("SkipSelf"),4);class pn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function gn(t){return t instanceof pn?t.changingThisBreaksApplicationSecurity:t}const vn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,mn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var yn=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function bn(t){const e=function(){const t=Mt();return t&&t[12]}();return e?e.sanitize(yn.URL,t)||"":function(t,e){const n=function(t){return t instanceof pn&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}(t,"URL")?gn(t):(n=ft(t),(n=String(n)).match(vn)||n.match(mn)?n:"unsafe:"+n);var n}function _n(t){return t.ngDebugContext}function wn(t){return t.ngOriginalError}function En(t,...e){t.error(...e)}class On{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||En}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?_n(t)?_n(t):this._findContext(wn(t)):null}_findOriginalError(t){let e=wn(t);for(;e&&wn(e);)e=wn(e);return e}}function Sn(t,e){t.__ngContext__=e}const Cn=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(M))();function Tn(t){return t instanceof Function?t():t}var In=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function xn(t,e){return(void 0)(t,e)}function jn(t){const e=t[3];return ot(e)?e[3]:e}function kn(t){return Nn(t[13])}function An(t){return Nn(t[4])}function Nn(t){for(;null!==t&&!ot(t);)t=t[4];return t}function Pn(t,e,n,r,i){if(null!=r){let o,s=!1;ot(r)?o=r:it(r)&&(s=!0,r=r[0]);const a=St(r);0===t&&null!==n?null==i?Un(e,n,a):Fn(e,n,a,i||null,!0):1===t&&null!==n?Fn(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Hn(t,e);r&&function(t,e,n,r){Et(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==St(n)&&Pn(e,t,r,o,i);for(let s=rt;s<n.length;s++){const i=n[s];Kn(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Rn(t,e,n){return Et(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Dn(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Pt(i,-1)),n.splice(r,1)}function Mn(t,e){if(t.length<=rt)return;const n=rt+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Dn(o,r),e>0&&(t[n-1][4]=r[4]);const s=Ye(t,rt+e);Kn(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Ln(t,e){if(!(256&e[2])){const n=e[11];Et(n)&&n.destroyNode&&Kn(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Vn(t[1],t);for(;e;){let n=null;if(it(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)it(e)&&Vn(e[1],e),e=e[3];null===e&&(e=t),it(e)&&Vn(e[1],e),n=e&&e[4]}e=n}}(e)}}function Vn(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof de)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):St(e[t]),a=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?s.removeEventListener(n[o],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&Et(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&ot(e[3])){n!==e[3]&&Dn(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Fn(t,e,n,r,i){Et(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Un(t,e,n){Et(t)?t.appendChild(e,n):e.appendChild(n)}function qn(t,e,n,r,i){null!==r?Fn(t,e,n,r,i):Un(t,e,n)}function Hn(t,e){return Et(t)?t.parentNode(e):e.parentNode}function Bn(t,e,n,r){const i=function(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===A.None||e===A.Emulated)return null}return Tt(r,n)}(t,e.parent,n)}(t,r,e),o=e[11],s=function(t,e,n){return function(t,e,n){return 40&t.type?Tt(t,n):null}(t,0,n)}(r.parent||e[6],0,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)qn(o,i,n[a],s,!1);else qn(o,i,n,s,!1)}function zn(t,e){if(null!==e){const n=e.type;if(3&n)return Tt(e,t);if(4&n)return Wn(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return zn(t,n);{const n=t[e.index];return ot(n)?Wn(-1,n):St(n)}}if(32&n)return xn(e,t)()||St(t[e.index]);{const n=t[16],r=n[6],i=jn(n),o=r.projection[e.projection];return null!=o?zn(i,o):zn(t,e.next)}}return null}function Wn(t,e){const n=rt+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return zn(t,r)}return e[7]}function Gn(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&Sn(St(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Gn(t,e,n.child,r,i,o,!1),Pn(e,t,i,a,o);else if(32&u){const s=xn(n,r);let u;for(;u=s();)Pn(e,t,i,u,o);Pn(e,t,i,a,o)}else 16&u?Qn(t,e,r,n,i,o):Pn(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Kn(t,e,n,r,i,o){Gn(n,r,t.firstChild,e,i,o,!1)}function Qn(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Pn(e,t,i,a[u],o);else Gn(t,e,a,s[3],i,o,!0)}function $n(t,e,n){Et(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Yn(t,e,n){Et(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Xn(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const Jn="ng-template";function Zn(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Xn(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function tr(t){return 4===t.type&&t.value!==Jn}function er(t,e,n){return e===(4!==t.type||n?t.value:Jn)}function nr(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(ge(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!er(t,u,n)||""===u&&1===e.length){if(rr(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Zn(t.attrs,c,n)){if(rr(r))return!1;s=!0}continue}const l=ir(8&r?"class":u,i,tr(t),n);if(-1===l){if(rr(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==Xn(e,c,0)||2&r&&c!==t){if(rr(r))return!1;s=!0}}}}else{if(!s&&!rr(r)&&!rr(u))return!1;if(s&&rr(u))continue;s=!1,r=u|1&r}}return rr(r)||s}function rr(t){return 0==(1&t)}function ir(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function or(t,e,n=!1){for(let r=0;r<e.length;r++)if(nr(t,e[r],n))return!0;return!1}function sr(t,e){return t?":not("+e.trim()+")":e}function ar(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||rr(s)||(e+=sr(o,i),i=""),r=s,o=o||!rr(r);n++}return""!==i&&(e+=sr(o,i)),e}const ur={};function cr(t){lr(Lt(),Mt(),re()+t,Bt())}function lr(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&ae(e,r,n)}else{const r=t.preOrderHooks;null!==r&&ue(e,r,0,n)}ie(n)}function hr(t,e){return t<<17|e<<2}function fr(t){return t>>17&32767}function dr(t){return 2|t}function pr(t){return(131068&t)>>2}function gr(t,e){return-131069&t|e<<2}function vr(t){return 1|t}function mr(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];Qt(i),n.contentQueries(2,e[o],o)}}}function yr(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Nt(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function br(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=Ut(),s=Ht(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),Rt.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=Rt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return qt(o,!0),o}function _r(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function wr(t,e,n){Xt(e);try{const r=t.viewQuery;null!==r&&$r(1,r,n);const i=t.template;null!==i&&Sr(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&mr(t,e),t.staticViewQueries&&$r(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)zr(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,ne()}}function Er(t,e,n,r){const i=e[2];if(256==(256&i))return;Xt(e);const o=Bt();try{Nt(e),Rt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&Sr(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&ae(e,n,null)}else{const n=t.preOrderHooks;null!==n&&ue(e,n,0,null),ce(e,0)}if(function(t){for(let e=kn(t);null!==e;e=An(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Pt(r,1),n[2]|=1024}}}(e),function(t){for(let e=kn(t);null!==e;e=An(e))for(let t=rt;t<e.length;t++){const n=e[t],r=n[1];kt(n)&&Er(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&mr(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&ae(e,n)}else{const n=t.contentHooks;null!==n&&ue(e,n,1),ce(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)ie(~r);else{const i=r,o=n[++t],s=n[++t];Gt(o,i),s(2,e[i])}}}finally{ie(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Hr(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&$r(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&ae(e,n)}else{const n=t.viewHooks;null!==n&&ue(e,n,2),ce(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Pt(e[3],-1))}finally{ne()}}function Or(t,e,n,r){const i=e[10],o=!Bt(),s=4==(4&e[2]);try{o&&!s&&i.begin&&i.begin(),s&&wr(t,e,r),Er(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function Sr(t,e,n,r,i){const o=re();try{ie(-1),2&r&&e.length>nt&&lr(t,e,nt,Bt()),n(r,i)}finally{ie(o)}}function Cr(t,e,n){Dt()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Ce(n,e),Sn(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=ct(r);o&&Vr(e,n,r);const u=Me(e,t,a,n);Sn(u,e),null!==s&&Fr(0,a-i,u,r,0,s),o&&(xt(n.index,e)[8]=u)}}(t,e,n,Tt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Rt.lFrame.currentDirectiveIndex;try{ie(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];Kt(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Pr(r,i)}}finally{ie(-1),Kt(s)}}(t,e,n))}function Tr(t,e,n=Tt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function Ir(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=xr(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function xr(t,e,n,r,i,o,s,a,u,c){const l=nt+r,h=l+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:ur);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function jr(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function kr(t,e,n,r,i,o,s,a){const u=Tt(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(ti(t,n,c,r,i),at(e)&&function(t,e){const n=xt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,Et(o)?o.setProperty(u,r,i):ve(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Ar(t,e,n,r){let i=!1;if(Dt()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];or(n,s.selectors,!1)&&(i||(i=[]),je(Ce(n,e),t,s.type),ct(s)?(Rr(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,Mr(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=_r(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=me(n.mergedAttrs,c.hostAttrs),Lr(t,n,e,u,c),Dr(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||tr(e)?null:Ur(n,i);o.push(c),s=jr(n,u,s),a=jr(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new ht("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=me(n.mergedAttrs,n.attrs),i}function Nr(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function Pr(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Rr(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Dr(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;ct(e)&&(n[""]=t)}}function Mr(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Lr(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=lt(i.type)),s=new de(o,ct(i),null);t.blueprint[r]=s,n[r]=s,Nr(t,e,0,r,_r(t,n,i.hostVars,ur),i)}function Vr(t,e,n){const r=Tt(e,t),i=Ir(n),o=t[10],s=Wr(t,yr(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function Fr(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function Ur(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function qr(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Hr(t,e){const n=xt(e,t);if(kt(n)){const t=n[1];80&n[2]?Er(t,n,t.template,n[8]):n[5]>0&&Br(n)}}function Br(t){for(let n=kn(t);null!==n;n=An(n))for(let t=rt;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];Er(t,e,t.template,e[8])}else e[5]>0&&Br(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=xt(e[n],t);kt(r)&&r[5]>0&&Br(r)}}function zr(t,e){const n=xt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),wr(r,n,n[8])}function Wr(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Gr(t){for(;t;){t[2]|=64;const e=jn(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function Kr(t,e,n){const r=e[10];r.begin&&r.begin();try{Er(t,e,t.template,n)}catch(i){throw Zr(e,i),i}finally{r.end&&r.end()}}function Qr(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=jt(n),i=r[1];Or(i,r,i.template,n)}}(t[8])}function $r(t,e,n){Qt(0),e(t,n)}const Yr=(()=>Promise.resolve(null))();function Xr(t){return t[7]||(t[7]=[])}function Jr(t){return t.cleanup||(t.cleanup=[])}function Zr(t,e){const n=t[9],r=n?n.get(On,null):null;r&&r.handleError(e)}function ti(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function ei(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=h(i,t):2==o&&(r=h(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const ni=new We("INJECTOR",-1);class ri{get(t,e=tn){if(e===tn){const e=new Error(`NullInjectorError: No provider for ${l(t)}!`);throw e.name="NullInjectorError",e}return e}}const ii=new We("Set Injector scope."),oi={},si={},ai=[];let ui;function ci(){return void 0===ui&&(ui=new ri),ui}function li(t,e=null,n=null,r){return new hi(t,n,e||ci(),r)}class hi{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&Qe(e,n=>this.processProvider(n,t,e)),Qe([t],t=>this.processInjectorType(t,[],i)),this.records.set(ni,pi(void 0,this));const o=this.records.get(ii);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:l(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=tn,n=C.Default){this.assertNotDestroyed();const r=sn(this);try{if(!(n&C.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof We)&&y(t);e=n&&this.injectableDefInScope(n)?pi(fi(t),oi):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&C.Self?ci():this.parent).get(t,e=n&C.Optional&&e===tn?null:e)}catch(xx){if("NullInjectorError"===xx.name){if((xx.ngTempTokenPath=xx.ngTempTokenPath||[]).unshift(l(t)),r)throw xx;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[nn]&&i.unshift(e[nn]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=l(e);if(Array.isArray(e))i=e.map(l).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):l(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(en,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(xx,t,"R3InjectorError",this.source)}throw xx}finally{sn(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(l(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=p(t)))return!1;let r=_(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=_(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{Qe(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];Qe(r,t=>this.processProvider(t,n,r||ai))}}this.injectorDefTypes.add(o),this.records.set(o,pi(r.factory,oi));const a=r.providers;if(null!=a&&!s){const e=t;Qe(a,t=>this.processProvider(t,e,a))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=vi(t=p(t))?t:p(t&&t.provide);const i=function(t,e,n){return gi(t)?pi(void 0,t.useValue):pi(di(t),oi)}(t);if(vi(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=pi(void 0,oi,!0),e.factory=()=>cn(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===oi&&(e.value=si,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function fi(t){const e=y(t),n=null!==e?e.factory:lt(t);if(null!==n)return n;const r=_(t);if(null!==r)return r.factory;if(t instanceof We)throw new Error(`Token ${l(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${l(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[w]||t[O]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function di(t,e,n){let r;if(vi(t)){const e=p(t);return lt(e)||fi(e)}if(gi(t))r=()=>p(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...cn(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>un(p(t.useExisting));else{const e=p(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return lt(e)||fi(e);r=()=>new e(...cn(t.deps))}var i;return r}function pi(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function gi(t){return null!==t&&"object"==typeof t&&rn in t}function vi(t){return"function"==typeof t}const mi=function(t,e,n){return function(t,e=null,n=null,r){const i=li(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let yi=(()=>{class t{static create(t,e){return Array.isArray(t)?mi(t,e,""):mi(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=tn,t.NULL=new ri,t.\u0275prov=v({token:t,providedIn:"any",factory:()=>un(ni)}),t.__NG_ELEMENT_ID__=-1,t})();function bi(t,e){se(jt(t)[1],Ft())}function _i(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(ct(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=wi(t.inputs),e.declaredInputs=wi(t.declaredInputs),e.outputs=wi(t.outputs);const n=i.hostBindings;n&&Si(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&Ei(t,o),s&&Oi(t,s),c(t.inputs,i.inputs),c(t.declaredInputs,i.declaredInputs),c(t.outputs,i.outputs),ct(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===_i&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=me(i.hostAttrs,n=me(n,i.hostAttrs))}}(r)}function wi(t){return t===L?{}:t===V?[]:t}function Ei(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function Oi(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function Si(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let Ci=null;function Ti(){if(!Ci){const t=M.Symbol;if(t&&t.iterator)Ci=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Ci=n)}}}return Ci}function Ii(t){return!!xi(t)&&(Array.isArray(t)||!(t instanceof Map)&&Ti()in t)}function xi(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function ji(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function ki(t,e,n,r){const i=Mt();return ji(i,Wt(),e)&&(Lt(),function(t,e,n,r,i,o){const s=Tt(t,e);!function(t,e,n,r,i,o,s){if(null==o)Et(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?ft(o):s(o,r||"",i);Et(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(oe(),i,t,e,n,r)),ki}function Ai(t,e,n,r){return ji(t,Wt(),n)?e+ft(n)+r:ur}function Ni(t,e,n,r,i,o,s,a){const u=Mt(),c=Lt(),l=t+nt,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=br(e,t,4,s||null,At(c,a));Ar(e,n,l,At(c,u)),se(e,l);const h=l.tViews=xr(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];qt(h,!1);const f=u[11].createComment("");Bn(c,u,f,h),Sn(f,u),Wr(u,u[l]=qr(f,u,f,h)),ut(h)&&Cr(c,u,h),null!=s&&Tr(u,h,a)}function Pi(t,e=C.Default){const n=Mt();return null===n?un(t,e):Ne(Ft(),n,p(t),e)}function Ri(t,e,n){const r=Mt();return ji(r,Wt(),e)&&kr(Lt(),oe(),r,t,e,r[11],n,!1),Ri}function Di(t,e,n,r,i){const o=i?"class":"style";ti(t,n,e.inputs[o],o,r)}function Mi(t,e,n,r){const i=Mt(),o=Lt(),s=nt+t,a=i[11],u=i[s]=Rn(a,e,Rt.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=br(e,t,2,i,At(a,o));return Ar(e,n,u,At(a,s)),null!==u.attrs&&ei(u,u.attrs,!1),null!==u.mergedAttrs&&ei(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];qt(c,!0);const l=c.mergedAttrs;null!==l&&pe(a,u,l);const h=c.classes;null!==h&&Yn(a,u,h);const f=c.styles;null!==f&&$n(a,u,f),64!=(64&c.flags)&&Bn(o,i,u,c),0===Rt.lFrame.elementDepthCount&&Sn(u,i),Rt.lFrame.elementDepthCount++,ut(c)&&(Cr(o,i,c),function(t,e,n){if(st(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(o,c,i)),null!==r&&Tr(i,c)}function Li(){let t=Ft();Ht()?Rt.lFrame.isParent=!1:(t=t.parent,qt(t,!1));const e=t;Rt.lFrame.elementDepthCount--;const n=Lt();n.firstCreatePass&&(se(n,t),st(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Di(n,e,Mt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Di(n,e,Mt(),e.stylesWithoutHost,!1)}function Vi(t,e,n,r){Mi(t,e,n,r),Li()}function Fi(){return Mt()}function Ui(t){return!!t&&"function"==typeof t.then}const qi=function(t){return!!t&&"function"==typeof t.subscribe};function Hi(t,e,n=!1,r){const i=Mt(),o=Lt(),s=Ft();return function(t,e,n,r,i,o,s=!1,a){const u=ut(r),c=t.firstCreatePass&&Jr(t),l=Xr(e);let h=!0;if(3&r.type){const f=Tt(r,e),d=a?a(f):L,p=d.target||f,g=l.length,v=a?t=>a(St(t[r.index])).target:r.index;if(Et(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=zi(r,e,o,!1);const t=n.listen(d.name||p,i,o);l.push(o,t),c&&c.push(i,v,g,g+1)}}else o=zi(r,e,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,v,g,s)}else o=zi(r,e,o,!1);const f=r.outputs;let d;if(h&&null!==f&&(d=f[i])){const t=d.length;if(t)for(let n=0;n<t;n+=2){const t=e[d[n]][d[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),Hi}function Bi(t,e,n){try{return!1!==e(n)}catch(r){return Zr(t,r),!1}}function zi(t,e,n,r){return function i(o){if(o===Function)return n;const s=2&t.flags?xt(t.index,e):e;0==(32&e[2])&&Gr(s);let a=Bi(e,n,o),u=i.__ngNextListenerFn__;for(;u;)a=Bi(e,u,o)&&a,u=u.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function Wi(t=1){return function(t){return(Rt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Rt.lFrame.contextLView))[8]}(t)}function Gi(t,e,n){return Ki(t,"",e,"",n),Gi}function Ki(t,e,n,r,i){const o=Mt(),s=Ai(o,e,n,r);return s!==ur&&kr(Lt(),oe(),o,t,s,o[11],i,!1),Ki}const Qi=[];function $i(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?fr(o):pr(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];Yi(t[a],e)&&(u=!0,t[a+1]=r?vr(n):dr(n)),a=r?fr(n):pr(n)}u&&(t[n+1]=r?dr(o):vr(o))}function Yi(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&Ze(t,e)>=0}function Xi(t,e){return function(t,e,n,r){const i=Mt(),o=Lt(),s=function(t){const e=Rt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+2,n}();o.firstUpdatePass&&function(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[re()],s=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(16&t.flags)})(o)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=Rt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=e.residualClasses;if(null===i)0===e.classBindings&&(n=Zi(n=Ji(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=Ji(i,t,e,n,r),null===o){let n=function(t,e,n){const r=e.classBindings;if(0!==pr(r))return t[fr(r)]}(t,e);void 0!==n&&Array.isArray(n)&&(n=Ji(null,t,e,n[1],r),n=Zi(n,e.attrs,r),function(t,e,n,r){t[fr(e.classBindings)]=r}(t,e,0,n))}else o=function(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Zi(r,t[o].hostAttrs,true);return Zi(r,e.attrs,true)}(t,e)}return void 0!==o&&(e.residualClasses=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=e.classBindings,a=fr(s),u=pr(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||Ze(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=fr(t[a+1]);t[r+1]=hr(e,a),0!==e&&(t[e+1]=gr(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=hr(a,0),0!==a&&(t[a+1]=gr(t[a+1],r)),a=r;else t[r+1]=hr(u,0),0===a?a=r:t[u+1]=gr(t[u+1],r),u=r;l&&(t[r+1]=dr(t[r+1])),$i(t,c,r,!0),$i(t,c,r,!1),function(t,e,n,r,i){const o=t.residualClasses;null!=o&&"string"==typeof e&&Ze(o,e)>=0&&(n[r+1]=vr(n[r+1]))}(e,c,t,r),s=hr(a,u),e.classBindings=s}(i,o,e,n,s)}}(o,t,s,true),e!==ur&&ji(i,s,e)&&function(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];eo(1==(1&c)?to(u,e,n,i,pr(c),s):void 0)||(eo(o)||function(t){return 2==(2&t)}(c)&&(o=to(u,null,n,i,a,s)),function(t,e,n,r,i){const o=Et(t);i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r)}(r,0,Ct(re(),n),i,o))}(o,o.data[re()],i,i[11],t,i[s+1]=function(t,e){return null==t||"object"==typeof t&&(t=l(gn(t))),t}(e),true,s)}(t,e),Xi}function Ji(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=Zi(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Zi(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Xe(t,s,!!n||e[++o]))}return void 0===t?null:t}function to(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===ur&&(l=c?Qi:void 0);let h=c?Je(l,r):u===r?l:void 0;if(o&&!eo(h)&&(h=Je(e,r)),eo(h)&&(a=h,s))return a;const f=t[i+1];i=s?fr(f):pr(f)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=Je(t,r))}return a}function eo(t){return void 0!==t}function no(t,e=""){const n=Mt(),r=Lt(),i=t+nt,o=r.firstCreatePass?br(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return Et(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Bn(r,n,s,o),qt(o,!1)}function ro(t){return io("",t,""),ro}function io(t,e,n){const r=Mt(),i=Ai(r,t,e,n);return i!==ur&&function(t,e,n){const r=Ct(e,t);!function(t,e,n){Et(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}(r,re(),i),io}function oo(t,e,n){const r=Mt();return ji(r,Wt(),e)&&kr(Lt(),oe(),r,t,e,r[11],n,!0),oo}const so=void 0;var ao=["en",[["a","p"],["AM","PM"],so],[["AM","PM"],so,so],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],so,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],so,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",so,"{1} 'at' {0}",so],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let uo={};function co(t){return t in uo||(uo[t]=M.ng&&M.ng.common&&M.ng.common.locales&&M.ng.common.locales[t]),uo[t]}var lo=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const ho="en-US";let fo=ho;function po(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(fo=t.toLowerCase().replace(/_/g,"-"))}function go(t,e,n,r,i){if(t=p(t),Array.isArray(t))for(let o=0;o<t.length;o++)go(t[o],e,n,r,i);else{const o=Lt(),s=Mt();let a=vi(t)?t:p(t.provide),u=di(t);const c=Ft(),l=1048575&c.providerIndexes,h=c.directiveStart,f=c.providerIndexes>>20;if(vi(t)||!t.multi){const r=new de(u,i,Pi),d=yo(a,e,i?l:l+f,h);-1===d?(je(Ce(c,s),o,a),vo(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[d]=r,s[d]=r)}else{const d=yo(a,e,l+f,h),p=yo(a,e,l,l+f),g=d>=0&&n[d],v=p>=0&&n[p];if(i&&!v||!i&&!g){je(Ce(c,s),o,a);const l=function(t,e,n,r,i){const o=new de(t,n,Pi);return o.multi=[],o.index=e,o.componentProviders=0,mo(o,i,r&&!n),o}(i?_o:bo,n.length,i,r,u);!i&&v&&(n[p].providerFactory=l),vo(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else vo(o,t,d>-1?d:p,mo(n[i?p:d],u,!i&&r));!i&&r&&v&&n[p].componentProviders++}}}function vo(t,e,n,r){const i=vi(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function mo(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function yo(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function bo(t,e,n,r){return wo(this.multi,[])}function _o(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=Me(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),wo(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],wo(i,o);return o}function wo(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function Eo(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Lt();if(r.firstCreatePass){const i=ct(t);go(n,r.data,r.blueprint,i,!0),go(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class Oo{}class So{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${l(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let Co=(()=>{class t{}return t.NULL=new So,t})();function To(...t){}function Io(t,e){return new jo(Tt(t,e))}const xo=function(){return Io(Ft(),Mt())};let jo=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=xo,t})();class ko{}let Ao=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>No(),t})();const No=function(){const t=Mt(),e=xt(Ft().index,t);return function(t){return t[11]}(it(e)?e:t)};let Po=(()=>{class t{}return t.\u0275prov=v({token:t,providedIn:"root",factory:()=>null}),t})();class Ro{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Do=new Ro("11.1.2");class Mo{constructor(){}supports(t){return Ii(t)}create(t){return new Vo(t)}}const Lo=(t,e)=>e;class Vo{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Lo}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<Ho(n,r,i)?e:n,s=Ho(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Ii(t))throw new Error(`Error trying to diff '${l(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Ti()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new Fo(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new qo),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new qo),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Fo{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Uo{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class qo{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Uo,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Ho(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Bo{constructor(){}supports(t){return t instanceof Map||xi(t)}create(){return new zo}}class zo{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||xi(t)))throw new Error(`Error trying to diff '${l(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Wo(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Wo{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Go(){return new Ko([new Mo])}let Ko=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Go()),deps:[[t,new dn,new fn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=v({token:t,providedIn:"root",factory:Go}),t})();function Qo(){return new $o([new Bo])}let $o=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Qo()),deps:[[t,new dn,new fn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=v({token:t,providedIn:"root",factory:Qo}),t})();function Yo(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(St(o)),ot(o))for(let t=rt;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&Yo(e[1],e,n,r)}const s=n.type;if(8&s)Yo(t,e,n.child,r);else if(32&s){const t=xn(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=e[16],i=t[6].projection[n.projection];if(Array.isArray(i))r.push(...i);else{const e=jn(t);Yo(e[1],e,i,r,!0)}}n=i?n.projectionNext:n.next}return r}class Xo{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return Yo(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(ot(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Mn(t,n),Ye(e,n))}this._attachedToViewContainer=!1}Ln(this._lView[1],this._lView)}onDestroy(t){!function(t,e,n,r){const i=Xr(e);i.push(r)}(0,this._lView,0,t)}markForCheck(){Gr(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Kr(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){zt(!0);try{Kr(t,e,n)}finally{zt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,Kn(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Jo extends Xo{constructor(t){super(t),this._view=t}detectChanges(){Qr(this._view)}checkNoChanges(){!function(t){zt(!0);try{Qr(t)}finally{zt(!1)}}(this._view)}get context(){return null}}const Zo=function(t=!1){return function(t,e,n){if(!n&&at(t)){const n=xt(t.index,e);return new Xo(n,n)}return 47&t.type?new Xo(e[16],e):null}(Ft(),Mt(),t)};let ts=(()=>{class t{}return t.__NG_ELEMENT_ID__=Zo,t.__ChangeDetectorRef__=!0,t})();const es=[new Bo],ns=new Ko([new Mo]),rs=new $o(es),is=function(){return t=Ft(),e=Mt(),4&t.type?new as(e,t,Io(t,e)):null;var t,e};let os=(()=>{class t{}return t.__NG_ELEMENT_ID__=is,t})();const ss=os,as=class extends ss{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=yr(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),wr(e,n,t),new Xo(n)}};class us{}class cs{}const ls=function(){return function(t,e){let n;const r=e[t.index];if(ot(r))n=r;else{let i;if(8&t.type)i=St(r);else{const n=e[11];i=n.createComment("");const r=Tt(t,e);Fn(n,Hn(n,r),i,function(t,e){return Et(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=qr(r,e,i,t),Wr(e,n)}return new ds(n,t,e)}(Ft(),Mt())};let hs=(()=>{class t{}return t.__NG_ELEMENT_ID__=ls,t})();const fs=hs,ds=class extends fs{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Io(this._hostTNode,this._hostLView)}get injector(){return new Fe(this._hostTNode,this._hostLView)}get parentInjector(){const t=xe(this._hostTNode,this._hostLView);if(be(t)){const e=we(t,this._hostLView),n=_e(t);return new Fe(e[1].data[n+8],e)}return new Fe(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=ps(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-rt}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(us,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(ot(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new ds(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=rt+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-rt?(e[4]=n[i],$e(n,rt+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=Wn(i,o),a=n[11],u=Hn(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Kn(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(),$e(gs(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=ps(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Mn(this._lContainer,e);n&&(Ye(gs(this._lContainer),e),Ln(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Mn(this._lContainer,e);return n&&null!=Ye(gs(this._lContainer),e)?new Xo(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function ps(t){return t[8]}function gs(t){return t[8]||(t[8]=[])}const vs={};class ms extends Co{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=tt(t);return new _s(e,this.ngModule)}}function ys(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const bs=new We("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Cn});class _s extends Oo{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(ar).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return ys(this.componentDef.inputs)}get outputs(){return ys(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,vs,i);return o!==vs||r===vs?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(ko,Ot),s=i.get(Po,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(Et(t))return t.selectRootElement(e,n===A.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Rn(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:Cn,clean:Yr,playerHandler:null,flags:0},f=xr(0,null,null,1,0,null,null,null,null,null),d=yr(null,f,h,l,null,null,o,a,s,i);let p,g;Xt(d);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=br(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(ei(a,u,!0),null!==t&&(pe(i,t,u),null!==a.classes&&Yn(i,t,a.classes),null!==a.styles&&$n(i,t,a.styles)));const c=r.createRenderer(t,e),l=yr(n,Ir(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(je(Ce(a,n),s,e.type),Rr(s,a),Mr(a,n.length,1)),Wr(n,l),n[20]=l}(c,this.componentDef,d,o,a);if(c)if(n)pe(a,c,["ng-version",Do.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!rr(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&pe(a,c,t),e&&e.length>0&&Yn(a,c,e.join(" "))}if(g=It(f,nt),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Ft();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Lr(t,r,e,_r(t,e,1,null),n));const i=Me(e,t,r.directiveStart,r);Sn(i,e);const o=Tt(r,e);return o&&Sn(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=Ft();e.contentQueries(1,s,t.directiveStart)}const a=Ft();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(ie(a.index),Nr(n[1],a,0,a.directiveStart,a.directiveEnd,e),Pr(e,s)),s}(t,this.componentDef,d,h,[bi]),wr(f,d,null)}finally{ne()}return new ws(this.componentType,p,Io(g,d),d,g)}}class ws extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new Jo(r),this.componentType=t}get injector(){return new Fe(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const Es=new Map;class Os extends us{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new ms(this);const n=et(t),r=t[B]||null;r&&po(r),this._bootstrapComponents=Tn(n.bootstrap),this._r3Injector=li(t,e,[{provide:us,useValue:this},{provide:Co,useValue:this.componentFactoryResolver}],l(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=yi.THROW_IF_NOT_FOUND,n=C.Default){return t===yi||t===us||t===ni?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Ss extends cs{constructor(t){super(),this.moduleType=t,null!==et(t)&&function(t){const e=new Set;!function t(n){const r=et(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${l(e)} vs ${l(e.name)}`)}(i,Es.get(i),n),Es.set(i,n));const o=Tn(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new Os(this.moduleType,t)}}const Cs=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,o=t=>null,s=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(o=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(o=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const a=super.subscribe(r,o,s);return t instanceof i.a&&t.add(a),a}},Ts=new We("Application Initializer");let Is=(()=>{class t{constructor(t){this.appInits=t,this.resolve=To,this.reject=To,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Ui(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(un(Ts,8))},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})();const xs=new We("AppId"),js={provide:xs,useFactory:function(){return`${ks()}${ks()}${ks()}`},deps:[]};function ks(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const As=new We("Platform Initializer"),Ns=new We("Platform ID"),Ps=new We("appBootstrapListener");let Rs=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})();const Ds=new We("LocaleId"),Ms=new We("DefaultCurrencyCode");class Ls{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const Vs=function(t){return new Ss(t)},Fs=Vs,Us=function(t){return Promise.resolve(Vs(t))},qs=function(t){const e=Vs(t),n=Tn(et(t).declarations).reduce((t,e)=>{const n=tt(e);return n&&t.push(new _s(n)),t},[]);return new Ls(e,n)},Hs=qs,Bs=function(t){return Promise.resolve(qs(t))};let zs=(()=>{class t{constructor(){this.compileModuleSync=Fs,this.compileModuleAsync=Us,this.compileModuleAndAllComponentsSync=Hs,this.compileModuleAndAllComponentsAsync=Bs}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})();const Ws=(()=>Promise.resolve(0))();function Gs(t){"undefined"==typeof Zone?Ws.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Ks{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Cs(!1),this.onMicrotaskEmpty=new Cs(!1),this.onStable=new Cs(!1),this.onError=new Cs(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=M.requestAnimationFrame,e=M.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(M,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Ys(t),$s(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Ys(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return Xs(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),Js(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return Xs(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),Js(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,Ys(t),$s(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ks.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ks.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,Qs,To,To);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const Qs={};function $s(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Ys(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Xs(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Js(t){t._nesting--,$s(t)}class Zs{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Cs,this.onMicrotaskEmpty=new Cs,this.onStable=new Cs,this.onError=new Cs}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let ta=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ks.assertNotInAngularZone(),Gs(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Gs(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(un(Ks))},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})(),ea=(()=>{class t{constructor(){this._applications=new Map,ia.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return ia.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})();class na{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}let ra,ia=new na,oa=!0,sa=!1;function aa(){return sa=!0,oa}const ua=new We("AllowMultipleToken");class ca{constructor(t,e){this.name=t,this.token=e}}function la(t,e,n=[]){const r=`Platform: ${e}`,i=new We(r);return(e=[])=>{let o=ha();if(!o||o.injector.get(ua,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:ii,useValue:"platform"});!function(t){if(ra&&!ra.destroyed&&!ra.injector.get(ua,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");ra=t.get(fa);const e=t.get(As,null);e&&e.forEach(t=>t())}(yi.create({providers:t,name:r}))}return function(t){const e=ha();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function ha(){return ra&&!ra.destroyed?ra:null}let fa=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new Zs:("zone.js"===t?void 0:t)||new Ks({enableLongStackTrace:aa(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:Ks,useValue:n}];return n.run(()=>{const e=yi.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(On,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{ga(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return Ui(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(xx){throw e.runOutsideAngular(()=>t.handleError(xx)),xx}}(o,n,()=>{const t=i.injector.get(Is);return t.runInitializers(),t.donePromise.then(()=>(po(i.injector.get(Ds,ho)||ho),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=da({},e);return function(t,e,n){const r=new Ss(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(pa);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${l(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(un(yi))},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})();function da(t,e){return Array.isArray(e)?e.reduce(da,t):Object.assign(Object.assign({},t),e)}let pa=(()=>{class t{constructor(t,e,n,r,i,u){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=u,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const c=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),l=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Ks.assertNotInAngularZone(),Gs(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Ks.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(c,l.pipe(Object(a.a)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Oo?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(us),i=n.create(yi.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(ta,null),a=s&&i.injector.get(ea);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),ga(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),aa()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(xx){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(xx))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;ga(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Ps,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(un(Ks),un(Rs),un(yi),un(On),un(Co),un(Is))},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})();function ga(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class va{}class ma{}const ya={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let ba=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||ya}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>_a(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>_a(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(un(zs),un(ma,8))},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})();function _a(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const wa=la(null,"core",[{provide:Ns,useValue:"unknown"},{provide:fa,deps:[yi]},{provide:ea,deps:[]},{provide:Rs,deps:[]}]),Ea=[{provide:pa,useClass:pa,deps:[Ks,Rs,yi,On,Co,Is]},{provide:bs,deps:[Ks],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Is,useClass:Is,deps:[[new fn,Ts]]},{provide:zs,useClass:zs,deps:[]},js,{provide:Ko,useFactory:function(){return ns},deps:[]},{provide:$o,useFactory:function(){return rs},deps:[]},{provide:Ds,useFactory:function(t){return po(t=t||"undefined"!=typeof $localize&&$localize.locale||ho),t},deps:[[new hn(Ds),new fn,new dn]]},{provide:Ms,useValue:"USD"}];let Oa=(()=>{class t{constructor(t){}}return t.\u0275mod=X({type:t}),t.\u0275inj=m({factory:function(e){return new(e||t)(un(pa))},providers:Ea}),t})(),Sa=null;function Ca(){return Sa}const Ta=new We("DocumentToken");let Ia=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=v({factory:xa,token:t,providedIn:"platform"}),t})();function xa(){return un(ka)}const ja=new We("Location Initialized");let ka=(()=>{class t extends Ia{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=Ca().getLocation(),this._history=Ca().getHistory()}getBaseHrefFromDOM(){return Ca().getBaseHref(this._doc)}onPopState(t){Ca().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){Ca().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){Aa()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){Aa()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(un(Ta))},t.\u0275prov=v({factory:Na,token:t,providedIn:"platform"}),t})();function Aa(){return!!window.history.pushState}function Na(){return new ka(un(Ta))}function Pa(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function Ra(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function Da(t){return t&&"?"!==t[0]?"?"+t:t}let Ma=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=v({factory:La,token:t,providedIn:"root"}),t})();function La(t){const e=un(Ta).location;return new Fa(un(Ia),e&&e.origin||"")}const Va=new We("appBaseHref");let Fa=(()=>{class t extends Ma{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Pa(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+Da(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+Da(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+Da(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(un(Ia),un(Va,8))},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})(),Ua=(()=>{class t extends Ma{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=Pa(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+Da(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+Da(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(un(Ia),un(Va,8))},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})(),qa=(()=>{class t{constructor(t,e){this._subject=new Cs,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=Ra(Ba(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+Da(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,Ba(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Da(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Da(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(un(Ma),un(Ia))},t.normalizeQueryParams=Da,t.joinWithSlash=Pa,t.stripTrailingSlash=Ra,t.\u0275prov=v({factory:Ha,token:t,providedIn:"root"}),t})();function Ha(){return new qa(un(Ma),un(Ia))}function Ba(t){return t.replace(/\/index.html$/,"")}var za=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});class Wa{}let Ga=(()=>{class t extends Wa{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(function(t){return function(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=co(e);if(n)return n;const r=e.split("-")[0];if(n=co(r),n)return n;if("en"===r)return ao;throw new Error(`Missing locale data for the locale "${t}".`)}(t)[lo.PluralCase]}(e||this.locale)(t)){case za.Zero:return"zero";case za.One:return"one";case za.Two:return"two";case za.Few:return"few";case za.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(un(Ds))},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})();function Ka(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}class Qa{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let $a=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new Qa(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new Ya(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new Ya(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(Pi(hs),Pi(os),Pi(Ko))},t.\u0275dir=Z({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class Ya{constructor(t,e){this.record=t,this.view=e}}let Xa=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new Ja,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Za("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Za("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(Pi(hs),Pi(os))},t.\u0275dir=Z({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class Ja{constructor(){this.$implicit=null,this.ngIf=null}}function Za(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${l(e)}'.`)}class tu{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let eu=(()=>{class t{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const e=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||e,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),e}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let e=0;e<this._defaultViews.length;e++)this._defaultViews[e].enforceState(t)}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Z({type:t,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),t})(),nu=(()=>{class t{constructor(t,e,n){this.ngSwitch=n,n._addCase(),this._view=new tu(t,e)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return t.\u0275fac=function(e){return new(e||t)(Pi(hs),Pi(os),Pi(eu,1))},t.\u0275dir=Z({type:t,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),t})(),ru=(()=>{class t{}return t.\u0275mod=X({type:t}),t.\u0275inj=m({factory:function(e){return new(e||t)},providers:[{provide:Wa,useClass:Ga}]}),t})(),iu=(()=>{class t{}return t.\u0275prov=v({token:t,providedIn:"root",factory:()=>new ou(un(Ta),window)}),t})();class ou{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){var e;if(!this.supportsScrolling())return;const n=null!==(e=this.document.getElementById(t))&&void 0!==e?e:this.document.getElementsByName(t)[0];void 0!==n&&(this.scrollToElement(n),this.attemptFocus(n))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=su(this.window.history)||su(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function su(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class au extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new au,Sa||(Sa=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=cu||(cu=document.querySelector("base"),cu)?cu.getAttribute("href"):null;return null==e?null:(n=e,uu||(uu=document.createElement("a")),uu.setAttribute("href",n),"/"===uu.pathname.charAt(0)?uu.pathname:"/"+uu.pathname);var n}resetBaseElement(){cu=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return Ka(document.cookie,t)}}let uu,cu=null;const lu=new We("TRANSITION_ID"),hu=[{provide:Ts,useFactory:function(t,e,n){return()=>{n.get(Is).donePromise.then(()=>{const n=Ca();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[lu,Ta,yi],multi:!0}];class fu{static init(){var t;t=new fu,ia=t}addToWindow(t){M.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},M.getAllAngularTestabilities=()=>t.getAllTestabilities(),M.getAllAngularRootElements=()=>t.getAllRootElements(),M.frameworkStabilizers||(M.frameworkStabilizers=[]),M.frameworkStabilizers.push(t=>{const e=M.getAllAngularTestabilities();let n=e.length,r=!1;const i=function(e){r=r||e,n--,0==n&&t(r)};e.forEach(function(t){t.whenStable(i)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?Ca().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const du=new We("EventManagerPlugins");let pu=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(un(du),un(Ks))},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})();class gu{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=Ca().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let vu=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})(),mu=(()=>{class t extends vu{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>Ca().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(un(Ta))},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})();const yu={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},bu=/%COMP%/g;function _u(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?_u(t,i,n):(i=i.replace(bu,t),n.push(i))}return n}function wu(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let Eu=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new Ou(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case A.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new Su(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case A.ShadowDom:return new Cu(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=_u(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(un(pu),un(mu),un(xs))},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})();class Ou{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(yu[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=yu[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=yu[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&(In.DashCase|In.Important)?t.style.setProperty(e,n,r&In.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&In.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,wu(n)):this.eventManager.addEventListener(t,e,wu(n))}}class Su extends Ou{constructor(t,e,n,r){super(t),this.component=n;const i=_u(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(bu,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(bu,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class Cu extends Ou{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=_u(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Tu=(()=>{class t extends gu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(un(Ta))},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})();const Iu=["alt","control","meta","shift"],xu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ju={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ku={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let Au=(()=>{class t extends gu{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),o=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ca().onAndCancel(e,i.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(Iu.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&ju.hasOwnProperty(e)&&(e=ju[e]))}return xu[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),Iu.forEach(r=>{r!=n&&(0,ku[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(un(Ta))},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})();const Nu=la(wa,"browser",[{provide:Ns,useValue:"browser"},{provide:As,useValue:function(){au.makeCurrent(),fu.init()},multi:!0},{provide:Ta,useFactory:function(){return function(t){wt=t}(document),document},deps:[]}]),Pu=[[],{provide:ii,useValue:"root"},{provide:On,useFactory:function(){return new On},deps:[]},{provide:du,useClass:Tu,multi:!0,deps:[Ta,Ks,Ns]},{provide:du,useClass:Au,multi:!0,deps:[Ta]},[],{provide:Eu,useClass:Eu,deps:[pu,mu,xs]},{provide:ko,useExisting:Eu},{provide:vu,useExisting:mu},{provide:mu,useClass:mu,deps:[Ta]},{provide:ta,useClass:ta,deps:[Ks]},{provide:pu,useClass:pu,deps:[du,Ks]},[]];let Ru=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:xs,useValue:e.appId},{provide:lu,useExisting:xs},hu]}}}return t.\u0275mod=X({type:t}),t.\u0275inj=m({factory:function(e){return new(e||t)(un(t,12))},providers:Pu,imports:[ru,Oa]}),t})();"undefined"!=typeof window&&window;var Du=n("Cfvw"),Mu=n("LRne"),Lu=n("2Vo4"),Vu=n("itXk"),Fu=n("sVev"),Uu=n("GyhO"),qu=n("NXyV"),Hu=n("EY2u"),Bu=n("lJxs"),zu=n("eIep"),Wu=n("IzEk"),Gu=n("JX91"),Ku=n("Kqap"),Qu=n("pLZG"),$u=n("JIr8"),Yu=n("bOdf"),Xu=n("NJ9Y"),Ju=n("SxV6"),Zu=n("5+tZ"),tc=n("vkgz"),ec=n("BFxc"),nc=n("nYR2"),rc=n("bHdf");class ic{constructor(t,e){this.id=t,this.url=e}}class oc extends ic{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class sc extends ic{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ac extends ic{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class uc extends ic{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class cc extends ic{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class lc extends ic{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hc extends ic{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class fc extends ic{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class dc extends ic{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pc{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class gc{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class vc{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mc{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yc{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bc{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _c{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const wc="primary";class Ec{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Oc(t){return new Ec(t)}function Sc(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function Cc(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Tc(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!Ic(t[i],e[i]))return!1;return!0}function Ic(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function xc(t){return Array.prototype.concat.apply([],t)}function jc(t){return t.length>0?t[t.length-1]:null}function kc(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Ac(t){return qi(t)?t:Ui(t)?Object(Du.a)(Promise.resolve(t)):Object(Mu.a)(t)}function Nc(t,e,n){return n?function(t,e){return Tc(t,e)}(t.queryParams,e.queryParams)&&Pc(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Ic(t[n],e[n]))}(t.queryParams,e.queryParams)&&Rc(t.root,e.root)}function Pc(t,e){if(!Fc(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Pc(t.children[n],e.children[n]))return!1}return!0}function Rc(t,e){return Dc(t,e,e.segments)}function Dc(t,e,n){if(t.segments.length>n.length)return!!Fc(t.segments.slice(0,n.length),n)&&!e.hasChildren();if(t.segments.length===n.length){if(!Fc(t.segments,n))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Rc(t.children[n],e.children[n]))return!1}return!0}{const r=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!Fc(t.segments,r)&&!!t.children.primary&&Dc(t.children.primary,e,i)}}class Mc{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Oc(this.queryParams)),this._queryParamMap}toString(){return Hc.serialize(this)}}class Lc{constructor(t,e){this.segments=t,this.children=e,this.parent=null,kc(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Bc(this)}}class Vc{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Oc(this.parameters)),this._parameterMap}toString(){return Yc(this)}}function Fc(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class Uc{}class qc{parse(t){const e=new el(t);return new Mc(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${zc(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${Gc(e)}=${Gc(t)}`).join("&"):`${Gc(e)}=${Gc(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const Hc=new qc;function Bc(t){return t.segments.map(t=>Yc(t)).join("/")}function zc(t,e){if(!t.hasChildren())return Bc(t);if(e){const e=t.children.primary?zc(t.children.primary,!1):"",n=[];return kc(t.children,(t,e)=>{e!==wc&&n.push(`${e}:${zc(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return kc(t.children,(t,r)=>{r===wc&&(n=n.concat(e(t,r)))}),kc(t.children,(t,r)=>{r!==wc&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===wc?[zc(t.children.primary,!1)]:[`${n}:${zc(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${Bc(t)}/${e[0]}`:`${Bc(t)}/(${e.join("//")})`}}function Wc(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Gc(t){return Wc(t).replace(/%3B/gi,";")}function Kc(t){return Wc(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Qc(t){return decodeURIComponent(t)}function $c(t){return Qc(t.replace(/\+/g,"%20"))}function Yc(t){return`${Kc(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${Kc(t)}=${Kc(e[t])}`).join("")}`;var e}const Xc=/^[^\/()?;=#]+/;function Jc(t){const e=t.match(Xc);return e?e[0]:""}const Zc=/^[^=?&#]+/,tl=/^[^?&#]+/;class el{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Lc([],{}):new Lc([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new Lc(t,e)),n}parseSegment(){const t=Jc(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Vc(Qc(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Jc(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=Jc(this.remaining);t&&(n=t,this.capture(n))}t[Qc(e)]=Qc(n)}parseQueryParam(t){const e=function(t){const e=t.match(Zc);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(tl);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=$c(e),i=$c(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Jc(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=wc);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new Lc([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class nl{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=rl(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=rl(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=il(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return il(t,this._root).map(t=>t.value)}}function rl(t,e){if(t===e.value)return e;for(const n of e.children){const e=rl(t,n);if(e)return e}return null}function il(t,e){if(t===e.value)return[e];for(const n of e.children){const r=il(t,n);if(r.length)return r.unshift(e),r}return[]}class ol{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function sl(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class al extends nl{constructor(t,e){super(t),this.snapshot=e,dl(this,t)}toString(){return this.snapshot.toString()}}function ul(t,e){const n=function(t,e){const n=new hl([],{},{},"",{},wc,e,null,t.root,-1,{});return new fl("",new ol(n,[]))}(t,e),r=new Lu.a([new Vc("",{})]),i=new Lu.a({}),o=new Lu.a({}),s=new Lu.a({}),a=new Lu.a(""),u=new cl(r,i,s,a,o,wc,e,n.root);return u.snapshot=n.root,new al(new ol(u,[]),n)}class cl{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(Bu.a)(t=>Oc(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(Bu.a)(t=>Oc(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ll(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class hl{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Oc(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Oc(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class fl extends nl{constructor(t,e){super(e),this.url=t,dl(this,e)}toString(){return pl(this._root)}}function dl(t,e){e.value._routerState=t,e.children.forEach(e=>dl(t,e))}function pl(t){const e=t.children.length>0?` { ${t.children.map(pl).join(", ")} } `:"";return`${t.value}${e}`}function gl(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Tc(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Tc(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Tc(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Tc(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function vl(t,e){return Tc(t.params,e.params)&&function(t,e){return Fc(t,e)&&t.every((t,n)=>Tc(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||vl(t.parent,e.parent))}function ml(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return ml(t,e,r);return ml(t,e)})}(t,e,n);return new ol(r,i)}{const n=t.retrieve(e.value);if(n){const t=n.route;return yl(e,t),t}{const n=new cl(new Lu.a((r=e.value).url),new Lu.a(r.params),new Lu.a(r.queryParams),new Lu.a(r.fragment),new Lu.a(r.data),r.outlet,r.component,r),i=e.children.map(e=>ml(t,e));return new ol(n,i)}}var r}function yl(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)yl(t.children[n],e.children[n])}function bl(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function _l(t){return"object"==typeof t&&null!=t&&t.outlets}function wl(t,e,n,r,i){let o={};return r&&kc(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new Mc(n.root===t?e:El(n.root,t,e),o,i)}function El(t,e,n){const r={};return kc(t.children,(t,i)=>{r[i]=t===e?n:El(t,e,n)}),new Lc(t.segments,r)}class Ol{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&bl(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(_l);if(r&&r!==jc(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Sl{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function Cl(t,e,n){if(t||(t=new Lc([],{})),0===t.segments.length&&t.hasChildren())return Tl(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(_l(s))break;const a=`${s}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!kl(a,u,e))return o;r+=2}else{if(!kl(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new Lc(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new Lc(t.segments.slice(r.pathIndex),t.children),Tl(e,0,i)}return r.match&&0===i.length?new Lc(t.segments,{}):r.match&&!t.hasChildren()?Il(t,e,n):r.match?Tl(t,0,i):Il(t,e,n)}function Tl(t,e,n){if(0===n.length)return new Lc(t.segments,{});{const r=function(t){return _l(t[0])?t[0].outlets:{[wc]:t}}(n),i={};return kc(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=Cl(t.children[r],e,n))}),kc(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new Lc(t.segments,i)}}function Il(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(_l(o)){const t=xl(o.outlets);return new Lc(r,t)}if(0===i&&bl(n[0])){r.push(new Vc(t.segments[e].path,jl(n[0]))),i++;continue}const s=_l(o)?o.outlets.primary:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&bl(a)?(r.push(new Vc(s,jl(a))),i+=2):(r.push(new Vc(s,{})),i++)}return new Lc(r,{})}function xl(t){const e={};return kc(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=Il(new Lc([],{}),0,t))}),e}function jl(t){const e={};return kc(t,(t,n)=>e[n]=`${t}`),e}function kl(t,e,n){return t==n.path&&Tc(e,n.parameters)}class Al{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),gl(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=sl(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),kc(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=sl(t);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}activateChildRoutes(t,e,n){const r=sl(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new bc(t.value.snapshot))}),t.children.length&&this.forwardEvent(new mc(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(gl(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),Nl(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function Nl(t){gl(t.value),t.children.forEach(Nl)}class Pl{constructor(t,e){this.routes=t,this.module=e}}function Rl(t){return"function"==typeof t}function Dl(t){return t instanceof Mc}const Ml=Symbol("INITIAL_VALUE");function Ll(){return Object(zu.a)(t=>Object(Vu.b)(t.map(t=>t.pipe(Object(Wu.a)(1),Object(Gu.a)(Ml)))).pipe(Object(Ku.a)((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==Ml)return t;if(r===Ml&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||Dl(r))return r}return t},t)},Ml),Object(Qu.a)(t=>t!==Ml),Object(Bu.a)(t=>Dl(t)?t:!0===t),Object(Wu.a)(1)))}let Vl=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=K({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&Vi(0,"router-outlet")},directives:function(){return[Nh]},encapsulation:2}),t})();function Fl(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];Ul(r,ql(e,r))}}function Ul(t,e){t.children&&Fl(t.children,e)}function ql(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function Hl(t){const e=t.children&&t.children.map(Hl),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==wc&&(n.component=Vl),n}function Bl(t){return t.outlet||wc}function zl(t,e){const n=t.filter(t=>Bl(t)===e);return n.push(...t.filter(t=>Bl(t)!==e)),n}const Wl={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Gl(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},Wl):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Cc)(n,t,e);if(!i)return Object.assign({},Wl);const o={};kc(i.posParams,(t,e)=>{o[e]=t.path});const s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function Kl(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>Ql(t,e,n)&&Bl(n)!==wc)}(t,n,r)){const i=new Lc(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&Bl(o)!==wc){const n=new Lc([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[Bl(o)]=n}return i}(t,e,r,new Lc(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>Ql(t,e,n))}(t,n,r)){const o=new Lc(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(Ql(t,n,a)&&!i[Bl(a)]){const n=new Lc([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[Bl(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new Lc(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function Ql(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function $l(t,e,n,r){return!!(Bl(t)===r||r!==wc&&Ql(e,n,t))&&("**"===t.path||Gl(e,t,n).matched)}function Yl(t,e,n){return 0===e.length&&!t.children[n]}class Xl{constructor(t){this.segmentGroup=t||null}}class Jl{constructor(t){this.urlTree=t}}function Zl(t){return new o.a(e=>e.error(new Xl(t)))}function th(t){return new o.a(e=>e.error(new Jl(t)))}function eh(t){return new o.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class nh{constructor(t,e,n,r,i){this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=i,this.allowRedirects=!0,this.ngModule=t.get(us)}apply(){const t=Kl(this.urlTree.root,[],[],this.config).segmentGroup,e=new Lc(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,wc).pipe(Object(Bu.a)(t=>this.createUrlTree(rh(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Object($u.a)(t=>{if(t instanceof Jl)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof Xl)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,wc).pipe(Object(Bu.a)(e=>this.createUrlTree(rh(e),t.queryParams,t.fragment))).pipe(Object($u.a)(t=>{if(t instanceof Xl)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new Lc([],{[wc]:t}):t;return new Mc(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(Bu.a)(t=>new Lc([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return Object(Du.a)(r).pipe(Object(Yu.a)(r=>{const i=n.children[r],o=zl(e,r);return this.expandSegmentGroup(t,o,i,r).pipe(Object(Bu.a)(t=>({segment:t,outlet:r})))}),Object(Ku.a)((t,e)=>(t[e.outlet]=e.segment,t),{}),Object(Xu.a)())}expandSegment(t,e,n,r,i,o){return Object(Du.a)(n).pipe(Object(Yu.a)(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(Object($u.a)(t=>{if(t instanceof Xl)return Object(Mu.a)(null);throw t}))),Object(Ju.a)(t=>!!t),Object($u.a)((t,n)=>{if(t instanceof Fu.a||"EmptyError"===t.name){if(Yl(e,r,i))return Object(Mu.a)(new Lc([],{}));throw new Xl(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return $l(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):Zl(e):Zl(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?th(i):this.lineralizeSegments(n,i).pipe(Object(Zu.b)(n=>{const i=new Lc(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=Gl(e,r,i);if(!s)return Zl(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?th(l):this.lineralizeSegments(r,l).pipe(Object(Zu.b)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(Object(Bu.a)(t=>(n._loadedConfig=t,new Lc(r,{})))):Object(Mu.a)(new Lc(r,{}));const{matched:o,consumedSegments:s,lastChild:a}=Gl(e,n,r);if(!o)return Zl(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe(Object(Zu.b)(t=>{const r=t.module,o=t.routes,{segmentGroup:a,slicedSegments:c}=Kl(e,s,u,o),l=new Lc(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,o,l).pipe(Object(Bu.a)(t=>new Lc(s,t)));if(0===o.length&&0===c.length)return Object(Mu.a)(new Lc(s,{}));const h=Bl(n)===i;return this.expandSegment(r,l,o,c,h?wc:i,!0).pipe(Object(Bu.a)(t=>new Lc(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(Mu.a)(new Pl(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(Mu.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(Zu.b)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(Bu.a)(t=>(e._loadedConfig=t,t))):function(t){return new o.a(e=>e.error(Sc(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(Mu.a)(new Pl([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return Object(Mu.a)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&Rl(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!Rl(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return Ac(o)});return Object(Mu.a)(i).pipe(Ll(),Object(tc.a)(t=>{if(!Dl(t))return;const e=Sc(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),Object(Bu.a)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(Mu.a)(n);if(r.numberOfChildren>1||!r.children.primary)return eh(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new Mc(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return kc(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return kc(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new Lc(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function rh(t){const e={};for(const n of Object.keys(t.children)){const r=rh(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new Lc(t.segments.concat(e.segments),e.children)}return t}(new Lc(t.segments,e))}class ih{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class oh{constructor(t,e){this.component=t,this.route=e}}function sh(t,e,n){const r=t._root;return uh(r,e?e._root:null,n,[r.value])}function ah(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function uh(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=sl(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Fc(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Fc(t.url,e.url)||!Tc(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!vl(t,e)||!Tc(t.queryParams,e.queryParams);case"paramsChange":default:return!vl(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new ih(r)):(o.data=s.data,o._resolvedData=s._resolvedData),uh(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new oh(a.outlet.component,s))}else s&&ch(e,a,i),i.canActivateChecks.push(new ih(r)),uh(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),kc(o,(t,e)=>ch(t,n.getContext(e),i)),i}function ch(t,e,n){const r=sl(t),i=t.value;kc(r,(t,r)=>{ch(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new oh(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class lh{}function hh(t){return new o.a(e=>e.error(t))}class fh{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const t=Kl(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,wc);if(null===e)return null;const n=new hl([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},wc,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new ol(n,e),i=new fl(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=ll(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],o=zl(t,i),s=this.processSegmentGroup(o,r,i);if(null===s)return null;n.push(...s)}const r=function(t){const e=[];for(const n of t){if(!dh(n)){e.push(n);continue}const t=e.find(t=>n.value.routeConfig===t.value.routeConfig);void 0!==t?t.children.push(...n.children):e.push(n)}return e}(n);return r.sort((t,e)=>t.value.outlet===wc?-1:e.value.outlet===wc?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return Yl(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!$l(t,e,n,r))return null;let i,o=[],s=[];if("**"===t.path){const r=n.length>0?jc(n).parameters:{};i=new hl(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,vh(t),Bl(t),t.component,t,ph(e),gh(e)+n.length,mh(t))}else{const r=Gl(e,t,n);if(!r.matched)return null;o=r.consumedSegments,s=n.slice(r.lastChild),i=new hl(o,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,vh(t),Bl(t),t.component,t,ph(e),gh(e)+o.length,mh(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=Kl(e,o,s,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new ol(i,t)]}if(0===a.length&&0===c.length)return[new ol(i,[])];const l=Bl(t)===r,h=this.processSegment(a,u,c,l?wc:r);return null===h?null:[new ol(i,h)]}}function dh(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function ph(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function gh(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function vh(t){return t.data||{}}function mh(t){return t.resolve||{}}function yh(t){return Object(zu.a)(e=>{const n=t(e);return n?Object(Du.a)(n).pipe(Object(Bu.a)(()=>e)):Object(Mu.a)(e)})}class bh extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const _h=new We("ROUTES");class wh{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(Object(Bu.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new Pl(xc(r.injector.get(_h,void 0,C.Self|C.Optional)).map(Hl),r)}))}loadModuleFactory(t){return"string"==typeof t?Object(Du.a)(this.loader.load(t)):Ac(t()).pipe(Object(Zu.b)(t=>t instanceof cs?Object(Mu.a)(t):Object(Du.a)(this.compiler.compileModuleAsync(t))))}}class Eh{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Oh,this.attachRef=null}}class Oh{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Eh,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class Sh{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Ch(t){throw t}function Th(t,e,n){return e.parse("/")}function Ih(t,e){return Object(Mu.a)(null)}let xh=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new r.a,this.errorHandler=Ch,this.malformedUriErrorHandler=Th,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Ih,afterPreactivation:Ih},this.urlHandlingStrategy=new Sh,this.routeReuseStrategy=new bh,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=o.get(us),this.console=o.get(Rs);const c=o.get(Ks);this.isNgZoneEnabled=c instanceof Ks&&Ks.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new Mc(new Lc([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new wh(s,a,t=>this.triggerEvent(new pc(t)),t=>this.triggerEvent(new gc(t))),this.routerState=ul(this.currentUrlTree,this.rootComponentType),this.transitions=new Lu.a({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Object(Qu.a)(t=>0!==t.id),Object(Bu.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),Object(zu.a)(t=>{let n=!1,r=!1;return Object(Mu.a)(t).pipe(Object(tc.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Object(zu.a)(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(Mu.a)(t).pipe(Object(zu.a)(t=>{const n=this.transitions.getValue();return e.next(new oc(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?Hu.a:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,Object(zu.a)(t=>function(t,e,n,r,i){return new nh(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(Object(Bu.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),Object(tc.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return Object(Zu.b)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new fh(t,e,n,r,i,o).recognize();return null===s?hh(new lh):Object(Mu.a)(s)}catch(xx){return hh(xx)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(Bu.a)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(tc.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects);const n=new cc(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new oc(n,this.serializeUrl(r),i,o);e.next(a);const u=ul(r,this.rootComponentType).snapshot;return Object(Mu.a)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Hu.a}),yh(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(tc.a)(t=>{const e=new lc(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(Bu.a)(t=>Object.assign(Object.assign({},t),{guards:sh(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return Object(Zu.b)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Object(Mu.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(Du.a)(t).pipe(Object(Zu.b)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(Mu.a)(!0);const s=o.map(o=>{const s=ah(o,e,i);let a;if(function(t){return t&&Rl(t.canDeactivate)}(s))a=Ac(s.canDeactivate(t,e,n,r));else{if(!Rl(s))throw new Error("Invalid CanDeactivate guard");a=Ac(s(t,e,n,r))}return a.pipe(Object(Ju.a)())});return Object(Mu.a)(s).pipe(Ll())}(t.component,t.route,n,e,r)),Object(Ju.a)(t=>!0!==t,!0))}(s,r,i,t).pipe(Object(Zu.b)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(Du.a)(e).pipe(Object(Yu.a)(e=>Object(Uu.a)(function(t,e){return null!==t&&e&&e(new vc(t)),Object(Mu.a)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new yc(t)),Object(Mu.a)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Object(qu.a)(()=>{const i=e.guards.map(i=>{const o=ah(i,e.node,n);let s;if(function(t){return t&&Rl(t.canActivateChild)}(o))s=Ac(o.canActivateChild(r,t));else{if(!Rl(o))throw new Error("Invalid CanActivateChild guard");s=Ac(o(r,t))}return s.pipe(Object(Ju.a)())});return Object(Mu.a)(i).pipe(Ll())}));return Object(Mu.a)(i).pipe(Ll())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(Mu.a)(!0);const i=r.map(r=>Object(qu.a)(()=>{const i=ah(r,e,n);let o;if(function(t){return t&&Rl(t.canActivate)}(i))o=Ac(i.canActivate(e,t));else{if(!Rl(i))throw new Error("Invalid CanActivate guard");o=Ac(i(e,t))}return o.pipe(Object(Ju.a)())}));return Object(Mu.a)(i).pipe(Ll())}(t,e.route,n))),Object(Ju.a)(t=>!0!==t,!0))}(r,o,t,e):Object(Mu.a)(n)),Object(Bu.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(tc.a)(t=>{if(Dl(t.guardsResult)){const e=Sc(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new hc(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Object(Qu.a)(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new ac(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),yh(t=>{if(t.guards.canActivateChecks.length)return Object(Mu.a)(t).pipe(Object(tc.a)(t=>{const e=new fc(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(zu.a)(t=>{let n=!1;return Object(Mu.a)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,Object(Zu.b)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Object(Mu.a)(t);let o=0;return Object(Du.a)(n).pipe(Object(Yu.a)(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(Mu.a)({});const o={};return Object(Du.a)(i).pipe(Object(Zu.b)(i=>function(t,e,n,r){const i=ah(t,e,r);return Ac(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(tc.a)(t=>{o[i]=t}))),Object(ec.a)(1),Object(Zu.b)(()=>Object.keys(o).length===i.length?Object(Mu.a)(o):Hu.a))}(t._resolve,t,e,r).pipe(Object(Bu.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),ll(t,n).resolve),null)))}(t.route,e,r,i)),Object(tc.a)(()=>o++),Object(ec.a)(1),Object(Zu.b)(e=>o===n.length?Object(Mu.a)(t):Hu.a))})),Object(tc.a)({next:()=>n=!0,complete:()=>{if(!n){const n=new ac(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Object(tc.a)(t=>{const e=new dc(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),yh(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(Bu.a)(t=>{const e=function(t,e,n){const r=ml(t,e._root,n?n._root:void 0);return new al(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object(tc.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(i=this.rootContexts,o=this.routeReuseStrategy,s=t=>this.triggerEvent(t),Object(Bu.a)(t=>(new Al(o,t.targetRouterState,t.currentRouterState,s).activate(i),t))),Object(tc.a)({next(){n=!0},complete(){n=!0}}),Object(nc.a)(()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new ac(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null}),Object($u.a)(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=Dl(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new ac(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new uc(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(o){t.reject(o)}}var i;return Hu.a}));var i,o,s}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Fl(t),this.config=t.map(Hl),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0)}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,u=s?this.currentUrlTree.fragment:i;let c=null;switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return wl(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Ol(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return kc(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new Ol(n,e,r)}(n);if(o.toRoot())return wl(e.root,new Lc([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new Sl(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new Sl(t,t===e.root,0)}const r=bl(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Sl(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?Tl(s.segmentGroup,s.index,o.commands):Cl(s.segmentGroup,s.index,o.commands);return wl(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,u)}navigateByUrl(t,e={skipLocationChange:!1}){const n=Dl(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(xx){e=this.malformedUriErrorHandler(xx,this.urlSerializer,t)}return e}isActive(t,e){if(Dl(t))return Nc(this.currentUrlTree,t,e);const n=this.parseUrl(t);return Nc(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new sc(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(un(Ke),un(Uc),un(Oh),un(qa),un(yi),un(va),un(zs),un(void 0))},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})(),jh=(()=>{class t{constructor(t,e,n,i,o){this.router=t,this.route=e,this.commands=[],this.onChanges=new r.a,null==n&&i.setAttribute(o.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:Ah(this.skipLocationChange),replaceUrl:Ah(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ah(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(Pi(xh),Pi(cl),He("tabindex"),Pi(Ao),Pi(jo))},t.\u0275dir=Z({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&Hi("click",function(){return e.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[vt]}),t})(),kh=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new r.a,this.subscription=t.events.subscribe(t=>{t instanceof sc&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r,i){if(0!==t||e||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const o={skipLocationChange:Ah(this.skipLocationChange),replaceUrl:Ah(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,o),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ah(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(Pi(xh),Pi(cl),Pi(Ma))},t.\u0275dir=Z({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&Hi("click",function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)}),2&t&&(oo("href",e.href,bn),ki("target",e.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[vt]}),t})();function Ah(t){return""===t||!!t}let Nh=(()=>{class t{constructor(t,e,n,r,i){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=i,this.activated=null,this._activatedRoute=null,this.activateEvents=new Cs,this.deactivateEvents=new Cs,this.name=r||wc,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new Ph(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(Pi(Oh),Pi(hs),Pi(Co),He("name"),Pi(ts))},t.\u0275dir=Z({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class Ph{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===cl?this.route:t===Oh?this.childContexts:this.parent.get(t,e)}}class Rh{}class Dh{preload(t,e){return Object(Mu.a)(null)}}let Mh=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new wh(e,n,e=>t.triggerEvent(new pc(e)),e=>t.triggerEvent(new gc(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Object(Qu.a)(t=>t instanceof sc),Object(Yu.a)(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(us);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(Du.a)(n).pipe(Object(rc.a)(),Object(Bu.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(Object(Zu.b)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(un(xh),un(va),un(zs),un(yi),un(Rh))},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})(),Lh=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof oc?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof sc&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof _c&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new _c(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(un(xh),un(iu),un(void 0))},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})();const Vh=new We("ROUTER_CONFIGURATION"),Fh=new We("ROUTER_FORROOT_GUARD"),Uh=[qa,{provide:Uc,useClass:qc},{provide:xh,useFactory:function(t,e,n,r,i,o,s,a={},u,c){const l=new xh(null,t,e,n,r,i,o,xc(s));if(u&&(l.urlHandlingStrategy=u),c&&(l.routeReuseStrategy=c),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(a,l),a.enableTracing){const t=Ca();l.events.subscribe(e=>{t.logGroup(`Router Event: ${e.constructor.name}`),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return l},deps:[Uc,Oh,qa,yi,va,zs,_h,Vh,[class{},new fn],[class{},new fn]]},Oh,{provide:cl,useFactory:function(t){return t.routerState.root},deps:[xh]},{provide:va,useClass:ba},Mh,Dh,class{preload(t,e){return e().pipe(Object($u.a)(()=>Object(Mu.a)(null)))}},{provide:Vh,useValue:{enableTracing:!1}}];function qh(){return new ca("Router",xh)}let Hh=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[Uh,Gh(e),{provide:Fh,useFactory:Wh,deps:[[xh,new fn,new dn]]},{provide:Vh,useValue:n||{}},{provide:Ma,useFactory:zh,deps:[Ia,[new hn(Va),new fn],Vh]},{provide:Lh,useFactory:Bh,deps:[xh,iu,Vh]},{provide:Rh,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Dh},{provide:ca,multi:!0,useFactory:qh},[Kh,{provide:Ts,multi:!0,useFactory:Qh,deps:[Kh]},{provide:Yh,useFactory:$h,deps:[Kh]},{provide:Ps,multi:!0,useExisting:Yh}]]}}static forChild(e){return{ngModule:t,providers:[Gh(e)]}}}return t.\u0275mod=X({type:t}),t.\u0275inj=m({factory:function(e){return new(e||t)(un(Fh,8),un(xh,8))}}),t})();function Bh(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new Lh(t,e,n)}function zh(t,e,n={}){return n.useHash?new Ua(t,e):new Fa(t,e)}function Wh(t){return"guarded"}function Gh(t){return[{provide:Ge,multi:!0,useValue:t},{provide:_h,multi:!0,useValue:t}]}let Kh=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new r.a}appInitializer(){return this.injector.get(ja,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(xh),r=this.injector.get(Vh);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?Object(Mu.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(Vh),n=this.injector.get(Mh),r=this.injector.get(Lh),i=this.injector.get(xh),o=this.injector.get(pa);t===o.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||i.initialNavigation(),n.setUpPreloading(),r.init(),i.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(un(yi))},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})();function Qh(t){return t.appInitializer.bind(t)}function $h(t){return t.bootstrapListener.bind(t)}const Yh=new We("Router Initializer");class Xh{}class Jh{}class Zh{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Zh?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Zh;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Zh?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===i.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class tf{encodeKey(t){return ef(t)}encodeValue(t){return ef(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function ef(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class nf{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new tf,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.split("&").forEach(t=>{const r=t.indexOf("="),[i,o]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],s=n.get(i)||[];s.push(o),n.set(i,s)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new nf({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat([t]),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(t.value);-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}function rf(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function of(t){return"undefined"!=typeof Blob&&t instanceof Blob}function sf(t){return"undefined"!=typeof FormData&&t instanceof FormData}class af{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new Zh),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new nf,this.urlWithParams=e}serializeBody(){return null===this.body?null:rf(this.body)||of(this.body)||sf(this.body)||"string"==typeof this.body?this.body:this.body instanceof nf?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||sf(this.body)?null:of(this.body)?this.body.type||null:rf(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof nf?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,i=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,s=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let a=t.headers||this.headers,u=t.params||this.params;return void 0!==t.setHeaders&&(a=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),a)),t.setParams&&(u=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),u)),new af(e,n,i,{params:u,headers:a,reportProgress:s,responseType:r,withCredentials:o})}}var uf=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({});class cf{constructor(t,e=200,n="OK"){this.headers=t.headers||new Zh,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class lf extends cf{constructor(t={}){super(t),this.type=uf.ResponseHeader}clone(t={}){return new lf({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class hf extends cf{constructor(t={}){super(t),this.type=uf.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new hf({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class ff extends cf{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function df(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let pf=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof af)r=t;else{let i,o;i=n.headers instanceof Zh?n.headers:new Zh(n.headers),n.params&&(o=n.params instanceof nf?n.params:new nf({fromObject:n.params})),r=new af(t,e,void 0!==n.body?n.body:null,{headers:i,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=Object(Mu.a)(r).pipe(Object(Yu.a)(t=>this.handler.handle(t)));if(t instanceof af||"events"===n.observe)return i;const o=i.pipe(Object(Qu.a)(t=>t instanceof hf));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return o.pipe(Object(Bu.a)(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return o.pipe(Object(Bu.a)(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return o.pipe(Object(Bu.a)(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return o.pipe(Object(Bu.a)(t=>t.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new nf).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,df(n,e))}post(t,e,n={}){return this.request("POST",t,df(n,e))}put(t,e,n={}){return this.request("PUT",t,df(n,e))}}return t.\u0275fac=function(e){return new(e||t)(un(Xh))},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})();class gf{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const vf=new We("HTTP_INTERCEPTORS");let mf=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})();const yf=/^\)\]\}',?\n/;class bf{}let _f=(()=>{class t{constructor(){}build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})(),wf=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new o.a(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const r=t.serializeBody();let i=null;const o=()=>{if(null!==i)return i;const e=1223===n.status?204:n.status,r=n.statusText||"OK",o=new Zh(n.getAllResponseHeaders()),s=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return i=new lf({headers:o,status:e,statusText:r,url:s}),i},s=()=>{let{headers:r,status:i,statusText:s,url:a}=o(),u=null;204!==i&&(u=void 0===n.response?n.responseText:n.response),0===i&&(i=u?200:0);let c=i>=200&&i<300;if("json"===t.responseType&&"string"==typeof u){const t=u;u=u.replace(yf,"");try{u=""!==u?JSON.parse(u):null}catch(l){u=t,c&&(c=!1,u={error:l,text:u})}}c?(e.next(new hf({body:u,headers:r,status:i,statusText:s,url:a||void 0})),e.complete()):e.error(new ff({error:u,headers:r,status:i,statusText:s,url:a||void 0}))},a=t=>{const{url:r}=o(),i=new ff({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});e.error(i)};let u=!1;const c=r=>{u||(e.next(o()),u=!0);let i={type:uf.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===t.responseType&&n.responseText&&(i.partialText=n.responseText),e.next(i)},l=t=>{let n={type:uf.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",s),n.addEventListener("error",a),t.reportProgress&&(n.addEventListener("progress",c),null!==r&&n.upload&&n.upload.addEventListener("progress",l)),n.send(r),e.next({type:uf.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("load",s),t.reportProgress&&(n.removeEventListener("progress",c),null!==r&&n.upload&&n.upload.removeEventListener("progress",l)),n.readyState!==n.DONE&&n.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(un(bf))},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})();const Ef=new We("XSRF_COOKIE_NAME"),Of=new We("XSRF_HEADER_NAME");class Sf{}let Cf=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Ka(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(un(Ta),un(Ns),un(Ef))},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})(),Tf=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(un(Sf),un(Of))},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})(),If=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(vf,[]);this.chain=t.reduceRight((t,e)=>new gf(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(un(Jh),un(yi))},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})(),xf=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:Tf,useClass:mf}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:Ef,useValue:e.cookieName}:[],e.headerName?{provide:Of,useValue:e.headerName}:[]]}}}return t.\u0275mod=X({type:t}),t.\u0275inj=m({factory:function(e){return new(e||t)},providers:[Tf,{provide:vf,useExisting:Tf,multi:!0},{provide:Sf,useClass:Cf},{provide:Ef,useValue:"XSRF-TOKEN"},{provide:Of,useValue:"X-XSRF-TOKEN"}]}),t})(),jf=(()=>{class t{}return t.\u0275mod=X({type:t}),t.\u0275inj=m({factory:function(e){return new(e||t)},providers:[pf,{provide:Xh,useClass:If},wf,{provide:Jh,useExisting:wf},_f,{provide:bf,useExisting:_f}],imports:[[xf.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})();var kf=n("cp0P");const Af=new We("NgValueAccessor"),Nf={provide:Af,useExisting:d(()=>Pf),multi:!0};let Pf=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(Pi(Ao),Pi(jo))},t.\u0275dir=Z({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,e){1&t&&Hi("change",function(t){return e.onChange(t.target.checked)})("blur",function(){return e.onTouched()})},features:[Eo([Nf])]}),t})();const Rf={provide:Af,useExisting:d(()=>Mf),multi:!0},Df=new We("CompositionEventMode");let Mf=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=Ca()?Ca().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(Pi(Ao),Pi(jo),Pi(Df,8))},t.\u0275dir=Z({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&Hi("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[Eo([Rf])]}),t})();function Lf(t){return null==t||0===t.length}function Vf(t){return null!=t&&"number"==typeof t.length}const Ff=new We("NgValidators"),Uf=new We("NgAsyncValidators"),qf=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Hf{static min(t){return e=>{if(Lf(e.value)||Lf(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}static max(t){return e=>{if(Lf(e.value)||Lf(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}static required(t){return Lf(t.value)?{required:!0}:null}static requiredTrue(t){return!0===t.value?null:{required:!0}}static email(t){return Lf(t.value)||qf.test(t.value)?null:{email:!0}}static minLength(t){return e=>Lf(e.value)||!Vf(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}static maxLength(t){return e=>Vf(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}static pattern(t){if(!t)return Hf.nullValidator;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(Lf(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}static nullValidator(t){return null}static compose(t){if(!t)return null;const e=t.filter(Bf);return 0==e.length?null:function(t){return Wf(Gf(t,e))}}static composeAsync(t){if(!t)return null;const e=t.filter(Bf);return 0==e.length?null:function(t){const n=Gf(t,e).map(zf);return Object(kf.a)(n).pipe(Object(Bu.a)(Wf))}}}function Bf(t){return null!=t}function zf(t){const e=Ui(t)?Object(Du.a)(t):t;return qi(e),e}function Wf(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Gf(t,e){return e.map(e=>e(t))}function Kf(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function Qf(t){return null!=t?Hf.compose(Kf(t)):null}function $f(t){return null!=t?Hf.composeAsync(Kf(t)):null}function Yf(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function Xf(t){return t._rawValidators}function Jf(t){return t._rawAsyncValidators}let Zf=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Qf(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=$f(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Z({type:t}),t})(),td=(()=>{class t extends Zf{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return ed(e||t)},t.\u0275dir=Z({type:t,features:[_i]}),t})();const ed=qe(td);class nd extends Zf{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class rd{constructor(t){this._cd=t}is(t){var e,n;return!!(null===(n=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===n?void 0:n[t])}}let id=(()=>{class t extends rd{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(Pi(nd,2))},t.\u0275dir=Z({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&Xi("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[_i]}),t})(),od=(()=>{class t extends rd{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(Pi(td,10))},t.\u0275dir=Z({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&Xi("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[_i]}),t})();const sd={provide:Af,useExisting:d(()=>ad),multi:!0};let ad=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(Pi(Ao),Pi(jo))},t.\u0275dir=Z({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&Hi("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[Eo([sd])]}),t})();const ud={provide:Af,useExisting:d(()=>ld),multi:!0};let cd=(()=>{class t{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})(),ld=(()=>{class t{constructor(t,e,n,r){this._renderer=t,this._elementRef=e,this._registry=n,this._injector=r,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(nd),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return t.\u0275fac=function(e){return new(e||t)(Pi(Ao),Pi(jo),Pi(cd),Pi(yi))},t.\u0275dir=Z({type:t,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,e){1&t&&Hi("change",function(){return e.onChange()})("blur",function(){return e.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[Eo([ud])]}),t})();const hd={provide:Af,useExisting:d(()=>fd),multi:!0};let fd=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(Pi(Ao),Pi(jo))},t.\u0275dir=Z({type:t,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(t,e){1&t&&Hi("change",function(t){return e.onChange(t.target.value)})("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[Eo([hd])]}),t})();const dd={provide:Af,useExisting:d(()=>gd),multi:!0};function pd(t,e){return null==t?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let gd=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=pd(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.\u0275fac=function(e){return new(e||t)(Pi(Ao),Pi(jo))},t.\u0275dir=Z({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&Hi("change",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[Eo([dd])]}),t})(),vd=(()=>{class t{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(pd(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(Pi(jo),Pi(Ao),Pi(gd,9))},t.\u0275dir=Z({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const md={provide:Af,useExisting:d(()=>bd),multi:!0};function yd(t,e){return null==t?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let bd=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(void 0!==e.selectedOptions){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),i=this._getOptionValue(r.value);n.push(i)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.\u0275fac=function(e){return new(e||t)(Pi(Ao),Pi(jo))},t.\u0275dir=Z({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&Hi("change",function(t){return e.onChange(t.target)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[Eo([md])]}),t})(),_d=(()=>{class t{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(yd(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(yd(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(Pi(jo),Pi(Ao),Pi(bd,9))},t.\u0275dir=Z({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();function wd(t,e){Sd(t,e,!0),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&Td(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&Td(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function Ed(t,e,n=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Cd(t,e,!0),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Od(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Sd(t,e,n){const r=Xf(t);null!==e.validator?t.setValidators(Yf(r,e.validator)):"function"==typeof r&&t.setValidators([r]);const i=Jf(t);if(null!==e.asyncValidator?t.setAsyncValidators(Yf(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]),n){const n=()=>t.updateValueAndValidity();Od(e._rawValidators,n),Od(e._rawAsyncValidators,n)}}function Cd(t,e,n){let r=!1;if(null!==t){if(null!==e.validator){const n=Xf(t);if(Array.isArray(n)&&n.length>0){const i=n.filter(t=>t!==e.validator);i.length!==n.length&&(r=!0,t.setValidators(i))}}if(null!==e.asyncValidator){const n=Jf(t);if(Array.isArray(n)&&n.length>0){const i=n.filter(t=>t!==e.asyncValidator);i.length!==n.length&&(r=!0,t.setAsyncValidators(i))}}}if(n){const t=()=>{};Od(e._rawValidators,t),Od(e._rawAsyncValidators,t)}return r}function Td(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Id(t,e){Sd(t,e,!1)}const xd=[Pf,fd,ad,gd,bd,ld];function jd(t,e){t._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)})}function kd(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Ad="VALID",Nd="INVALID",Pd="PENDING",Rd="DISABLED";function Dd(t){return(Fd(t)?t.validators:t)||null}function Md(t){return Array.isArray(t)?Qf(t):t||null}function Ld(t,e){return(Fd(e)?e.asyncValidators:t)||null}function Vd(t){return Array.isArray(t)?$f(t):t||null}function Fd(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class Ud{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=Md(this._rawValidators),this._composedAsyncValidatorFn=Vd(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Ad}get invalid(){return this.status===Nd}get pending(){return this.status==Pd}get disabled(){return this.status===Rd}get enabled(){return this.status!==Rd}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=Md(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=Vd(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Pd,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Rd,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Ad,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==Ad&&this.status!==Pd||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Rd:Ad}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Pd,this._hasOwnPendingAsyncValidator=!0;const e=zf(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof Hd?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof Bd&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Cs,this.statusChanges=new Cs}_calculateStatus(){return this._allControlsDisabled()?Rd:this.errors?Nd:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Pd)?Pd:this._anyControlsHaveStatus(Nd)?Nd:Ad}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Fd(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class qd extends Ud{constructor(t=null,e,n){super(Dd(e),Ld(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){kd(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){kd(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class Hd extends Ud{constructor(t,e,n){super(Dd(e),Ld(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof qd?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class Bd extends Ud{constructor(t,e,n){super(Dd(e),Ld(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof qd?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const zd={provide:td,useExisting:d(()=>Gd)},Wd=(()=>Promise.resolve(null))();let Gd=(()=>{class t extends td{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new Cs,this.form=new Hd({},Qf(t),$f(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Wd.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),wd(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Wd.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),kd(this._directives,t)})}addFormGroup(t){Wd.then(()=>{const e=this._findContainer(t.path),n=new Hd({});Id(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Wd.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){Wd.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,jd(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return t.\u0275fac=function(e){return new(e||t)(Pi(Ff,10),Pi(Uf,10))},t.\u0275dir=Z({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,e){1&t&&Hi("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Eo([zd]),_i]}),t})(),Kd=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Z({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const Qd=new We("NgModelWithFormControlWarning"),$d={provide:td,useExisting:d(()=>Yd)};let Yd=(()=>{class t extends td{constructor(t,e){super(),this.validators=t,this.asyncValidators=e,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Cs,this._setValidators(t),this._setAsyncValidators(e)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Cd(this.form,this,!1),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return wd(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){Ed(t.control||null,t,!1),kd(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,jd(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=this.form.get(t.path);t.control!==e&&(Ed(t.control||null,t),e&&wd(e,t),t.control=e)}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const e=this.form.get(t.path);Id(e,t),e.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const e=this.form.get(t.path);e&&function(t,e){return Cd(t,e,!1)}(e,t)&&e.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Sd(this.form,this,!1),this._oldForm&&Cd(this._oldForm,this,!1)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(Pi(Ff,10),Pi(Uf,10))},t.\u0275dir=Z({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&Hi("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Eo([$d]),_i,vt]}),t})();const Xd={provide:nd,useExisting:d(()=>Jd)};let Jd=(()=>{class t extends nd{constructor(t,e,n,r,i){super(),this._ngModelWarningConfig=i,this._added=!1,this.update=new Cs,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=function(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(t=>{var e;t.constructor===Mf?n=t:(e=t,xd.some(t=>e.constructor===t)?r=t:i=t)}),i||r||n||null}(0,r)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return t=null==this.name?this.name:this.name.toString(),[...this._parent.path,t];var t}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t.\u0275fac=function(e){return new(e||t)(Pi(td,13),Pi(Ff,10),Pi(Uf,10),Pi(Af,10),Pi(Qd,8))},t.\u0275dir=Z({type:t,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Eo([Xd]),_i,vt]}),t._ngModelWarningSentOnce=!1,t})(),Zd=(()=>{class t{}return t.\u0275mod=X({type:t}),t.\u0275inj=m({factory:function(e){return new(e||t)}}),t})(),tp=(()=>{class t{group(t,e=null){const n=this._reduceControls(t);let r,i=null,o=null;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(i=null!=e.validators?e.validators:null,o=null!=e.asyncValidators?e.asyncValidators:null,r=null!=e.updateOn?e.updateOn:void 0):(i=null!=e.validator?e.validator:null,o=null!=e.asyncValidator?e.asyncValidator:null)),new Hd(n,{asyncValidators:o,updateOn:r,validators:i})}control(t,e,n){return new qd(t,e,n)}array(t,e,n){const r=t.map(t=>this._createControl(t));return new Bd(r,e,n)}_reduceControls(t){const e={};return Object.keys(t).forEach(n=>{e[n]=this._createControl(t[n])}),e}_createControl(t){return t instanceof qd||t instanceof Hd||t instanceof Bd?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})(),ep=(()=>{class t{}return t.\u0275mod=X({type:t}),t.\u0275inj=m({factory:function(e){return new(e||t)},providers:[cd],imports:[Zd]}),t})(),np=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:Qd,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275mod=X({type:t}),t.\u0275inj=m({factory:function(e){return new(e||t)},providers:[tp,cd],imports:[Zd]}),t})();n("4XzM");let rp=(()=>{class t{constructor(t){this.http=t,this.presURL="https://gibuild-9c83c-default-rtdb.europe-west1.firebasedatabase.app/personajes"}getPersonajes(){return this.http.get(`${this.presURL}.json`).pipe(Object(Bu.a)(t=>t))}getPersonaje(t){return this.http.get(`${this.presURL}/${t}.json`).pipe(Object(Bu.a)(t=>t))}}return t.\u0275fac=function(e){return new(e||t)(un(pf))},t.\u0275prov=v({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),ip=(()=>{class t{}return t.\u0275mod=X({type:t,bootstrap:[t]}),t.\u0275inj=m({factory:function(e){return new(e||t)},providers:[rp],imports:[[ru,Ru,Hh,ep,np,jf]]}),t})(),op=(()=>{class t{}return t.\u0275mod=X({type:t}),t.\u0275inj=m({factory:function(e){return new(e||t)},imports:[[ru]]}),t})();var sp=n("zIRd");(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},n=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function r(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function i(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:r(t)}}!function(t,r){if(r){var i=n;t=t.split(".");for(var o=0;o<t.length-1;o++){var s=t[o];s in i||(i[s]={}),i=i[s]}(r=r(o=i[t=t[t.length-1]]))!=o&&null!=r&&e(i,t,{configurable:!0,writable:!0,value:r})}}("Promise",function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function r(){this.a=null}function o(t){return t instanceof e?t:new e(function(e){e(t)})}if(t)return t;r.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c(function(){e.g()})}this.a.push(t)};var s=n.setTimeout;r.prototype.c=function(t){s(t,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(r){this.f(r)}}}this.a=null},r.prototype.f=function(t){this.c(function(){throw t})},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(n){return void this.g(n)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)a.b(this.a[t]);this.a=null}};var a=new r;return e.prototype.s=function(t){var e=this.f();t.Qa(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(r){n.reject(r)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(n){o(n)}}:e}var i,o,s=new e(function(t,e){i=t,o=e});return this.Qa(r(t,i),r(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Qa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},e.resolve=o,e.reject=function(t){return new e(function(e,n){n(t)})},e.race=function(t){return new e(function(e,n){for(var r=i(t),s=r.next();!s.done;s=r.next())o(s.value).Qa(e,n)})},e.all=function(t){var n=i(t),r=n.next();return r.done?o([]):new e(function(t,e){function i(e){return function(n){s[e]=n,0==--a&&t(s)}}var s=[],a=0;do{s.push(void 0),a++,o(r.value).Qa(i(s.length-1),e),r=n.next()}while(!r.done)})},e});var o=o||{},s=this||self,a=/^[\w+/_-]+[=]{0,2}$/,u=null;function c(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&a.test(t)?t:""}function l(){}function h(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function f(t){var e=h(t);return"array"==e||"object"==e&&"number"==typeof t.length}function d(t){return"function"==h(t)}function p(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function g(t){return Object.prototype.hasOwnProperty.call(t,v)&&t[v]||(t[v]=++m)}var v="closure_uid_"+(1e9*Math.random()>>>0),m=0;function y(t,e,n){return t.call.apply(t.bind,arguments)}function b(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function _(t,e,n){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:b).apply(null,arguments)}function w(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var E=Date.now;function O(t,e){function n(){}n.prototype=e.prototype,t.ab=e.prototype,t.prototype=new n,t.prototype.constructor=t}function S(t){return t}function C(t,e,n){this.code=x+t,this.message=e||j[t]||"",this.a=n||null}function T(t){var e=t&&t.code;return e?new C(e.substring(x.length),t.message,t.serverResponse):null}O(C,Error),C.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},C.prototype.toJSON=function(){return this.w()};var I,x="auth/",j={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},k={ld:{Ta:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ta:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://securetoken.googleapis.com/v1/token",Wa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ta:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ta:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Za:"https://test-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function A(t){for(var e in k)if(k[e].id===t)return{firebaseEndpoint:(t=k[e]).Ta,secureTokenEndpoint:t.Za,identityPlatformEndpoint:t.Wa};return null}function N(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function P(t){if(Error.captureStackTrace)Error.captureStackTrace(this,P);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function R(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");P.call(this,n+t[r])}function D(t,e){throw new R("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function M(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function L(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function V(){this.b=this.a=null}I=A("__EID__")?"__EID__":void 0,O(P,Error),P.prototype.name="CustomError",O(R,P),R.prototype.name="AssertionError",M.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var F=new M(function(){return new q},function(t){t.reset()});function U(){var t=me,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function q(){this.next=this.b=this.a=null}V.prototype.add=function(t,e){var n=F.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},q.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},q.prototype.reset=function(){this.next=this.b=this.a=null};var H=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},B=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},z=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,s=0;s<n;s++)if(s in o){var a=o[s];e.call(void 0,a,s,t)&&(r[i++]=a)}return r},W=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},G=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function K(t,e){return 0<=H(t,e)}function Q(t,e){var n;return(n=0<=(e=H(t,e)))&&Array.prototype.splice.call(t,e,1),n}function $(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1)})}function Y(t){return Array.prototype.concat.apply([],arguments)}function X(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var J,Z=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},tt=/&/g,et=/</g,nt=/>/g,rt=/"/g,it=/'/g,ot=/\x00/g,st=/[\x00&<>"']/;function at(t,e){return-1!=t.indexOf(e)}function ut(t,e){return t<e?-1:t>e?1:0}t:{var ct=s.navigator;if(ct){var lt=ct.userAgent;if(lt){J=lt;break t}}J=""}function ht(t){return at(J,t)}function ft(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function dt(t){for(var e in t)return!1;return!0}function pt(t){var e,n={};for(e in t)n[e]=t[e];return n}var gt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function vt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<gt.length;o++)n=gt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function mt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||s).Element&&r.Location){var i=r;break t}}catch(a){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(p(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(a){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;D("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function yt(t,e){this.a=t===Et&&e||"",this.b=wt}function bt(t){return t instanceof yt&&t.constructor===yt&&t.b===wt?t.a:(D("expected object of type Const, got '"+t+"'"),"type_error:Const")}yt.prototype.sa=!0,yt.prototype.ra=function(){return this.a},yt.prototype.toString=function(){return"Const{"+this.a+"}"};var _t,wt={},Et={};function Ot(){if(void 0===_t){var t=null,e=s.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:S,createScript:S,createScriptURL:S})}catch(n){s.console&&s.console.error(n.message)}_t=t}else _t=t}return _t}function St(t,e){this.a=e===jt?t:""}function Ct(t){return t instanceof St&&t.constructor===St?t.a:(D("expected object of type TrustedResourceUrl, got '"+t+"' of type "+h(t)),"type_error:TrustedResourceUrl")}function Tt(t,e){var n=bt(t);if(!xt.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=Ot();return new St(t=e?e.createScriptURL(t):t,jt)}(t=n.replace(It,function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof yt?bt(t):encodeURIComponent(String(t))}))}St.prototype.sa=!0,St.prototype.ra=function(){return this.a.toString()},St.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var It=/%{(\w+)}/g,xt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,jt={};function kt(t,e){this.a=e===Lt?t:""}function At(t){return t instanceof kt&&t.constructor===kt?t.a:(D("expected object of type SafeUrl, got '"+t+"' of type "+h(t)),"type_error:SafeUrl")}kt.prototype.sa=!0,kt.prototype.ra=function(){return this.a.toString()},kt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Nt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Pt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Rt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Dt(t){if(t instanceof kt)return t;if(t="object"==typeof t&&t.sa?t.ra():String(t),Rt.test(t))t=new kt(t,Lt);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Pt);t=e&&Nt.test(e[1])?new kt(t,Lt):null}return t}function Mt(t){return t instanceof kt?t:(t="object"==typeof t&&t.sa?t.ra():String(t),Rt.test(t)||(t="about:invalid#zClosurez"),new kt(t,Lt))}var Lt={},Vt=new kt("about:invalid#zClosurez",Lt);function Ft(t,e,n){this.a=n===Ut?t:""}Ft.prototype.sa=!0,Ft.prototype.ra=function(){return this.a.toString()},Ft.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Ut={};function qt(t,e,n,r){return t=t instanceof kt?t:Mt(t),e=e||s,n=n instanceof yt?bt(n):n||"",e.open(At(t),n,r,void 0)}function Ht(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Bt(t){return st.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(tt,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(et,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(nt,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(rt,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(it,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(ot,"&#0;"))),t}function zt(t){return zt[" "](t),t}zt[" "]=l;var Wt,Gt,Kt=ht("Opera"),Qt=ht("Trident")||ht("MSIE"),$t=ht("Edge"),Yt=$t||Qt,Xt=ht("Gecko")&&!(at(J.toLowerCase(),"webkit")&&!ht("Edge"))&&!(ht("Trident")||ht("MSIE"))&&!ht("Edge"),Jt=at(J.toLowerCase(),"webkit")&&!ht("Edge");function Zt(){var t=s.document;return t?t.documentMode:void 0}t:{var te="",ee=(Gt=J,Xt?/rv:([^\);]+)(\)|;)/.exec(Gt):$t?/Edge\/([\d\.]+)/.exec(Gt):Qt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Gt):Jt?/WebKit\/(\S+)/.exec(Gt):Kt?/(?:Version)[ \/]?(\S+)/.exec(Gt):void 0);if(ee&&(te=ee?ee[1]:""),Qt){var ne=Zt();if(null!=ne&&ne>parseFloat(te)){Wt=String(ne);break t}}Wt=te}var re={};function ie(t){return function(t,e){var n=re;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=Z(String(Wt)).split("."),r=Z(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=ut(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||ut(0==s[2].length,0==a[2].length)||ut(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var oe=s.document&&Qt&&(Zt()||parseInt(Wt,10))||void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Gt){}var se=!Qt||9<=Number(oe);function ae(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ue(t,e){ft(e,function(e,n){e&&"object"==typeof e&&e.sa&&(e=e.ra()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:he.hasOwnProperty(n)?t.setAttribute(he[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e})}var ce,le,he={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function fe(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!f(o)||p(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(p(o)){var s="function"==typeof o.item||"string"==typeof o.item;break t}if(d(o)){s="function"==typeof o.item;break t}}s=!1}B(s?X(o):o,r)}}}function de(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function pe(t){s.setTimeout(function(){throw t},0)}function ge(t,e){le||function(){if(s.Promise&&s.Promise.resolve){var t=s.Promise.resolve(void 0);le=function(){t.then(ye)}}else le=function(){var t=ye;!d(s.setImmediate)||s.Window&&s.Window.prototype&&!ht("Edge")&&s.Window.prototype.setImmediate==s.setImmediate?(ce||(ce=function(){var t=s.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!ht("Presto")&&(t=function(){var t=de(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=_(function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!ht("Trident")&&!ht("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Gb;n.Gb=null,t()}},function(t){r.next={Gb:t},r=r.next,e.port2.postMessage(0)}}return function(t){s.setTimeout(t,0)}}()),ce(t)):s.setImmediate(t)}}(),ve||(le(),ve=!0),me.add(t,e)}var ve=!1,me=new V;function ye(){for(var t;t=U();){try{t.a.call(t.b)}catch(e){pe(e)}L(F,t)}ve=!1}function be(t,e){if(this.a=_e,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=l)try{var n=this;t.call(e,function(t){Pe(n,we,t)},function(t){if(!(t instanceof Ue))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(xx){}Pe(n,Ee,t)})}catch(r){Pe(this,Ee,r)}}var _e=0,we=2,Ee=3;function Oe(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Oe.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Se=new M(function(){return new Oe},function(t){t.reset()});function Ce(t,e,n){var r=Se.get();return r.g=t,r.b=e,r.f=n,r}function Te(t){if(t instanceof be)return t;var e=new be(l);return Pe(e,we,t),e}function Ie(t){return new be(function(e,n){n(t)})}function xe(t,e,n){Re(t,e,n,null)||ge(w(e,t))}function je(t){return new be(function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Pb:!0,value:o}:{Pb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)xe(t[o],w(i,o,!0),w(i,o,!1));else e(r)})}function ke(t,e){if(t.a==_e)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,s=n.b;s&&(s.c||(r++,s.a==t&&(i=s),!(i&&1<r)));s=s.next)i||(o=s);i&&(n.a==_e&&1==r?ke(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Me(n),Le(n,i,Ee,e)))}t.c=null}else Pe(t,Ee,e)}function Ae(t,e){t.b||t.a!=we&&t.a!=Ee||De(t),t.f?t.f.next=e:t.b=e,t.f=e}function Ne(t,e,n,r){var i=Ce(null,null,null);return i.a=new be(function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(s){o(s)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Ue?o(e):t(i)}catch(s){o(s)}}:o}),i.a.c=t,Ae(t,i),i.a}function Pe(t,e,n){t.a==_e&&(t===n&&(e=Ee,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Re(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,De(t),e!=Ee||n instanceof Ue||function(t,e){t.g=!0,ge(function(){t.g&&Fe.call(null,e)})}(t,n)))}function Re(t,e,n,r){if(t instanceof be)return Ae(t,Ce(e||l,n||null,r)),!0;if(N(t))return t.then(e,n,r),!0;if(p(t))try{var i=t.then;if(d(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,function(t){s||(s=!0,n.call(i,t))},o)}catch(a){o(a)}}(t,i,e,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function De(t){t.h||(t.h=!0,ge(t.gc,t))}function Me(t){var e=null;return t.b&&(t.b=(e=t.b).next,e.next=null),t.b||(t.f=null),e}function Le(t,e,n,r){if(n==Ee&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Ve(e,n,r);else try{e.c?e.g.call(e.f):Ve(e,n,r)}catch(xx){Fe.call(null,xx)}L(Se,e)}function Ve(t,e,n){e==we?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}be.prototype.then=function(t,e,n){return Ne(this,d(t)?t:null,d(e)?e:null,n)},be.prototype.$goog_Thenable=!0,(t=be.prototype).oa=function(t,e){return(t=Ce(t,t,e)).c=!0,Ae(this,t),this},t.o=function(t,e){return Ne(this,null,t,e)},t.cancel=function(t){if(this.a==_e){var e=new Ue(t);ge(function(){ke(this,e)},this)}},t.$c=function(t){this.a=_e,Pe(this,we,t)},t.ad=function(t){this.a=_e,Pe(this,Ee,t)},t.gc=function(){for(var t;t=Me(this);)Le(this,t,this.a,this.i);this.h=!1};var Fe=pe;function Ue(t){P.call(this,t)}function qe(){0!=He&&(Be[g(this)]=this),this.xa=this.xa,this.pa=this.pa}O(Ue,P),Ue.prototype.name="cancel";var He=0,Be={};function ze(t){if(!t.xa&&(t.xa=!0,t.Da(),0!=He)){var e=g(t);if(0!=He&&t.pa&&0<t.pa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Be[e]}}qe.prototype.xa=!1,qe.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var We=Object.freeze||function(t){return t},Ge=!Qt||9<=Number(oe),Ke=Qt&&!ie("9"),Qe=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{s.addEventListener("test",l,e),s.removeEventListener("test",l,e)}catch(n){}return t}();function $e(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Ye(t,e){if($e.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Xt){t:{try{zt(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Xe[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}$e.prototype.preventDefault=function(){this.defaultPrevented=!0},O(Ye,$e);var Xe=We({2:"touch",3:"pen",4:"mouse"});Ye.prototype.preventDefault=function(){Ye.ab.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ke)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},Ye.prototype.g=function(){return this.a};var Je="closure_listenable_"+(1e6*Math.random()|0),Ze=0;function tn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Va=i,this.key=++Ze,this.va=this.Pa=!1}function en(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Va=null}function nn(t){this.src=t,this.a={},this.b=0}function rn(t,e){var n=e.type;n in t.a&&Q(t.a[n],e)&&(en(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function on(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Va==r)return i}return-1}nn.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=on(t,e,r,i);return-1<s?(e=t[s],n||(e.Pa=!1)):((e=new tn(e,this.src,o,!!r,i)).Pa=n,t.push(e)),e};var sn="closure_lm_"+(1e6*Math.random()|0),an={};function un(t,e,n,r,i){if(r&&r.once)ln(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)un(t,e[o],n,r,i);else n=bn(n),t&&t[Je]?wn(t,e,n,p(r)?!!r.capture:!!r,i):cn(t,e,n,!1,r,i)}function cn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=p(i)?!!i.capture:!!i,a=mn(t);if(a||(t[sn]=a=new nn(t)),!(n=a.add(e,n,r,s,o)).proxy)if(r=function(){var t=vn,e=Ge?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Qe||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(dn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function ln(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)ln(t,e[o],n,r,i);else n=bn(n),t&&t[Je]?En(t,e,n,p(r)?!!r.capture:!!r,i):cn(t,e,n,!0,r,i)}function hn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)hn(t,e[o],n,r,i);else r=p(r)?!!r.capture:!!r,n=bn(n),t&&t[Je]?(t=t.v,(e=String(e).toString())in t.a&&-1<(n=on(o=t.a[e],n,r,i))&&(en(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=mn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=on(e,n,r,i)),(n=-1<t?e[t]:null)&&fn(n))}function fn(t){if("number"!=typeof t&&t&&!t.va){var e=t.src;if(e&&e[Je])rn(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(dn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=mn(e))?(rn(n,t),0==n.b&&(n.src=null,e[sn]=null)):en(t)}}}function dn(t){return t in an?an[t]:an[t]="on"+t}function pn(t,e,n,r){var i=!0;if((t=mn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=gn(o,r),i=i&&!1!==o)}return i}function gn(t,e){var n=t.listener,r=t.Va||t.src;return t.Pa&&fn(t),n.call(r,e)}function vn(t,e){if(t.va)return!0;if(!Ge){if(!e)t:{e=["window","event"];for(var n=s,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Ye(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(a){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=pn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=pn(r[i],t,!1,e),n=n&&o}return n}return gn(t,new Ye(e,this))}function mn(t){return(t=t[sn])instanceof nn?t:null}var yn="__closure_events_fn_"+(1e9*Math.random()>>>0);function bn(t){return d(t)?t:(t[yn]||(t[yn]=function(e){return t.handleEvent(e)}),t[yn])}function _n(){qe.call(this),this.v=new nn(this),this.ac=this,this.gb=null}function wn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function En(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function On(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.va&&s.capture==n){var a=s.listener,u=s.Va||s.src;s.Pa&&rn(t.v,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function Sn(t,e,n){if(d(t))n&&(t=_(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=_(t.handleEvent,t)}return 2147483647<Number(e)?-1:s.setTimeout(t,e||0)}function Cn(t){var e=null;return new be(function(n,r){-1==(e=Sn(function(){n(void 0)},t))&&r(Error("Failed to schedule timer."))}).o(function(t){throw s.clearTimeout(e),t})}function Tn(t){if(t.W&&"function"==typeof t.W)return t.W();if("string"==typeof t)return t.split("");if(f(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function In(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.W||"function"!=typeof t.W){if(f(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function xn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof xn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function jn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];kn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)kn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function kn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}O(_n,qe),_n.prototype[Je]=!0,_n.prototype.addEventListener=function(t,e,n,r){un(this,t,e,n,r)},_n.prototype.removeEventListener=function(t,e,n,r){hn(this,t,e,n,r)},_n.prototype.dispatchEvent=function(t){var e,n=this.gb;if(n)for(e=[];n;n=n.gb)e.push(n);n=this.ac;var r=t.type||t;if("string"==typeof t)t=new $e(t,n);else if(t instanceof $e)t.target=t.target||n;else{var i=t;vt(t=new $e(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=On(s,r,!0,t)&&i}if(i=On(s=t.b=n,r,!0,t)&&i,i=On(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=On(s=t.b=e[o],r,!1,t)&&i;return i},_n.prototype.Da=function(){if(_n.ab.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)en(n[r]);delete e.a[t],e.b--}}this.gb=null},(t=xn.prototype).W=function(){jn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return jn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return kn(this.b,t)?this.b[t]:e},t.set=function(t,e){kn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var An=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Nn(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Nn?(this.i=void 0!==e?e:t.i,Pn(this,t.c),this.l=t.l,this.a=t.a,Rn(this,t.g),this.f=t.f,Dn(this,tr(t.b)),this.h=t.h):t&&(n=String(t).match(An))?(this.i=!!e,Pn(this,n[1]||"",!0),this.l=Un(n[2]||""),this.a=Un(n[3]||"",!0),Rn(this,n[4]),this.f=Un(n[5]||"",!0),Dn(this,n[6]||"",!0),this.h=Un(n[7]||"")):(this.i=!!e,this.b=new Qn(null,this.i))}function Pn(t,e,n){t.c=n?Un(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function Rn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Dn(t,e,n){e instanceof Qn?(t.b=e,function(t,e){e&&!t.f&&($n(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Xn(this,e),Zn(this,n,t))},t)),t.f=e}(t.b,t.i)):(n||(e=qn(e,Gn)),t.b=new Qn(e,t.i))}function Mn(t,e,n){t.b.set(e,n)}function Ln(t,e){return t.b.get(e)}function Vn(t){return t instanceof Nn?new Nn(t):new Nn(t,void 0)}function Fn(t,e,n,r){var i=new Nn(null,void 0);return t&&Pn(i,t),e&&(i.a=e),n&&Rn(i,n),r&&(i.f=r),i}function Un(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function qn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Hn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Hn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Nn.prototype.toString=function(){var t=[],e=this.c;e&&t.push(qn(e,Bn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(qn(e,Bn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(qn(n,"/"==n.charAt(0)?Wn:zn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",qn(n,Kn)),t.join("")},Nn.prototype.resolve=function(t){var e=new Nn(this),n=!!t.c;n?Pn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)Rn(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(at(i,"./")||at(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?Dn(e,tr(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Bn=/[#\/\?@]/g,zn=/[#\?:]/g,Wn=/[#\?]/g,Gn=/[#\?@]/g,Kn=/#/g;function Qn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function $n(t){t.a||(t.a=new xn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Yn(t){var e=In(t);if(void 0===e)throw Error("Keys are undefined");var n=new Qn(null,void 0);t=Tn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Zn(n,i,o):n.add(i,o)}return n}function Xn(t,e){$n(t),e=er(t,e),kn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,kn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&jn(t)))}function Jn(t,e){return $n(t),e=er(t,e),kn(t.a.b,e)}function Zn(t,e,n){Xn(t,e),0<n.length&&(t.c=null,t.a.set(er(t,e),X(n)),t.b+=n.length)}function tr(t){var e=new Qn;return e.c=t.c,t.a&&(e.a=new xn(t.a),e.b=t.b),e}function er(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function nr(t){var e=[];return ir(new rr,t,e),e.join("")}function rr(){}function ir(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),ir(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&"function"!=typeof(o=e[r])&&(n.push(i),ar(r,n),n.push(":"),ir(t,o,n),i=",");return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":ar(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=Qn.prototype).add=function(t,e){$n(this),this.c=null,t=er(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){$n(this),this.a.forEach(function(n,r){B(n,function(n){t.call(e,n,r,this)},this)},this)},t.Y=function(){$n(this);for(var t=this.a.W(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.W=function(t){$n(this);var e=[];if("string"==typeof t)Jn(this,t)&&(e=Y(e,this.a.get(er(this,t))));else{t=this.a.W();for(var n=0;n<t.length;n++)e=Y(e,t[n])}return e},t.set=function(t,e){return $n(this),this.c=null,Jn(this,t=er(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.W(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.W(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var or={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},sr=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function ar(t,e){e.push('"',t.replace(sr,function(t){var e=or[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),or[t]=e),e}),'"')}function ur(){var t=xr();return Qt&&!!oe&&11==oe||/Edge\/\d+/.test(t)}function cr(){return s.window&&s.window.location.href||self&&self.location&&self.location.href||""}function lr(t,e){e=e||s.window;var n="about:blank";t&&(n=At(Dt(t)||Vt)),e.location.href=n}function hr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<hr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function fr(t){return!!((t=(t||xr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function dr(t){t=t||s.window;try{t.close()}catch(e){}}function pr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=xr().toLowerCase(),r&&(e.target=r,at(n,"crios/")&&(e.target="_blank")),Cr(xr())==Or&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof kt?n:Dt(void 0!==n.href?n.href:String(n))||Vt,n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((ht("iPhone")&&!ht("iPod")&&!ht("iPad")||ht("iPad")||ht("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(mt(s=de(document,"A"),"HTMLAnchorElement"),e=e instanceof kt?e:Mt(e),s.href=At(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=qt("",r,n,s),t=At(e),s&&(Yt&&at(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Bt(t)+'">',t=new Ft(t=(r=Ot())?r.createHTML(t):t,null,Ut),r=s.document)&&(r.write(function(t){return t instanceof Ft&&t.constructor===Ft?t.a:(D("expected object of type SafeHtml, got '"+t+"' of type "+h(t)),"type_error:SafeHtml")}(t)),r.close())):(s=qt(e,r,n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(a){}return s}var gr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vr=/^[^@]+@[^@]+$/;function mr(){var t=null;return new be(function(e){"complete"==s.document.readyState?e():(t=function(){e()},ln(window,"load",t))}).o(function(e){throw hn(window,"load",t),e})}function yr(t){return t=t||xr(),!("file:"!==Pr()&&"ionic:"!==Pr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function br(){var t=s.window;try{return!(!t||t==t.top)}catch(e){return!1}}function _r(){return void 0!==s.WorkerGlobalScope&&"function"==typeof s.importScripts}function wr(){return sp.a.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":sp.a.INTERNAL.hasOwnProperty("node")?"Node":_r()?"Worker":"Browser"}function Er(){var t=wr();return"ReactNative"===t||"Node"===t}var Or="Firefox",Sr="Chrome";function Cr(t){var e=t.toLowerCase();return at(e,"opera/")||at(e,"opr/")||at(e,"opios/")?"Opera":at(e,"iemobile")?"IEMobile":at(e,"msie")||at(e,"trident/")?"IE":at(e,"edge/")?"Edge":at(e,"firefox/")?Or:at(e,"silk/")?"Silk":at(e,"blackberry")?"Blackberry":at(e,"webos")?"Webos":!at(e,"safari/")||at(e,"chrome/")||at(e,"crios/")||at(e,"android")?!at(e,"chrome/")&&!at(e,"crios/")||at(e,"edge/")?at(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Sr:"Safari"}var Tr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Ir(t,e){e=e||[];var n,r=[],i={};for(n in Tr)i[Tr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=wr())?r=Cr(i=xr()):"Worker"===r&&(r=Cr(i=xr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function xr(){return s.navigator&&s.navigator.userAgent||""}function jr(t,e){t=t.split("."),e=e||s;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function kr(){try{var t=s.localStorage,e=Vr();if(t)return t.setItem(e,"1"),t.removeItem(e),!ur()||!!s.indexedDB}catch(n){return _r()&&!!s.indexedDB}return!1}function Ar(){return(Nr()||"chrome-extension:"===Pr()||yr())&&!Er()&&kr()&&!_r()}function Nr(){return"http:"===Pr()||"https:"===Pr()}function Pr(){return s.location&&s.location.protocol||null}function Rr(t){return!fr(t=t||xr())&&Cr(t)!=Or}function Dr(t){return void 0===t?null:nr(t)}function Mr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!=t[e]&&(n[e]=t[e]);return n}function Lr(t){if(null!==t)return JSON.parse(t)}function Vr(t){return t||Math.floor(1e9*Math.random()).toString()}function Fr(t){return"Safari"!=Cr(t=t||xr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Ur(){var t=s.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function qr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=xr(),e=wr(),this.b=fr(t)||"ReactNative"===e}function Hr(){var t=s.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Br(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(n){}return null}function zr(){return!(!jr("fireauth.oauthhelper",s)&&!jr("fireauth.iframe",s))}qr.prototype.get=function(){var t=s.navigator;return!t||"boolean"!=typeof t.onLine||!Nr()&&"chrome-extension:"!==Pr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Wr,Gr={};function Kr(t){Gr[t]||(Gr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Qr={};Object.defineProperty(Qr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Qr,"abcd",{configurable:!0,enumerable:!0,value:2}),Wr=2==Qr.abcd}catch(Gt){Wr=!1}function $r(t,e,n){Wr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Yr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&$r(t,n,e[n])}function Xr(t){var e={};return Yr(e,t),e}function Jr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)$r(e,n,Jr(t[n]));return e}function Zr(t){var e=t&&(t[ii]?"phone":null);if(!(e&&t&&t[ri]))throw new C("internal-error","Internal assert: invalid MultiFactorInfo object");$r(this,"uid",t[ri]),$r(this,"displayName",t[ei]||null);var n=null;t[ni]&&(n=new Date(t[ni]).toUTCString()),$r(this,"enrollmentTime",n),$r(this,"factorId",e)}function ti(t){try{var e=new oi(t)}catch(n){e=null}return e}Zr.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ei="displayName",ni="enrolledAt",ri="mfaEnrollmentId",ii="phoneInfo";function oi(t){Zr.call(this,t),$r(this,"phoneNumber",t[ii])}function si(t){var e={},n=t[li],r=t[fi],i=t[di];if(t=ti(t[hi]),!i||i!=ui&&i!=ci&&!n||i==ci&&!r||i==ai&&!t)throw Error("Invalid checkActionCode response!");i==ci?(e[gi]=n||null,e[mi]=n||null,e[pi]=r):(e[gi]=r||null,e[mi]=r||null,e[pi]=n||null),e[vi]=t||null,$r(this,bi,i),$r(this,yi,Jr(e))}O(oi,Zr),oi.prototype.w=function(){var t=oi.ab.w.call(this);return t.phoneNumber=this.phoneNumber,t};var ai="REVERT_SECOND_FACTOR_ADDITION",ui="EMAIL_SIGNIN",ci="VERIFY_AND_CHANGE_EMAIL",li="email",hi="mfaInfo",fi="newEmail",di="requestType",pi="email",gi="fromEmail",vi="multiFactorInfo",mi="previousEmail",yi="data",bi="operation";function _i(t){var e=Ln(t=Vn(t),wi)||null,n=Ln(t,Ei)||null,r=Ln(t,Ci)||null;if(r=r&&Ii[r]||null,!e||!n||!r)throw new C("argument-error",wi+", "+Ei+"and "+Ci+" are required in a valid action code URL.");Yr(this,{apiKey:e,operation:r,code:n,continueUrl:Ln(t,Oi)||null,languageCode:Ln(t,Si)||null,tenantId:Ln(t,Ti)||null})}var wi="apiKey",Ei="oobCode",Oi="continueUrl",Si="languageCode",Ci="mode",Ti="tenantId",Ii={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:ai,signIn:ui,verifyAndChangeEmail:ci,verifyEmail:"VERIFY_EMAIL"};function xi(t){try{return new _i(t)}catch(e){return null}}function ji(t){var e=t[Ri];if(void 0===e)throw new C("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new C("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[ki];if(n&&"object"==typeof n){e=n[Li];var r=n[Di];if(n=n[Mi],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new C("argument-error",Di+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new C("argument-error",Mi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new C("argument-error",Li+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new C("missing-android-pkg-name")}}else if(void 0!==n)throw new C("argument-error",ki+" property must be a non null object when specified.");if(this.f=null,(e=t[Pi])&&"object"==typeof e){if("string"==typeof(e=e[Vi])&&e.length)this.f=e;else if(void 0!==e)throw new C("argument-error",Vi+" property must be a non empty string when specified.")}else if(void 0!==e)throw new C("argument-error",Pi+" property must be a non null object when specified.");if(void 0!==(e=t[Ni])&&"boolean"!=typeof e)throw new C("argument-error",Ni+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Ai])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new C("argument-error",Ai+" property must be a non empty string when specified.");this.i=t||null}var ki="android",Ai="dynamicLinkDomain",Ni="handleCodeInApp",Pi="iOS",Ri="url",Di="installApp",Mi="minimumVersion",Li="packageName",Vi="bundleId";function Fi(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Ui=null;function qi(t){var e=Bi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function Hi(t){try{return new qi(t)}catch(e){return null}}function Bi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=function(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Ui[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Ui){Ui={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Ui[o]&&(Ui[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(t,function(t){e.push(t)}),e}(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var s=r[e++],a=((7&i)<<18|(63&o)<<12|(63&s)<<6|63&r[e++])-65536;t[n++]=String.fromCharCode(55296+(a>>10)),t[n++]=String.fromCharCode(56320+(1023&a))}else o=r[e++],s=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}return JSON.parse(t.join(""))}catch(u){}return null}qi.prototype.T=function(){return this.f},qi.prototype.l=function(){return this.c},qi.prototype.toString=function(){return this.h};var zi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Wi=["client_id","response_type","scope","redirect_uri","state"],Gi={nd:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Xa:Wi},pd:{Ja:null,ua:500,ta:750,fa:"github.com",Xa:Wi},qd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Xa:Wi},wd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Xa:zi},kd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Xa:[]}};function Ki(t){for(var e in Gi)if(Gi[e].fa==t)return Gi[e];return null}function Qi(t){var e={};e["facebook.com"]=Zi,e["google.com"]=eo,e["github.com"]=to,e["twitter.com"]=no;var n=t&&t[Yi];try{if(n)return e[n]?new e[n](t):new Ji(t);if(void 0!==t[$i])return new Xi(t)}catch(r){}return null}var $i="idToken",Yi="providerId";function Xi(t){var e=t[Yi];if(!e&&t[$i]){var n=Hi(t[$i]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),$r(this,"providerId",e),$r(this,"isNewUser",n)}function Ji(t){Xi.call(this,t),$r(this,"profile",Jr((t=Lr(t.rawUserInfo||"{}"))||{}))}function Zi(t){if(Ji.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function to(t){if(Ji.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");$r(this,"username",this.profile&&this.profile.login||null)}function eo(t){if(Ji.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function no(t){if(Ji.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");$r(this,"username",t.screenName||null)}function ro(t){var e=Vn(t),n=Ln(e,"link"),r=Ln(Vn(n),"link");return e=Ln(e,"deep_link_id"),Ln(Vn(e),"link")||e||r||n||t}function io(t,e){if(!t&&!e)throw new C("internal-error","Internal assert: no raw session string available");if(t&&e)throw new C("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?oo:so}O(Ji,Xi),O(Zi,Ji),O(to,Ji),O(eo,Ji),O(no,Ji);var oo="enroll",so="signin";function ao(){}function uo(t,e){return t.then(function(t){if(t[$s]){var n=Hi(t[$s]);if(!n||e!=n.i)throw new C("user-mismatch");return t}throw new C("user-mismatch")}).o(function(t){throw t&&t.code&&t.code==x+"user-not-found"?new C("user-mismatch"):t})}function co(t,e){if(!e)throw new C("internal-error","failed to construct a credential");this.a=e,$r(this,"providerId",t),$r(this,"signInMethod",t)}function lo(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function ho(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new co(t.providerId,t.pendingToken)}catch(e){}return null}function fo(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&$r(this,"idToken",e.idToken),e.accessToken&&$r(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&$r(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new C("internal-error","failed to construct a credential");$r(this,"accessToken",e.oauthToken),$r(this,"secret",e.oauthTokenSecret)}$r(this,"providerId",t),$r(this,"signInMethod",n)}function po(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Yn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function go(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new fo(t.providerId,e,t.signInMethod)}catch(n){}}return null}function vo(t,e){this.Qc=e||[],Yr(this,{providerId:t,isOAuthProvider:!0}),this.Ib={},this.pb=(Ki(t)||{}).Ja||null,this.ob=null}function mo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new C("argument-error",'SAML provider IDs must be prefixed with "saml."');vo.call(this,t,[])}function yo(t){vo.call(this,t,Wi),this.a=[]}function bo(){yo.call(this,"facebook.com")}function _o(t){if(!t)throw new C("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return p(t)&&(e=t.accessToken),(new bo).credential({accessToken:e})}function wo(){yo.call(this,"github.com")}function Eo(t){if(!t)throw new C("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return p(t)&&(e=t.accessToken),(new wo).credential({accessToken:e})}function Oo(){yo.call(this,"google.com"),this.Ca("profile")}function So(t,e){var n=t;return p(t)&&(n=t.idToken,e=t.accessToken),(new Oo).credential({idToken:n,accessToken:e})}function Co(){vo.call(this,"twitter.com",zi)}function To(t,e){var n=t;if(p(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new C("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new fo("twitter.com",n,"twitter.com")}function Io(t,e,n){this.a=t,this.f=e,$r(this,"providerId","password"),$r(this,"signInMethod",n===jo.EMAIL_LINK_SIGN_IN_METHOD?jo.EMAIL_LINK_SIGN_IN_METHOD:jo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function xo(t){return t&&t.email&&t.password?new Io(t.email,t.password,t.signInMethod):null}function jo(){Yr(this,{providerId:"password",isOAuthProvider:!1})}function ko(t,e){if(!(e=Ao(e)))throw new C("argument-error","Invalid email link!");return new Io(t,e.code,jo.EMAIL_LINK_SIGN_IN_METHOD)}function Ao(t){return(t=xi(t=ro(t)))&&t.operation===ui?t:null}function No(t){if(!(t.eb&&t.cb||t.La&&t.ea))throw new C("internal-error");this.a=t,$r(this,"providerId","phone"),this.fa="phone",$r(this,"signInMethod","phone")}function Po(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return B(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(n){t[n]&&(e[n]=t[n])}),new No(e)}return null}function Ro(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.eb,code:t.a.cb}}function Do(t){try{this.a=t||sp.a.auth()}catch(e){throw new C("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Yr(this,{providerId:"phone",isOAuthProvider:!1})}function Mo(t,e){if(!t)throw new C("missing-verification-id");if(!e)throw new C("missing-verification-code");return new No({eb:t,cb:e})}function Lo(t){if(t.temporaryProof&&t.phoneNumber)return new No({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return So(o,n);case"facebook.com":return _o(n);case"github.com":return Eo(n);case"twitter.com":return To(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new co(e,s):new fo(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new yo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(a){return null}}function Vo(t){if(!t.isOAuthProvider)throw new C("invalid-oauth-provider")}function Fo(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new C("invalid-auth-event");if(this.g&&this.a)throw new C("invalid-auth-event");if(this.g&&!this.f)throw new C("invalid-auth-event")}function Uo(t){return(t=t||{}).type?new Fo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&T(t.error),t.postBody,t.tenantId):null}function qo(){this.b=null,this.a=[]}io.prototype.Ha=function(){return Te(this.a?this.a:this.b)},io.prototype.w=function(){return this.type==oo?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},ao.prototype.ka=function(){},ao.prototype.b=function(){},ao.prototype.c=function(){},ao.prototype.w=function(){},co.prototype.ka=function(t){return va(t,lo(this))},co.prototype.b=function(t,e){var n=lo(this);return n.idToken=e,ma(t,n)},co.prototype.c=function(t,e){return uo(ya(t,lo(this)),e)},co.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},fo.prototype.ka=function(t){return va(t,po(this))},fo.prototype.b=function(t,e){var n=po(this);return n.idToken=e,ma(t,n)},fo.prototype.c=function(t,e){return uo(ya(t,po(this)),e)},fo.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},vo.prototype.Ka=function(t){return this.Ib=pt(t),this},O(mo,vo),O(yo,vo),yo.prototype.Ca=function(t){return K(this.a,t)||this.a.push(t),this},yo.prototype.Qb=function(){return X(this.a)},yo.prototype.credential=function(t,e){var n;if(!(n=p(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new C("argument-error","credential failed: must provide the ID token and/or the access token.");return new fo(this.providerId,n,this.providerId)},O(bo,yo),$r(bo,"PROVIDER_ID","facebook.com"),$r(bo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),O(wo,yo),$r(wo,"PROVIDER_ID","github.com"),$r(wo,"GITHUB_SIGN_IN_METHOD","github.com"),O(Oo,yo),$r(Oo,"PROVIDER_ID","google.com"),$r(Oo,"GOOGLE_SIGN_IN_METHOD","google.com"),O(Co,vo),$r(Co,"PROVIDER_ID","twitter.com"),$r(Co,"TWITTER_SIGN_IN_METHOD","twitter.com"),Io.prototype.ka=function(t){return this.signInMethod==jo.EMAIL_LINK_SIGN_IN_METHOD?Za(t,Ta,{email:this.a,oobCode:this.f}):Za(t,Qa,{email:this.a,password:this.f})},Io.prototype.b=function(t,e){return this.signInMethod==jo.EMAIL_LINK_SIGN_IN_METHOD?Za(t,Ia,{idToken:e,email:this.a,oobCode:this.f}):Za(t,Ua,{idToken:e,email:this.a,password:this.f})},Io.prototype.c=function(t,e){return uo(this.ka(t),e)},Io.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Yr(jo,{PROVIDER_ID:"password"}),Yr(jo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Yr(jo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),No.prototype.ka=function(t){return t.fb(Ro(this))},No.prototype.b=function(t,e){var n=Ro(this);return n.idToken=e,Za(t,Ya,n)},No.prototype.c=function(t,e){var n=Ro(this);return n.operation="REAUTH",uo(t=Za(t,Xa,n),e)},No.prototype.w=function(){var t={providerId:"phone"};return this.a.eb&&(t.verificationId=this.a.eb),this.a.cb&&(t.verificationCode=this.a.cb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Do.prototype.fb=function(t,e){var n=this.a.a;return Te(e.verify()).then(function(r){if("string"!=typeof r)throw new C("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=p(t)?t.session:null,o=p(t)?t.phoneNumber:t;return(i&&i.type==oo?i.Ha().then(function(t){return function(t,e){return Za(t,Ha,e).then(function(t){return t.phoneSessionInfo.sessionInfo})}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})}):i&&i.type==so?i.Ha().then(function(e){return function(t,e){return Za(t,Ba,e).then(function(t){return t.phoneResponseInfo.sessionInfo})}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})}):function(t,e){return Za(t,Va,e)}(n,{phoneNumber:o,recaptchaToken:r})).then(function(t){return"function"==typeof e.reset&&e.reset(),t},function(t){throw"function"==typeof e.reset&&e.reset(),t});default:throw new C("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},Yr(Do,{PROVIDER_ID:"phone"}),Yr(Do,{PHONE_SIGN_IN_METHOD:"phone"}),Fo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Fo.prototype.T=function(){return this.h},Fo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Ho,Bo=null;function zo(t){var e="unauthorized-domain",n=void 0,r=Vn(t);t=r.a,"chrome-extension"==(r=r.c)?n=Ht("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Ht("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",C.call(this,e,n)}function Wo(t,e,n){C.call(this,t,n),(t=e||{}).Jb&&$r(this,"email",t.Jb),t.ea&&$r(this,"phoneNumber",t.ea),t.credential&&$r(this,"credential",t.credential),t.Zb&&$r(this,"tenantId",t.Zb)}function Go(t){if(t.code){var e=t.code||"";0==e.indexOf(x)&&(e=e.substring(x.length));var n={credential:Lo(t),Zb:t.tenantId};if(t.email)n.Jb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new C(e,t.message||void 0);return new Wo(e,n,t.message)}return null}function Ko(){}function Qo(){}function $o(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(xx){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Yo(){}function Xo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=_(this.qc,this),this.a.onerror=_(this.Sb,this),this.a.onprogress=_(this.rc,this),this.a.ontimeout=_(this.vc,this)}function Jo(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Zo(t,e,n){this.reset(t,e,n,void 0,void 0)}function ts(t){this.f=t,this.b=this.c=this.a=null}function es(t,e){this.name=t,this.value=e}O(zo,C),O(Wo,C),Wo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&vt(t,e),t},Wo.prototype.toJSON=function(){return this.w()},Ko.prototype.c=null,O(Qo,Ko),Qo.prototype.a=function(){var t=$o(this);return t?new ActiveXObject(t):new XMLHttpRequest},Qo.prototype.b=function(){var t={};return $o(this)&&(t[0]=!0,t[1]=!0),t},Ho=new Qo,O(Yo,Ko),Yo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Xo;throw Error("Unsupported browser")},Yo.prototype.b=function(){return{}},(t=Xo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Jo(this,4)},t.Sb=function(){this.status=500,this.response=this.responseText="",Jo(this,4)},t.vc=function(){this.Sb()},t.rc=function(){this.status=200,Jo(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Zo.prototype.a=null,Zo.prototype.reset=function(t,e,n,r,i){r||E(),delete this.a},es.prototype.toString=function(){return this.name};var ns=new es("SEVERE",1e3),rs=new es("WARNING",900),is=new es("CONFIG",700),os=new es("FINE",500);function ss(t){return t.c?t.c:t.a?ss(t.a):(D("Root logger has no level set."),null)}ts.prototype.log=function(t,e,n){if(t.value>=ss(this).value)for(d(e)&&(e=e()),t=new Zo(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var as={},us=null;function cs(t){var e;if(us||(us=new ts(""),as[""]=us,us.c=is),!(e=as[t])){e=new ts(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=cs(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,as[t]=e}return e}function ls(t,e){t&&t.log(os,e,void 0)}function hs(t){this.f=t}function fs(t){_n.call(this),this.u=t,this.h=void 0,this.readyState=ds,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=cs("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}O(hs,Ko),hs.prototype.a=function(){return new fs(this.f)},hs.prototype.b=function(t){return function(){return t}}({}),O(fs,_n);var ds=0;function ps(t){t.c.read().then(t.pc.bind(t)).catch(t.Ua.bind(t))}function gs(t){t.readyState=4,t.g=null,t.c=null,t.m=null,vs(t)}function vs(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function ms(t){_n.call(this),this.headers=new xn,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.R=this.l="",this.f=this.O=this.i=this.J=!1,this.g=0,this.s=null,this.m=ys,this.u=this.S=!1}(t=fs.prototype).open=function(t,e){if(this.readyState!=ds)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,vs(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Ua.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,gs(this)),this.readyState=ds},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,vs(this)),this.a&&(this.readyState=3,vs(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Ua.bind(this)):void 0!==s.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,ps(this)):t.text().then(this.tc.bind(this),this.Ua.bind(this)))))},t.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?gs(this):vs(this),3==this.readyState&&ps(this)}},t.tc=function(t){this.a&&(this.response=this.responseText=t,gs(this))},t.sc=function(t){this.a&&(this.response=t,gs(this))},t.Ua=function(t){var e=this.i;e&&e.log(rs,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&gs(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(rs,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(rs,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(fs.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),O(ms,_n);var ys="";ms.prototype.b=cs("goog.net.XhrIo");var bs=/^https?$/i,_s=["POST","PUT"];function ws(t){return"content-type"==t.toLowerCase()}function Es(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Os(t),Cs(t)}function Os(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Ss(t){if(t.c&&void 0!==o)if(t.C[1]&&4==Is(t)&&2==xs(t))ls(t.b,js(t,"Local request error detected and ignored"));else if(t.i&&4==Is(t))Sn(t.Vb,0,t);else if(t.dispatchEvent("readystatechange"),4==Is(t)){ls(t.b,js(t,"Request complete")),t.c=!1;try{var e,n=xs(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var a=String(t.l).match(An)[1]||null;if(!a&&s.self&&s.self.location){var u=s.self.location.protocol;a=u.substr(0,u.length-1)}i=!bs.test(a?a.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Is(t)?t.a.statusText:""}catch(l){ls(t.b,"Can not get status: "+l.message),c=""}t.h=c+" ["+xs(t)+"]",Os(t)}}finally{Cs(t)}}}function Cs(t,e){if(t.a){Ts(t);var n=t.a,r=t.C[0]?l:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(xx){(t=t.b)&&t.log(ns,"Problem encountered resetting onreadystatechange: "+xx.message,void 0)}}}function Ts(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(s.clearTimeout(t.s),t.s=null)}function Is(t){return t.a?t.a.readyState:0}function xs(t){try{return 2<Is(t)?t.a.status:-1}catch(e){return-1}}function js(t,e){return e+" ["+t.R+" "+t.l+" "+xs(t)+"]"}function ks(t){var e=qs;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function As(t,e,n){t.a=!0,t.c=n,t.f=!e,Ds(t)}function Ns(t){if(t.a){if(!t.v)throw new Ms(t);t.v=!1}}function Ps(t,e,n,r){t.g.push([e,n,r]),t.a&&Ds(t)}function Rs(t){return G(t.g,function(t){return d(t[1])})}function Ds(t){if(t.h&&t.a&&Rs(t)){var e=t.h,n=Fs[e];n&&(s.clearTimeout(n.a),delete Fs[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],a=i[1];if(i=i[2],o=t.f?a:o)try{var u=o.call(i||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(N(e)||"function"==typeof s.Promise&&e instanceof s.Promise)&&(r=!0,t.i=!0)}catch(c){e=c,t.f=!0,Rs(t)||(n=!0)}}t.c=e,r&&(u=_(t.m,t,!0),r=_(t.m,t,!1),e instanceof ks?(Ps(e,u,r),e.C=!0):e.then(u,r)),n&&(e=new Vs(e),Fs[e.a]=e,t.h=e.a)}function Ms(){P.call(this)}function Ls(){P.call(this)}function Vs(t){this.a=s.setTimeout(_(this.c,this),0),this.b=t}(t=ms.prototype).Ma=function(){void 0!==o&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",ls(this.b,js(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(ls(this.b,js(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Cs(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Cs(this,!0)),ms.ab.Da.call(this)},t.Vb=function(){this.xa||(this.O||this.i||this.f?Ss(this):this.Jc())},t.Jc=function(){Ss(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case ys:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(ns,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return ls(this.b,"Can not get response: "+e.message),null}},ks.prototype.cancel=function(t){if(this.a)this.c instanceof ks&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new Ls(this),Ns(this),As(this,!1,t))}},ks.prototype.m=function(t,e){this.i=!1,As(this,t,e)},ks.prototype.then=function(t,e,n){var r,i,o=new be(function(t,e){r=t,i=e});return Ps(this,r,function(t){t instanceof Ls?o.cancel():i(t)}),o.then(t,e,n)},ks.prototype.$goog_Thenable=!0,O(Ms,P),Ms.prototype.message="Deferred has already fired",Ms.prototype.name="AlreadyCalledError",O(Ls,P),Ls.prototype.message="Deferred was canceled",Ls.prototype.name="CanceledError",Vs.prototype.c=function(){throw delete Fs[this.a],this.b};var Fs={};function Us(t){var e={},n=e.document||document,r=Ct(t).toString(),i=de(document,"SCRIPT"),o={Wb:i,Ma:void 0},a=new ks(o),l=null,h=null!=e.timeout?e.timeout:5e3;return 0<h&&(l=window.setTimeout(function(){Hs(i,!0);var t=new Ws(zs,"Timeout reached for loading script "+r);Ns(a),As(a,!1,t)},h),o.Ma=l),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Hs(i,e.xd||!1,l),Ns(a),As(a,!0,null))},i.onerror=function(){Hs(i,!0,l);var t=new Ws(Bs,"Error while loading script "+r);Ns(a),As(a,!1,t)},vt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),ue(i,o),function(t,e){mt(t,"HTMLScriptElement"),t.src=Ct(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=s?e=c(e.document):(null===u&&(u=c(s.document)),e=u),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function qs(){if(this&&this.Wb){var t=this.Wb;t&&"SCRIPT"==t.tagName&&Hs(t,!0,this.Ma)}}function Hs(t,e,n){null!=n&&s.clearTimeout(n),t.onload=l,t.onerror=l,t.onreadystatechange=l,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var Bs=0,zs=1;function Ws(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),P.call(this,n),this.code=t}function Gs(t){this.f=t}function Ks(t,e,n){if(this.c=t,this.l=(t=e||{}).secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Ys,this.g=pt(t.secureTokenHeaders||Xs),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||Js,this.a=pt(t.firebaseHeaders||Zs),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==wr(),!(n=s.XMLHttpRequest||n&&sp.a.INTERNAL.node&&sp.a.INTERNAL.node.XMLHttpRequest)&&!_r())throw new C("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,this.f=_r()?new hs(self):Er()?new Gs(n):new Yo,this.b=null}O(Ws,P),O(Gs,Ko),Gs.prototype.a=function(){return new this.f},Gs.prototype.b=function(){return{}};var Qs,$s="idToken",Ys=new qr(3e4,6e4),Xs={"Content-Type":"application/x-www-form-urlencoded"},Js=new qr(3e4,6e4),Zs={"Content-Type":"application/json"};function ta(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function ea(t,e){e&&(t.l=na("https://securetoken.googleapis.com/v1/token",e),t.h=na("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=na("https://identitytoolkit.googleapis.com/v2/",e))}function na(t,e){return t=Vn(t),e=Vn(e.url),t.f=t.a+t.f,Pn(t,e.c),t.a=e.a,Rn(t,e.g),t.toString()}function ra(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function ia(t,e,n,r,i,o,a){(function(){var t=xr();return!((t=Cr(t)!=Sr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||Qt&&oe&&!(9<oe))})()||_r()?t=_(t.u,t):(Qs||(Qs=new be(function(t,e){!function(t,e){((window.gapi||{}).client||{}).request?t():(s[sa]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Ps(t,null,e,void 0)}(Us(Tt(oa,{onload:sa})),function(){e(Error("CORS_UNSUPPORTED"))}))}(t,e)})),t=_(t.s,t)),t(e,n,r,i,o,a)}Ks.prototype.T=function(){return this.b},Ks.prototype.u=function(t,e,n,r,i,o){if(_r()&&(void 0===s.fetch||void 0===s.Headers||void 0===s.Request))throw new C("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new ms(this.f);if(o){a.g=Math.max(0,o);var u=setTimeout(function(){a.dispatchEvent("timeout")},o)}wn(a,"complete",function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return ls(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(n){t=null}e&&e(t)}),En(a,"ready",function(){u&&clearTimeout(u),ze(this)}),En(a,"timeout",function(){u&&clearTimeout(u),ze(this),e&&e(null)}),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.R=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():Ho.a(),t.C=function(t){return t.c||(t.c=t.b())}(t.D?t.D:Ho),t.a.onreadystatechange=_(t.Vb,t);try{ls(t.b,js(t,"Opening Xhr")),t.O=!0,t.a.open(n,String(e),!0),t.O=!1}catch(a){return ls(t.b,js(t,"Error opening Xhr: "+a.message)),void Es(t,a)}e=r||"";var o=new xn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(f(t)||"string"==typeof t)B(t,e,void 0);else for(var n=In(t),r=Tn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,function(t,e){o.set(e,t)}),i=function(t){t:{for(var e=ws,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=s.FormData&&e instanceof s.FormData,!K(_s,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{Ts(t),0<t.g&&(t.u=function(t){return Qt&&ie(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),ls(t.b,js(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=_(t.Ma,t)):t.s=Sn(t.Ma,t.g,t)),ls(t.b,js(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(a){ls(t.b,js(t,"Send error: "+a.message)),Es(t,a)}}(a,t,n,r,i)};var oa=new yt(Et,"https://apis.google.com/js/client.js?onload=%{onload}"),sa="__fcb"+Math.floor(1e6*Math.random()).toString();function aa(t){if("string"!=typeof(t=t.email)||!vr.test(t))throw new C("invalid-email")}function ua(t){"email"in t&&aa(t)}function ca(t){if(!t[$s]){if(t.mfaPendingCredential)throw new C("multi-factor-auth-required",null,pt(t));throw new C("internal-error")}}function la(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new C("internal-error")}else{if(!t.sessionInfo)throw new C("missing-verification-id");if(!t.code)throw new C("missing-verification-code")}}Ks.prototype.s=function(t,e,n,r,i){var o=this;Qs.then(function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})}).o(function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},Ks.prototype.zb=function(){return Za(this,qa,{})},Ks.prototype.Bb=function(t,e){return Za(this,Fa,{idToken:t,email:e})},Ks.prototype.Cb=function(t,e){return Za(this,Ua,{idToken:t,password:e})};var ha={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function fa(t){if(!t.phoneVerificationInfo)throw new C("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new C("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new C("missing-verification-code")}function da(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new C("internal-error")}function pa(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&Jn(t=new Qn(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function ga(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Go(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Go(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Go(t)):t.errorMessage&&(e=tu(t.errorMessage)),e)throw e;ca(t)}function va(t,e){return e.returnIdpCredential=!0,Za(t,za,e)}function ma(t,e){return e.returnIdpCredential=!0,Za(t,Ga,e)}function ya(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Za(t,Wa,e)}function ba(t){if(!t.oobCode)throw new C("invalid-action-code")}(t=Ks.prototype).Db=function(t,e){var n={idToken:t},r=[];return ft(ha,function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)}),r.length&&(n.deleteAttribute=r),Za(this,Fa,n)},t.vb=function(t,e){return vt(t={requestType:"PASSWORD_RESET",email:t},e),Za(this,Ra,t)},t.wb=function(t,e){return vt(t={requestType:"EMAIL_SIGNIN",email:t},e),Za(this,Aa,t)},t.ub=function(t,e){return vt(t={requestType:"VERIFY_EMAIL",idToken:t},e),Za(this,Na,t)},t.Eb=function(t,e,n){return vt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),Za(this,Pa,t)},t.fb=function(t){return Za(this,$a,t)},t.nb=function(t,e){return Za(this,La,{oobCode:t,newPassword:e})},t.Ra=function(t){return Za(this,wa,{oobCode:t})},t.jb=function(t){return Za(this,_a,{oobCode:t})};var _a={endpoint:"setAccountInfo",A:ba,Z:"email",B:!0},wa={endpoint:"resetPassword",A:ba,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new C("internal-error")},B:!0},Ea={endpoint:"signupNewUser",A:function(t){if(aa(t),!t.password)throw new C("weak-password")},G:ca,V:!0,B:!0},Oa={endpoint:"createAuthUri",B:!0},Sa={endpoint:"deleteAccount",N:["idToken"]},Ca={endpoint:"setAccountInfo",N:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new C("internal-error")}},Ta={endpoint:"emailLinkSignin",N:["email","oobCode"],A:aa,G:ca,V:!0,B:!0},Ia={endpoint:"emailLinkSignin",N:["idToken","email","oobCode"],A:aa,G:ca,V:!0},xa={endpoint:"accounts/mfaEnrollment:finalize",N:["idToken","phoneVerificationInfo"],A:fa,G:ca,B:!0,Na:!0},ja={endpoint:"accounts/mfaSignIn:finalize",N:["mfaPendingCredential","phoneVerificationInfo"],A:fa,G:ca,B:!0,Na:!0},ka={endpoint:"getAccountInfo"},Aa={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new C("internal-error");aa(t)},Z:"email",B:!0},Na={endpoint:"getOobConfirmationCode",N:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new C("internal-error")},Z:"email",B:!0},Pa={endpoint:"getOobConfirmationCode",N:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new C("internal-error")},Z:"email",B:!0},Ra={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new C("internal-error");aa(t)},Z:"email",B:!0},Da={lb:!0,endpoint:"getProjectConfig",Ub:"GET"},Ma={lb:!0,endpoint:"getRecaptchaParam",Ub:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new C("internal-error")}},La={endpoint:"resetPassword",A:ba,Z:"email",B:!0},Va={endpoint:"sendVerificationCode",N:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Fa={endpoint:"setAccountInfo",N:["idToken"],A:ua,V:!0},Ua={endpoint:"setAccountInfo",N:["idToken"],A:function(t){if(ua(t),!t.password)throw new C("weak-password")},G:ca,V:!0},qa={endpoint:"signupNewUser",G:ca,V:!0,B:!0},Ha={endpoint:"accounts/mfaEnrollment:start",N:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new C("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new C("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new C("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new C("internal-error")},B:!0,Na:!0},Ba={endpoint:"accounts/mfaSignIn:start",N:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new C("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new C("internal-error")},B:!0,Na:!0},za={endpoint:"verifyAssertion",A:da,Ya:pa,G:ga,V:!0,B:!0},Wa={endpoint:"verifyAssertion",A:da,Ya:pa,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new C("user-not-found");if(t.errorMessage)throw tu(t.errorMessage);ca(t)},V:!0,B:!0},Ga={endpoint:"verifyAssertion",A:function(t){if(da(t),!t.idToken)throw new C("internal-error")},Ya:pa,G:ga,V:!0},Ka={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new C("invalid-custom-token")},G:ca,V:!0,B:!0},Qa={endpoint:"verifyPassword",A:function(t){if(aa(t),!t.password)throw new C("wrong-password")},G:ca,V:!0,B:!0},$a={endpoint:"verifyPhoneNumber",A:la,G:ca,B:!0},Ya={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new C("internal-error");la(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Go(t);ca(t)}},Xa={Hb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:la,G:ca,B:!0},Ja={endpoint:"accounts/mfaEnrollment:withdraw",N:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[$s]^!!t.refreshToken)throw new C("internal-error")},B:!0,Na:!0};function Za(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.N))return Ie(new C("internal-error"));var r,i=!!e.Na,o=e.Ub||"POST";return Te(n).then(e.A).then(function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o,s){var a=Vn(e+n);Mn(a,"key",t.c),s&&Mn(a,"cb",E().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Mn(a,c,i[c]);return new be(function(e,n){ia(t,a.toString(),function(t){t?t.error?n(eu(t,o||{})):e(t):n(new C("network-request-failed"))},r,u?void 0:nr(Mr(i)),t.a,t.v.get())})}(t,i?t.i:t.h,e.endpoint,o,n,e.Hb,e.lb||!1)}).then(function(t){return r=t,e.Ya?e.Ya(n,r):r}).then(e.G).then(function(){if(!e.Z)return r;if(!(e.Z in r))throw new C("internal-error");return r[e.Z]})}function tu(t){return eu({error:{errors:[{message:t}],code:400,message:t}})}function eu(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new C(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",vt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new C(r[i],e);return!e&&t&&(e=Dr(t)),new C("internal-error",e)}function nu(t){this.b=t,this.a=null,this.rb=function(t){return(su||(su=new be(function(t,e){function n(){Ur(),jr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Ur(),e(Error("Network Error"))},timeout:iu.get()})}if(jr("gapi.iframes.Iframe"))t();else if(jr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();s[r]=function(){jr("gapi.load")?n():e(Error("Network Error"))},Te(Us(r=Tt(ru,{onload:r}))).o(function(){e(Error("Network Error"))})}}).o(function(t){throw su=null,t}))).then(function(){return new be(function(e,n){jr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:jr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout(function(){n(Error("Network Error"))},ou.get());r.ping(i).then(i,function(){n(Error("Network Error"))})})})})}(this)}var ru=new yt(Et,"https://apis.google.com/js/api.js?onload=%{onload}"),iu=new qr(3e4,6e4),ou=new qr(5e3,15e3),su=null;function au(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,t=this.g?Fn((t=Vn(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):Fn("https",this.l,null,"/__/auth/iframe"),this.a=t,Mn(this.a,"apiKey",this.h),Mn(this.a,"appName",this.i),this.b=null,this.c=[]}function uu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function cu(t){try{return sp.a.app(t).auth().Ga()}catch(e){return[]}}function lu(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function hu(t){var e=cr();return function(t){return Za(t,Da,{}).then(function(t){return t.authorizedDomains||[]})}(t).then(function(t){t:{var n=Vn(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=Vn(o).a==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:gr.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){t=!0;break t}}t=!1}if(!t)throw new zo(cr())})}function fu(t){return t.m||(t.m=mr().then(function(){if(!t.u){var e=t.c,n=t.i,r=cu(t.b),i=new au(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=X(r||[]),t.u=i.toString()}t.v=new nu(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.rb.then(function(){t.a.register("authEvent",e,jr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(t.v,function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Uo(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Te(n)}return n.status="ERROR",Te(n)})}(t)})),t.m}function du(t){return t.l||(t.C=t.c?Ir(t.c,cu(t.b)):null,t.l=new Ks(t.g,A(t.i),t.C),t.f&&ea(t.l,t.f)),t.l}function pu(t,e,n,r,i,o,s,a,u,c,l,h){return(t=new uu(t,e,n,r,i,h)).l=o,t.g=s,t.i=a,t.b=pt(u||null),t.f=c,t.yb(l).toString()}function gu(t){if(this.a=t||sp.a.INTERNAL.reactNative&&sp.a.INTERNAL.reactNative.AsyncStorage,!this.a)throw new C("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function vu(t){this.b=t,this.a={},this.f=_(this.c,this)}au.prototype.toString=function(){return this.f?Mn(this.a,"v",this.f):Xn(this.a.b,"v"),this.b?Mn(this.a,"eid",this.b):Xn(this.a.b,"eid"),this.c.length?Mn(this.a,"fw",this.c.join(",")):Xn(this.a.b,"fw"),this.a.toString()},uu.prototype.yb=function(t){return this.h=t,this},uu.prototype.toString=function(){if(this.v){var t=Vn(this.v.url);t=Fn(t.c,t.a,t.g,"/emulator/auth/handler")}else t=Fn("https",this.u,null,"/__/auth/handler");if(Mn(t,"apiKey",this.s),Mn(t,"appName",this.c),Mn(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=sp.a.app(this.c).auth().la()}catch(a){n=null}for(var r in e.ob=n,Mn(t,"providerId",this.a.providerId),e=Mr((n=this.a).Ib))e[r]=e[r].toString();r=n.Qc,e=pt(e);for(var i=0;i<r.length;i++){var o=r[i];o in e&&delete e[o]}n.pb&&n.ob&&!e[n.pb]&&(e[n.pb]=n.ob),dt(e)||Mn(t,"customParameters",Dr(e))}if("function"==typeof this.a.Qb&&(n=this.a.Qb()).length&&Mn(t,"scopes",n.join(",")),this.l?Mn(t,"redirectUrl",this.l):Xn(t.b,"redirectUrl"),this.g?Mn(t,"eventId",this.g):Xn(t.b,"eventId"),this.i?Mn(t,"v",this.i):Xn(t.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Ln(t,s)&&Mn(t,s,this.b[s]);return this.h?Mn(t,"tid",this.h):Xn(t.b,"tid"),this.f?Mn(t,"eid",this.f):Xn(t.b,"eid"),(s=cu(this.c)).length&&Mn(t,"fw",s.join(",")),t.toString()},(t=lu.prototype).Ob=function(t,e,n){var r=new C("popup-closed-by-user"),i=new C("web-storage-unsupported"),o=this,s=!1;return this.ma().then(function(){(function(t){var e={type:"webStorageSupport"};return fu(t).then(function(){return function(t,e){return t.rb.then(function(){return new be(function(n){t.a.send(e.type,e,n,jr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}(t.v,e)}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()})})(o).then(function(n){n||(t&&dr(t),e(i),s=!0)})}).o(function(){}).then(function(){if(!s)return function(t){return new be(function(e){return function n(){Cn(2e3).then(function(){if(t&&!t.closed)return n();e()})}()})}(t)}).then(function(){if(!s)return Cn(n).then(function(){e(r)})})},t.Xb=function(){var t=xr();return!Rr(t)&&!Fr(t)},t.Tb=function(){return!1},t.Mb=function(t,e,n,r,i,o,s,a){if(!t)return Ie(new C("popup-blocked"));if(s&&!Rr())return this.ma().o(function(e){dr(t),i(e)}),r(),Te();this.a||(this.a=hu(du(this)));var u=this;return this.a.then(function(){var e=u.ma().o(function(e){throw dr(t),i(e),e});return r(),e}).then(function(){Vo(n),s||lr(pu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,a,u.f),t)}).o(function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t})},t.Nb=function(t,e,n,r){this.a||(this.a=hu(du(this)));var i=this;return this.a.then(function(){Vo(e),lr(pu(i.s,i.g,i.b,t,e,cr(),n,i.c,void 0,i.i,r,i.f))}).o(function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t})},t.ma=function(){var t=this;return fu(this).then(function(){return t.v.rb}).o(function(){throw t.a=null,new C("network-request-failed")})},t.$b=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Sa=function(t){$(this.h,function(e){return e==t})},(t=gu.prototype).get=function(t){return Te(this.a.getItem(t)).then(function(t){return t&&Lr(t)})},t.set=function(t,e){return Te(this.a.setItem(t,Dr(e)))},t.U=function(t){return Te(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var mu,yu=[];function bu(t,e,n){dt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function _u(t){this.a=t}function wu(t){this.c=t,this.b=!1,this.a=[]}function Eu(t,e,n,r){var i,o,s,a,u=n||{},c=null;if(t.b)return Ie(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new be(function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),s=setTimeout(function(){r(Error("unsupported_event"))},l),t.a.push(c={messageChannel:h,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout(function(){r(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))}}),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))}).then(function(e){return Ou(t,c),e}).o(function(e){throw Ou(t,c),e})}function Ou(t,e){if(e){var n=e.messageChannel;n&&(n.port1.removeEventListener("message",e.onMessage),n.port1.close()),$(t.a,function(t){return t==e})}}function Su(){if(!xu())throw new C("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=s.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;_r()&&self?(this.v=function(){var t=_r()?self:null;if(B(yu,function(n){n.b==t&&(e=n)}),!e){var e=new vu(t);yu.push(e)}return e}(),bu(this.v,"keyChanged",function(e,n){return Pu(t).then(function(e){return 0<e.length&&B(t.a,function(t){t(e)}),{keyProcessed:K(e,n.key)}})}),bu(this.v,"ping",function(){return Te(["keyChanged"])})):function(){var t=s.navigator;return t&&t.serviceWorker?Te().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).o(function(){return null}):Te(null)}().then(function(e){(t.h=e)&&(t.g=new wu(new _u(e)),Eu(t.g,"ping",null,!0).then(function(e){e[0].fulfilled&&K(e[0].value,"keyChanged")&&(t.s=!0)}).o(function(){}))})}function Cu(t){return new be(function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(e){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){n(e)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new be(function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}})}(t).then(function(){return Cu(t)}).then(function(t){e(t)}).o(function(t){n(t)})}})}function Tu(t){return t.i||(t.i=Cu(t)),t.i}function Iu(t,e){var n=0;return new be(function r(i,o){Tu(t).then(e).then(i).o(function(e){if(!(3<++n))return Tu(t).then(function(e){return e.close(),t.i=void 0,r(i,o)}).o(function(t){o(t)});o(e)})})}function xu(){try{return!!s.indexedDB}catch(Gt){return!1}}function ju(t){return t.objectStore("firebaseLocalStorage")}function ku(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Au(t){return new be(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function Nu(t,e){return t.g&&t.h&&function(){var t=s.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Eu(t.g,"keyChanged",{key:e},t.s).then(function(){}).o(function(){}):Te()}function Pu(t){return Tu(t).then(function(t){var e=ju(ku(t,!1));return e.getAll?Au(e.getAll()):new be(function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}})}).then(function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=hr(t.c,n),t.c=n}return r})}function Ru(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Du(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Te().then(function(){if(xu()){var t=Vr(),r="__sak"+t;return mu||(mu=new Su),(n=mu).set(r,t).then(function(){return n.get(r)}).then(function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)}).then(function(){return n}).o(function(){return e.c})}return e.c}).then(function(t){return e.type=t.type,t.ca(function(t){B(e.a,function(e){e(t)})}),t})}function Mu(){this.a={},this.type="inMemory"}function Lu(){if(!function(){var t="Node"==wr();if(!(t=Vu()||t&&sp.a.INTERNAL.node&&sp.a.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==wr())throw new C("internal-error","The LocalStorage compatibility library was not found.");throw new C("web-storage-unsupported")}this.a=Vu()||sp.a.INTERNAL.node.localStorage,this.type="localStorage"}function Vu(){try{var t=s.localStorage,e=Vr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Fu(){this.type="nullStorage"}function Uu(){if(!function(){var t="Node"==wr();if(!(t=qu()||t&&sp.a.INTERNAL.node&&sp.a.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==wr())throw new C("internal-error","The SessionStorage compatibility library was not found.");throw new C("web-storage-unsupported")}this.a=qu()||sp.a.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function qu(){try{var t=s.sessionStorage,e=Vr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Hu(){var t={};t.Browser=Wu,t.Node=Gu,t.ReactNative=Ku,t.Worker=Qu,this.a=t[wr()]}vu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];B(r,function(e){i.push(Te().then(function(){return e(t.origin,t.data.data)}))}),je(i).then(function(r){var i=[];B(r,function(t){i.push({fulfilled:t.Pb,value:t.value,reason:t.reason?t.reason.message:void 0})}),B(i,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})})}},_u.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},wu.prototype.close=function(){for(;0<this.a.length;)Ou(this,this.a[0]);this.b=!0},(t=Su.prototype).set=function(t,e){var n=this,r=!1;return Iu(this,function(e){return Au((e=ju(ku(e,!0))).get(t))}).then(function(i){return Iu(n,function(o){if(o=ju(ku(o,!0)),i)return i.value=e,Au(o.put(i));n.b++,r=!0;var s={};return s.fbase_key=t,s.value=e,Au(o.add(s))})}).then(function(){return n.c[t]=e,Nu(n,t)}).oa(function(){r&&n.b--})},t.get=function(t){return Iu(this,function(e){return Au(ju(ku(e,!1)).get(t))}).then(function(t){return t&&t.value})},t.U=function(t){var e=this,n=!1;return Iu(this,function(r){return n=!0,e.b++,Au(ju(ku(r,!0)).delete(t))}).then(function(){return delete e.c[t],Nu(e,t)}).oa(function(){n&&e.b--})},t.ca=function(t){0==this.a.length&&function(t){Ru(t),function e(){t.f=setTimeout(function(){t.l=Pu(t).then(function(e){0<e.length&&B(t.a,function(t){t(e)})}).then(function(){e()}).o(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()}(this),this.a.push(t)},t.ia=function(t){$(this.a,function(e){return e==t}),0==this.a.length&&Ru(this)},(t=Du.prototype).get=function(t){return this.b.then(function(e){return e.get(t)})},t.set=function(t,e){return this.b.then(function(n){return n.set(t,e)})},t.U=function(t){return this.b.then(function(e){return e.U(t)})},t.ca=function(t){this.a.push(t)},t.ia=function(t){$(this.a,function(e){return e==t})},(t=Mu.prototype).get=function(t){return Te(this.a[t])},t.set=function(t,e){return this.a[t]=e,Te()},t.U=function(t){return delete this.a[t],Te()},t.ca=function(){},t.ia=function(){},(t=Lu.prototype).get=function(t){var e=this;return Te().then(function(){return Lr(e.a.getItem(t))})},t.set=function(t,e){var n=this;return Te().then(function(){var r=Dr(e);null===r?n.U(t):n.a.setItem(t,r)})},t.U=function(t){var e=this;return Te().then(function(){e.a.removeItem(t)})},t.ca=function(t){s.window&&un(s.window,"storage",t)},t.ia=function(t){s.window&&hn(s.window,"storage",t)},(t=Fu.prototype).get=function(){return Te(null)},t.set=function(){return Te()},t.U=function(){return Te()},t.ca=function(){},t.ia=function(){},(t=Uu.prototype).get=function(t){var e=this;return Te().then(function(){return Lr(e.a.getItem(t))})},t.set=function(t,e){var n=this;return Te().then(function(){var r=Dr(e);null===r?n.U(t):n.a.setItem(t,r)})},t.U=function(t){var e=this;return Te().then(function(){e.a.removeItem(t)})},t.ca=function(){},t.ia=function(){};var Bu,zu,Wu={F:Lu,bb:Uu},Gu={F:Lu,bb:Uu},Ku={F:gu,bb:Fu},Qu={F:Lu,bb:Fu},$u={rd:"local",NONE:"none",td:"session"};function Yu(){var t=!(Fr(xr())||!br()),e=Rr(),n=kr();this.m=t,this.h=e,this.l=n,this.a={},Bu||(Bu=new Hu),t=Bu;try{this.g=!ur()&&zr()||!s.indexedDB?new t.a.F:new Du(_r()?new Mu:new t.a.F)}catch(r){this.g=new Mu,this.h=!0}try{this.i=new t.a.bb}catch(r){this.i=new Mu}this.v=new Mu,this.f=_(this.Yb,this),this.b={}}function Xu(){return zu||(zu=new Yu),zu}function Ju(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function Zu(t,e){return"firebase:"+t.name+(e?":"+e:"")}function tc(t,e,n){return n=Zu(e,n),"local"==e.F&&(t.b[n]=null),Ju(t,e.F).U(n)}function ec(t){t.c&&(clearInterval(t.c),t.c=null)}function nc(t){this.a=t,this.b=Xu()}(t=Yu.prototype).get=function(t,e){return Ju(this,t.F).get(Zu(t,e))},t.set=function(t,e,n){var r=Zu(t,n),i=this,o=Ju(this,t.F);return o.set(r,e).then(function(){return o.get(r)}).then(function(e){"local"==t.F&&(i.b[r]=e)})},t.addListener=function(t,e,n){t=Zu(t,e),this.l&&(this.b[t]=s.localStorage.getItem(t)),dt(this.a)&&(Ju(this,"local").ca(this.f),this.h||(ur()||!zr())&&s.indexedDB||!this.l||function(t){ec(t),t.c=setInterval(function(){for(var e in t.a){var n=s.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Ye({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Yb(n))}},1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=Zu(t,e),this.a[t]&&($(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),dt(this.a)&&(Ju(this,"local").ia(this.f),ec(this))},t.Yb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=s.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.mb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Ju(this,"local").ia(this.f):ec(this),this.m)if(n=s.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?s.localStorage.setItem(e,r):s.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===s.localStorage.getItem(e)||(o.b[e]=s.localStorage.getItem(e),o.mb(e))},Qt&&oe&&10==oe&&s.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else B(t,_(this.mb,this))},t.mb=function(t){this.a[t]&&B(this.a[t],function(t){t()})};var rc,ic={name:"authEvent",F:"local"};function oc(){this.a=Xu()}function sc(t,e){this.b=ac,this.f=s.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=s.Int32Array?new Int32Array(64):Array(64),void 0===rc&&(rc=s.Int32Array?new Int32Array(pc):pc),this.reset()}O(sc,function(){this.b=-1});for(var ac=64,uc=ac-1,cc=[],lc=0;lc<uc;lc++)cc[lc]=0;var hc=Y(128,cc);function fc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){var o=(0|n[e-16])+(((i=0|n[e-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+(((r=0|n[e-2])>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&l^~c&h)+(0|rc[e])|0)+(0|n[e])|0)|0,o=h,h=l,l=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function dc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(fc(t),i=0);else{if(!f(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(fc(t),i=0)}}t.c=i,t.g+=n}sc.prototype.reset=function(){this.g=this.c=0,this.a=s.Int32Array?new Int32Array(this.h):X(this.h)};var pc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function gc(){sc.call(this,8,vc)}O(gc,sc);var vc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function mc(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new oc,this.g=new nc(this.h),this.f=null,this.b=[],this.a=this.c=null}function yc(t){return new C("invalid-cordova-configuration",t)}function bc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(r){}}function _c(t){return t.f||(t.f=t.ma().then(function(){return new be(function(e){t.Ea(function n(r){return e(r),t.Sa(n),!1}),function(t){function e(e){r=!0,i&&i.cancel(),wc(t).then(function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=ro(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Lr(Ln(o=Vn(i),"firebaseError")||null))?T(o):null)?new Fo(r.c,r.b,null,null,o,null,r.T()):new Fo(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}bc(t,i)})}var n=new Fo("unknown",null,null,null,new C("no-auth-event")),r=!1,i=Cn(500).then(function(){return wc(t).then(function(){r||bc(t,n)})}),o=s.handleOpenURL;s.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(jr("BuildInfo.packageName",s).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(n){console.error(n)}},Bo||(Bo=new qo),function(t){var e=Bo;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=jr("universalLinks.subscribe",s))&&t(null,e.b))}(e)}(t)})})),t.f}function wc(t){var e=null;return function(t){return t.b.get(ic,t.a).then(function(t){return Uo(t)})}(t.g).then(function(n){return e=n,tc((n=t.g).b,ic,n.a)}).then(function(){return e})}function Ec(t){this.a=t,this.b=Xu()}(t=mc.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(yr(void 0)?mr().then(function(){return new be(function(t,e){var n=s.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):Ie(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof jr("universalLinks.subscribe",s))throw yc("cordova-universal-links-plugin-fix is not installed");if(void 0===jr("BuildInfo.packageName",s))throw yc("cordova-plugin-buildinfo is not installed");if("function"!=typeof jr("cordova.plugins.browsertab.openUrl",s))throw yc("cordova-plugin-browsertab is not installed");if("function"!=typeof jr("cordova.InAppBrowser.open",s))throw yc("cordova-plugin-inappbrowser is not installed")},function(){throw new C("cordova-not-ready")})},t.Ob=function(t,e){return e(new C("operation-not-supported-in-this-environment")),Te()},t.Mb=function(){return Ie(new C("operation-not-supported-in-this-environment"))},t.$b=function(){return!1},t.Xb=function(){return!0},t.Tb=function(){return!0},t.Nb=function(t,e,n,r){if(this.c)return Ie(new C("redirect-operation-pending"));var i=this,o=s.document,a=null,u=null,c=null,l=null;return this.c=Te().then(function(){return Vo(e),_c(i)}).then(function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new Fo(e,r,null,o,new C("no-auth-event"),null,i),u=jr("BuildInfo.packageName",s);if("string"!=typeof u)throw new C("invalid-cordova-configuration");var c=jr("BuildInfo.displayName",s),l={};if(xr().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=u;else{if(!xr().toLowerCase().match(/android/))return Ie(new C("operation-not-supported-in-this-environment"));l.apn=u}c&&(l.appDisplayName=c),o=function(t){var e=new gc;dc(e,t),t=[];var n=8*e.g;dc(e,hc,56>e.c?56-e.c:e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(fc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return W(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}(t)}(o),l.sessionId=o;var h=pu(t.v,t.i,t.l,e,n,null,r,t.m,l,t.u,i,t.s);return t.ma().then(function(){var e=t.h;return t.C.a.set(ic,a.w(),e)}).then(function(){var e=jr("cordova.plugins.browsertab.isAvailable",s);if("function"!=typeof e)throw new C("invalid-cordova-configuration");var n=null;e(function(e){if(e){if("function"!=typeof(n=jr("cordova.plugins.browsertab.openUrl",s)))throw new C("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=jr("cordova.InAppBrowser.open",s)))throw new C("invalid-cordova-configuration");e=xr(),t.a=n(h,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(i,t,e,n,r)}).then(function(){return new be(function(t,e){u=function(){var e=jr("cordova.plugins.browsertab.close",s);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),l=function(){Hr()&&c()},o.addEventListener("resume",c=function(){a||(a=Cn(2e3).then(function(){e(new C("redirect-cancelled-by-user"))}))},!1),xr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)}).o(function(t){return wc(i).then(function(){throw t})})}).oa(function(){c&&o.removeEventListener("resume",c,!1),l&&o.removeEventListener("visibilitychange",l,!1),a&&a.cancel(),u&&i.Sa(u),i.c=null})},t.Ea=function(t){this.b.push(t),_c(this).o(function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Fo("unknown",null,null,null,new C("no-auth-event")),t(e))})},t.Sa=function(t){$(this.b,function(e){return e==t})};var Oc={name:"pendingRedirect",F:"session"};function Sc(t){return tc(t.b,Oc,t.a)}function Cc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=_(this.s,this),this.b=new Uc,this.C=new Wc,this.g=new Ec(Vc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Tc(this.D,this.v,this.m,I,this.J)}function Tc(t,e,n,r,i){var o=sp.a.SDK_VERSION||null;return yr()?new mc(t,e,n,o,r,i):new lu(t,e,n,o,r,i)}function Ic(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o(function(n){throw t.a==e&&t.reset(),n})}function xc(t){t.a.Xb()&&Ic(t).o(function(e){var n=new Fo("unknown",null,null,null,new C("operation-not-supported-in-this-environment"));Rc(e)&&t.s(n)}),t.a.Tb()||qc(t.b)}function jc(t,e){K(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Oc,t.a).then(function(t){return"pending"==t})}(t.g).then(function(e){e?Sc(t.g).then(function(){Ic(t).o(function(e){var n=new Fo("unknown",null,null,null,new C("operation-not-supported-in-this-environment"));Rc(e)&&t.s(n)})}):xc(t)}).o(function(){xc(t)})}function kc(t,e){$(t.h,function(t){return t==e})}Cc.prototype.reset=function(){this.f=!1,this.a.Sa(this.l),this.a=Tc(this.D,this.v,this.m,null,this.J),this.i={}},Cc.prototype.s=function(t){if(!t)throw new C("invalid-auth-event");if(6e5<=E()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Fb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=E())),e=!0;break}}return qc(this.b),e};var Ac=new qr(2e3,1e4),Nc=new qr(3e4,6e4);function Pc(t,e,n,r,i,o,s){return t.a.Mb(e,n,r,function(){t.f||(t.f=!0,t.a.Ea(t.l))},function(){t.reset()},i,o,s)}function Rc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Dc(t,e,n,r,i){var o;return function(t){return t.b.set(Oc,"pending",t.a)}(t.g).then(function(){return t.a.Nb(e,n,r,i).o(function(e){if(Rc(e))throw new C("operation-not-supported-in-this-environment");return o=e,Sc(t.g).then(function(){throw o})}).then(function(){return t.a.$b()?new be(function(){}):Sc(t.g).then(function(){return t.qa()}).then(function(){}).o(function(){})})})}function Mc(t,e,n,r,i){return t.a.Ob(r,function(t){e.na(n,null,t,i)},Ac.get())}Cc.prototype.qa=function(){return this.b.qa()};var Lc={};function Vc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Fc(t,e,n,r){var i=Vc(e,n,r);return Lc[i]||(Lc[i]=new Cc(t,e,n,r)),Lc[i]}function Uc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function qc(t){t.g||(t.g=!0,zc(t,!1,null,null))}function Hc(t){t.g&&!t.i&&zc(t,!1,null,null)}function Bc(t,e){if(t.b=function(){return Te(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function zc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Ie(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Bc(t,n):Bc(t,{user:null}),t.f=[],t.c=[]}function Wc(){}function Gc(){this.ib=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.ib},set:function(t){this.ib=t},enumerable:!1})}function Kc(t,e){this.a=e,$r(this,"verificationId",t)}function Qc(t,e,n,r){return new Do(t).fb(e,n).then(function(t){return new Kc(t,r)})}function $c(t){var e=Bi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new C("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Yr(this,{token:t,expirationTime:Br(1e3*e.exp),authTime:Br(1e3*e.auth_time),issuedAtTime:Br(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Yc(t,e,n){var r=e&&e[Jc];if(!r)throw new C("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=pt(e),this.g=n,this.c=new io(null,r),this.b=[];var i=this;B(e[Xc]||[],function(t){(t=ti(t))&&i.b.push(t)}),$r(this,"auth",this.a),$r(this,"session",this.c),$r(this,"hints",this.b)}Uc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Uc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(zc(this,!0,null,t.a),Te()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,s=e.T(),a=!!e.c.match(/Redirect$/);n(r,i,s,o).then(function(e){zc(t,a,e,null)}).o(function(e){zc(t,a,null,e)})}(this,t,e):Ie(new C("invalid-auth-event")):(zc(this,!1,null,null),Te())}else Ie(new C("invalid-auth-event"))},Uc.prototype.qa=function(){var t=this;return new be(function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new C("timeout");t.a&&t.a.cancel(),t.a=Cn(Nc.get()).then(function(){t.b||(t.g=!0,zc(t,!0,null,e))})}(t))})},Wc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),Te()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then(function(t){e.na(r,t,null,n)}).o(function(t){e.na(r,null,t,n)})}(t,e):Ie(new C("invalid-auth-event"))}else Ie(new C("invalid-auth-event"))},Kc.prototype.confirm=function(t){return t=Mo(this.verificationId,t),this.a(t)};var Xc="mfaInfo",Jc="mfaPendingCredential";function Zc(t,e,n,r){C.call(this,"multi-factor-auth-required",r,e),this.b=new Yc(t,e,n),$r(this,"resolver",this.b)}function tl(t,e,n){if(t&&p(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new Zc(e,t.serverResponse,n,t.message)}catch(r){}return null}function el(){}function nl(t){$r(this,"factorId",t.fa),this.a=t}function rl(t){if(nl.call(this,t),this.a.fa!=Do.PROVIDER_ID)throw new C("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function il(t,e){for(var n in $e.call(this,t),e)this[n]=e[n]}function ol(t,e){this.a=t,this.b=[],this.c=_(this.yc,this),un(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&B(e.multiFactor.enrolledFactors,function(t){var e=null,r={};if(t){t.uid&&(r[ri]=t.uid),t.displayName&&(r[ei]=t.displayName),t.enrollmentTime&&(r[ni]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[ii]=t.phoneNumber);try{e=new oi(r)}catch(i){}t=e}else t=null;t&&n.push(t)}),sl(this,n)}function sl(t,e){t.b=e,$r(t,"enrolledFactors",e)}function al(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function ul(t,e){t.stop(),t.b=Cn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then(function(){return function(){var t=s.document,e=null;return Hr()||!t?Te():new be(function(n){e=function(){Hr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)}).o(function(n){throw t.removeEventListener("visibilitychange",e,!1),n})}()}).then(function(){return t.h()}).then(function(){ul(t,!0)}).o(function(e){t.i(e)&&ul(t,!1)})}function cl(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function ll(t,e){void 0===e&&(e=t.b?(e=t.b).a-e.g:0),t.c=Date.now()+1e3*e}function hl(t,e){t.b=Hi(e[$s]||""),t.a=e.refreshToken,ll(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function fl(t,e){this.a=t||null,this.b=e||null,Yr(this,{lastSignInTime:Br(e||null),creationTime:Br(t||null)})}function dl(t,e,n,r,i,o){Yr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function pl(t,e,n){this.J=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r=sp.a.SDK_VERSION?Ir(sp.a.SDK_VERSION):null;this.a=new Ks(this.l,A(I),r),t.emulatorConfig&&ea(this.a,t.emulatorConfig),this.b=new cl(this.a),El(this,e[$s]),hl(this.b,e),$r(this,"refreshToken",this.b.a),Cl(this,n||{}),_n.call(this),this.R=!1,this.s&&Ar()&&(this.i=Fc(this.s,this.l,this.m)),this.S=[],this.h=null,this.u=function(t){return new al(function(){return t.I(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var e=t.b.c-Date.now()-3e5;return 0<e?e:0})}(this),this.aa=_(this.hb,this);var i=this;this.ya=null,this.Oa=function(t){i.wa(t.h)},this.ja=null,this.Aa=function(t){ea(i.a,t.c)},this.X=null,this.$=[],this.Ba=function(t){ml(i,t.f)},this.ba=null,this.O=new ol(this,n),$r(this,"multiFactor",this.O)}function gl(t,e){t.ja&&hn(t.ja,"languageCodeChanged",t.Oa),(t.ja=e)&&un(e,"languageCodeChanged",t.Oa)}function vl(t,e){t.X&&hn(t.X,"emulatorConfigChanged",t.Aa),(t.X=e)&&un(e,"emulatorConfigChanged",t.Aa)}function ml(t,e){t.$=e,ra(t.a,sp.a.SDK_VERSION?Ir(sp.a.SDK_VERSION,t.$):null)}function yl(t,e){t.ba&&hn(t.ba,"frameworkChanged",t.Ba),(t.ba=e)&&un(e,"frameworkChanged",t.Ba)}function bl(t){try{return sp.a.app(t.m).auth()}catch(e){throw new C("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function _l(t){t.D||t.u.b||(t.u.start(),hn(t,"tokenChanged",t.aa),un(t,"tokenChanged",t.aa))}function wl(t){hn(t,"tokenChanged",t.aa),t.u.stop()}function El(t,e){t.za=e,$r(t,"_lat",e)}function Ol(t){for(var e=[],n=0;n<t.S.length;n++)e.push(t.S[n](t));return je(e).then(function(){return t})}function Sl(t){t.i&&!t.R&&(t.R=!0,jc(t.i,t))}function Cl(t,e){Yr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new fl(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Tl(){}function Il(t){return Te().then(function(){if(t.D)throw new C("app-deleted")})}function xl(t){return W(t.providerData,function(t){return t.providerId})}function jl(t,e){e&&(kl(t,e.providerId),t.providerData.push(e))}function kl(t,e){$(t.providerData,function(t){return t.providerId==e})}function Al(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&$r(t,e,n)}function Nl(t,e){t!=e&&(Yr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),$r(t,"metadata",e.metadata?function(t){return new fl(t.a,t.b)}(e.metadata):new fl),B(e.providerData,function(e){jl(t,e)}),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.b,e.b),$r(t,"refreshToken",t.b.a),sl(t.O,e.O.b))}function Pl(t){return t.I().then(function(e){var n=t.isAnonymous;return function(t,e){return Za(t.a,ka,{idToken:e}).then(_(t.Kc,t))}(t,e).then(function(){return n||Al(t,"isAnonymous",!1),e})})}function Rl(t,e){e[$s]&&t.za!=e[$s]&&(hl(t.b,e),t.dispatchEvent(new il("tokenChanged")),El(t,e[$s]),Al(t,"refreshToken",t.b.a))}function Dl(t,e){return Pl(t).then(function(){if(K(xl(t),e))return Ol(t).then(function(){throw new C("provider-already-linked")})})}function Ml(t,e,n){return Xr({user:t,credential:Lo(e),additionalUserInfo:e=Qi(e),operationType:n})}function Ll(t,e){return Rl(t,e),t.reload().then(function(){return t})}function Vl(t,e,n,r,i){if(!Ar())return Ie(new C("operation-not-supported-in-this-environment"));if(t.h&&!i)return Ie(t.h);var o=Ki(n.providerId),s=Vr(t.uid+":::"),a=null;(!Rr()||br())&&t.s&&n.isOAuthProvider&&(a=pu(t.s,t.l,t.m,e,n,null,s,sp.a.SDK_VERSION||null,null,null,t.tenantId));var u=pr(a,o&&o.ua,o&&o.ta);return r=r().then(function(){if(Ul(t),!i)return t.I().then(function(){})}).then(function(){return Pc(t.i,u,e,n,s,!!a,t.tenantId)}).then(function(){return new be(function(n,r){t.na(e,null,new C("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=s,t.c=Mc(t.i,t,e,u,s)})}).then(function(t){return u&&dr(u),t?Xr(t):null}).o(function(t){throw u&&dr(u),t}),ql(t,r,i)}function Fl(t,e,n,r,i){if(!Ar())return Ie(new C("operation-not-supported-in-this-environment"));if(t.h&&!i)return Ie(t.h);var o=null,s=Vr(t.uid+":::");return r=r().then(function(){if(Ul(t),!i)return t.I().then(function(){})}).then(function(){return t.ga=s,Ol(t)}).then(function(e){return t.ha&&(e=(e=t.ha).b.set(zl,t.w(),e.a)),e}).then(function(){return Dc(t.i,e,n,s,t.tenantId)}).o(function(e){if(o=e,t.ha)return Wl(t.ha);throw o}).then(function(){if(o)throw o}),ql(t,r,i)}function Ul(t){if(!t.i||!t.R){if(t.i&&!t.R)throw new C("internal-error");throw new C("auth-domain-config-required")}}function ql(t,e,n){var r=function(t,e,n){return t.h&&!n?(e.cancel(),Ie(t.h)):e.o(function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.h||t.dispatchEvent(new il("userInvalidated")),t.h=e),e})}(t,e,n);return t.J.push(r),r.oa(function(){Q(t.J,r)}),r.o(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=tl(e.w(),bl(t),_(t.jc,t))),n||e})}function Hl(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[$s]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new pl(e,n,t);return t.providerData&&B(t.providerData,function(t){t&&jl(i,Xr(t))}),t.redirectEventId&&(i.ga=t.redirectEventId),i}function Bl(t){this.a=t,this.b=Xu()}Yc.prototype.Rc=function(t){var e=this;return t.sb(this.a.a,this.c).then(function(t){var n=pt(e.f);return delete n[Xc],delete n[Jc],vt(n,t),e.g(n)})},O(Zc,C),el.prototype.sb=function(t,e,n){return e.type==oo?function(t,e,n,r){return n.Ha().then(function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),vt(n,{phoneVerificationInfo:Ro(t.a)}),Za(e,xa,n)})}(this,t,e,n):function(t,e,n){return n.Ha().then(function(n){return vt(n={mfaPendingCredential:n},{phoneVerificationInfo:Ro(t.a)}),Za(e,ja,n)})}(this,t,e)},O(nl,el),O(rl,nl),O(il,$e),(t=ol.prototype).yc=function(t){sl(this,function(t){var e=[];return B(t.mfaInfo||[],function(t){(t=ti(t))&&e.push(t)}),e}(t.hd))},t.Rb=function(){return this.a.I().then(function(t){return new io(t,null)})},t.fc=function(t,e){var n=this,r=this.a.a;return this.Rb().then(function(n){return t.sb(r,n,e)}).then(function(t){return Rl(n.a,t),n.a.reload()})},t.bd=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then(function(t){return Za(r,Ja,{idToken:t,mfaEnrollmentId:n})}).then(function(t){var r=z(e.b,function(t){return t.uid!=n});return sl(e,r),Rl(e.a,t),e.a.reload().o(function(t){if("auth/user-token-expired"!=t.code)throw t})})},t.w=function(){return{multiFactor:{enrolledFactors:W(this.b,function(t){return t.w()})}}},al.prototype.start=function(){this.a=this.c,ul(this,!0)},al.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},cl.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},cl.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Ie(new C("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?function(t,e){return function(t,e){return new be(function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?ia(t,t.l+"?key="+encodeURIComponent(t.c),function(t){t?t.error?r(eu(t)):t.access_token&&t.refresh_token?n(t):r(new C("internal-error")):r(new C("network-request-failed"))},"POST",Yn(e).toString(),t.g,t.m.get()):r(new C("internal-error"))})}(t.f,e).then(function(e){return t.b=Hi(e.access_token),t.a=e.refresh_token,ll(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}}).o(function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e})}(this,{grant_type:"refresh_token",refresh_token:this.a}):Te(null):Te({accessToken:this.b.toString(),refreshToken:this.a})},fl.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},O(pl,_n),pl.prototype.wa=function(t){this.ya=t,ta(this.a,t)},pl.prototype.la=function(){return this.ya},pl.prototype.Ga=function(){return X(this.$)},pl.prototype.hb=function(){this.u.b&&(this.u.stop(),this.u.start())},$r(pl.prototype,"providerId","firebase"),(t=pl.prototype).reload=function(){var t=this;return ql(this,Il(this).then(function(){return Pl(t).then(function(){return Ol(t)}).then(Tl)}))},t.oc=function(t){return this.I(t).then(function(t){return new $c(t)})},t.I=function(t){var e=this;return ql(this,Il(this).then(function(){return e.b.getToken(t)}).then(function(t){if(!t)throw new C("internal-error");return t.accessToken!=e.za&&(El(e,t.accessToken),e.dispatchEvent(new il("tokenChanged"))),Al(e,"refreshToken",t.refreshToken),t.accessToken}))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new C("internal-error");Cl(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?W(t,function(t){return new dl(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[]}(t),n=0;n<e.length;n++)jl(this,e[n]);Al(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new il("userReloaded",{hd:t}))},t.Lc=function(t){return Kr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.tb(t)},t.tb=function(t){var e=this,n=null;return ql(this,t.c(this.a,this.uid).then(function(t){return Rl(e,t),n=Ml(e,t,"reauthenticate"),e.h=null,e.reload()}).then(function(){return n}),!0)},t.Cc=function(t){return Kr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.qb(t)},t.qb=function(t){var e=this,n=null;return ql(this,Dl(this,t.providerId).then(function(){return e.I()}).then(function(n){return t.b(e.a,n)}).then(function(t){return n=Ml(e,t,"link"),Ll(e,t)}).then(function(){return n}))},t.Dc=function(t,e){var n=this;return ql(this,Dl(this,"phone").then(function(){return Qc(bl(n),t,e,_(n.qb,n))}))},t.Mc=function(t,e){var n=this;return ql(this,Te().then(function(){return Qc(bl(n),t,e,_(n.tb,n))}),!0)},t.Bb=function(t){var e=this;return ql(this,this.I().then(function(n){return e.a.Bb(n,t)}).then(function(t){return Rl(e,t),e.reload()}))},t.ed=function(t){var e=this;return ql(this,this.I().then(function(n){return t.b(e.a,n)}).then(function(t){return Rl(e,t),e.reload()}))},t.Cb=function(t){var e=this;return ql(this,this.I().then(function(n){return e.a.Cb(n,t)}).then(function(t){return Rl(e,t),e.reload()}))},t.Db=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Il(this);var e=this;return ql(this,this.I().then(function(n){return e.a.Db(n,{displayName:t.displayName,photoUrl:t.photoURL})}).then(function(t){return Rl(e,t),Al(e,"displayName",t.displayName||null),Al(e,"photoURL",t.photoUrl||null),B(e.providerData,function(t){"password"===t.providerId&&($r(t,"displayName",e.displayName),$r(t,"photoURL",e.photoURL))}),Ol(e)}).then(Tl))},t.cd=function(t){var e=this;return ql(this,Pl(this).then(function(n){return K(xl(e),t)?function(t,e,n){return Za(t,Ca,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then(function(t){var n={};return B(t.providerUserInfo||[],function(t){n[t.providerId]=!0}),B(xl(e),function(t){n[t]||kl(e,t)}),n[Do.PROVIDER_ID]||$r(e,"phoneNumber",null),Ol(e)}):Ol(e).then(function(){throw new C("no-such-provider")})}))},t.delete=function(){var t=this;return ql(this,this.I().then(function(e){return Za(t.a,Sa,{idToken:e})}).then(function(){t.dispatchEvent(new il("userDeleted"))})).then(function(){for(var e=0;e<t.J.length;e++)t.J[e].cancel("app-deleted");gl(t,null),vl(t,null),yl(t,null),t.J=[],t.D=!0,wl(t),$r(t,"refreshToken",null),t.i&&kc(t.i,t)})},t.Fb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?_(this.Kb,this):"reauthViaPopup"==t&&e==(this.g||null)?_(this.Lb,this):"linkViaRedirect"==t&&(this.ga||null)==e?_(this.Kb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?_(this.Lb,this):null},t.Ec=function(t){var e=this;return Vl(this,"linkViaPopup",t,function(){return Dl(e,t.providerId).then(function(){return Ol(e)})},!1)},t.Nc=function(t){return Vl(this,"reauthViaPopup",t,function(){return Te()},!0)},t.Fc=function(t){var e=this;return Fl(this,"linkViaRedirect",t,function(){return Dl(e,t.providerId)},!1)},t.Oc=function(t){return Fl(this,"reauthViaRedirect",t,function(){return Te()},!0)},t.Kb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return ql(this,this.I().then(function(n){return ma(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})}).then(function(t){return o=Ml(i,t,"link"),Ll(i,t)}).then(function(){return o}))},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return ql(this,Te().then(function(){return uo(ya(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)}).then(function(t){return o=Ml(i,t,"reauthenticate"),Rl(i,t),i.h=null,i.reload()}).then(function(){return o}),!0)},t.ub=function(t){var e=this,n=null;return ql(this,this.I().then(function(e){return n=e,void 0===t||dt(t)?{}:Fi(new ji(t))}).then(function(t){return e.a.ub(n,t)}).then(function(t){if(e.email!=t)return e.reload()}).then(function(){}))},t.Eb=function(t,e){var n=this,r=null;return ql(this,this.I().then(function(t){return r=t,void 0===e||dt(e)?{}:Fi(new ji(e))}).then(function(e){return n.a.Eb(r,t,e)}).then(function(t){if(n.email!=t)return n.reload()}).then(function(){}))},t.jc=function(t){var e=null,n=this;return ql(this,t=uo(Te(t),n.uid).then(function(t){return e=Ml(n,t,"reauthenticate"),Rl(n,t),n.h=null,n.reload()}).then(function(){return e}),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&vt(t,this.metadata.w()),B(this.providerData,function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))}),vt(t,this.O.w()),t};var zl={name:"redirectUser",F:"session"};function Wl(t){return tc(t.b,zl,t.a)}function Gl(t){this.a=t,this.b=Xu(),this.c=null,this.f=function(t){var e=$l("local"),n=$l("session"),r=$l("none");return function(t,e,n){var r=Zu(e,n),i=Ju(t,e.F);return t.get(e,n).then(function(o){var a=null;try{a=Lr(s.localStorage.getItem(r))}catch(u){}if(a&&!o)return s.localStorage.removeItem(r),t.set(e,a,n);a&&o&&"localStorage"!=i.type&&s.localStorage.removeItem(r)})}(t.b,e,t.a).then(function(){return t.b.get(n,t.a)}).then(function(i){return i?n:t.b.get(r,t.a).then(function(n){return n?r:t.b.get(e,t.a).then(function(n){return n?e:t.b.get(Ql,t.a).then(function(t){return t?$l(t):e})})})}).then(function(e){return t.c=e,Kl(t,e.F)}).o(function(){t.c||(t.c=e)})}(this),this.b.addListener($l("local"),this.a,_(this.g,this))}function Kl(t,e){var n,r=[];for(n in $u)$u[n]!==e&&r.push(tc(t.b,$l($u[n]),t.a));return r.push(tc(t.b,Ql,t.a)),function(t){return new be(function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},s=function(t){n(t)},a=0;a<t.length;a++)xe(t[a],w(o,a),s);else e(i)})}(r)}Gl.prototype.g=function(){var t=this,e=$l("local");Zl(this,function(){return Te().then(function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null}).then(function(n){if(n)return Kl(t,"local").then(function(){t.c=e})})})};var Ql={name:"persistence",F:"session"};function $l(t){return{name:"authUser",F:t}}function Yl(t,e){return Zl(t,function(){return t.b.set(t.c,e.w(),t.a)})}function Xl(t){return Zl(t,function(){return tc(t.b,t.c,t.a)})}function Jl(t,e,n){return Zl(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Hl(t||{})})})}function Zl(t,e){return t.f=t.f.then(e,e),t.f}function th(t){if(this.l=!1,$r(this,"settings",new Gc),$r(this,"app",t),!uh(this).options||!uh(this).options.apiKey)throw new C("invalid-api-key");t=sp.a.SDK_VERSION?Ir(sp.a.SDK_VERSION):null,this.a=new Ks(uh(this).options&&uh(this).options.apiKey,A(I),t),this.R=[],this.s=[],this.O=[],this.hb=sp.a.INTERNAL.createSubscribe(_(this.zc,this)),this.X=void 0,this.bc=sp.a.INTERNAL.createSubscribe(_(this.Ac,this)),sh(this,null),this.i=new Gl(uh(this).options.apiKey+":"+uh(this).name),this.D=new Bl(uh(this).options.apiKey+":"+uh(this).name),this.$=fh(this,function(t){var e=uh(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(zl,t.a).then(function(t){return t&&e&&(t.authDomain=e),Hl(t||{})})}(t.D,uh(t).options.authDomain).then(function(e){return(t.m=e)&&(e.ha=t.D),Wl(t.D)});return fh(t,e)}(t).then(function(){return Jl(t.i,e,t.P)}).then(function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then(function(){return Yl(t.i,e).then(function(){return e})}).o(function(n){return"auth/network-request-failed"==n.code?e:Xl(t.i)})):null}).then(function(e){sh(t,e||null)});return fh(t,n)}(this)),this.h=fh(this,function(t){return t.$.then(function(){return oh(t)}).o(function(){}).then(function(){if(!t.l)return t.ja()}).o(function(){}).then(function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener($l("local"),e.a,t.ja)}})}(this)),this.ba=!1,this.ja=_(this.Zc,this),this.Ba=_(this.da,this),this.ya=_(this.mc,this),this.za=_(this.wc,this),this.Aa=_(this.xc,this),this.b=null,function(t){var e=uh(t).options.authDomain,n=uh(t).options.apiKey;e&&Ar()&&(t.Oa=t.$.then(function(){if(!t.l){if(t.b=Fc(e,n,uh(t).name,t.P),jc(t.b,t),ch(t)&&Sl(ch(t)),t.m){Sl(t.m);var r=t.m;r.wa(t.la()),gl(r,t),ml(r=t.m,t.J),yl(r,t),ea((r=t.m).a,t.P),vl(r,t),t.m=null}return t.b}}))}(this),this.INTERNAL={},this.INTERNAL.delete=_(this.delete,this),this.INTERNAL.logFramework=_(this.Gc,this),this.u=0,_n.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.yb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.P){var t=Vn(this.P.url);t=Xr({protocol:t.c,host:t.a,port:t.g,options:Xr({disableWarnings:this.P.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.P=null}function eh(t){$e.call(this,"languageCodeChanged"),this.h=t}function nh(t){$e.call(this,"emulatorConfigChanged"),this.c=t}function rh(t){$e.call(this,"frameworkChanged"),this.f=t}function ih(t){return t.Oa||Ie(new C("auth-domain-config-required"))}function oh(t){if(!Ar())return Ie(new C("operation-not-supported-in-this-environment"));var e=ih(t).then(function(){return t.b.qa()}).then(function(t){return t?Xr(t):null});return fh(t,e)}function sh(t,e){ch(t)&&(function(t,e){$(t.S,function(t){return t==e})}(ch(t),t.Ba),hn(ch(t),"tokenChanged",t.ya),hn(ch(t),"userDeleted",t.za),hn(ch(t),"userInvalidated",t.Aa),wl(ch(t))),e&&(e.S.push(t.Ba),un(e,"tokenChanged",t.ya),un(e,"userDeleted",t.za),un(e,"userInvalidated",t.Aa),0<t.u&&_l(e)),$r(t,"currentUser",e),e&&(e.wa(t.la()),gl(e,t),ml(e,t.J),yl(e,t),ea(e.a,t.P),vl(e,t))}function ah(t,e){var n=null,r=null;return fh(t,e.then(function(e){return n=Lo(e),r=Qi(e),function(t,e){var n={};return n.apiKey=uh(t).options.apiKey,n.authDomain=uh(t).options.authDomain,n.appName=uh(t).name,t.P&&(n.emulatorConfig=t.P),t.$.then(function(){return function(t,e,n,r){var i=new pl(t,e);return n&&(i.ha=n),r&&ml(i,r),i.reload().then(function(){return i})}(n,e,t.D,t.Ga())}).then(function(e){return ch(t)&&e.uid==ch(t).uid?(Nl(ch(t),e),t.da(e)):(sh(t,e),Sl(e),t.da(e))}).then(function(){hh(t)})}(t,e)},function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=tl(e.w(),t,_(t.kc,t))),n||e}).then(function(){return Xr({user:ch(t),credential:n,additionalUserInfo:r,operationType:"signIn"})}))}function uh(t){return t.app}function ch(t){return t.currentUser}function lh(t){return ch(t)&&ch(t)._lat||null}function hh(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](lh(t));if(t.X!==t.getUid()&&t.O.length)for(t.X=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](lh(t))}}function fh(t,e){return t.R.push(e),e.oa(function(){Q(t.R,e)}),e}function dh(){}function ph(){this.a={},this.b=1e12}Gl.prototype.xb=function(t){var e=null,n=this;return function(t){var e=new C("invalid-persistence-type"),n=new C("unsupported-persistence-type");t:{for(r in $u)if($u[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(wr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!xu()&&"none"!==t)throw n;break;default:if(!kr()&&"none"!==t)throw n}}(t),Zl(this,function(){return t!=n.c.F?n.b.get(n.c,n.a).then(function(r){return e=r,Kl(n,t)}).then(function(){if(n.c=$l(t),e)return n.b.set(n.c,e,n.a)}):Te()})},O(th,_n),O(eh,$e),O(nh,$e),O(rh,$e),(t=th.prototype).xb=function(t){return fh(this,t=this.i.xb(t))},t.wa=function(t){this.aa===t||this.l||(this.aa=t,ta(this.a,this.aa),this.dispatchEvent(new eh(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=s.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.P){if(!/^https?:\/\//.test(t))throw new C("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),s.document&&!t&&mr().then(function(){var t=s.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#ff0000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),s.document.body.appendChild(t)})})(e=!!e&&!!e.disableWarnings),this.P={url:t,ec:e},this.settings.ib=!0,ea(this.a,this.P),this.dispatchEvent(new nh(this.P))}},t.Gc=function(t){this.J.push(t),ra(this.a,sp.a.SDK_VERSION?Ir(sp.a.SDK_VERSION,this.J):null),this.dispatchEvent(new rh(this.J))},t.Ga=function(){return X(this.J)},t.yb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:uh(this).options.apiKey,authDomain:uh(this).options.authDomain,appName:uh(this).name,currentUser:ch(this)&&ch(this).w()}},t.Fb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?_(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then(function(){return ah(i,va(i.a,o))})},t.Xc=function(t){if(!Ar())return Ie(new C("operation-not-supported-in-this-environment"));var e=this,n=Ki(t.providerId),r=Vr(),i=null;(!Rr()||br())&&uh(this).options.authDomain&&t.isOAuthProvider&&(i=pu(uh(this).options.authDomain,uh(this).options.apiKey,uh(this).name,"signInViaPopup",t,null,r,sp.a.SDK_VERSION||null,null,null,this.T(),this.P));var o=pr(i,n&&n.ua,n&&n.ta);return fh(this,n=ih(this).then(function(n){return Pc(n,o,"signInViaPopup",t,r,!!i,e.T())}).then(function(){return new be(function(t,n){e.na("signInViaPopup",null,new C("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=r,e.c=Mc(e.b,e,"signInViaPopup",o,r)})}).then(function(t){return o&&dr(o),t?Xr(t):null}).o(function(t){throw o&&dr(o),t}))},t.Yc=function(t){if(!Ar())return Ie(new C("operation-not-supported-in-this-environment"));var e=this;return fh(this,ih(this).then(function(){return function(t){return Zl(t,function(){return t.b.set(Ql,t.c.F,t.a)})}(e.i)}).then(function(){return Dc(e.b,"signInViaRedirect",t,void 0,e.T())}))},t.qa=function(){var t=this;return oh(this).then(function(e){return t.b&&Hc(t.b.b),e}).o(function(e){throw t.b&&Hc(t.b.b),e})},t.dd=function(t){if(!t)return Ie(new C("null-user"));if(this.S!=t.tenantId)return Ie(new C("tenant-id-mismatch"));var e=this,n={};n.apiKey=uh(this).options.apiKey,n.authDomain=uh(this).options.authDomain,n.appName=uh(this).name;var r=function(t,e,n,r){var i=t.b,o={};return o[$s]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new pl(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&ml(e,r),Nl(e,t),e}(t,n,e.D,e.Ga());return fh(this,this.h.then(function(){if(uh(e).options.apiKey!=t.l)return r.reload()}).then(function(){return ch(e)&&t.uid==ch(e).uid?(Nl(ch(e),t),e.da(t)):(sh(e,r),Sl(r),e.da(r))}).then(function(){hh(e)}))},t.Ab=function(){var t=this;return fh(this,this.h.then(function(){return t.b&&Hc(t.b.b),ch(t)?(sh(t,null),Xl(t.i).then(function(){hh(t)})):Te()}))},t.Zc=function(){var t=this;return Jl(this.i,uh(this).options.authDomain).then(function(e){if(!t.l){var n;if(n=ch(t)&&e){n=ch(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Nl(ch(t),e),ch(t).I();(ch(t)||e)&&(sh(t,e),e&&(Sl(e),e.ha=t.D),t.b&&jc(t.b,t),hh(t))}})},t.da=function(t){return Yl(this.i,t)},t.mc=function(){hh(this),this.da(ch(this))},t.wc=function(){this.Ab()},t.xc=function(){this.Ab()},t.kc=function(t){var e=this;return this.h.then(function(){return ah(e,Te(t))})},t.zc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(ch(e))})},t.Ac=function(t){var e=this;!function(t,e){t.O.push(e),fh(t,t.h.then(function(){!t.l&&K(t.O,e)&&t.X!==t.getUid()&&(t.X=t.getUid(),e(lh(t)))}))}(this,function(){t.next(ch(e))})},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){"function"==typeof t?t(ch(r)):"function"==typeof t.next&&t.next(ch(r))}),this.hb(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){r.X=r.getUid(),"function"==typeof t?t(ch(r)):"function"==typeof t.next&&t.next(ch(r))}),this.bc(t,e,n)},t.nc=function(t){var e=this;return fh(this,this.h.then(function(){return ch(e)?ch(e).I(t).then(function(t){return{accessToken:t}}):null}))},t.Tc=function(t){var e=this;return this.h.then(function(){return ah(e,Za(e.a,Ka,{token:t}))}).then(function(t){var n=t.user;return Al(n,"isAnonymous",!1),e.da(n),t})},t.Uc=function(t,e){var n=this;return this.h.then(function(){return ah(n,Za(n.a,Qa,{email:t,password:e}))})},t.dc=function(t,e){var n=this;return this.h.then(function(){return ah(n,Za(n.a,Ea,{email:t,password:e}))})},t.$a=function(t){var e=this;return this.h.then(function(){return ah(e,t.ka(e.a))})},t.Sc=function(t){return Kr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.$a(t)},t.zb=function(){var t=this;return this.h.then(function(){var e=ch(t);if(e&&e.isAnonymous){var n=Xr({providerId:null,isNewUser:!1});return Xr({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return ah(t,t.a.zb()).then(function(e){var n=e.user;return Al(n,"isAnonymous",!0),t.da(n),e})})},t.getUid=function(){return ch(this)&&ch(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&ch(this)&&_l(ch(this))},t.Pc=function(t){var e=this;B(this.s,function(n){n==t&&e.u--}),0>this.u&&(this.u=0),0==this.u&&ch(this)&&wl(ch(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),fh(this,this.h.then(function(){e.l||K(e.s,t)&&t(lh(e))}))},t.removeAuthTokenListener=function(t){$(this.s,function(e){return e==t})},t.delete=function(){this.l=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.i&&(t=this.i).b.removeListener($l("local"),t.a,this.ja),this.b&&(kc(this.b,this),Hc(this.b.b)),Promise.resolve()},t.hc=function(t){return fh(this,function(t,e){return Za(t,Oa,{identifier:e,continueUri:Nr()?cr():"http://localhost"}).then(function(t){return t.signinMethods||[]})}(this.a,t))},t.Bc=function(t){return!!Ao(t)},t.wb=function(t,e){var n=this;return fh(this,Te().then(function(){var t=new ji(e);if(!t.c)throw new C("argument-error",Ni+" must be true when sending sign in link to email");return Fi(t)}).then(function(e){return n.a.wb(t,e)}).then(function(){}))},t.jd=function(t){return this.Ra(t).then(function(t){return t.data.email})},t.nb=function(t,e){return fh(this,this.a.nb(t,e).then(function(){}))},t.Ra=function(t){return fh(this,this.a.Ra(t).then(function(t){return new si(t)}))},t.jb=function(t){return fh(this,this.a.jb(t).then(function(){}))},t.vb=function(t,e){var n=this;return fh(this,Te().then(function(){return void 0===e||dt(e)?{}:Fi(new ji(e))}).then(function(e){return n.a.vb(t,e)}).then(function(){}))},t.Wc=function(t,e){return fh(this,Qc(this,t,e,_(this.$a,this)))},t.Vc=function(t,e){var n=this;return fh(this,Te().then(function(){var r=e||cr(),i=ko(t,r);if(!(r=Ao(r)))throw new C("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new C("tenant-id-mismatch");return n.$a(i)}))},dh.prototype.render=function(){},dh.prototype.reset=function(){},dh.prototype.getResponse=function(){},dh.prototype.execute=function(){};var gh=null;function vh(t,e){return(e=mh(e))&&t.a[e]||null}function mh(t){return(t=void 0===t?1e12:t)?t.toString():null}function yh(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ae(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():un(this.f,"click",this.i)}function bh(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function _h(){}function wh(){}ph.prototype.render=function(t,e){return this.a[this.b.toString()]=new yh(t,e),this.b++},ph.prototype.reset=function(t){var e=vh(this,t);t=mh(t),e&&t&&(e.delete(),delete this.a[t])},ph.prototype.getResponse=function(t){return(t=vh(this,t))?t.getResponse():null},ph.prototype.execute=function(t){(t=vh(this,t))&&t.execute()},yh.prototype.getResponse=function(){return bh(this),this.b},yh.prototype.execute=function(){bh(this);var t=this;this.a||(this.a=setTimeout(function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(r){}t.a=setTimeout(function(){if(t.a=null,t.b=null,n)try{n()}catch(r){}t.h&&t.execute()},6e4)},500))},yh.prototype.delete=function(){bh(this),this.g=!0,clearTimeout(this.a),this.a=null,hn(this.f,"click",this.i)},$r(_h,"FACTOR_ID","phone"),wh.prototype.g=function(){return gh||(gh=new ph),Te(gh)},wh.prototype.c=function(){};var Eh=null;function Oh(){this.b=s.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Sh=new yt(Et,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Ch=new qr(3e4,6e4);Oh.prototype.g=function(t){var e=this;return new be(function(n,r){var i=setTimeout(function(){r(new C("network-request-failed"))},Ch.get());!s.grecaptcha||t!==e.f&&!e.b?(s[e.a]=function(){if(s.grecaptcha){e.f=t;var o=s.grecaptcha.render;s.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(s.grecaptcha)}else clearTimeout(i),r(new C("internal-error"));delete s[e.a]},Te(Us(Tt(Sh,{onload:e.a,hl:t||""}))).o(function(){clearTimeout(i),r(new C("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(i),n(s.grecaptcha))})},Oh.prototype.c=function(){this.b--};var Th=null;function Ih(t,e,n,r,i,o,a){if($r(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.v=e,this.g=null,a?(Eh||(Eh=new wh),a=Eh):(Th||(Th=new Oh),a=Th),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[kh])throw new C("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Ah],!s.document)throw new C("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ae(e)||!this.i&&ae(e).hasChildNodes())throw new C("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Ks(t,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[xh];this.a[xh]=function(t){if(Nh(u,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=jr(c,s);"function"==typeof e&&e(t)}};var l=this.a[jh];this.a[jh]=function(){if(Nh(u,null),"function"==typeof l)l();else if("string"==typeof l){var t=jr(l,s);"function"==typeof t&&t()}}}var xh="callback",jh="expired-callback",kh="sitekey",Ah="size";function Nh(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(r){}}function Ph(t,e){return t.h.push(e),e.oa(function(){Q(t.h,e)}),e}function Rh(t){if(t.D)throw new C("internal-error","RecaptchaVerifier instance has been destroyed.")}function Dh(t,e,n){var r=!1;try{this.b=n||sp.a.app()}catch(s){throw new C("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new C("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(s){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(s){}o=sp.a.SDK_VERSION?Ir(sp.a.SDK_VERSION,o):null,Ih.call(this,n,t,e,function(){try{var t=i.b.auth().la()}catch(e){t=null}return t},o,A(I),r)}function Mh(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new C("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Lh.length)throw new C("internal-error","Argument validator received an unsupported number of arguments.");n=Lh[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new C("argument-error",t+" failed: "+r)}(t=Ih.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=Ph(this,Te().then(function(){if(Nr()&&!_r())return mr();throw new C("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return t.m.g(t.u())}).then(function(e){return t.g=e,Za(t.s,Ma,{})}).then(function(e){t.a[kh]=e.recaptchaSiteKey}).o(function(e){throw t.f=null,e}))},t.render=function(){Rh(this);var t=this;return Ph(this,this.Ia().then(function(){if(null===t.c){var e=t.v;if(!t.i){var n=ae(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!se&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',Bt(s.name),'"'),s.type){o.push(' type="',Bt(s.type),'"');var a={};vt(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=de(i,o),s&&("string"==typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):ue(o,s)),2<r.length&&fe(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c}))},t.verify=function(){Rh(this);var t=this;return Ph(this,this.render().then(function(e){return new be(function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){$(t.l,function(t){return t==e})}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}})}))},t.reset=function(){Rh(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Rh(this),this.D=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=ae(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},O(Dh,Ih);var Lh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Vh(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function Fh(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function Uh(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:p}}function qh(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function Hh(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function Bh(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){return!!e&&!(!e.ka||t&&e.providerId!==t)}}}function zh(t,e){return p(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Wh(t){return p(t)&&"string"==typeof t.uid}function Gh(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function Kh(t,e){for(var n in e){var r=e[n].name;t[r]=Yh(r,t[n],e[n].j)}}function Qh(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:w(function(t){return this[t]},n),set:w(function(t,e,n,r){Mh(t,[n],[r],!0),this[e]=r},r,n,e[n].kb),enumerable:!0})}}function $h(t,e,n,r){t[e]=Yh(e,n,r)}function Yh(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Mh(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Kh(th.prototype,{jb:{name:"applyActionCode",j:[Vh("code")]},Ra:{name:"checkActionCode",j:[Vh("code")]},nb:{name:"confirmPasswordReset",j:[Vh("code"),Vh("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Vh("email"),Vh("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Vh("email")]},qa:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Vh("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Gh(Uh(),qh(),"nextOrObserver"),qh("opt_error",!0),qh("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Gh(Uh(),qh(),"nextOrObserver"),qh("opt_error",!0),qh("opt_completed",!0)]},vb:{name:"sendPasswordResetEmail",j:[Vh("email"),Gh(Uh("opt_actionCodeSettings",!0),Hh(null,!0),"opt_actionCodeSettings",!0)]},wb:{name:"sendSignInLinkToEmail",j:[Vh("email"),Uh("actionCodeSettings")]},xb:{name:"setPersistence",j:[Vh("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Bh()]},zb:{name:"signInAnonymously",j:[]},$a:{name:"signInWithCredential",j:[Bh()]},Tc:{name:"signInWithCustomToken",j:[Vh("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Vh("email"),Vh("password")]},Vc:{name:"signInWithEmailLink",j:[Vh("email"),Vh("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Vh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[Gh({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof pl)}},Hh(),"user")]},Ab:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Vh(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Vh("url"),Uh("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Vh("code")]}}),Qh(th.prototype,{lc:{name:"languageCode",kb:Gh(Vh(),Hh(),"languageCode")},ti:{name:"tenantId",kb:Gh(Vh(),Hh(),"tenantId")}}),(th.Persistence=$u).LOCAL="local",th.Persistence.SESSION="session",th.Persistence.NONE="none",Kh(pl.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Fh("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Fh("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Bh()]},qb:{name:"linkWithCredential",j:[Bh()]},Dc:{name:"linkWithPhoneNumber",j:[Vh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Bh()]},tb:{name:"reauthenticateWithCredential",j:[Bh()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Vh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},ub:{name:"sendEmailVerification",j:[Gh(Uh("opt_actionCodeSettings",!0),Hh(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Vh(null,!0)]},cd:{name:"unlink",j:[Vh("provider")]},Bb:{name:"updateEmail",j:[Vh("email")]},Cb:{name:"updatePassword",j:[Vh("password")]},ed:{name:"updatePhoneNumber",j:[Bh("phone")]},Db:{name:"updateProfile",j:[Uh("profile")]},Eb:{name:"verifyBeforeUpdateEmail",j:[Vh("email"),Gh(Uh("opt_actionCodeSettings",!0),Hh(null,!0),"opt_actionCodeSettings",!0)]}}),Kh(ph.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Kh(dh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Kh(be.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Qh(Gc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",kb:Fh("appVerificationDisabledForTesting")}}),Kh(Kc.prototype,{confirm:{name:"confirm",j:[Vh("verificationCode")]}}),$h(ao,"fromJSON",function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[go,xo,Po,ho],r=0;r<n.length;r++)if(e=n[r](t))return e;return null},[Gh(Vh(),Uh(),"json")]),$h(jo,"credential",function(t,e){return new Io(t,e)},[Vh("email"),Vh("password")]),Kh(Io.prototype,{w:{name:"toJSON",j:[Vh(null,!0)]}}),Kh(bo.prototype,{Ca:{name:"addScope",j:[Vh("scope")]},Ka:{name:"setCustomParameters",j:[Uh("customOAuthParameters")]}}),$h(bo,"credential",_o,[Gh(Vh(),Uh(),"token")]),$h(jo,"credentialWithLink",ko,[Vh("email"),Vh("emailLink")]),Kh(wo.prototype,{Ca:{name:"addScope",j:[Vh("scope")]},Ka:{name:"setCustomParameters",j:[Uh("customOAuthParameters")]}}),$h(wo,"credential",Eo,[Gh(Vh(),Uh(),"token")]),Kh(Oo.prototype,{Ca:{name:"addScope",j:[Vh("scope")]},Ka:{name:"setCustomParameters",j:[Uh("customOAuthParameters")]}}),$h(Oo,"credential",So,[Gh(Vh(),Gh(Uh(),Hh()),"idToken"),Gh(Vh(),Hh(),"accessToken",!0)]),Kh(Co.prototype,{Ka:{name:"setCustomParameters",j:[Uh("customOAuthParameters")]}}),$h(Co,"credential",To,[Gh(Vh(),Uh(),"token"),Vh("secret",!0)]),Kh(yo.prototype,{Ca:{name:"addScope",j:[Vh("scope")]},credential:{name:"credential",j:[Gh(Vh(),Gh(Uh(),Hh()),"optionsOrIdToken"),Gh(Vh(),Hh(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Uh("customOAuthParameters")]}}),Kh(fo.prototype,{w:{name:"toJSON",j:[Vh(null,!0)]}}),Kh(co.prototype,{w:{name:"toJSON",j:[Vh(null,!0)]}}),$h(Do,"credential",Mo,[Vh("verificationId"),Vh("verificationCode")]),Kh(Do.prototype,{fb:{name:"verifyPhoneNumber",j:[Gh(Vh(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?zh(t.session,oo)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?zh(t.session,so)&&Wh(t.multiFactorHint):t.session&&t.multiFactorUid?zh(t.session,so)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),Kh(No.prototype,{w:{name:"toJSON",j:[Vh(null,!0)]}}),Kh(C.prototype,{toJSON:{name:"toJSON",j:[Vh(null,!0)]}}),Kh(Wo.prototype,{toJSON:{name:"toJSON",j:[Vh(null,!0)]}}),Kh(zo.prototype,{toJSON:{name:"toJSON",j:[Vh(null,!0)]}}),Kh(Zc.prototype,{toJSON:{name:"toJSON",j:[Vh(null,!0)]}}),Kh(Yc.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}}]}}),Kh(ol.prototype,{Rb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}},Vh("displayName",!0)]},bd:{name:"unenroll",j:[Gh({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Wh},Vh(),"multiFactorInfoIdentifier")]}}),Kh(Dh.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),$h(_i,"parseLink",xi,[Vh("link")]),$h(_h,"assertion",function(t){return new rl(t)},[Bh("phone")]),function(){if(void 0===sp.a||!sp.a.INTERNAL||!sp.a.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ui,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:ai,VERIFY_AND_CHANGE_EMAIL:ci,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:th,AuthCredential:ao,Error:C};$h(t,"EmailAuthProvider",jo,[]),$h(t,"FacebookAuthProvider",bo,[]),$h(t,"GithubAuthProvider",wo,[]),$h(t,"GoogleAuthProvider",Oo,[]),$h(t,"TwitterAuthProvider",Co,[]),$h(t,"OAuthProvider",yo,[Vh("providerId")]),$h(t,"SAMLAuthProvider",mo,[Vh("providerId")]),$h(t,"PhoneAuthProvider",Do,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof th)}}]),$h(t,"RecaptchaVerifier",Dh,[Gh(Vh(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Uh("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof sp.a.app.App)}}]),$h(t,"ActionCodeURL",_i,[]),$h(t,"PhoneMultiFactorGenerator",_h,[]),sp.a.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new th(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),sp.a.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:_((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:_(t.nc,t),addAuthTokenListener:_(t.cc,t),removeAuthTokenListener:_(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),sp.a.registerVersion("@firebase/auth","0.16.4"),sp.a.INTERNAL.extendNamespace({User:pl})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),n("6Uf2");var ap=n("q/0M"),up=n("qOnz"),cp=function(t,e){return(cp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function lp(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var hp,fp="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},dp=dp||{},pp=fp||self;function gp(){}function vp(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function mp(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var yp="closure_uid_"+(1e9*Math.random()>>>0),bp=0;function _p(t,e,n){return t.call.apply(t.bind,arguments)}function wp(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Ep(t,e,n){return(Ep=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?_p:wp).apply(null,arguments)}function Op(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Sp(){return Date.now()}function Cp(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function Tp(){this.j=this.j,this.i=this.i}Tp.prototype.j=!1,Tp.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,yp)&&t[yp]||(t[yp]=++bp)}(this)},Tp.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Ip=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},xp=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function jp(t){return Array.prototype.concat.apply([],arguments)}function kp(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Ap(t){return/^[\s\xa0]*$/.test(t)}var Np,Pp=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Rp(t,e){return-1!=t.indexOf(e)}function Dp(t,e){return t<e?-1:t>e?1:0}t:{var Mp=pp.navigator;if(Mp){var Lp=Mp.userAgent;if(Lp){Np=Lp;break t}}Np=""}function Vp(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Fp(t){var e={};for(var n in t)e[n]=t[n];return e}var Up="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function qp(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Up.length;o++)n=Up[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Hp(t){return Hp[" "](t),t}Hp[" "]=gp;var Bp,zp,Wp=Rp(Np,"Opera"),Gp=Rp(Np,"Trident")||Rp(Np,"MSIE"),Kp=Rp(Np,"Edge"),Qp=Kp||Gp,$p=Rp(Np,"Gecko")&&!(Rp(Np.toLowerCase(),"webkit")&&!Rp(Np,"Edge"))&&!(Rp(Np,"Trident")||Rp(Np,"MSIE"))&&!Rp(Np,"Edge"),Yp=Rp(Np.toLowerCase(),"webkit")&&!Rp(Np,"Edge");function Xp(){var t=pp.document;return t?t.documentMode:void 0}t:{var Jp="",Zp=(zp=Np,$p?/rv:([^\);]+)(\)|;)/.exec(zp):Kp?/Edge\/([\d\.]+)/.exec(zp):Gp?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(zp):Yp?/WebKit\/(\S+)/.exec(zp):Wp?/(?:Version)[ \/]?(\S+)/.exec(zp):void 0);if(Zp&&(Jp=Zp?Zp[1]:""),Gp){var tg=Xp();if(null!=tg&&tg>parseFloat(Jp)){Bp=String(tg);break t}}Bp=Jp}var eg={};function ng(t){return function(t,e){var n=eg;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=Pp(String(Bp)).split("."),r=Pp(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=Dp(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||Dp(0==s[2].length,0==a[2].length)||Dp(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var rg=pp.document&&Gp&&(Xp()||parseInt(Bp,10))||void 0,ig=!Gp||9<=Number(rg),og=Gp&&!ng("9"),sg=function(){if(!pp.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{pp.addEventListener("test",gp,e),pp.removeEventListener("test",gp,e)}catch(n){}return t}();function ag(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function ug(t,e){if(ag.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if($p){t:{try{Hp(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:cg[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}ag.prototype.b=function(){this.defaultPrevented=!0},Cp(ug,ag);var cg={2:"touch",3:"pen",4:"mouse"};ug.prototype.b=function(){ug.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,og)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var lg="closure_listenable_"+(1e6*Math.random()|0),hg=0;function fg(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++hg,this.Y=this.Z=!1}function dg(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function pg(t){this.src=t,this.a={},this.b=0}function gg(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=Ip(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(dg(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function vg(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}pg.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=vg(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new fg(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var mg="closure_lm_"+(1e6*Math.random()|0),yg={};function bg(t,e,n,r,i){if(r&&r.once)return wg(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)bg(t,e[o],n,r,i);return null}return n=jg(n),t&&t[lg]?t.va(e,n,mp(r)?!!r.capture:!!r,i):_g(t,e,n,!1,r,i)}function _g(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=mp(i)?!!i.capture:!!i;if(s&&!ig)return null;var a=Ig(t);if(a||(t[mg]=a=new pg(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Tg,e=ig?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)sg||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Sg(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function wg(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)wg(t,e[o],n,r,i);return null}return n=jg(n),t&&t[lg]?t.wa(e,n,mp(r)?!!r.capture:!!r,i):_g(t,e,n,!0,r,i)}function Eg(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Eg(t,e[o],n,r,i);else r=mp(r)?!!r.capture:!!r,n=jg(n),t&&t[lg]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=vg(o=t.a[e],n,r,i))&&(dg(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=Ig(t))&&(e=t.a[e.toString()],t=-1,e&&(t=vg(e,n,r,i)),(n=-1<t?e[t]:null)&&Og(n))}function Og(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[lg])gg(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Sg(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Ig(e))?(gg(n,t),0==n.b&&(n.src=null,e[mg]=null)):dg(t)}}}function Sg(t){return t in yg?yg[t]:yg[t]="on"+t}function Cg(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Og(t),n.call(r,e)}function Tg(t,e){if(t.Y)return!0;if(!ig){if(!e)t:{e=["window","event"];for(var n=pp,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Cg(t,e=new ug(e,this))}return Cg(t,new ug(e,this))}function Ig(t){return(t=t[mg])instanceof pg?t:null}var xg="__closure_events_fn_"+(1e9*Math.random()>>>0);function jg(t){return"function"==typeof t?t:(t[xg]||(t[xg]=function(e){return t.handleEvent(e)}),t[xg])}function kg(){Tp.call(this),this.c=new pg(this),this.J=this,this.C=null}function Ag(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new ag(e,t);else if(e instanceof ag)e.target=e.target||t;else{var i=e;qp(e=new ag(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=Ng(s,r,!0,e)&&i}if(i=Ng(s=e.a=t,r,!0,e)&&i,i=Ng(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Ng(s=e.a=n[o],r,!1,e)&&i}function Ng(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&gg(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Cp(kg,Tp),kg.prototype[lg]=!0,(hp=kg.prototype).addEventListener=function(t,e,n,r){bg(this,t,e,n,r)},hp.removeEventListener=function(t,e,n,r){Eg(this,t,e,n,r)},hp.G=function(){if(kg.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)dg(n[r]);delete e.a[t],e.b--}}this.C=null},hp.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},hp.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Pg=pp.JSON.stringify;function Rg(){this.b=this.a=null}var Dg,Mg=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new Vg},function(t){t.reset()});function Lg(){var t=Hg,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Vg(){this.next=this.b=this.a=null}function Fg(t){pp.setTimeout(function(){throw t},0)}function Ug(t,e){Dg||function(){var t=pp.Promise.resolve(void 0);Dg=function(){t.then(Bg)}}(),qg||(Dg(),qg=!0),Hg.add(t,e)}Rg.prototype.add=function(t,e){var n=Mg.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Vg.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Vg.prototype.reset=function(){this.next=this.b=this.a=null};var qg=!1,Hg=new Rg;function Bg(){for(var t;t=Lg();){try{t.a.call(t.b)}catch(n){Fg(n)}var e=Mg;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}qg=!1}function zg(t,e){kg.call(this),this.b=t||1,this.a=e||pp,this.f=Ep(this.Za,this),this.g=Sp()}function Wg(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Gg(t,e,n){if("function"==typeof t)n&&(t=Ep(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Ep(t.handleEvent,t)}return 2147483647<Number(e)?-1:pp.setTimeout(t,e||0)}function Kg(t){t.a=Gg(function(){t.a=null,t.c&&(t.c=!1,Kg(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}Cp(zg,kg),(hp=zg.prototype).aa=!1,hp.M=null,hp.Za=function(){if(this.aa){var t=Sp()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Ag(this,"tick"),this.aa&&(Wg(this),this.start()))}},hp.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Sp())},hp.G=function(){zg.X.G.call(this),Wg(this),delete this.a};var Qg=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}cp(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Kg(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(pp.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(Tp);function $g(t){Tp.call(this),this.b=t,this.a={}}Cp($g,Tp);var Yg=[];function Xg(t,e,n,r){Array.isArray(n)||(n&&(Yg[0]=n.toString()),n=Yg);for(var i=0;i<n.length;i++){var o=bg(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Jg(t){Vp(t.a,function(t,e){this.a.hasOwnProperty(e)&&Og(t)},t),t.a={}}function Zg(){this.a=!0}function tv(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Pg(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}$g.prototype.G=function(){$g.X.G.call(this),Jg(this)},$g.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Zg.prototype.info=function(){};var ev={},nv=null;function rv(){return nv=nv||new kg}function iv(t){ag.call(this,ev.Fa,t)}function ov(t){var e=rv();Ag(e,new iv(e,t))}function sv(t,e){ag.call(this,ev.STAT_EVENT,t),this.stat=e}function av(t){var e=rv();Ag(e,new sv(e,t))}function uv(t){ag.call(this,ev.Ga,t)}function cv(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return pp.setTimeout(function(){t()},e)}ev.Fa="serverreachability",Cp(iv,ag),ev.STAT_EVENT="statevent",Cp(sv,ag),ev.Ga="timingevent",Cp(uv,ag);var lv={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},hv={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function fv(){}function dv(){}fv.prototype.a=null;var pv,gv={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function vv(){ag.call(this,"d")}function mv(){ag.call(this,"c")}function yv(){}function bv(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new $g(this),this.P=_v,this.R=new zg(t=Qp?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}Cp(vv,ag),Cp(mv,ag),Cp(yv,fv),pv=new yv;var _v=45e3,wv={},Ev={};function Ov(t,e,n){t.H=1,t.i=Wv(Fv(e)),t.j=n,t.I=!0,Sv(t,null)}function Sv(t,e){t.u=Sp(),Iv(t),t.l=Fv(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),im(n.b,"t",r),t.D=0,t.a=Jm(t.g,t.g.C?e:null),0<t.O&&(t.F=new Qg(Ep(t.Ca,t,t.a),t.O)),Xg(t.J,t.a,"readystatechange",t.Xa),e=t.B?Fp(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),ov(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function Cv(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Tv(t,n);if(i==Ev){4==e&&(t.h=4,av(14),r=!1),tv(t.c,t.f,null,"[Incomplete Response]");break}if(i==wv){t.h=4,av(15),tv(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}tv(t.c,t.f,i,null),Nv(t,i)}4==e&&0==n.length&&(t.h=1,av(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),zm(e),e.F=!0,av(11))):(tv(t.c,t.f,n,"[Invalid Chunked Response]"),Av(t),kv(t))}function Tv(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Ev:(n=Number(e.substring(n,r)),isNaN(n)?wv:(r+=1)+n>e.length?Ev:(e=e.substr(r,n),t.D=r+n,e))}function Iv(t){t.T=Sp()+t.P,xv(t,t.P)}function xv(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=cv(Ep(t.Va,t),e)}function jv(t){t.o&&(pp.clearTimeout(t.o),t.o=null)}function kv(t){0==t.g.v||t.A||Km(t.g,t)}function Av(t){jv(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Wg(t.R),Jg(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Nv(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||hm(n.b,t)))if(n.I=t.N,!t.C&&hm(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(v){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Gm(n),Dm(n)}Bm(n),av(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=cv(Ep(n.Sa,n),6e3));if(1>=lm(n.b)&&n.ea){try{n.ea()}catch(v){}n.ea=void 0}}else $m(n,11)}else if((t.C||n.a==t)&&Gm(n),!Ap(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(Rp(l,"spdy")||Rp(l,"quic")||Rp(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(fm(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,zv(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=Sp()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).la=Xm(u,u.C?u.ga:null,u.fa),d.C){dm(u.b,d);var p=d,g=u.D;g&&p.setTimeout(g),p.o&&(jv(p),Iv(p)),u.a=d}else Hm(u);0<n.g.length&&Vm(n)}else"stop"!=i[0]&&"close"!=i[0]||$m(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?$m(n,7):Rm(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);ov(4)}catch(v){}}function Pv(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(vp(t)||"string"==typeof t)xp(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(vp(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(vp(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Rv(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Rv)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Dv(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Mv(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Mv(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Mv(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(hp=bv.prototype).setTimeout=function(t){this.P=t},hp.Xa=function(t){t=t.target;var e=this.F;e&&3==km(t)?e.f():this.Ca(t)},hp.Ca=function(t){try{if(t==this.a)t:{var e=km(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!Qp&&!this.a.$())){this.A||4!=e||7==n||ov(8==n||0>=r?3:2),jv(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ap(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,av(12),Av(this),kv(this);break t}tv(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Nv(this,u)}this.I?(Cv(this,e,o),Qp&&this.b&&3==e&&(Xg(this.J,this.R,"tick",this.Wa),this.R.start())):(tv(this.c,this.f,o,null),Nv(this,o)),4==e&&Av(this),this.b&&!this.A&&(4==e?Km(this.g,this):(this.b=!1,Iv(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,av(12)):(this.h=0,av(13)),Av(this),kv(this)}}}catch(c){}},hp.Wa=function(){if(this.a){var t=km(this.a),e=this.a.$();this.D<e.length&&(jv(this),Cv(this,t,e),this.b&&4!=t&&Iv(this))}},hp.cancel=function(){this.A=!0,Av(this)},hp.Va=function(){this.o=null;var t=Sp();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(ov(3),av(17)),Av(this),this.h=2,kv(this)):xv(this,this.T-t)},(hp=Rv.prototype).K=function(){Dv(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},hp.L=function(){return Dv(this),this.a.concat()},hp.get=function(t,e){return Mv(this.b,t)?this.b[t]:e},hp.set=function(t,e){Mv(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},hp.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Lv=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Vv(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Vv){this.a=void 0!==e?e:t.a,Uv(this,t.f),this.j=t.j,qv(this,t.c),Hv(this,t.h),this.g=t.g,e=t.b;var n=new tm;n.c=e.c,e.a&&(n.a=new Rv(e.a),n.b=e.b),Bv(this,n),this.i=t.i}else t&&(n=String(t).match(Lv))?(this.a=!!e,Uv(this,n[1]||"",!0),this.j=Gv(n[2]||""),qv(this,n[3]||"",!0),Hv(this,n[4]),this.g=Gv(n[5]||"",!0),Bv(this,n[6]||"",!0),this.i=Gv(n[7]||"")):(this.a=!!e,this.b=new tm(null,this.a))}function Fv(t){return new Vv(t)}function Uv(t,e,n){t.f=n?Gv(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function qv(t,e,n){t.c=n?Gv(e,!0):e}function Hv(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Bv(t,e,n){e instanceof tm?(t.b=e,function(t,e){e&&!t.f&&(em(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(nm(this,e),im(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=Kv(e,Jv)),t.b=new tm(e,t.a))}function zv(t,e,n){t.b.set(e,n)}function Wv(t){return zv(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Sp()).toString(36)),t}function Gv(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Kv(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Qv),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Qv(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Vv.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Kv(e,$v,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Kv(e,$v,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Kv(n,"/"==n.charAt(0)?Xv:Yv,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Kv(n,Zv)),t.join("")};var $v=/[#\/\?@]/g,Yv=/[#\?:]/g,Xv=/[#\?]/g,Jv=/[#\?@]/g,Zv=/#/g;function tm(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function em(t){t.a||(t.a=new Rv,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function nm(t,e){em(t),e=om(t,e),Mv(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Mv((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Dv(t)))}function rm(t,e){return em(t),e=om(t,e),Mv(t.a.b,e)}function im(t,e,n){nm(t,e),0<n.length&&(t.c=null,t.a.set(om(t,e),kp(n)),t.b+=n.length)}function om(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(hp=tm.prototype).add=function(t,e){em(this),this.c=null,t=om(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},hp.forEach=function(t,e){em(this),this.a.forEach(function(n,r){xp(n,function(n){t.call(e,n,r,this)},this)},this)},hp.L=function(){em(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},hp.K=function(t){em(this);var e=[];if("string"==typeof t)rm(this,t)&&(e=jp(e,this.a.get(om(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=jp(e,t[n])}return e},hp.set=function(t,e){return em(this),this.c=null,rm(this,t=om(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},hp.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},hp.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var sm=function(){return function(t,e){this.b=t,this.a=e}}();function am(t){this.g=t||um,t=pp.PerformanceNavigationTiming?0<(t=pp.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(pp.ia&&pp.ia.ya&&pp.ia.ya()&&pp.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var um=10;function cm(t){return!!t.b||!!t.a&&t.a.size>=t.f}function lm(t){return t.b?1:t.a?t.a.size:0}function hm(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function fm(t,e){t.a?t.a.add(e):t.b=e}function dm(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function pm(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=lp(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return kp(t.c)}function gm(){}function vm(){this.a=new gm}function mm(t,e,n){var r=n||"";try{Pv(t,function(t,n){var i=t;mp(t)&&(i=Pg(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(xx){throw e.push(r+"type="+encodeURIComponent("_badmap")),xx}}function ym(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}am.prototype.cancel=function(){var t,e;if(this.c=pm(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=lp(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},gm.prototype.stringify=function(t){return pp.JSON.stringify(t,void 0)},gm.prototype.parse=function(t){return pp.JSON.parse(t,void 0)};var bm=pp.JSON.parse;function _m(t){kg.call(this),this.headers=new Rv,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=wm,this.D=this.F=!1}Cp(_m,kg);var wm="",Em=/^https?$/i,Om=["POST","PUT"];function Sm(t){return"content-type"==t.toLowerCase()}function Cm(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Tm(t),xm(t)}function Tm(t){t.u||(t.u=!0,Ag(t,"complete"),Ag(t,"error"))}function Im(t){if(t.b&&void 0!==dp&&(!t.s[1]||4!=km(t)||2!=t.W()))if(t.l&&4==km(t))Gg(t.za,0,t);else if(Ag(t,"readystatechange"),4==km(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Lv)[1]||null;if(!o&&pp.self&&pp.self.location){var s=pp.self.location.protocol;o=s.substr(0,s.length-1)}i=!Em.test(o?o.toLowerCase():"")}e=i}if(e)Ag(t,"complete"),Ag(t,"success");else{t.h=6;try{var a=2<km(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",Tm(t)}}finally{xm(t)}}}function xm(t,e){if(t.a){jm(t);var n=t.a,r=t.s[0]?gp:null;t.a=null,t.s=null,e||Ag(t,"ready");try{n.onreadystatechange=r}catch(xx){}}}function jm(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(pp.clearTimeout(t.m),t.m=null)}function km(t){return t.a?t.a.readyState:0}function Am(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Vp(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):zv(t,e,n))}function Nm(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Pm(t){this.pa=0,this.g=[],this.c=new Zg,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Nm("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Nm("baseRetryDelayMs",5e3,t),this.Ra=Nm("retryDelaySeedMs",1e4,t),this.Ma=Nm("forwardChannelMaxRetries",2,t),this.ma=Nm("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new am(t&&t.concurrentRequestLimit),this.ka=new vm,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Rm(t){if(Mm(t),3==t.v){var e=t.R++,n=Fv(t.B);zv(n,"SID",t.J),zv(n,"RID",e),zv(n,"TYPE","terminate"),Um(t,n),(e=new bv(t,t.c,e,void 0)).H=2,e.i=Wv(Fv(n)),n=!1,pp.navigator&&pp.navigator.sendBeacon&&(n=pp.navigator.sendBeacon(e.i.toString(),"")),!n&&pp.Image&&((new Image).src=e.i,n=!0),n||(e.a=Jm(e.g,null),e.a.ba(e.i)),e.u=Sp(),Iv(e)}Ym(t)}function Dm(t){t.a&&(zm(t),t.a.cancel(),t.a=null)}function Mm(t){Dm(t),t.j&&(pp.clearTimeout(t.j),t.j=null),Gm(t),t.b.cancel(),t.h&&("number"==typeof t.h&&pp.clearTimeout(t.h),t.h=null)}function Lm(t,e){t.g.push(new sm(t.Oa++,e)),3==t.v&&Vm(t)}function Vm(t){cm(t.b)||t.h||(t.h=!0,Ug(t.Ba,t),t.u=0)}function Fm(t,e){var n;n=e?e.f:t.R++;var r=Fv(t.B);zv(r,"SID",t.J),zv(r,"RID",n),zv(r,"AID",t.P),Um(t,r),t.i&&t.l&&Am(r,t.i,t.l),n=new bv(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=qm(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),fm(t.b,n),Ov(n,r,e)}function Um(t,e){t.f&&Pv({},function(t,n){zv(e,n,t)})}function qm(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Ep(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{mm(l,s,"req"+c+"_")}catch(Ry){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Hm(t){t.a||t.j||(t.T=1,Ug(t.Aa,t),t.o=0)}function Bm(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=cv(Ep(t.Aa,t),Qm(t,t.o)),t.o++,0))}function zm(t){null!=t.s&&(pp.clearTimeout(t.s),t.s=null)}function Wm(t){t.a=new bv(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Fv(t.la);zv(e,"RID","rpc"),zv(e,"SID",t.J),zv(e,"CI",t.H?"0":"1"),zv(e,"AID",t.P),Um(t,e),zv(e,"TYPE","xmlhttp"),t.i&&t.l&&Am(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Wv(Fv(e)),n.j=null,n.I=!0,Sv(n,t)}function Gm(t){null!=t.m&&(pp.clearTimeout(t.m),t.m=null)}function Km(t,e){var n=null;if(t.a==e){Gm(t),zm(t),t.a=null;var r=2}else{if(!hm(t.b,e))return;n=e.s,dm(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=Sp()-e.u;var i=t.u;Ag(r=rv(),new uv(r,n,e,i)),Vm(t)}else Hm(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(lm(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=cv(Ep(t.Ba,t,e),Qm(t,t.u)),t.u++,0)))}(t,e)||2==r&&Bm(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:$m(t,5);break;case 4:$m(t,10);break;case 3:$m(t,6);break;default:$m(t,2)}}function Qm(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function $m(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=Ep(t.Ya,t);n||(n=new Vv("//www.google.com/images/cleardot.gif"),pp.location&&"http"==pp.location.protocol||Uv(n,"https"),Wv(n)),function(t,e){var n=new Zg;if(pp.Image){var r=new Image;r.onload=Op(ym,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Op(ym,n,r,"TestLoadImage: error",!1,e),r.onabort=Op(ym,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Op(ym,n,r,"TestLoadImage: timeout",!1,e),pp.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else av(2);t.v=0,t.f&&t.f.ra(e),Ym(t),Mm(t)}function Ym(t){t.v=0,t.I=-1,t.f&&(0==pm(t.b).length&&0==t.g.length||(t.b.c.length=0,kp(t.g),t.g.length=0),t.f.qa())}function Xm(t,e,n){var r=function(t){return t instanceof Vv?Fv(t):new Vv(t,void 0)}(n);if(""!=r.c)e&&qv(r,e+"."+r.c),Hv(r,r.h);else{var i=pp.location;r=function(t,e,n,r){var i=new Vv(null,void 0);return t&&Uv(i,t),e&&qv(i,e),n&&Hv(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&Vp(t.V,function(t,e){zv(r,e,t)}),n=t.na,(e=t.A)&&n&&zv(r,e,n),zv(r,"VER",t.ha),Um(t,r),r}function Jm(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new _m(t.Na)).F=t.C,e}function Zm(){}function ty(){if(Gp&&!(10<=Number(rg)))throw Error("Environmental error: no available transport.")}function ey(t,e){kg.call(this),this.a=new Pm(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!Ap(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ap(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new iy(this)}function ny(t){vv.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function ry(){mv.call(this),this.status=1}function iy(t){this.a=t}(hp=_m.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:pv),this.a.onreadystatechange=Ep(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void Cm(this,o)}t=n||"";var i=new Rv(this.headers);r&&Pv(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=Sm,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=pp.FormData&&t instanceof pp.FormData,!(0<=Ip(Om,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{jm(this),0<this.o&&((this.D=function(t){return Gp&&ng(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Ep(this.xa,this)):this.m=Gg(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){Cm(this,o)}},hp.xa=function(){void 0!==dp&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Ag(this,"timeout"),this.abort(8))},hp.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Ag(this,"complete"),Ag(this,"abort"),xm(this))},hp.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),xm(this,!0)),_m.X.G.call(this)},hp.za=function(){this.j||(this.A||this.l||this.g?Im(this):this.Ua())},hp.Ua=function(){Im(this)},hp.W=function(){try{return 2<km(this)?this.a.status:-1}catch(zp){return-1}},hp.$=function(){try{return this.a?this.a.responseText:""}catch(zp){return""}},hp.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),bm(e)}},hp.ua=function(){return this.h},hp.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(hp=Pm.prototype).ha=8,hp.v=1,hp.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new bv(this,this.c,t,void 0),r=this.l;if(this.O&&(r?qp(r=Fp(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=qm(this,n,e),zv(i=Fv(this.B),"RID",t),zv(i,"CVER",22),this.A&&zv(i,"X-HTTP-Session-Id",this.A),Um(this,i),this.i&&r&&Am(i,this.i,r),fm(this.b,n),this.Ia&&zv(i,"TYPE","init"),this.da?(zv(i,"$req",e),zv(i,"SID","null"),n.U=!0,Ov(n,i,null)):Ov(n,i,e),this.v=2}}else 3==this.v&&(t?Fm(this,t):0==this.g.length||cm(this.b)||Fm(this))},hp.Aa=function(){if(this.j=null,Wm(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=cv(Ep(this.Ta,this),t)}},hp.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,av(10),Dm(this),Wm(this))},hp.Sa=function(){null!=this.m&&(this.m=null,Dm(this),Bm(this),av(19))},hp.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),av(2)):(this.c.info("Failed to ping google.com"),av(1))},(hp=Zm.prototype).ta=function(){},hp.sa=function(){},hp.ra=function(){},hp.qa=function(){},hp.Ja=function(){},ty.prototype.a=function(t,e){return new ey(t,e)},Cp(ey,kg),ey.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;av(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Xm(t,null,t.fa),Vm(t)},ey.prototype.close=function(){Rm(this.a)},ey.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,Lm(this.a,e)}else this.l?((e={}).__data__=Pg(t),Lm(this.a,e)):Lm(this.a,t)},ey.prototype.G=function(){this.a.f=null,delete this.f,Rm(this.a),delete this.a,ey.X.G.call(this)},Cp(ny,vv),Cp(ry,mv),Cp(iy,Zm),iy.prototype.ta=function(){Ag(this.a,"a")},iy.prototype.sa=function(t){Ag(this.a,new ny(t))},iy.prototype.ra=function(t){Ag(this.a,new ry(t))},iy.prototype.qa=function(){Ag(this.a,"b")},ty.prototype.createWebChannel=ty.prototype.a,ey.prototype.send=ey.prototype.h,ey.prototype.open=ey.prototype.g,ey.prototype.close=ey.prototype.close,lv.NO_ERROR=0,lv.TIMEOUT=8,lv.HTTP_ERROR=6,hv.COMPLETE="complete",dv.EventType=gv,gv.OPEN="a",gv.CLOSE="b",gv.ERROR="c",gv.MESSAGE="d",kg.prototype.listen=kg.prototype.va,_m.prototype.listenOnce=_m.prototype.wa,_m.prototype.getLastError=_m.prototype.Qa,_m.prototype.getLastErrorCode=_m.prototype.ua,_m.prototype.getStatus=_m.prototype.W,_m.prototype.getResponseJson=_m.prototype.Pa,_m.prototype.getResponseText=_m.prototype.$,_m.prototype.send=_m.prototype.ba;var oy=lv,sy=hv,ay=ev,uy=dv,cy=_m,ly=n("mAIw"),hy=function(t,e,n,r,i,o){this.t=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.i=o},fy=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"o",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),dy=new ap.b("@firebase/firestore");function py(){return dy.logLevel}function gy(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(dy.logLevel<=ap.a.DEBUG){var r=e.map(yy);dy.debug.apply(dy,Object(ly.g)(["Firestore (8.2.9): "+t],r))}}function vy(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(dy.logLevel<=ap.a.ERROR){var r=e.map(yy);dy.error.apply(dy,Object(ly.g)(["Firestore (8.2.9): "+t],r))}}function my(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(dy.logLevel<=ap.a.WARN){var r=e.map(yy);dy.warn.apply(dy,Object(ly.g)(["Firestore (8.2.9): "+t],r))}}function yy(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(xx){return t}}function by(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.2.9) INTERNAL ASSERTION FAILED: "+t;throw vy(e),new Error(e)}function _y(t,e){t||by()}function wy(t,e){return t}function Ey(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Oy=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Ey(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Sy(t,e){return t<e?-1:t>e?1:0}function Cy(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function Ty(t){return t+"\0"}var Iy=function(){function t(t){this.h=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.h)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.h)},t.prototype.l=function(){return 2*this.h.length},t.prototype._=function(t){return Sy(this.h,t.h)},t.prototype.isEqual=function(t){return this.h===t.h},t}();Iy.T=new Iy("");var xy={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},jy=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(ly.c)(e,t),e}(Error),ky=function(){function t(t){this.I=t}return t.fromBase64String=function(e){try{return new t(Iy.fromBase64String(e))}catch(e){throw new jy(xy.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Iy.fromUint8Array(e))},t.prototype.toBase64=function(){return this.I.toBase64()},t.prototype.toUint8Array=function(){return this.I.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.I.isEqual(t.I)},t}(),Ay=function(){function t(t){this.uid=t}return t.prototype.m=function(){return null!=this.uid},t.prototype.A=function(){return this.m()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();Ay.UNAUTHENTICATED=new Ay(null),Ay.R=new Ay("google-credentials-uid"),Ay.P=new Ay("first-party-uid");var Ny=function(t,e){this.user=e,this.type="OAuth",this.g={},this.g.Authorization="Bearer "+t},Py=function(){function t(){this.V=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.p=function(){},t.prototype.v=function(t){this.V=t,t(Ay.UNAUTHENTICATED)},t.prototype.S=function(){this.V=null},t}(),Ry=function(){function t(t){var e=this;this.D=null,this.currentUser=Ay.UNAUTHENTICATED,this.C=!1,this.N=0,this.V=null,this.forceRefresh=!1,this.D=function(){e.N++,e.currentUser=e.$(),e.C=!0,e.V&&e.V(e.currentUser)},this.N=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.D):(this.D(null),t.get().then(function(t){e.auth=t,e.D&&e.auth.addAuthTokenListener(e.D)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.N,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.N!==e?(gy("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(_y("string"==typeof n.accessToken),new Ny(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.p=function(){this.forceRefresh=!0},t.prototype.v=function(t){this.V=t,this.C&&t(this.currentUser)},t.prototype.S=function(){this.auth&&this.auth.removeAuthTokenListener(this.D),this.D=null,this.V=null},t.prototype.$=function(){var t=this.auth&&this.auth.getUid();return _y(null===t||"string"==typeof t),new Ay(t)},t}(),Dy=function(){function t(t,e){this.F=t,this.O=e,this.type="FirstParty",this.user=Ay.P}return Object.defineProperty(t.prototype,"g",{get:function(){var t={"X-Goog-AuthUser":this.O},e=this.F.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),My=function(){function t(t,e){this.F=t,this.O=e}return t.prototype.getToken=function(){return Promise.resolve(new Dy(this.F,this.O))},t.prototype.v=function(t){t(Ay.P)},t.prototype.S=function(){},t.prototype.p=function(){},t}(),Ly=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.k=function(t){return n.M(t)},this.L=function(t){return e.B(t)})}return t.prototype.M=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.L&&this.L(t),t},t}();Ly.q=-1;var Vy=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new jy(xy.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new jy(xy.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new jy(xy.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new jy(xy.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.U=function(t){return this.seconds===t.seconds?Sy(this.nanoseconds,t.nanoseconds):Sy(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Fy=function(){function t(t){this.timestamp=t}return t.K=function(e){return new t(e)},t.min=function(){return new t(new Vy(0,0))},t.prototype._=function(t){return this.timestamp.U(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.W=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.j=function(){return this.timestamp},t}(),Uy=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&by(),void 0===n?n=t.length-e:n>t.length-e&&by(),this.segments=t,this.offset=e,this.G=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.G},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.H(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.J(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.Y=function(t){return this.J(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.X=function(){return this.J(this.segments,this.offset,this.length-1)},t.prototype.Z=function(){return this.segments[this.offset]},t.prototype.tt=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.et=function(){return 0===this.length},t.prototype.nt=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.st=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.it=function(){return this.segments.slice(this.offset,this.limit())},t.H=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),qy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ly.c)(e,t),e.prototype.J=function(t,n,r){return new e(t,n,r)},e.prototype.rt=function(){return this.it().join("/")},e.prototype.toString=function(){return this.rt()},e.ot=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new jy(xy.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.ct=function(){return new e([])},e}(Uy),Hy=/^[_a-zA-Z][_a-zA-Z0-9]*$/,By=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ly.c)(e,t),e.prototype.J=function(t,n,r){return new e(t,n,r)},e.at=function(t){return Hy.test(t)},e.prototype.rt=function(){return this.it().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.at(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.rt()},e.prototype.ut=function(){return 1===this.length&&"__name__"===this.get(0)},e.ht=function(){return new e(["__name__"])},e.lt=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new jy(xy.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new jy(xy.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new jy(xy.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new jy(xy.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.ct=function(){return new e([])},e}(Uy),zy=function(){function t(t){this.path=t}return t._t=function(e){return new t(qy.ot(e))},t.ft=function(e){return new t(qy.ot(e).Y(5))},t.prototype.dt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===qy.H(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.H=function(t,e){return qy.H(t.path,e.path)},t.wt=function(t){return t.length%2==0},t.Et=function(e){return new t(new qy(e.slice()))},t}();function Wy(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Gy(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Ky(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Qy=function(){function t(t){this.fields=t,t.sort(By.H)}return t.prototype.Tt=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].nt(t))return!0;return!1},t.prototype.isEqual=function(t){return Cy(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),$y=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yy(t){if(_y(!!t),"string"==typeof t){var e=0,n=$y.exec(t);if(_y(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Xy(t.seconds),nanos:Xy(t.nanos)}}function Xy(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Jy(t){return"string"==typeof t?Iy.fromBase64String(t):Iy.fromUint8Array(t)}function Zy(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function tb(t){var e=t.mapValue.fields.__previous_value__;return Zy(e)?tb(e):e}function eb(t){var e=Yy(t.mapValue.fields.__local_write_time__.timestampValue);return new Vy(e.seconds,e.nanos)}function nb(t){return null==t}function rb(t){return 0===t&&1/t==-1/0}function ib(t){return"number"==typeof t&&Number.isInteger(t)&&!rb(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function ob(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Zy(t)?4:10:by()}function sb(t,e){var n=ob(t);if(n!==ob(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return eb(t).isEqual(eb(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Yy(t.timestampValue),r=Yy(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Jy(t.bytesValue).isEqual(Jy(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Xy(t.geoPointValue.latitude)===Xy(e.geoPointValue.latitude)&&Xy(t.geoPointValue.longitude)===Xy(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Xy(t.integerValue)===Xy(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Xy(t.doubleValue),r=Xy(e.doubleValue);return n===r?rb(n)===rb(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Cy(t.arrayValue.values||[],e.arrayValue.values||[],sb);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Wy(n)!==Wy(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!sb(n[i],r[i])))return!1;return!0}(t,e);default:return by()}}function ab(t,e){return void 0!==(t.values||[]).find(function(t){return sb(t,e)})}function ub(t,e){var n=ob(t),r=ob(e);if(n!==r)return Sy(n,r);switch(n){case 0:return 0;case 1:return Sy(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Xy(t.integerValue||t.doubleValue),r=Xy(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return cb(t.timestampValue,e.timestampValue);case 4:return cb(eb(t),eb(e));case 5:return Sy(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Jy(t),r=Jy(e);return n._(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Sy(n[i],r[i]);if(0!==o)return o}return Sy(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Sy(Xy(t.latitude),Xy(e.latitude));return 0!==n?n:Sy(Xy(t.longitude),Xy(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=ub(n[i],r[i]);if(o)return o}return Sy(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Sy(r[s],o[s]);if(0!==a)return a;var u=ub(n[r[s]],i[o[s]]);if(0!==u)return u}return Sy(r.length,o.length)}(t.mapValue,e.mapValue);default:throw by()}}function cb(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Sy(t,e);var n=Yy(t),r=Yy(e),i=Sy(n.seconds,r.seconds);return 0!==i?i:Sy(n.nanos,r.nanos)}function lb(t){return hb(t)}function hb(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Yy(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Jy(t.bytesValue).toBase64():"referenceValue"in t?zy.ft(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=hb(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+hb(t.fields[o])}return e+"}"}(t.mapValue):by();var e}function fb(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.rt()}}function db(t){return!!t&&"integerValue"in t}function pb(t){return!!t&&"arrayValue"in t}function gb(t){return!!t&&"nullValue"in t}function vb(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function mb(t){return!!t&&"mapValue"in t}var yb=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.et())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!mb(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.tt()])||null},t.prototype.isEqual=function(t){return sb(this.proto,t.proto)},t}(),bb=function(){function t(t){void 0===t&&(t=yb.empty()),this.It=t,this.At=new Map}return t.prototype.set=function(t,e){return this.Rt(t,e),this},t.prototype.delete=function(t){return this.Rt(t,null),this},t.prototype.Rt=function(t,e){for(var n=this.At,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===ob(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.tt(),e)},t.prototype.Pt=function(){var t=this.yt(By.ct(),this.At);return null!=t?new yb(t):this.It},t.prototype.yt=function(t,e){var n=this,r=!1,i=this.It.field(t),o=mb(i)?Object.assign({},i.mapValue.fields):{};return e.forEach(function(e,i){if(e instanceof Map){var s=n.yt(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)}),r?{mapValue:{fields:o}}:null},t}();function _b(t){var e=[];return Gy(t.fields||{},function(t,n){var r=new By([t]);if(mb(n)){var i=_b(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new Qy(e)}var wb=function(t,e){this.key=t,this.version=e},Eb=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).gt=r,o.Vt=!!i.Vt,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Object(ly.c)(e,t),e.prototype.field=function(t){return this.gt.field(t)},e.prototype.data=function(){return this.gt},e.prototype.bt=function(){return this.gt.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Vt===t.Vt&&this.hasCommittedMutations===t.hasCommittedMutations&&this.gt.isEqual(t.gt)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.gt.toString()+", {hasLocalMutations: "+this.Vt+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Vt||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(wb),Ob=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Object(ly.c)(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(wb),Sb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ly.c)(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(wb),Cb=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.vt=null};function Tb(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Cb(t,e,n,r,i,o,s)}function Ib(t){var e=wy(t);if(null===e.vt){var n=e.path.rt();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.rt()+t.op.toString()+lb(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.rt()+t.dir}(t)}).join(","),nb(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Ub(e.startAt)),e.endAt&&(n+="|ub:",n+=Ub(e.endAt)),e.vt=n}return e.vt}function xb(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Hb(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!sb(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!zb(t.startAt,e.startAt)&&zb(t.endAt,e.endAt)}function jb(t){return zy.wt(t.path)&&null===t.collectionGroup&&0===t.filters.length}var kb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(ly.c)(e,t),e.create=function(t,n,r){return t.ut()?"in"===n||"not-in"===n?this.St(t,n,r):new Ab(t,n,r):"array-contains"===n?new Db(t,r):"in"===n?new Mb(t,r):"not-in"===n?new Lb(t,r):"array-contains-any"===n?new Vb(t,r):new e(t,n,r)},e.St=function(t,e,n){return"in"===e?new Nb(t,n):new Pb(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.Dt(ub(e,this.value)):null!==e&&ob(this.value)===ob(e)&&this.Dt(ub(e,this.value))},e.prototype.Dt=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return by()}},e.prototype.Ct=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),Ab=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=zy.ft(r.referenceValue),i}return Object(ly.c)(e,t),e.prototype.matches=function(t){var e=zy.H(t.key,this.key);return this.Dt(e)},e}(kb),Nb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Rb(0,n),r}return Object(ly.c)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(kb),Pb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Rb(0,n),r}return Object(ly.c)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(kb);function Rb(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return zy.ft(t.referenceValue)})}var Db=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(ly.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return pb(e)&&ab(e.arrayValue,this.value)},e}(kb),Mb=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(ly.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&ab(this.value.arrayValue,e)},e}(kb),Lb=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(ly.c)(e,t),e.prototype.matches=function(t){if(ab(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!ab(this.value.arrayValue,e)},e}(kb),Vb=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(ly.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!pb(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return ab(e.value.arrayValue,t)})},e}(kb),Fb=function(t,e){this.position=t,this.before=e};function Ub(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return lb(t)}).join(",")}var qb=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Hb(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Bb(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.ut()?zy.H(zy.ft(s.referenceValue),n.key):ub(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function zb(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!sb(t.position[n],e.position[n]))return!1;return!0}var Wb=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.xt=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.Nt=null,this.$t=null};function Gb(t,e,n,r,i,o,s,a){return new Wb(t,e,n,r,i,o,s,a)}function Kb(t){return new Wb(t)}function Qb(t){return!nb(t.limit)&&"F"===t.limitType}function $b(t){return!nb(t.limit)&&"L"===t.limitType}function Yb(t){return t.xt.length>0?t.xt[0].field:null}function Xb(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.Ct())return r.field}return null}function Jb(t){return null!==t.collectionGroup}function Zb(t){var e=wy(t);if(null===e.Nt){e.Nt=[];var n=Xb(e),r=Yb(e);if(null!==n&&null===r)n.ut()||e.Nt.push(new qb(n)),e.Nt.push(new qb(By.ht(),"asc"));else{for(var i=!1,o=0,s=e.xt;o<s.length;o++){var a=s[o];e.Nt.push(a),a.field.ut()&&(i=!0)}if(!i){var u=e.xt.length>0?e.xt[e.xt.length-1].dir:"asc";e.Nt.push(new qb(By.ht(),u))}}}return e.Nt}function t_(t){var e=wy(t);if(!e.$t)if("F"===e.limitType)e.$t=Tb(e.path,e.collectionGroup,Zb(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Zb(e);r<i.length;r++){var o=i[r];n.push(new qb(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new Fb(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Fb(e.startAt.position,!e.startAt.before):null;e.$t=Tb(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.$t}function e_(t,e,n){return new Wb(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function n_(t,e){return xb(t_(t),t_(e))&&t.limitType===e.limitType}function r_(t){return Ib(t_(t))+"|lt:"+t.limitType}function i_(t){return"Query(target="+function(t){var e=t.path.rt();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.rt()+" "+e.op+" "+lb(e.value);var e}).join(", ")+"]"),nb(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.rt()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Ub(t.startAt)),t.endAt&&(e+=", endAt: "+Ub(t.endAt)),"Target("+e+")"}(t_(t))+"; limitType="+t.limitType+")"}function o_(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.dt(t.collectionGroup)&&t.path.nt(n):zy.wt(t.path)?t.path.isEqual(n):t.path.st(n)}(t,e)&&function(t,e){for(var n=0,r=t.xt;n<r.length;n++){var i=r[n];if(!i.field.ut()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Bb(t.startAt,Zb(t),e)||t.endAt&&Bb(t.endAt,Zb(t),e))}(t,e)}function s_(t){return function(e,n){for(var r=!1,i=0,o=Zb(t);i<o.length;i++){var s=o[i],a=a_(s,e,n);if(0!==a)return a;r=r||s.field.ut()}return 0}}function a_(t,e,n){var r=t.field.ut()?zy.H(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?ub(r,i):by()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return by()}}var u_=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Fy.min()),void 0===o&&(o=Fy.min()),void 0===s&&(s=Iy.T),this.target=t,this.targetId=e,this.Ft=n,this.sequenceNumber=r,this.Ot=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.kt=function(e){return new t(this.target,this.targetId,this.Ft,e,this.Ot,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.Mt=function(e,n){return new t(this.target,this.targetId,this.Ft,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.Lt=function(e){return new t(this.target,this.targetId,this.Ft,this.sequenceNumber,this.Ot,e,this.resumeToken)},t}();function c_(t,e){if(t.Bt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rb(e)?"-0":e}}function l_(t){return{integerValue:""+t}}function h_(t,e){return ib(e)?l_(e):c_(t,e)}var f_=function(){this.qt=void 0};function d_(t,e,n){return t instanceof v_?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof m_?y_(t,e):t instanceof b_?__(t,e):function(t,e){var n=g_(t,e),r=E_(n)+E_(t.Ut);return db(n)&&db(t.Ut)?l_(r):c_(t.Qt,r)}(t,e)}function p_(t,e,n){return t instanceof m_?y_(t,e):t instanceof b_?__(t,e):n}function g_(t,e){return t instanceof w_?db(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var v_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ly.c)(e,t),e}(f_),m_=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(ly.c)(e,t),e}(f_);function y_(t,e){for(var n=O_(e),r=function(t){n.some(function(e){return sb(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var b_=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(ly.c)(e,t),e}(f_);function __(t,e){for(var n=O_(e),r=function(t){n=n.filter(function(e){return!sb(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var w_=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qt=e,r.Ut=n,r}return Object(ly.c)(e,t),e}(f_);function E_(t){return Xy(t.integerValue||t.doubleValue)}function O_(t){return pb(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var S_=function(t,e){this.field=t,this.transform=e},C_=function(t,e){this.version=t,this.transformResults=e},T_=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.Kt=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"Wt",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function I_(t,e){return void 0!==t.updateTime?e instanceof Eb&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof Eb}var x_=function(){};function j_(t,e,n){return t instanceof R_?function(t,e,n){var r=t.value;if(n.transformResults){var i=L_(t.fieldTransforms,e,n.transformResults);r=F_(t.fieldTransforms,r,i)}return new Eb(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof D_?function(t,e,n){if(!I_(t.jt,e))return new Sb(t.key,n.version);var r=M_(t,e,n.transformResults?L_(t.fieldTransforms,e,n.transformResults):[]);return new Eb(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new Ob(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function k_(t,e,n){return t instanceof R_?function(t,e,n){if(!I_(t.jt,e))return e;var r=t.value,i=V_(t.fieldTransforms,n,e);r=F_(t.fieldTransforms,r,i);var o=P_(e);return new Eb(t.key,o,r,{Vt:!0})}(t,e,n):t instanceof D_?function(t,e,n){if(!I_(t.jt,e))return e;var r=P_(e),i=M_(t,e,V_(t.fieldTransforms,n,e));return new Eb(t.key,r,i,{Vt:!0})}(t,e,n):function(t,e){return I_(t.jt,e)?new Ob(t.key,Fy.min()):e}(t,e)}function A_(t,e){return function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof Eb?e.field(o.field):void 0,a=g_(o.transform,s||null);null!=a&&(n=null==n?(new bb).set(o.field,a):n.set(o.field,a))}return n?n.Pt():null}(t.fieldTransforms,e)}function N_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.jt.isEqual(e.jt)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Cy(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof m_&&e instanceof m_||t instanceof b_&&e instanceof b_?Cy(t.elements,e.elements,sb):t instanceof w_&&e instanceof w_?sb(t.Ut,e.Ut):t instanceof v_&&e instanceof v_}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.Gt.isEqual(e.Gt))}function P_(t){return t instanceof Eb?t.version:Fy.min()}var R_=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.jt=r,o.fieldTransforms=i,o.type=0,o}return Object(ly.c)(e,t),e}(x_),D_=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.Gt=r,s.jt=i,s.fieldTransforms=o,s.type=1,s}return Object(ly.c)(e,t),e}(x_);function M_(t,e,n){var r;return r=function(t,e){var n=new bb(e);return t.Gt.fields.forEach(function(e){if(!e.et()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}}),n.Pt()}(t,r=e instanceof Eb?e.data():yb.empty()),F_(t.fieldTransforms,r,n)}function L_(t,e,n){var r=[];_y(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof Eb&&(a=e.field(o.field)),r.push(p_(s,a,n[i]))}return r}function V_(t,e,n){for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=null;n instanceof Eb&&(u=n.field(s.field)),r.push(d_(a,u,e))}return r}function F_(t,e,n){for(var r=new bb(e),i=0;i<t.length;i++)r.set(t[i].field,n[i]);return r.Pt()}var U_,q_,H_=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.jt=n,r.type=2,r.fieldTransforms=[],r}return Object(ly.c)(e,t),e}(x_),B_=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.jt=n,r.type=3,r.fieldTransforms=[],r}return Object(ly.c)(e,t),e}(x_),z_=function(t){this.count=t};function W_(t){switch(t){case xy.OK:return by();case xy.CANCELLED:case xy.UNKNOWN:case xy.DEADLINE_EXCEEDED:case xy.RESOURCE_EXHAUSTED:case xy.INTERNAL:case xy.UNAVAILABLE:case xy.UNAUTHENTICATED:return!1;case xy.INVALID_ARGUMENT:case xy.NOT_FOUND:case xy.ALREADY_EXISTS:case xy.PERMISSION_DENIED:case xy.FAILED_PRECONDITION:case xy.ABORTED:case xy.OUT_OF_RANGE:case xy.UNIMPLEMENTED:case xy.DATA_LOSS:return!0;default:return by()}}function G_(t){if(void 0===t)return vy("GRPC error has no .code"),xy.UNKNOWN;switch(t){case U_.OK:return xy.OK;case U_.CANCELLED:return xy.CANCELLED;case U_.UNKNOWN:return xy.UNKNOWN;case U_.DEADLINE_EXCEEDED:return xy.DEADLINE_EXCEEDED;case U_.RESOURCE_EXHAUSTED:return xy.RESOURCE_EXHAUSTED;case U_.INTERNAL:return xy.INTERNAL;case U_.UNAVAILABLE:return xy.UNAVAILABLE;case U_.UNAUTHENTICATED:return xy.UNAUTHENTICATED;case U_.INVALID_ARGUMENT:return xy.INVALID_ARGUMENT;case U_.NOT_FOUND:return xy.NOT_FOUND;case U_.ALREADY_EXISTS:return xy.ALREADY_EXISTS;case U_.PERMISSION_DENIED:return xy.PERMISSION_DENIED;case U_.FAILED_PRECONDITION:return xy.FAILED_PRECONDITION;case U_.ABORTED:return xy.ABORTED;case U_.OUT_OF_RANGE:return xy.OUT_OF_RANGE;case U_.UNIMPLEMENTED:return xy.UNIMPLEMENTED;case U_.DATA_LOSS:return xy.DATA_LOSS;default:return by()}}(q_=U_||(U_={}))[q_.OK=0]="OK",q_[q_.CANCELLED=1]="CANCELLED",q_[q_.UNKNOWN=2]="UNKNOWN",q_[q_.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",q_[q_.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",q_[q_.NOT_FOUND=5]="NOT_FOUND",q_[q_.ALREADY_EXISTS=6]="ALREADY_EXISTS",q_[q_.PERMISSION_DENIED=7]="PERMISSION_DENIED",q_[q_.UNAUTHENTICATED=16]="UNAUTHENTICATED",q_[q_.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",q_[q_.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",q_[q_.ABORTED=10]="ABORTED",q_[q_.OUT_OF_RANGE=11]="OUT_OF_RANGE",q_[q_.UNIMPLEMENTED=12]="UNIMPLEMENTED",q_[q_.INTERNAL=13]="INTERNAL",q_[q_.UNAVAILABLE=14]="UNAVAILABLE",q_[q_.DATA_LOSS=15]="DATA_LOSS";var K_=function(){function t(t,e){this.H=t,this.root=e||$_.EMPTY}return t.prototype.zt=function(e,n){return new t(this.H,this.root.zt(e,n,this.H).copy(null,null,$_.Ht,null,null))},t.prototype.remove=function(e){return new t(this.H,this.root.remove(e,this.H).copy(null,null,$_.Ht,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.et();){var n=this.H(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.et();){var r=this.H(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.et=function(){return this.root.et()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.Jt=function(){return this.root.Jt()},t.prototype.Yt=function(){return this.root.Yt()},t.prototype.Xt=function(t){return this.root.Xt(t)},t.prototype.forEach=function(t){this.Xt(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.Xt(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.Zt=function(t){return this.root.Zt(t)},t.prototype.te=function(){return new Q_(this.root,null,this.H,!1)},t.prototype.ee=function(t){return new Q_(this.root,t,this.H,!1)},t.prototype.ne=function(){return new Q_(this.root,null,this.H,!0)},t.prototype.se=function(t){return new Q_(this.root,t,this.H,!0)},t}(),Q_=function(){function t(t,e,n,r){this.ie=r,this.re=[];for(var i=1;!t.et();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.ie?t.left:t.right;else{if(0===i){this.re.push(t);break}this.re.push(t),t=this.ie?t.right:t.left}}return t.prototype.oe=function(){var t=this.re.pop(),e={key:t.key,value:t.value};if(this.ie)for(t=t.left;!t.et();)this.re.push(t),t=t.right;else for(t=t.right;!t.et();)this.re.push(t),t=t.left;return e},t.prototype.ce=function(){return this.re.length>0},t.prototype.ae=function(){if(0===this.re.length)return null;var t=this.re[this.re.length-1];return{key:t.key,value:t.value}},t}(),$_=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.et=function(){return!1},t.prototype.Xt=function(t){return this.left.Xt(t)||t(this.key,this.value)||this.right.Xt(t)},t.prototype.Zt=function(t){return this.right.Zt(t)||t(this.key,this.value)||this.left.Zt(t)},t.prototype.min=function(){return this.left.et()?this:this.left.min()},t.prototype.Jt=function(){return this.min().key},t.prototype.Yt=function(){return this.right.et()?this.key:this.right.Yt()},t.prototype.zt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.zt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.zt(t,e,n))).ue()},t.prototype.he=function(){if(this.left.et())return t.EMPTY;var e=this;return e.left.le()||e.left.left.le()||(e=e._e()),(e=e.copy(null,null,null,e.left.he(),null)).ue()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.et()||i.left.le()||i.left.left.le()||(i=i._e()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.le()&&(i=i.fe()),i.right.et()||i.right.le()||i.right.left.le()||(i=i.de()),0===n(e,i.key)){if(i.right.et())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.he())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.ue()},t.prototype.le=function(){return this.color},t.prototype.ue=function(){var t=this;return t.right.le()&&!t.left.le()&&(t=t.we()),t.left.le()&&t.left.left.le()&&(t=t.fe()),t.left.le()&&t.right.le()&&(t=t.Ee()),t},t.prototype._e=function(){var t=this.Ee();return t.right.left.le()&&(t=(t=(t=t.copy(null,null,null,null,t.right.fe())).we()).Ee()),t},t.prototype.de=function(){var t=this.Ee();return t.left.left.le()&&(t=(t=t.fe()).Ee()),t},t.prototype.we=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.fe=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Ee=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Te=function(){var t=this.Ie();return Math.pow(2,t)<=this.size+1},t.prototype.Ie=function(){if(this.le()&&this.left.le())throw by();if(this.right.le())throw by();var t=this.left.Ie();if(t!==this.right.Ie())throw by();return t+(this.le()?0:1)},t}();$_.EMPTY=null,$_.RED=!0,$_.Ht=!1,$_.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw by()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw by()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw by()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw by()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw by()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.zt=function(t,e,n){return new $_(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.et=function(){return!0},t.prototype.Xt=function(t){return!1},t.prototype.Zt=function(t){return!1},t.prototype.Jt=function(){return null},t.prototype.Yt=function(){return null},t.prototype.le=function(){return!1},t.prototype.Te=function(){return!0},t.prototype.Ie=function(){return 0},t}());var Y_=function(){function t(t){this.H=t,this.data=new K_(this.H)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.Jt()},t.prototype.last=function(){return this.data.Yt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.Xt(function(e,n){return t(e),!1})},t.prototype.me=function(t,e){for(var n=this.data.ee(t[0]);n.ce();){var r=n.oe();if(this.H(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Ae=function(t,e){var n;for(n=void 0!==e?this.data.ee(e):this.data.te();n.ce();)if(!t(n.oe().key))return},t.prototype.Re=function(t){var e=this.data.ee(t);return e.ce()?e.oe().key:null},t.prototype.te=function(){return new X_(this.data.te())},t.prototype.ee=function(t){return new X_(this.data.ee(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).zt(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.et=function(){return this.data.et()},t.prototype.Pe=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.te(),r=e.data.te();n.ce();){var i=n.oe().key,o=r.oe().key;if(0!==this.H(i,o))return!1}return!0},t.prototype.it=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.H);return n.data=e,n},t}(),X_=function(){function t(t){this.ye=t}return t.prototype.oe=function(){return this.ye.oe().key},t.prototype.ce=function(){return this.ye.ce()},t}(),J_=new K_(zy.H);function Z_(){return J_}function tw(){return Z_()}var ew=new K_(zy.H);function nw(){return ew}var rw=new K_(zy.H);function iw(){return rw}var ow=new Y_(zy.H);function sw(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=ow,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var aw=new Y_(Sy);function uw(){return aw}var cw=function(){function t(t){this.H=t?function(e,n){return t(e,n)||zy.H(e.key,n.key)}:function(t,e){return zy.H(t.key,e.key)},this.ge=nw(),this.Ve=new K_(this.H)}return t.pe=function(e){return new t(e.H)},t.prototype.has=function(t){return null!=this.ge.get(t)},t.prototype.get=function(t){return this.ge.get(t)},t.prototype.first=function(){return this.Ve.Jt()},t.prototype.last=function(){return this.Ve.Yt()},t.prototype.et=function(){return this.Ve.et()},t.prototype.indexOf=function(t){var e=this.ge.get(t);return e?this.Ve.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.Ve.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.Ve.Xt(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.ge.zt(t.key,t),e.Ve.zt(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.ge.remove(t),this.Ve.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.Ve.te(),r=e.Ve.te();n.ce();){var i=n.oe().key,o=r.oe().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.H=this.H,r.ge=e,r.Ve=n,r},t}(),lw=function(){function t(){this.be=new K_(zy.H)}return t.prototype.track=function(t){var e=t.doc.key,n=this.be.get(e);n?0!==t.type&&3===n.type?this.be=this.be.zt(e,t):3===t.type&&1!==n.type?this.be=this.be.zt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.be=this.be.zt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.be=this.be.zt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.be=this.be.remove(e):1===t.type&&2===n.type?this.be=this.be.zt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.be=this.be.zt(e,{type:2,doc:t.doc}):by():this.be=this.be.zt(e,t)},t.prototype.ve=function(){var t=[];return this.be.Xt(function(e,n){t.push(n)}),t},t}(),hw=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.Se=n,this.docChanges=r,this.De=i,this.fromCache=o,this.Ce=s,this.xe=a}return t.Ne=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,cw.pe(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.De.et()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Ce===t.Ce&&this.De.isEqual(t.De)&&n_(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Se.isEqual(t.Se)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),fw=function(){function t(t,e,n,r,i){this.Ot=t,this.$e=e,this.Fe=n,this.Oe=r,this.ke=i}return t.Me=function(e,n){var r=new Map;return r.set(e,dw.Le(e,n)),new t(Fy.min(),r,uw(),Z_(),sw())},t}(),dw=function(){function t(t,e,n,r,i){this.resumeToken=t,this.Be=e,this.qe=n,this.Ue=r,this.Qe=i}return t.Le=function(e,n){return new t(Iy.T,n,sw(),sw(),sw())},t}(),pw=function(t,e,n,r){this.Ke=t,this.removedTargetIds=e,this.key=n,this.We=r},gw=function(t,e){this.targetId=t,this.je=e},vw=function(t,e,n,r){void 0===n&&(n=Iy.T),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},mw=function(){function t(){this.Ge=0,this.ze=_w(),this.He=Iy.T,this.Je=!1,this.Ye=!0}return Object.defineProperty(t.prototype,"Be",{get:function(){return this.Je},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.He},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Xe",{get:function(){return 0!==this.Ge},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ze",{get:function(){return this.Ye},enumerable:!1,configurable:!0}),t.prototype.tn=function(t){t.l()>0&&(this.Ye=!0,this.He=t)},t.prototype.en=function(){var t=sw(),e=sw(),n=sw();return this.ze.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:by()}}),new dw(this.He,this.Je,t,e,n)},t.prototype.nn=function(){this.Ye=!1,this.ze=_w()},t.prototype.sn=function(t,e){this.Ye=!0,this.ze=this.ze.zt(t,e)},t.prototype.rn=function(t){this.Ye=!0,this.ze=this.ze.remove(t)},t.prototype.on=function(){this.Ge+=1},t.prototype.cn=function(){this.Ge-=1},t.prototype.an=function(){this.Ye=!0,this.Je=!0},t}(),yw=function(){function t(t){this.un=t,this.hn=new Map,this.ln=Z_(),this._n=bw(),this.fn=new Y_(Sy)}return t.prototype.dn=function(t){for(var e=0,n=t.Ke;e<n.length;e++){var r=n[e];t.We instanceof Eb?this.wn(r,t.We):t.We instanceof Ob&&this.En(r,t.key,t.We)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.En(r=o[i],t.key,t.We)},t.prototype.Tn=function(t){var e=this;this.In(t,function(n){var r=e.mn(n);switch(t.state){case 0:e.An(n)&&r.tn(t.resumeToken);break;case 1:r.cn(),r.Xe||r.nn(),r.tn(t.resumeToken);break;case 2:r.cn(),r.Xe||e.removeTarget(n);break;case 3:e.An(n)&&(r.an(),r.tn(t.resumeToken));break;case 4:e.An(n)&&(e.Rn(n),r.tn(t.resumeToken));break;default:by()}})},t.prototype.In=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.hn.forEach(function(t,r){n.An(r)&&e(r)})},t.prototype.Pn=function(t){var e=t.targetId,n=t.je.count,r=this.yn(e);if(r){var i=r.target;if(jb(i))if(0===n){var o=new zy(i.path);this.En(e,o,new Ob(o,Fy.min()))}else _y(1===n);else this.gn(e)!==n&&(this.Rn(e),this.fn=this.fn.add(e))}},t.prototype.Vn=function(t){var e=this,n=new Map;this.hn.forEach(function(r,i){var o=e.yn(i);if(o){if(r.Be&&jb(o.target)){var s=new zy(o.target.path);null!==e.ln.get(s)||e.pn(i,s)||e.En(i,s,new Ob(s,t))}r.Ze&&(n.set(i,r.en()),r.nn())}});var r=sw();this._n.forEach(function(t,n){var i=!0;n.Ae(function(t){var n=e.yn(t);return!n||2===n.Ft||(i=!1,!1)}),i&&(r=r.add(t))});var i=new fw(t,n,this.fn,this.ln,r);return this.ln=Z_(),this._n=bw(),this.fn=new Y_(Sy),i},t.prototype.wn=function(t,e){if(this.An(t)){var n=this.pn(t,e.key)?2:0;this.mn(t).sn(e.key,n),this.ln=this.ln.zt(e.key,e),this._n=this._n.zt(e.key,this.bn(e.key).add(t))}},t.prototype.En=function(t,e,n){if(this.An(t)){var r=this.mn(t);this.pn(t,e)?r.sn(e,1):r.rn(e),this._n=this._n.zt(e,this.bn(e).delete(t)),n&&(this.ln=this.ln.zt(e,n))}},t.prototype.removeTarget=function(t){this.hn.delete(t)},t.prototype.gn=function(t){var e=this.mn(t).en();return this.un.vn(t).size+e.qe.size-e.Qe.size},t.prototype.on=function(t){this.mn(t).on()},t.prototype.mn=function(t){var e=this.hn.get(t);return e||(e=new mw,this.hn.set(t,e)),e},t.prototype.bn=function(t){var e=this._n.get(t);return e||(e=new Y_(Sy),this._n=this._n.zt(t,e)),e},t.prototype.An=function(t){var e=null!==this.yn(t);return e||gy("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.yn=function(t){var e=this.hn.get(t);return e&&e.Xe?null:this.un.Sn(t)},t.prototype.Rn=function(t){var e=this;this.hn.set(t,new mw),this.un.vn(t).forEach(function(n){e.En(t,n,null)})},t.prototype.pn=function(t,e){return this.un.vn(t).has(e)},t}();function bw(){return new K_(zy.H)}function _w(){return new K_(zy.H)}var ww={asc:"ASCENDING",desc:"DESCENDING"},Ew={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ow=function(t,e){this.t=t,this.Bt=e};function Sw(t,e){return t.Bt?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Cw(t,e){return t.Bt?e.toBase64():e.toUint8Array()}function Tw(t,e){return Sw(t,e.j())}function Iw(t){return _y(!!t),Fy.K(function(t){var e=Yy(t);return new Vy(e.seconds,e.nanos)}(t))}function xw(t,e){return function(t){return new qy(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).rt()}function jw(t){var e=qy.ot(t);return _y(Zw(e)),e}function kw(t,e){return xw(t.t,e.path)}function Aw(t,e){var n=jw(e);if(n.get(1)!==t.t.projectId)throw new jy(xy.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.t.projectId);if(n.get(3)!==t.t.database)throw new jy(xy.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.t.database);return new zy(Dw(n))}function Nw(t,e){return xw(t.t,e)}function Pw(t){var e=jw(t);return 4===e.length?qy.ct():Dw(e)}function Rw(t){return new qy(["projects",t.t.projectId,"databases",t.t.database]).rt()}function Dw(t){return _y(t.length>4&&"documents"===t.get(4)),t.Y(5)}function Mw(t,e,n){return{name:kw(t,e),fields:n.proto.mapValue.fields}}function Lw(t,e,n){var r=Aw(t,e.name),i=Iw(e.updateTime),o=new yb({mapValue:{fields:e.fields}});return new Eb(r,i,o,{hasCommittedMutations:!!n})}function Vw(t,e){var n;if(e instanceof R_)n={update:Mw(t,e.key,e.value)};else if(e instanceof H_)n={delete:kw(t,e.key)};else if(e instanceof D_)n={update:Mw(t,e.key,e.data),updateMask:Jw(e.Gt)};else{if(!(e instanceof B_))return by();n={verify:kw(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof v_)return{fieldPath:e.field.rt(),setToServerValue:"REQUEST_TIME"};if(n instanceof m_)return{fieldPath:e.field.rt(),appendMissingElements:{values:n.elements}};if(n instanceof b_)return{fieldPath:e.field.rt(),removeAllFromArray:{values:n.elements}};if(n instanceof w_)return{fieldPath:e.field.rt(),increment:n.Ut};throw by()}(0,t)})),e.jt.Wt||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Tw(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:by()}(t,e.jt)),n}function Fw(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?T_.updateTime(Iw(t.updateTime)):void 0!==t.exists?T_.exists(t.exists):T_.Kt()}(e.currentDocument):T_.Kt(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(_y("REQUEST_TIME"===e.setToServerValue),n=new v_):"appendMissingElements"in e?n=new m_(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new b_(e.removeAllFromArray.values||[]):"increment"in e?n=new w_(t,e.increment):by();var r=By.lt(e.fieldPath);return new S_(r,n)}(t,e)}):[];if(e.update){var i=Aw(t,e.update.name),o=new yb({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new Qy((t.fieldPaths||[]).map(function(t){return By.lt(t)}))}(e.updateMask);return new D_(i,o,s,n,r)}return new R_(i,o,n,r)}if(e.delete){var a=Aw(t,e.delete);return new H_(a,n)}if(e.verify){var u=Aw(t,e.verify);return new B_(u,n)}return by()}function Uw(t,e){return{documents:[Nw(t,e.path)]}}function qw(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Nw(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Nw(t,r.X()),n.structuredQuery.from=[{collectionId:r.tt()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(vb(t.value))return{unaryFilter:{field:Qw(t.field),op:"IS_NAN"}};if(gb(t.value))return{unaryFilter:{field:Qw(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(vb(t.value))return{unaryFilter:{field:Qw(t.field),op:"IS_NOT_NAN"}};if(gb(t.value))return{unaryFilter:{field:Qw(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qw(t.field),op:Kw(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:Qw(t.field),direction:Gw(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.Bt||nb(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=zw(e.startAt)),e.endAt&&(n.structuredQuery.endAt=zw(e.endAt)),n}function Hw(t){var e=Pw(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){_y(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Bw(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new qb($w(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return nb(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Ww(n.startAt));var l=null;return n.endAt&&(l=Ww(n.endAt)),Gb(e,i,a,s,u,"F",c,l)}function Bw(t){return t?void 0!==t.unaryFilter?[Xw(t)]:void 0!==t.fieldFilter?[Yw(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return Bw(t)}).reduce(function(t,e){return t.concat(e)}):by():[]}function zw(t){return{before:t.before,values:t.position}}function Ww(t){return new Fb(t.values||[],!!t.before)}function Gw(t){return ww[t]}function Kw(t){return Ew[t]}function Qw(t){return{fieldPath:t.rt()}}function $w(t){return By.lt(t.fieldPath)}function Yw(t){return kb.create($w(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return by()}}(t.fieldFilter.op),t.fieldFilter.value)}function Xw(t){switch(t.unaryFilter.op){case"IS_NAN":var e=$w(t.unaryFilter.field);return kb.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=$w(t.unaryFilter.field);return kb.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=$w(t.unaryFilter.field);return kb.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=$w(t.unaryFilter.field);return kb.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return by()}}function Jw(t){var e=[];return t.fields.forEach(function(t){return e.push(t.rt())}),{fieldPaths:e}}function Zw(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var tE=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},eE=function(){function t(t){var e=this;this.Dn=null,this.Cn=null,this.result=void 0,this.error=void 0,this.xn=!1,this.Nn=!1,t(function(t){e.xn=!0,e.result=t,e.Dn&&e.Dn(t)},function(t){e.xn=!0,e.error=t,e.Cn&&e.Cn(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Nn&&by(),this.Nn=!0,this.xn?this.error?this.$n(n,this.error):this.Fn(e,this.result):new t(function(t,i){r.Dn=function(n){r.Fn(e,n).next(t,i)},r.Cn=function(e){r.$n(n,e).next(t,i)}})},t.prototype.On=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.kn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.Fn=function(e,n){return e?this.kn(function(){return e(n)}):t.resolve(n)},t.prototype.$n=function(e,n){return e?this.kn(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.Mn=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.Ln=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.Mn(r)},t}(),nE=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.Bn=new tE,this.transaction.oncomplete=function(){n.Bn.resolve()},this.transaction.onabort=function(){e.error?n.Bn.reject(new oE(t,e.error)):n.Bn.resolve()},this.transaction.onerror=function(e){var r=lE(e.target.error);n.Bn.reject(new oE(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new oE(n,e)}},Object.defineProperty(t.prototype,"qn",{get:function(){return this.Bn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.Bn.reject(t),this.aborted||(gy("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new aE(e)},t}(),rE=function(){function t(e,n,r){this.name=e,this.version=n,this.Un=r,12.2===t.Qn(Object(up.p)())&&vy("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return gy("SimpleDb","Removing database:",t),uE(window.indexedDB.deleteDatabase(t)).On()},t.Kn=function(){if("undefined"==typeof indexedDB)return!1;if(t.Wn())return!0;var e=Object(up.p)(),n=t.Qn(e),r=0<n&&n<10,i=t.jn(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Wn=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Gn)},t.zn=function(t,e){return t.store(e)},t.Qn=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.jn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Hn=function(t){return Object(ly.b)(this,void 0,void 0,function(){var e,n=this;return Object(ly.d)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(gy("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new oE(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new jy(xy.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new oE(t,n))},i.onupgradeneeded=function(t){gy("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.Un.Jn(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){gy("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Yn&&(this.db.onversionchange=function(t){return n.Yn(t)}),this.db)]}})})},t.prototype.Xn=function(t){this.Yn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(ly.b)(this,void 0,void 0,function(){var i,o,s,a,u;return Object(ly.d)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(ly.d)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.Hn(t)];case 2:return a.db=h.sent(),e=nE.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),eE.reject(t)}).On(),u={},s.catch(function(){}),[4,e.qn];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return gy("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),iE=function(){function t(t){this.Zn=t,this.ts=!1,this.es=null}return Object.defineProperty(t.prototype,"xn",{get:function(){return this.ts},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ns",{get:function(){return this.es},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Zn=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.ts=!0},t.prototype.ss=function(t){this.es=t},t.prototype.delete=function(){return uE(this.Zn.delete())},t}(),oE=function(t){function e(e,n){var r=this;return(r=t.call(this,xy.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(ly.c)(e,t),e}(jy);function sE(t){return"IndexedDbTransactionError"===t.name}var aE=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(gy("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(gy("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),uE(n)},t.prototype.add=function(t){return gy("SimpleDb","ADD",this.store.name,t,t),uE(this.store.add(t))},t.prototype.get=function(t){var e=this;return uE(this.store.get(t)).next(function(n){return void 0===n&&(n=null),gy("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return gy("SimpleDb","DELETE",this.store.name,t),uE(this.store.delete(t))},t.prototype.count=function(){return gy("SimpleDb","COUNT",this.store.name),uE(this.store.count())},t.prototype.rs=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.os(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.cs=function(t,e){gy("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.us=!1;var r=this.cursor(n);return this.os(r,function(t,e,n){return n.delete()})},t.prototype.hs=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.os(r,e)},t.prototype.ls=function(t){var e=this.cursor({});return new eE(function(n,r){e.onerror=function(t){var e=lE(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.os=function(t,e){var n=[];return new eE(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new iE(i),s=e(i.primaryKey,i.value,o);if(s instanceof eE){var a=s.catch(function(t){return o.done(),eE.reject(t)});n.push(a)}o.xn?r():null===o.ns?i.continue():i.continue(o.ns)}else r()}}).next(function(){return eE.Mn(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.us?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function uE(t){return new eE(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=lE(t.target.error);n(e)}})}var cE=!1;function lE(t){var e=rE.Qn(Object(up.p)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new jy("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return cE||(cE=!0,setTimeout(function(){throw r},0)),r}}return t}var hE=function(){function t(t,e,n,r,i){this._s=t,this.fs=e,this.ds=n,this.op=r,this.ws=i,this.Es=new tE,this.then=this.Es.promise.then.bind(this.Es.promise),this.Es.promise.catch(function(t){})}return t.Ts=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.Is=setTimeout(function(){return e.As()},t)},t.prototype.Rs=function(){return this.As()},t.prototype.cancel=function(t){null!==this.Is&&(this.clearTimeout(),this.Es.reject(new jy(xy.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.As=function(){var t=this;this._s.Ps(function(){return null!==t.Is?(t.clearTimeout(),t.op().then(function(e){return t.Es.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.Is&&(this.ws(this),clearTimeout(this.Is),this.Is=null)},t}();function fE(t,e){if(vy("AsyncQueue",e+": "+t),sE(t))return new jy(xy.UNAVAILABLE,e+": "+t);throw t}var dE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",pE=function(){function t(){this.ys=[]}return t.prototype.gs=function(t){this.ys.push(t)},t.prototype.Vs=function(){this.ys.forEach(function(t){return t()})},t}();function gE(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=mE(e)),e=vE(t.get(n),e);return mE(e)}function vE(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function mE(t){return t+"\x01\x01"}function yE(t){var e=t.length;if(_y(e>=2),2===e)return _y("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),qy.ct();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&by(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:by()}o=s+2}return new qy(r)}var bE=function(t,e){this.seconds=t,this.nanoseconds=e},_E=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};_E.store="owner",_E.key="owner";var wE=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};wE.store="mutationQueues",wE.keyPath="userId";var EE=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};EE.store="mutations",EE.keyPath="batchId",EE.userMutationsIndex="userMutationsIndex",EE.userMutationsKeyPath=["userId","batchId"];var OE=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,gE(e)]},t.key=function(t,e,n){return[t,gE(e),n]},t}();OE.store="documentMutations",OE.PLACEHOLDER=new OE;var SE=function(t,e){this.path=t,this.readTime=e},CE=function(t,e){this.path=t,this.version=e},TE=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};TE.store="remoteDocuments",TE.readTimeIndex="readTimeIndex",TE.readTimeIndexPath="readTime",TE.collectionReadTimeIndex="collectionReadTimeIndex",TE.collectionReadTimeIndexPath=["parentPath","readTime"];var IE=function(t){this.byteSize=t};IE.store="remoteDocumentGlobal",IE.key="remoteDocumentGlobalKey";var xE=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};xE.store="targets",xE.keyPath="targetId",xE.queryTargetsIndexName="queryTargetsIndex",xE.queryTargetsKeyPath=["canonicalId","targetId"];var jE=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};jE.store="targetDocuments",jE.keyPath=["targetId","path"],jE.documentTargetsIndex="documentTargetsIndex",jE.documentTargetsKeyPath=["path","targetId"];var kE=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};kE.key="targetGlobalKey",kE.store="targetGlobal";var AE=function(t,e){this.collectionId=t,this.parent=e};AE.store="collectionParents",AE.keyPath=["collectionId","parent"];var NE=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};NE.store="clientMetadata",NE.keyPath="clientId";var PE=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};PE.store="bundles",PE.keyPath="bundleId";var RE=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};RE.store="namedQueries",RE.keyPath="name";var DE=Object(ly.g)(Object(ly.g)(Object(ly.g)(Object(ly.g)([wE.store,EE.store,OE.store,TE.store,xE.store,_E.store,kE.store,jE.store],[NE.store]),[IE.store]),[AE.store]),[PE.store,RE.store]),ME=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ps=e,r.bs=n,r}return Object(ly.c)(e,t),e}(pE);function LE(t,e){var n=wy(t);return rE.zn(n.ps,e)}var VE=function(){function t(t,e,n,r){this.batchId=t,this.vs=e,this.baseMutations=n,this.mutations=r}return t.prototype.Ss=function(t,e,n){for(var r=n.Ds,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=j_(o,e,r[i]))}return e},t.prototype.Cs=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(t)&&(e=k_(s,e,this.vs));for(var i=0,o=this.mutations;i<o.length;i++){var s;(s=o[i]).key.isEqual(t)&&(e=k_(s,e,this.vs))}return e},t.prototype.xs=function(t){var e=this,n=t;return this.mutations.forEach(function(r){var i=e.Cs(r.key,t.get(r.key));i&&(n=n.zt(r.key,i))}),n},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},sw())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Cy(this.mutations,t.mutations,function(t,e){return N_(t,e)})&&Cy(this.baseMutations,t.baseMutations,function(t,e){return N_(t,e)})},t}(),FE=function(){function t(t,e,n,r){this.batch=t,this.Ns=e,this.Ds=n,this.$s=r}return t.from=function(e,n,r){_y(e.mutations.length===r.length);for(var i=iw(),o=e.mutations,s=0;s<o.length;s++)i=i.zt(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),UE=function(t){this.Fs=t};function qE(t,e){if(e.document)return Lw(t.Fs,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=zy.Et(e.noDocument.path),r=GE(e.noDocument.readTime);return new Ob(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=zy.Et(e.unknownDocument.path);return r=GE(e.unknownDocument.version),new Sb(i,r)}return by()}function HE(t,e,n){var r=BE(n),i=e.key.path.X().it();if(e instanceof Eb){var o=function(t,e){return{name:kw(t,e.key),fields:e.bt().mapValue.fields,updateTime:Sw(t,e.version.j())}}(t.Fs,e),s=e.hasCommittedMutations;return new TE(null,null,o,s,r,i)}if(e instanceof Ob){var a=e.key.path.it(),u=WE(e.version);return s=e.hasCommittedMutations,new TE(null,new SE(a,u),null,s,r,i)}if(e instanceof Sb){var c=e.key.path.it(),l=WE(e.version);return new TE(new CE(c,l),null,null,!0,r,i)}return by()}function BE(t){var e=t.j();return[e.seconds,e.nanoseconds]}function zE(t){var e=new Vy(t[0],t[1]);return Fy.K(e)}function WE(t){var e=t.j();return new bE(e.seconds,e.nanoseconds)}function GE(t){var e=new Vy(t.seconds,t.nanoseconds);return Fy.K(e)}function KE(t,e){for(var n=(e.baseMutations||[]).map(function(e){return Fw(t.Fs,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return Fw(t.Fs,e)}),o=Vy.fromMillis(e.localWriteTimeMs);return new VE(e.batchId,o,n,i)}function QE(t){var e,n,r=GE(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?GE(t.lastLimboFreeSnapshotVersion):Fy.min();return void 0!==t.query.documents?(_y(1===(n=t.query).documents.length),e=t_(Kb(Pw(n.documents[0])))):e=function(t){return t_(Hw(t))}(t.query),new u_(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Iy.fromBase64String(t.resumeToken))}function $E(t,e){var n,r=WE(e.Ot),i=WE(e.lastLimboFreeSnapshotVersion);n=jb(e.target)?Uw(t.Fs,e.target):qw(t.Fs,e.target);var o=e.resumeToken.toBase64();return new xE(e.targetId,Ib(e.target),r,o,e.sequenceNumber,i,n)}function YE(t){var e=Hw({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?e_(e,e.limit,"L"):e}var XE=function(){function t(){}return t.prototype.Os=function(t,e){return JE(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:GE(e.createTime),version:e.version};var e})},t.prototype.ks=function(t,e){return JE(t).put({bundleId:(n=e).id,createTime:WE(Iw(n.createTime)),version:n.version});var n},t.prototype.Ms=function(t,e){return ZE(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:YE(e.bundledQuery),readTime:GE(e.readTime)};var e})},t.prototype.Ls=function(t,e){return ZE(t).put(function(t){return{name:t.name,readTime:WE(Iw(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function JE(t){return LE(t,PE.store)}function ZE(t){return LE(t,RE.store)}var tO=function(){function t(){this.Bs=new eO}return t.prototype.qs=function(t,e){return this.Bs.add(e),eE.resolve()},t.prototype.Us=function(t,e){return eE.resolve(this.Bs.getEntries(e))},t}(),eO=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.tt(),n=t.X(),r=this.index[e]||new Y_(qy.H),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.tt(),n=t.X(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Y_(qy.H)).it()},t}(),nO=function(){function t(){this.Qs=new eO}return t.prototype.qs=function(t,e){var n=this;if(!this.Qs.has(e)){var r=e.tt(),i=e.X();t.gs(function(){n.Qs.add(e)});var o={collectionId:r,parent:gE(i)};return rO(t).put(o)}return eE.resolve()},t.prototype.Us=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Ty(e),""],!1,!0);return rO(t).rs(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(yE(o.parent))}return n})},t}();function rO(t){return LE(t,AE.store)}var iO={Ks:!1,Ws:0,js:0,Gs:0},oO=function(){function t(t,e,n){this.zs=t,this.Hs=e,this.Js=n}return t.Ys=function(e){return new t(e,t.Xs,t.Zs)},t}();function sO(t){return Object(ly.b)(this,void 0,void 0,function(){return Object(ly.d)(this,function(e){if(t.code!==xy.FAILED_PRECONDITION||t.message!==dE)throw t;return gy("LocalStore","Unexpectedly lost primary lease"),[2]})})}oO.Xs=10,oO.Zs=1e3,oO.ti=new oO(41943040,oO.Xs,oO.Zs),oO.ei=new oO(-1,0,0);var aO=function(){function t(t,e){this.ni=t,this.si=e,this.ii={}}return t.prototype.get=function(t){var e=this.ni(t),n=this.ii[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.si(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.ni(t),r=this.ii[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.si(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.ii[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.ni(t),n=this.ii[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.si(n[r][0],t))return 1===n.length?delete this.ii[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Gy(this.ii,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.et=function(){return Ky(this.ii)},t}(),uO=function(){function t(){this.ri=new aO(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.oi=!1}return t.prototype.ci=function(t){var e=this.ri.get(t);return e?e.readTime:Fy.min()},t.prototype.ai=function(t,e){this.ui(),this.ri.set(t.key,{hi:t,readTime:e})},t.prototype.li=function(t,e){void 0===e&&(e=null),this.ui(),this.ri.set(t,{hi:null,readTime:e})},t.prototype._i=function(t,e){this.ui();var n=this.ri.get(e);return void 0!==n?eE.resolve(n.hi):this.fi(t,e)},t.prototype.getEntries=function(t,e){return this.di(t,e)},t.prototype.apply=function(t){return this.ui(),this.oi=!0,this.wi(t)},t.prototype.ui=function(){},t}();function cO(t,e,n){var r=t.store(EE.store),i=t.store(OE.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.hs({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){_y(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=OE.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return eE.Mn(o).next(function(){return c})}function lO(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw by();e=t.noDocument}return JSON.stringify(e).length}var hO=function(){function t(t,e,n,r){this.userId=t,this.Qt=e,this.Ei=n,this.Ti=r,this.Ii={}}return t.mi=function(e,n,r,i){return _y(""!==e.uid),new t(e.m()?e.uid:"",n,r,i)},t.prototype.Ai=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return dO(t).hs({index:EE.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.Ri=function(t,e,n,r){var i=this,o=pO(t),s=dO(t);return s.add({}).next(function(a){_y("number"==typeof a);for(var u=new VE(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return Vw(t.Fs,e)}),i=n.mutations.map(function(e){return Vw(t.Fs,e)});return new EE(e,n.batchId,n.vs.toMillis(),r,i)}(i.Qt,i.userId,u),l=[],h=new Y_(function(t,e){return Sy(t.rt(),e.rt())}),f=0,d=r;f<d.length;f++){var p=d[f],g=OE.key(i.userId,p.key.path,a);h=h.add(p.key.path.X()),l.push(s.put(c)),l.push(o.put(g,OE.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ei.qs(t,e))}),t.gs(function(){i.Ii[a]=u.keys()}),eE.Mn(l).next(function(){return u})})},t.prototype.Pi=function(t,e){var n=this;return dO(t).get(e).next(function(t){return t?(_y(t.userId===n.userId),KE(n.Qt,t)):null})},t.prototype.yi=function(t,e){var n=this;return this.Ii[e]?eE.resolve(this.Ii[e]):this.Pi(t,e).next(function(t){if(t){var r=t.keys();return n.Ii[e]=r,r}return null})},t.prototype.gi=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return dO(t).hs({index:EE.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(_y(e.batchId>=r),o=KE(n.Qt,e)),i.done()}).next(function(){return o})},t.prototype.Vi=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return dO(t).hs({index:EE.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.pi=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return dO(t).rs(EE.userMutationsIndex,n).next(function(t){return t.map(function(t){return KE(e.Qt,t)})})},t.prototype.bi=function(t,e){var n=this,r=OE.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return pO(t).hs({range:i},function(r,i,s){var a=r[0],u=r[2],c=yE(r[1]);if(a===n.userId&&e.path.isEqual(c))return dO(t).get(u).next(function(t){if(!t)throw by();_y(t.userId===n.userId),o.push(KE(n.Qt,t))});s.done()}).next(function(){return o})},t.prototype.vi=function(t,e){var n=this,r=new Y_(Sy),i=[];return e.forEach(function(e){var o=OE.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=pO(t).hs({range:s},function(t,i,o){var s=t[0],a=t[2],u=yE(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),eE.Mn(i).next(function(){return n.Si(t,r)})},t.prototype.Di=function(t,e){var n=this,r=e.path,i=r.length+1,o=OE.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Y_(Sy);return pO(t).hs({range:s},function(t,e,o){var s=t[0],u=t[2],c=yE(t[1]);s===n.userId&&r.nt(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Si(t,a)})},t.prototype.Si=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(dO(t).get(e).next(function(t){if(null===t)throw by();_y(t.userId===n.userId),r.push(KE(n.Qt,t))}))}),eE.Mn(i).next(function(){return r})},t.prototype.Ci=function(t,e){var n=this;return cO(t.ps,this.userId,e).next(function(r){return t.gs(function(){n.xi(e.batchId)}),eE.forEach(r,function(e){return n.Ti.Ni(t,e)})})},t.prototype.xi=function(t){delete this.Ii[t]},t.prototype.$i=function(t){var e=this;return this.Ai(t).next(function(n){if(!n)return eE.resolve();var r=IDBKeyRange.lowerBound(OE.prefixForUser(e.userId)),i=[];return pO(t).hs({range:r},function(t,n,r){if(t[0]===e.userId){var o=yE(t[1]);i.push(o)}else r.done()}).next(function(){_y(0===i.length)})})},t.prototype.Fi=function(t,e){return fO(t,this.userId,e)},t.prototype.Oi=function(t){var e=this;return gO(t).get(this.userId).next(function(t){return t||new wE(e.userId,-1,"")})},t}();function fO(t,e,n){var r=OE.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return pO(t).hs({range:o,us:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function dO(t){return LE(t,EE.store)}function pO(t){return LE(t,OE.store)}function gO(t){return LE(t,wE.store)}var vO=function(){function t(t){this.ki=t}return t.prototype.next=function(){return this.ki+=2,this.ki},t.Mi=function(){return new t(0)},t.Li=function(){return new t(-1)},t}(),mO=function(){function t(t,e){this.Ti=t,this.Qt=e}return t.prototype.Bi=function(t){var e=this;return this.qi(t).next(function(n){var r=new vO(n.highestTargetId);return n.highestTargetId=r.next(),e.Ui(t,n).next(function(){return n.highestTargetId})})},t.prototype.Qi=function(t){return this.qi(t).next(function(t){return Fy.K(new Vy(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.Ki=function(t){return this.qi(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.Wi=function(t,e,n){var r=this;return this.qi(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.j()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ui(t,i)})},t.prototype.ji=function(t,e){var n=this;return this.Gi(t,e).next(function(){return n.qi(t).next(function(r){return r.targetCount+=1,n.zi(e,r),n.Ui(t,r)})})},t.prototype.Hi=function(t,e){return this.Gi(t,e)},t.prototype.Ji=function(t,e){var n=this;return this.Yi(t,e.targetId).next(function(){return yO(t).delete(e.targetId)}).next(function(){return n.qi(t)}).next(function(e){return _y(e.targetCount>0),e.targetCount-=1,n.Ui(t,e)})},t.prototype.Xi=function(t,e,n){var r=this,i=0,o=[];return yO(t).hs(function(s,a){var u=QE(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.Ji(t,u)))}).next(function(){return eE.Mn(o)}).next(function(){return i})},t.prototype.In=function(t,e){return yO(t).hs(function(t,n){var r=QE(n);e(r)})},t.prototype.qi=function(t){return bO(t).get(kE.key).next(function(t){return _y(null!==t),t})},t.prototype.Ui=function(t,e){return bO(t).put(kE.key,e)},t.prototype.Gi=function(t,e){return yO(t).put($E(this.Qt,e))},t.prototype.zi=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.Zi=function(t){return this.qi(t).next(function(t){return t.targetCount})},t.prototype.tr=function(t,e){var n=Ib(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return yO(t).hs({range:r,index:xE.queryTargetsIndexName},function(t,n,r){var o=QE(n);xb(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.er=function(t,e,n){var r=this,i=[],o=_O(t);return e.forEach(function(e){var s=gE(e.path);i.push(o.put(new jE(n,s))),i.push(r.Ti.nr(t,n,e))}),eE.Mn(i)},t.prototype.sr=function(t,e,n){var r=this,i=_O(t);return eE.forEach(e,function(e){var o=gE(e.path);return eE.Mn([i.delete([n,o]),r.Ti.ir(t,n,e)])})},t.prototype.Yi=function(t,e){var n=_O(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.rr=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=_O(t),i=sw();return r.hs({range:n,us:!0},function(t,e,n){var r=yE(t[1]),o=new zy(r);i=i.add(o)}).next(function(){return i})},t.prototype.Fi=function(t,e){var n=gE(e.path),r=IDBKeyRange.bound([n],[Ty(n)],!1,!0),i=0;return _O(t).hs({index:jE.documentTargetsIndex,us:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.Sn=function(t,e){return yO(t).get(e).next(function(t){return t?QE(t):null})},t}();function yO(t){return LE(t,xE.store)}function bO(t){return LE(t,kE.store)}function _O(t){return LE(t,jE.store)}function wO(t,e){var n=t[1],r=e[1],i=Sy(t[0],e[0]);return 0===i?Sy(n,r):i}var EO=function(){function t(t){this.cr=t,this.buffer=new Y_(wO),this.ar=0}return t.prototype.ur=function(){return++this.ar},t.prototype.hr=function(t){var e=[t,this.ur()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();wO(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),OO=function(){function t(t,e){this.lr=t,this._s=e,this._r=!1,this.dr=null}return t.prototype.start=function(t){-1!==this.lr.params.zs&&this.wr(t)},t.prototype.stop=function(){this.dr&&(this.dr.cancel(),this.dr=null)},Object.defineProperty(t.prototype,"Er",{get:function(){return null!==this.dr},enumerable:!1,configurable:!0}),t.prototype.wr=function(t){var e=this,n=this._r?3e5:6e4;gy("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.dr=this._s.Tr("lru_garbage_collection",n,function(){return Object(ly.b)(e,void 0,void 0,function(){var e;return Object(ly.d)(this,function(n){switch(n.label){case 0:this.dr=null,this._r=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.Ir(this.lr)];case 2:return n.sent(),[3,7];case 3:return sE(e=n.sent())?(gy("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,sO(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.wr(t)];case 8:return n.sent(),[2]}})})})},t}(),SO=function(){function t(t,e){this.mr=t,this.params=e}return t.prototype.Ar=function(t,e){return this.mr.Rr(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.Pr=function(t,e){var n=this;if(0===e)return eE.resolve(Ly.q);var r=new EO(e);return this.mr.In(t,function(t){return r.hr(t.sequenceNumber)}).next(function(){return n.mr.yr(t,function(t){return r.hr(t)})}).next(function(){return r.maxValue})},t.prototype.Xi=function(t,e,n){return this.mr.Xi(t,e,n)},t.prototype.gr=function(t,e){return this.mr.gr(t,e)},t.prototype.Vr=function(t,e){var n=this;return-1===this.params.zs?(gy("LruGarbageCollector","Garbage collection skipped; disabled"),eE.resolve(iO)):this.pr(t).next(function(r){return r<n.params.zs?(gy("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.zs),iO):n.br(t,e)})},t.prototype.pr=function(t){return this.mr.pr(t)},t.prototype.br=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.Ar(t,this.params.Hs).next(function(e){return e>c.params.Js?(gy("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.Js+" from "+e),r=c.params.Js):r=e,o=Date.now(),c.Pr(t,r)}).next(function(r){return n=r,s=Date.now(),c.Xi(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.gr(t,n)}).next(function(t){return u=Date.now(),py()<=ap.a.DEBUG&&gy("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),eE.resolve({Ks:!0,Ws:r,js:i,Gs:t})})},t}(),CO=function(){function t(t,e){this.db=t,this.lr=function(t,e){return new SO(t,e)}(this,e)}return t.prototype.Rr=function(t){var e=this.vr(t);return this.db.Sr().Zi(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.vr=function(t){var e=0;return this.yr(t,function(t){e++}).next(function(){return e})},t.prototype.In=function(t,e){return this.db.Sr().In(t,e)},t.prototype.yr=function(t,e){return this.Dr(t,function(t,n){return e(n)})},t.prototype.nr=function(t,e,n){return TO(t,n)},t.prototype.ir=function(t,e,n){return TO(t,n)},t.prototype.Xi=function(t,e,n){return this.db.Sr().Xi(t,e,n)},t.prototype.Ni=function(t,e){return TO(t,e)},t.prototype.Cr=function(t,e){return function(t,e){var n=!1;return gO(t).ls(function(r){return fO(t,r,e).next(function(t){return t&&(n=!0),eE.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.gr=function(t,e){var n=this,r=this.db.$r().Nr(),i=[],o=0;return this.Dr(t,function(s,a){if(a<=e){var u=n.Cr(t,s).next(function(e){if(!e)return o++,r._i(t,s).next(function(){return r.li(s),_O(t).delete([0,gE(s.path)])})});i.push(u)}}).next(function(){return eE.Mn(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.kt(t.bs);return this.db.Sr().Hi(t,n)},t.prototype.Fr=function(t,e){return TO(t,e)},t.prototype.Dr=function(t,e){var n,r=_O(t),i=Ly.q;return r.hs({index:jE.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==Ly.q&&e(new zy(yE(n)),i),i=s,n=o):i=Ly.q}).next(function(){i!==Ly.q&&e(new zy(yE(n)),i)})},t.prototype.pr=function(t){return this.db.$r().Or(t)},t}();function TO(t,e){return _O(t).put(function(t,e){return new jE(0,gE(t.path),e)}(e,t.bs))}var IO=function(){function t(t,e){this.Qt=t,this.Ei=e}return t.prototype.ai=function(t,e,n){return kO(t).put(AO(e),n)},t.prototype.li=function(t,e){var n=kO(t),r=AO(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.kr(t,r)})},t.prototype._i=function(t,e){var n=this;return kO(t).get(AO(e)).next(function(t){return n.Mr(t)})},t.prototype.Lr=function(t,e){var n=this;return kO(t).get(AO(e)).next(function(t){var e=n.Mr(t);return e?{hi:e,size:lO(t)}:null})},t.prototype.getEntries=function(t,e){var n=this,r=tw();return this.Br(t,e,function(t,e){var i=n.Mr(e);r=r.zt(t,i)}).next(function(){return r})},t.prototype.qr=function(t,e){var n=this,r=tw(),i=new K_(zy.H);return this.Br(t,e,function(t,e){var o=n.Mr(e);o?(r=r.zt(t,o),i=i.zt(t,lO(e))):(r=r.zt(t,null),i=i.zt(t,0))}).next(function(){return{Ur:r,Qr:i}})},t.prototype.Br=function(t,e,n){if(e.et())return eE.resolve();var r=IDBKeyRange.bound(e.first().path.it(),e.last().path.it()),i=e.te(),o=i.oe();return kO(t).hs({range:r},function(t,e,r){for(var s=zy.Et(t);o&&zy.H(o,s)<0;)n(o,null),o=i.oe();o&&o.isEqual(s)&&(n(o,e),o=i.ce()?i.oe():null),o?r.ss(o.path.it()):r.done()}).next(function(){for(;o;)n(o,null),o=i.ce()?i.oe():null})},t.prototype.Kr=function(t,e,n){var r=this,i=nw(),o=e.path.length+1,s={};if(n.isEqual(Fy.min())){var a=e.path.it();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.it(),c=BE(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=TE.collectionReadTimeIndex}return kO(t).hs(s,function(t,n,s){if(t.length===o){var a=qE(r.Qt,n);e.path.nt(a.key.path)?a instanceof Eb&&o_(e,a)&&(i=i.zt(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.Nr=function(t){return new xO(this,!!t&&t.Wr)},t.prototype.Or=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return jO(t).get(IE.key).next(function(t){return _y(!!t),t})},t.prototype.kr=function(t,e){return jO(t).put(IE.key,e)},t.prototype.Mr=function(t){if(t){var e=qE(this.Qt,t);return e instanceof Ob&&e.version.isEqual(Fy.min())?null:e}return null},t}(),xO=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jr=e,r.Wr=n,r.Gr=new aO(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(ly.c)(e,t),e.prototype.wi=function(t){var e=this,n=[],r=0,i=new Y_(function(t,e){return Sy(t.rt(),e.rt())});return this.ri.forEach(function(o,s){var a=e.Gr.get(o);if(s.hi){var u=HE(e.jr.Qt,s.hi,e.ci(o));i=i.add(o.path.X());var c=lO(u);r+=c-a,n.push(e.jr.ai(t,o,u))}else if(r-=a,e.Wr){var l=HE(e.jr.Qt,new Ob(o,Fy.min()),e.ci(o));n.push(e.jr.ai(t,o,l))}else n.push(e.jr.li(t,o))}),i.forEach(function(r){n.push(e.jr.Ei.qs(t,r))}),n.push(this.jr.updateMetadata(t,r)),eE.Mn(n)},e.prototype.fi=function(t,e){var n=this;return this.jr.Lr(t,e).next(function(t){return null===t?(n.Gr.set(e,0),null):(n.Gr.set(e,t.size),t.hi)})},e.prototype.di=function(t,e){var n=this;return this.jr.qr(t,e).next(function(t){var e=t.Ur;return t.Qr.forEach(function(t,e){n.Gr.set(t,e)}),e})},e}(uO);function jO(t){return LE(t,IE.store)}function kO(t){return LE(t,TE.store)}function AO(t){return t.path.it()}var NO=function(){function t(t){this.Qt=t}return t.prototype.Jn=function(t,e,n,r){var i=this;_y(n<r&&n>=0&&r<=11);var o=new nE("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(_E.store)}(t),function(t){t.createObjectStore(wE.store,{keyPath:wE.keyPath}),t.createObjectStore(EE.store,{keyPath:EE.keyPath,autoIncrement:!0}).createIndex(EE.userMutationsIndex,EE.userMutationsKeyPath,{unique:!0}),t.createObjectStore(OE.store)}(t),PO(t),function(t){t.createObjectStore(TE.store)}(t));var s=eE.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(jE.store),t.deleteObjectStore(xE.store),t.deleteObjectStore(kE.store)}(t),PO(t)),s=s.next(function(){return function(t){var e=t.store(kE.store),n=new kE(0,0,Fy.min().j(),0);return e.put(kE.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(EE.store).rs().next(function(n){t.deleteObjectStore(EE.store),t.createObjectStore(EE.store,{keyPath:EE.keyPath,autoIncrement:!0}).createIndex(EE.userMutationsIndex,EE.userMutationsKeyPath,{unique:!0});var r=e.store(EE.store),i=n.map(function(t){return r.put(t)});return eE.Mn(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(NE.store,{keyPath:NE.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.zr(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(IE.store)}(t),i.Hr(o)})),n<7&&r>=7&&(s=s.next(function(){return i.Jr(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Yr(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(TE.store);e.createIndex(TE.readTimeIndex,TE.readTimeIndexPath,{unique:!1}),e.createIndex(TE.collectionReadTimeIndex,TE.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.Xr(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(PE.store,{keyPath:PE.keyPath})}(t),function(t){t.createObjectStore(RE.store,{keyPath:RE.keyPath})}(t)})),s},t.prototype.Hr=function(t){var e=0;return t.store(TE.store).hs(function(t,n){e+=lO(n)}).next(function(){var n=new IE(e);return t.store(IE.store).put(IE.key,n)})},t.prototype.zr=function(t){var e=this,n=t.store(wE.store),r=t.store(EE.store);return n.rs().next(function(n){return eE.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.rs(EE.userMutationsIndex,i).next(function(r){return eE.forEach(r,function(r){_y(r.userId===n.userId);var i=KE(e.Qt,r);return cO(t,n.userId,i).next(function(){})})})})})},t.prototype.Jr=function(t){var e=t.store(jE.store),n=t.store(TE.store);return t.store(kE.store).get(kE.key).next(function(t){var r=[];return n.hs(function(n,i){var o=new qy(n),s=function(t){return[0,gE(t)]}(o);r.push(e.get(s).next(function(n){return n?eE.resolve():function(n){return e.put(new jE(0,gE(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return eE.Mn(r)})})},t.prototype.Yr=function(t,e){t.createObjectStore(AE.store,{keyPath:AE.keyPath});var n=e.store(AE.store),r=new eO,i=function(t){if(r.add(t)){var e=t.tt(),i=t.X();return n.put({collectionId:e,parent:gE(i)})}};return e.store(TE.store).hs({us:!0},function(t,e){var n=new qy(t);return i(n.X())}).next(function(){return e.store(OE.store).hs({us:!0},function(t,e){var n=yE(t[1]);return i(n.X())})})},t.prototype.Xr=function(t){var e=this,n=t.store(xE.store);return n.hs(function(t,r){var i=QE(r),o=$E(e.Qt,i);return n.put(o)})},t}();function PO(t){t.createObjectStore(jE.store,{keyPath:jE.keyPath}).createIndex(jE.documentTargetsIndex,jE.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(xE.store,{keyPath:xE.keyPath}).createIndex(xE.queryTargetsIndexName,xE.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(kE.store)}var RO="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",DO=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Zr=o,this.window=s,this.document=a,this.eo=c,this.no=l,this.so=null,this.io=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ro=null,this.inForeground=!1,this.oo=null,this.co=null,this.ao=Number.NEGATIVE_INFINITY,this.uo=function(t){return Promise.resolve()},!t.Kn())throw new jy(xy.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Ti=new CO(this,i),this.ho=n+"main",this.Qt=new UE(u),this.lo=new rE(this.ho,11,new NO(this.Qt)),this._o=new mO(this.Ti,this.Qt),this.Ei=new nO,this.fo=function(t,e){return new IO(t,e)}(this.Qt,this.Ei),this.wo=new XE,this.window&&this.window.localStorage?this.Eo=this.window.localStorage:(this.Eo=null,!1===l&&vy("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.To().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new jy(xy.FAILED_PRECONDITION,RO);return t.Io(),t.mo(),t.Ao(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t._o.Ki(e)})}).then(function(e){t.so=new Ly(e,t.eo)}).then(function(){t.io=!0}).catch(function(e){return t.lo&&t.lo.close(),Promise.reject(e)})},t.prototype.Ro=function(t){var e=this;return this.uo=function(n){return Object(ly.b)(e,void 0,void 0,function(){return Object(ly.d)(this,function(e){return this.Er?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.Po=function(t){var e=this;this.lo.Xn(function(n){return Object(ly.b)(e,void 0,void 0,function(){return Object(ly.d)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.yo=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Zr.Ps(function(){return Object(ly.b)(e,void 0,void 0,function(){return Object(ly.d)(this,function(t){switch(t.label){case 0:return this.Er?[4,this.To()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.To=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return LO(e).put(new NE(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Vo(e).next(function(e){e||(t.isPrimary=!1,t.Zr.po(function(){return t.uo(!1)}))})}).next(function(){return t.bo(e)}).next(function(n){return t.isPrimary&&!n?t.vo(e).next(function(){return!1}):!!n&&t.So(e).next(function(){return!0})})}).catch(function(e){if(sE(e))return gy("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return gy("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Zr.po(function(){return t.uo(e)}),t.isPrimary=e})},t.prototype.Vo=function(t){var e=this;return MO(t).get(_E.key).next(function(t){return eE.resolve(e.Do(t))})},t.prototype.Co=function(t){return LO(t).delete(this.clientId)},t.prototype.xo=function(){return Object(ly.b)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(ly.d)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.No(this.ao,18e5)?[3,2]:(this.ao=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=LE(t,NE.store);return e.rs().next(function(t){var n=r.$o(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return eE.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Eo)for(e=0,n=t;e<n.length;e++)this.Eo.removeItem(this.Fo(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.Ao=function(){var t=this;this.co=this.Zr.Tr("client_metadata_refresh",4e3,function(){return t.To().then(function(){return t.xo()}).then(function(){return t.Ao()})})},t.prototype.Do=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.bo=function(t){var e=this;return this.no?eE.resolve(!0):MO(t).get(_E.key).next(function(n){if(null!==n&&e.No(n.leaseTimestampMs,5e3)&&!e.Oo(n.ownerId)){if(e.Do(n)&&e.networkEnabled)return!0;if(!e.Do(n)){if(!n.allowTabSynchronization)throw new jy(xy.FAILED_PRECONDITION,RO);return!1}}return!(!e.networkEnabled||!e.inForeground)||LO(t).rs().next(function(t){return void 0===e.$o(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&gy("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.ko=function(){return Object(ly.b)(this,void 0,void 0,function(){var t=this;return Object(ly.d)(this,function(e){switch(e.label){case 0:return this.io=!1,this.Mo(),this.co&&(this.co.cancel(),this.co=null),this.Lo(),this.Bo(),[4,this.lo.runTransaction("shutdown","readwrite",[_E.store,NE.store],function(e){var n=new ME(e,Ly.q);return t.vo(n).next(function(){return t.Co(n)})})];case 1:return e.sent(),this.lo.close(),this.qo(),[2]}})})},t.prototype.$o=function(t,e){var n=this;return t.filter(function(t){return n.No(t.updateTimeMs,e)&&!n.Oo(t.clientId)})},t.prototype.Uo=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return LO(e).rs().next(function(e){return t.$o(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),t.prototype.Qo=function(t){return hO.mi(t,this.Qt,this.Ei,this.Ti)},t.prototype.Sr=function(){return this._o},t.prototype.$r=function(){return this.fo},t.prototype.Ko=function(){return this.Ei},t.prototype.Wo=function(){return this.wo},t.prototype.runTransaction=function(t,e,n){var r,i=this;return gy("IndexedDbPersistence","Starting transaction:",t),this.lo.runTransaction(t,"readonly"===e?"readonly":"readwrite",DE,function(o){return r=new ME(o,i.so?i.so.next():Ly.q),"readwrite-primary"===e?i.Vo(r).next(function(t){return!!t||i.bo(r)}).next(function(e){if(!e)throw vy("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Zr.po(function(){return i.uo(!1)}),new jy(xy.FAILED_PRECONDITION,dE);return n(r)}).next(function(t){return i.So(r).next(function(){return t})}):i.jo(r).next(function(){return n(r)})}).then(function(t){return r.Vs(),t})},t.prototype.jo=function(t){var e=this;return MO(t).get(_E.key).next(function(t){if(null!==t&&e.No(t.leaseTimestampMs,5e3)&&!e.Oo(t.ownerId)&&!e.Do(t)&&!(e.no||e.allowTabSynchronization&&t.allowTabSynchronization))throw new jy(xy.FAILED_PRECONDITION,RO)})},t.prototype.So=function(t){var e=new _E(this.clientId,this.allowTabSynchronization,Date.now());return MO(t).put(_E.key,e)},t.Kn=function(){return rE.Kn()},t.prototype.vo=function(t){var e=this,n=MO(t);return n.get(_E.key).next(function(t){return e.Do(t)?(gy("IndexedDbPersistence","Releasing primary lease."),n.delete(_E.key)):eE.resolve()})},t.prototype.No=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(vy("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Io=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.oo=function(){t.Zr.Ps(function(){return t.inForeground="visible"===t.document.visibilityState,t.To()})},this.document.addEventListener("visibilitychange",this.oo),this.inForeground="visible"===this.document.visibilityState)},t.prototype.Lo=function(){this.oo&&(this.document.removeEventListener("visibilitychange",this.oo),this.oo=null)},t.prototype.mo=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ro=function(){e.Mo(),e.Zr.Ps(function(){return e.ko()})},this.window.addEventListener("unload",this.ro))},t.prototype.Bo=function(){this.ro&&(this.window.removeEventListener("unload",this.ro),this.ro=null)},t.prototype.Oo=function(t){var e;try{var n=null!==(null===(e=this.Eo)||void 0===e?void 0:e.getItem(this.Fo(t)));return gy("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return vy("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.Mo=function(){if(this.Eo)try{this.Eo.setItem(this.Fo(this.clientId),String(Date.now()))}catch(t){vy("Failed to set zombie client id.",t)}},t.prototype.qo=function(){if(this.Eo)try{this.Eo.removeItem(this.Fo(this.clientId))}catch(t){}},t.prototype.Fo=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function MO(t){return LE(t,_E.store)}function LO(t){return LE(t,NE.store)}function VO(t,e){var n=t.projectId;return t.o||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var FO=function(t,e){this.progress=t,this.Go=e},UO=function(){function t(t,e,n){this.fo=t,this.zo=e,this.Ei=n}return t.prototype.Ho=function(t,e){var n=this;return this.zo.bi(t,e).next(function(r){return n.Jo(t,e,r)})},t.prototype.Jo=function(t,e,n){return this.fo._i(t,e).next(function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].Cs(e,t);return t})},t.prototype.Yo=function(t,e,n){var r=tw();return e.forEach(function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].Cs(t,e);r=r.zt(t,e)}),r},t.prototype.Xo=function(t,e){var n=this;return this.fo.getEntries(t,e).next(function(e){return n.Zo(t,e)})},t.prototype.Zo=function(t,e){var n=this;return this.zo.vi(t,e).next(function(r){var i=n.Yo(t,e,r),o=Z_();return i.forEach(function(t,e){e||(e=new Ob(t,Fy.min())),o=o.zt(t,e)}),o})},t.prototype.Kr=function(t,e,n){return function(t){return zy.wt(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.tc(t,e.path):Jb(e)?this.ec(t,e,n):this.nc(t,e,n)},t.prototype.tc=function(t,e){return this.Ho(t,new zy(e)).next(function(t){var e=nw();return t instanceof Eb&&(e=e.zt(t.key,t)),e})},t.prototype.ec=function(t,e,n){var r=this,i=e.collectionGroup,o=nw();return this.Ei.Us(t,i).next(function(s){return eE.forEach(s,function(s){var a=function(t,e){return new Wb(e,null,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.nc(t,a,n).next(function(t){t.forEach(function(t,e){o=o.zt(t,e)})})}).next(function(){return o})})},t.prototype.nc=function(t,e,n){var r,i,o=this;return this.fo.Kr(t,e,n).next(function(n){return r=n,o.zo.Di(t,e)}).next(function(e){return o.sc(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=k_(u,r.get(c),o.vs);r=l instanceof Eb?r.zt(c,l):r.remove(c)}})}).next(function(){return r.forEach(function(t,n){o_(e,n)||(r=r.remove(t))}),r})},t.prototype.sc=function(t,e,n){for(var r=sw(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof D_&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.fo.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof Eb&&(c=c.zt(t,e))}),c})},t}(),qO=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.ic=n,this.rc=r}return t.oc=function(e,n){for(var r=sw(),i=sw(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),HO=function(){function t(){}return t.prototype.cc=function(t){this.ac=t},t.prototype.Kr=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.xt.length||1===t.xt.length&&t.xt[0].field.ut())}(e)||n.isEqual(Fy.min())?this.uc(t,e):this.ac.Xo(t,r).next(function(o){var s=i.hc(e,o);return(Qb(e)||$b(e))&&i.lc(e.limitType,s,r,n)?i.uc(t,e):(py()<=ap.a.DEBUG&&gy("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),i_(e)),i.ac.Kr(t,e,n).next(function(t){return s.forEach(function(e){t=t.zt(e.key,e)}),t}))})},t.prototype.hc=function(t,e){var n=new Y_(s_(t));return e.forEach(function(e,r){r instanceof Eb&&o_(t,r)&&(n=n.add(r))}),n},t.prototype.lc=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version._(r)>0)},t.prototype.uc=function(t,e){return py()<=ap.a.DEBUG&&gy("QueryEngine","Using full collection scan to execute query:",i_(e)),this.ac.Kr(t,e,Fy.min())},t}(),BO=function(){function t(t,e,n,r){this.persistence=t,this._c=e,this.Qt=r,this.fc=new K_(Sy),this.dc=new aO(function(t){return Ib(t)},xb),this.wc=Fy.min(),this.zo=t.Qo(n),this.Ec=t.$r(),this._o=t.Sr(),this.Tc=new UO(this.Ec,this.zo,this.persistence.Ko()),this.wo=t.Wo(),this._c.cc(this.Tc)}return t.prototype.Ir=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.Vr(n,e.fc)})},t}();function zO(t,e,n,r){return new BO(t,e,n,r)}function WO(t,e){return Object(ly.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(ly.d)(this,function(s){switch(s.label){case 0:return n=wy(t),r=n.zo,i=n.Tc,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n.zo.pi(t).next(function(s){return o=s,r=n.persistence.Qo(e),i=new UO(n.Ec,r,n.persistence.Ko()),r.pi(t)}).next(function(e){for(var n=[],r=[],s=sw(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var g=0,v=p.mutations;g<v.length;g++)s=s.add(v[g].key)}return i.Xo(t,s).next(function(t){return{Ic:t,mc:n,Ac:r}})})})];case 1:return o=s.sent(),[2,(n.zo=r,n.Tc=i,n._c.cc(n.Tc),o)]}})})}function GO(t,e){var n=wy(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.Ec.Nr({Wr:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=eE.resolve();return o.forEach(function(t){s=s.next(function(){return r._i(e,t)}).next(function(e){var o=e,s=n.$s.get(t);_y(null!==s),(!o||o.version._(s)<0)&&(o=i.Ss(t,o,n))&&r.ai(o,n.Ns)})}),s.next(function(){return t.zo.Ci(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n.zo.$i(t)}).next(function(){return n.Tc.Xo(t,r)})})}function KO(t){var e=wy(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e._o.Qi(t)})}function QO(t,e){var n=wy(t),r=e.Ot,i=n.fc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.Ec.Nr({Wr:!0});i=n.fc;var s=[];e.$e.forEach(function(e,o){var a=i.get(o);if(a){s.push(n._o.sr(t,e.Qe,o).next(function(){return n._o.er(t,e.qe,o)}));var u=e.resumeToken;if(u.l()>0){var c=a.Mt(u,r).kt(t.bs);i=i.zt(o,c),function(t,e,n){return _y(e.resumeToken.l()>0),0===t.resumeToken.l()||e.Ot.W()-t.Ot.W()>=3e8||n.qe.size+n.Ue.size+n.Qe.size>0}(a,c,e)&&s.push(n._o.Hi(t,c))}}});var a=Z_();if(e.Oe.forEach(function(r,i){e.ke.has(r)&&s.push(n.persistence.Ti.Fr(t,r))}),s.push($O(t,o,e.Oe,r,void 0).next(function(t){a=t})),!r.isEqual(Fy.min())){var u=n._o.Qi(t).next(function(e){return n._o.Wi(t,t.bs,r)});s.push(u)}return eE.Mn(s).next(function(){return o.apply(t)}).next(function(){return n.Tc.Zo(t,a)})}).then(function(t){return n.fc=i,t})}function $O(t,e,n,r,i){var o=sw();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=Z_();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s instanceof Ob&&s.version.isEqual(Fy.min())?(e.li(n,u),o=o.zt(n,s)):null==a||s.version._(a.version)>0||0===s.version._(a.version)&&a.hasPendingWrites?(e.ai(s,u),o=o.zt(n,s)):gy("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function YO(t,e){var n=wy(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n.zo.gi(t,e)})}function XO(t,e){var n=wy(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n._o.tr(t,e).next(function(i){return i?eE.resolve(r=i):n._o.Bi(t).next(function(i){return r=new u_(e,i,0,t.bs),n._o.ji(t,r).next(function(){return r})})})}).then(function(t){var r=n.fc.get(t.targetId);return(null===r||t.Ot._(r.Ot)>0)&&(n.fc=n.fc.zt(t.targetId,t),n.dc.set(e,t.targetId)),t})}function JO(t,e,n){return Object(ly.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(ly.d)(this,function(a){switch(a.label){case 0:r=wy(t),i=r.fc.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.Ti.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!sE(s=a.sent()))throw s;return gy("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.fc=r.fc.remove(e),r.dc.delete(i.target),[2]}})})}function ZO(t,e,n){var r=wy(t),i=Fy.min(),o=sw();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=wy(t),i=r.dc.get(n);return void 0!==i?eE.resolve(r.fc.get(i)):r._o.tr(e,n)}(r,t,t_(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r._o.rr(t,e.targetId).next(function(t){o=t})}).next(function(){return r._c.Kr(t,e,n?i:Fy.min(),n?o:sw())}).next(function(t){return{documents:t,Rc:o}})})}function tS(t,e){var n=wy(t),r=wy(n._o),i=n.fc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.Sn(t,e).next(function(t){return t?t.target:null})})}function eS(t){var e=wy(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=wy(t),i=Z_(),o=BE(n),s=kO(e),a=IDBKeyRange.lowerBound(o,!0);return s.hs({index:TE.readTimeIndex,range:a},function(t,e){var n=qE(r.Qt,e);i=i.zt(n.key,n),o=e.readTime}).next(function(){return{Go:i,readTime:zE(o)}})}(e.Ec,t,e.wc)}).then(function(t){var n=t.Go;return e.wc=t.readTime,n})}function nS(t){return Object(ly.b)(this,void 0,void 0,function(){var e;return Object(ly.d)(this,function(n){return[2,(e=wy(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=kO(t),n=Fy.min();return e.hs({index:TE.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=zE(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.wc=t})]})})}function rS(t,e,n,r){return Object(ly.b)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,f,d;return Object(ly.d)(this,function(p){switch(p.label){case 0:for(i=wy(t),o=sw(),s=Z_(),a=iw(),u=0,c=n;u<c.length;u++)h=e.Pc((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.zt(h,e.yc(l)),a=a.zt(h,e.gc(l.metadata.readTime));return f=i.Ec.Nr({Wr:!0}),[4,XO(i,function(t){return t_(Kb(qy.ot("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return $O(t,f,s,Fy.min(),a).next(function(e){return f.apply(t),e}).next(function(e){return i._o.Yi(t,d.targetId).next(function(){return i._o.er(t,o,d.targetId)}).next(function(){return i.Tc.Zo(t,e)})})})]}})})}function iS(t,e,n){return void 0===n&&(n=sw()),Object(ly.b)(this,void 0,void 0,function(){var r,i;return Object(ly.d)(this,function(o){switch(o.label){case 0:return[4,XO(t,t_(YE(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=wy(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=Iw(e.readTime);if(r.Ot._(o)>=0)return i.wo.Ls(t,e);var s=r.Mt(Iy.T,o);return i.fc=i.fc.zt(s.targetId,s),i._o.Hi(t,s).next(function(){return i._o.Yi(t,r.targetId)}).next(function(){return i._o.er(t,n,r.targetId)}).next(function(){return i.wo.Ls(t,e)})})]}})})}var oS=function(){function t(t){this.Qt=t,this.Vc=new Map,this.bc=new Map}return t.prototype.Os=function(t,e){return eE.resolve(this.Vc.get(e))},t.prototype.ks=function(t,e){var n;return this.Vc.set(e.id,{id:(n=e).id,version:n.version,createTime:Iw(n.createTime)}),eE.resolve()},t.prototype.Ms=function(t,e){return eE.resolve(this.bc.get(e))},t.prototype.Ls=function(t,e){return this.bc.set(e.name,function(t){return{name:t.name,query:YE(t.bundledQuery),readTime:Iw(t.readTime)}}(e)),eE.resolve()},t}(),sS=function(){function t(){this.vc=new Y_(aS.Sc),this.Dc=new Y_(aS.Cc)}return t.prototype.et=function(){return this.vc.et()},t.prototype.nr=function(t,e){var n=new aS(t,e);this.vc=this.vc.add(n),this.Dc=this.Dc.add(n)},t.prototype.xc=function(t,e){var n=this;t.forEach(function(t){return n.nr(t,e)})},t.prototype.ir=function(t,e){this.Nc(new aS(t,e))},t.prototype.$c=function(t,e){var n=this;t.forEach(function(t){return n.ir(t,e)})},t.prototype.Fc=function(t){var e=this,n=new zy(new qy([])),r=new aS(n,t),i=new aS(n,t+1),o=[];return this.Dc.me([r,i],function(t){e.Nc(t),o.push(t.key)}),o},t.prototype.Oc=function(){var t=this;this.vc.forEach(function(e){return t.Nc(e)})},t.prototype.Nc=function(t){this.vc=this.vc.delete(t),this.Dc=this.Dc.delete(t)},t.prototype.kc=function(t){var e=new zy(new qy([])),n=new aS(e,t),r=new aS(e,t+1),i=sw();return this.Dc.me([n,r],function(t){i=i.add(t.key)}),i},t.prototype.Fi=function(t){var e=new aS(t,0),n=this.vc.Re(e);return null!==n&&t.isEqual(n.key)},t}(),aS=function(){function t(t,e){this.key=t,this.Mc=e}return t.Sc=function(t,e){return zy.H(t.key,e.key)||Sy(t.Mc,e.Mc)},t.Cc=function(t,e){return Sy(t.Mc,e.Mc)||zy.H(t.key,e.key)},t}(),uS=function(){function t(t,e){this.Ei=t,this.Ti=e,this.zo=[],this.Lc=1,this.Bc=new Y_(aS.Sc)}return t.prototype.Ai=function(t){return eE.resolve(0===this.zo.length)},t.prototype.Ri=function(t,e,n,r){var i=this.Lc;this.Lc++;var o=new VE(i,e,n,r);this.zo.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.Bc=this.Bc.add(new aS(u.key,i)),this.Ei.qs(t,u.key.path.X())}return eE.resolve(o)},t.prototype.Pi=function(t,e){return eE.resolve(this.qc(e))},t.prototype.gi=function(t,e){var n=this.Uc(e+1),r=n<0?0:n;return eE.resolve(this.zo.length>r?this.zo[r]:null)},t.prototype.Vi=function(){return eE.resolve(0===this.zo.length?-1:this.Lc-1)},t.prototype.pi=function(t){return eE.resolve(this.zo.slice())},t.prototype.bi=function(t,e){var n=this,r=new aS(e,0),i=new aS(e,Number.POSITIVE_INFINITY),o=[];return this.Bc.me([r,i],function(t){var e=n.qc(t.Mc);o.push(e)}),eE.resolve(o)},t.prototype.vi=function(t,e){var n=this,r=new Y_(Sy);return e.forEach(function(t){var e=new aS(t,0),i=new aS(t,Number.POSITIVE_INFINITY);n.Bc.me([e,i],function(t){r=r.add(t.Mc)})}),eE.resolve(this.Qc(r))},t.prototype.Di=function(t,e){var n=e.path,r=n.length+1,i=n;zy.wt(i)||(i=i.child(""));var o=new aS(new zy(i),0),s=new Y_(Sy);return this.Bc.Ae(function(t){var e=t.key.path;return!!n.nt(e)&&(e.length===r&&(s=s.add(t.Mc)),!0)},o),eE.resolve(this.Qc(s))},t.prototype.Qc=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.qc(t);null!==r&&n.push(r)}),n},t.prototype.Ci=function(t,e){var n=this;_y(0===this.Kc(e.batchId,"removed")),this.zo.shift();var r=this.Bc;return eE.forEach(e.mutations,function(i){var o=new aS(i.key,e.batchId);return r=r.delete(o),n.Ti.Ni(t,i.key)}).next(function(){n.Bc=r})},t.prototype.xi=function(t){},t.prototype.Fi=function(t,e){var n=new aS(e,0),r=this.Bc.Re(n);return eE.resolve(e.isEqual(r&&r.key))},t.prototype.$i=function(t){return eE.resolve()},t.prototype.Kc=function(t,e){return this.Uc(t)},t.prototype.Uc=function(t){return 0===this.zo.length?0:t-this.zo[0].batchId},t.prototype.qc=function(t){var e=this.Uc(t);return e<0||e>=this.zo.length?null:this.zo[e]},t}(),cS=function(){function t(t,e){this.Ei=t,this.Wc=e,this.docs=new K_(zy.H),this.size=0}return t.prototype.ai=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.Wc(e);return this.docs=this.docs.zt(r,{hi:e,size:s,readTime:n}),this.size+=s-o,this.Ei.qs(t,r.path.X())},t.prototype.li=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype._i=function(t,e){var n=this.docs.get(e);return eE.resolve(n?n.hi:null)},t.prototype.getEntries=function(t,e){var n=this,r=tw();return e.forEach(function(t){var e=n.docs.get(t);r=r.zt(t,e?e.hi:null)}),eE.resolve(r)},t.prototype.Kr=function(t,e,n){for(var r=nw(),i=new zy(e.path.child("")),o=this.docs.ee(i);o.ce();){var s=o.oe(),a=s.value,u=a.hi,c=a.readTime;if(!e.path.nt(s.key.path))break;c._(n)<=0||u instanceof Eb&&o_(e,u)&&(r=r.zt(u.key,u))}return eE.resolve(r)},t.prototype.jc=function(t,e){return eE.forEach(this.docs,function(t){return e(t)})},t.prototype.Nr=function(t){return new lS(this)},t.prototype.Or=function(t){return eE.resolve(this.size)},t}(),lS=function(t){function e(e){var n=this;return(n=t.call(this)||this).jr=e,n}return Object(ly.c)(e,t),e.prototype.wi=function(t){var e=this,n=[];return this.ri.forEach(function(r,i){i&&i.hi?n.push(e.jr.ai(t,i.hi,e.ci(r))):e.jr.li(r)}),eE.Mn(n)},e.prototype.fi=function(t,e){return this.jr._i(t,e)},e.prototype.di=function(t,e){return this.jr.getEntries(t,e)},e}(uO),hS=function(){function t(t){this.persistence=t,this.Gc=new aO(function(t){return Ib(t)},xb),this.lastRemoteSnapshotVersion=Fy.min(),this.highestTargetId=0,this.zc=0,this.Hc=new sS,this.targetCount=0,this.Jc=vO.Mi()}return t.prototype.In=function(t,e){return this.Gc.forEach(function(t,n){return e(n)}),eE.resolve()},t.prototype.Qi=function(t){return eE.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Ki=function(t){return eE.resolve(this.zc)},t.prototype.Bi=function(t){return this.highestTargetId=this.Jc.next(),eE.resolve(this.highestTargetId)},t.prototype.Wi=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.zc&&(this.zc=e),eE.resolve()},t.prototype.Gi=function(t){this.Gc.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Jc=new vO(e),this.highestTargetId=e),t.sequenceNumber>this.zc&&(this.zc=t.sequenceNumber)},t.prototype.ji=function(t,e){return this.Gi(e),this.targetCount+=1,eE.resolve()},t.prototype.Hi=function(t,e){return this.Gi(e),eE.resolve()},t.prototype.Ji=function(t,e){return this.Gc.delete(e.target),this.Hc.Fc(e.targetId),this.targetCount-=1,eE.resolve()},t.prototype.Xi=function(t,e,n){var r=this,i=0,o=[];return this.Gc.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.Gc.delete(s),o.push(r.Yi(t,a.targetId)),i++)}),eE.Mn(o).next(function(){return i})},t.prototype.Zi=function(t){return eE.resolve(this.targetCount)},t.prototype.tr=function(t,e){var n=this.Gc.get(e)||null;return eE.resolve(n)},t.prototype.er=function(t,e,n){return this.Hc.xc(e,n),eE.resolve()},t.prototype.sr=function(t,e,n){this.Hc.$c(e,n);var r=this.persistence.Ti,i=[];return r&&e.forEach(function(e){i.push(r.Ni(t,e))}),eE.Mn(i)},t.prototype.Yi=function(t,e){return this.Hc.Fc(e),eE.resolve()},t.prototype.rr=function(t,e){var n=this.Hc.kc(e);return eE.resolve(n)},t.prototype.Fi=function(t,e){return eE.resolve(this.Hc.Fi(e))},t}(),fS=function(){function t(t,e){var n=this;this.Yc={},this.so=new Ly(0),this.io=!1,this.io=!0,this.Ti=t(this),this._o=new hS(this),this.Ei=new tO,this.fo=function(t,e){return new cS(t,function(t){return n.Ti.Xc(t)})}(this.Ei),this.Qt=new UE(e),this.wo=new oS(this.Qt)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.ko=function(){return this.io=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),t.prototype.Po=function(){},t.prototype.yo=function(){},t.prototype.Ko=function(){return this.Ei},t.prototype.Qo=function(t){var e=this.Yc[t.A()];return e||(e=new uS(this.Ei,this.Ti),this.Yc[t.A()]=e),e},t.prototype.Sr=function(){return this._o},t.prototype.$r=function(){return this.fo},t.prototype.Wo=function(){return this.wo},t.prototype.runTransaction=function(t,e,n){var r=this;gy("MemoryPersistence","Starting transaction:",t);var i=new dS(this.so.next());return this.Ti.Zc(),n(i).next(function(t){return r.Ti.ta(i).next(function(){return t})}).On().then(function(t){return i.Vs(),t})},t.prototype.ea=function(t,e){return eE.Ln(Object.values(this.Yc).map(function(n){return function(){return n.Fi(t,e)}}))},t}(),dS=function(t){function e(e){var n=this;return(n=t.call(this)||this).bs=e,n}return Object(ly.c)(e,t),e}(pE),pS=function(){function t(t){this.persistence=t,this.na=new sS,this.sa=null}return t.ia=function(e){return new t(e)},Object.defineProperty(t.prototype,"ra",{get:function(){if(this.sa)return this.sa;throw by()},enumerable:!1,configurable:!0}),t.prototype.nr=function(t,e,n){return this.na.nr(n,e),this.ra.delete(n.toString()),eE.resolve()},t.prototype.ir=function(t,e,n){return this.na.ir(n,e),this.ra.add(n.toString()),eE.resolve()},t.prototype.Ni=function(t,e){return this.ra.add(e.toString()),eE.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.na.Fc(e.targetId).forEach(function(t){return n.ra.add(t.toString())});var r=this.persistence.Sr();return r.rr(t,e.targetId).next(function(t){t.forEach(function(t){return n.ra.add(t.toString())})}).next(function(){return r.Ji(t,e)})},t.prototype.Zc=function(){this.sa=new Set},t.prototype.ta=function(t){var e=this,n=this.persistence.$r().Nr();return eE.forEach(this.ra,function(r){var i=zy._t(r);return e.oa(t,i).next(function(t){t||n.li(i)})}).next(function(){return e.sa=null,n.apply(t)})},t.prototype.Fr=function(t,e){var n=this;return this.oa(t,e).next(function(t){t?n.ra.delete(e.toString()):n.ra.add(e.toString())})},t.prototype.Xc=function(t){return 0},t.prototype.oa=function(t,e){var n=this;return eE.Ln([function(){return eE.resolve(n.na.Fi(e))},function(){return n.persistence.Sr().Fi(t,e)},function(){return n.persistence.ea(t,e)}])},t}();function gS(t,e){return"firestore_clients_"+t+"_"+e}function vS(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.m()&&(r+="_"+e.uid),r}function mS(t,e){return"firestore_targets_"+t+"_"+e}var yS=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.ca=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new jy(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(vy("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),bS=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.ca=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new jy(i.error.code,i.error.message)),o?new t(e,i.state,r):(vy("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),_S=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.ca=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=uw(),s=0;i&&s<r.activeTargetIds.length;++s)i=ib(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(vy("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),wS=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.ca=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(vy("SharedClientState","Failed to parse online state: "+e),null)},t}(),ES=function(){function t(){this.activeTargetIds=uw()}return t.prototype.ua=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.ha=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.aa=function(){var t={activeTargetIds:this.activeTargetIds.it(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),OS=function(){function t(t,e,n,r,i){this.window=t,this.Zr=e,this.persistenceKey=n,this.la=r,this._a=null,this.fa=null,this.k=null,this.da=this.wa.bind(this),this.Ea=new K_(Sy),this.Er=!1,this.Ta=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ia=gS(this.persistenceKey,this.la),this.ma=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Ea=this.Ea.zt(this.la,new ES),this.Aa=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Ra=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Pa=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.ya=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.ga=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.da)}return t.Kn=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(ly.b)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(ly.d)(this,function(h){switch(h.label){case 0:return[4,this._a.Uo()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.la&&(i=this.getItem(gS(this.persistenceKey,r)))&&(o=_S.ca(r,i))&&(this.Ea=this.Ea.zt(o.clientId,o));for(this.Va(),(s=this.storage.getItem(this.ya))&&(a=this.pa(s))&&this.ba(a),u=0,c=this.Ta;u<c.length;u++)this.wa(c[u]);return this.Ta=[],this.window.addEventListener("unload",function(){return l.ko()}),this.Er=!0,[2]}})})},t.prototype.B=function(t){this.setItem(this.ma,JSON.stringify(t))},t.prototype.va=function(){return this.Sa(this.Ea)},t.prototype.Da=function(t){var e=!1;return this.Ea.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.Ca=function(t){this.xa(t,"pending")},t.prototype.Na=function(t,e,n){this.xa(t,e,n),this.$a(t)},t.prototype.Fa=function(t){var e="not-current";if(this.Da(t)){var n=this.storage.getItem(mS(this.persistenceKey,t));if(n){var r=bS.ca(t,n);r&&(e=r.state)}}return this.Oa.ua(t),this.Va(),e},t.prototype.ka=function(t){this.Oa.ha(t),this.Va()},t.prototype.Ma=function(t){return this.Oa.activeTargetIds.has(t)},t.prototype.La=function(t){this.removeItem(mS(this.persistenceKey,t))},t.prototype.Ba=function(t,e,n){this.qa(t,e,n)},t.prototype.Ua=function(t,e,n){var r=this;e.forEach(function(t){r.$a(t)}),this.currentUser=t,n.forEach(function(t){r.Ca(t)})},t.prototype.Qa=function(t){this.Ka(t)},t.prototype.Wa=function(){this.ja()},t.prototype.ko=function(){this.Er&&(this.window.removeEventListener("storage",this.da),this.removeItem(this.Ia),this.Er=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return gy("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){gy("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){gy("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.wa=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(gy("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ia)return void vy("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Zr.po(function(){return Object(ly.b)(e,void 0,void 0,function(){var t,e,r,i,o,s;return Object(ly.d)(this,function(a){if(this.Er){if(null!==n.key)if(this.Aa.test(n.key)){if(null==n.newValue)return t=this.Ga(n.key),[2,this.za(t,null)];if(e=this.Ha(n.key,n.newValue))return[2,this.za(e.clientId,e)]}else if(this.Ra.test(n.key)){if(null!==n.newValue&&(r=this.Ja(n.key,n.newValue)))return[2,this.Ya(r)]}else if(this.Pa.test(n.key)){if(null!==n.newValue&&(i=this.Xa(n.key,n.newValue)))return[2,this.Za(i)]}else if(n.key===this.ya){if(null!==n.newValue&&(o=this.pa(n.newValue)))return[2,this.ba(o)]}else if(n.key===this.ma)(s=function(t){var e=Ly.q;if(null!=t)try{var n=JSON.parse(t);_y("number"==typeof n),e=n}catch(t){vy("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Ly.q&&this.k(s);else if(n.key===this.ga)return[2,this._a.tu()]}else this.Ta.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Oa",{get:function(){return this.Ea.get(this.la)},enumerable:!1,configurable:!0}),t.prototype.Va=function(){this.setItem(this.Ia,this.Oa.aa())},t.prototype.xa=function(t,e,n){var r=new yS(this.currentUser,t,e,n),i=vS(this.persistenceKey,this.currentUser,t);this.setItem(i,r.aa())},t.prototype.$a=function(t){var e=vS(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Ka=function(t){this.storage.setItem(this.ya,JSON.stringify({clientId:this.la,onlineState:t}))},t.prototype.qa=function(t,e,n){var r=mS(this.persistenceKey,t),i=new bS(t,e,n);this.setItem(r,i.aa())},t.prototype.ja=function(){this.setItem(this.ga,"value-not-used")},t.prototype.Ga=function(t){var e=this.Aa.exec(t);return e?e[1]:null},t.prototype.Ha=function(t,e){var n=this.Ga(t);return _S.ca(n,e)},t.prototype.Ja=function(t,e){var n=this.Ra.exec(t),r=Number(n[1]);return yS.ca(new Ay(void 0!==n[2]?n[2]:null),r,e)},t.prototype.Xa=function(t,e){var n=this.Pa.exec(t),r=Number(n[1]);return bS.ca(r,e)},t.prototype.pa=function(t){return wS.ca(t)},t.prototype.Ya=function(t){return Object(ly.b)(this,void 0,void 0,function(){return Object(ly.d)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this._a.eu(t.batchId,t.state,t.error)]:(gy("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.Za=function(t){return this._a.nu(t.targetId,t.state,t.error)},t.prototype.za=function(t,e){var n=this,r=e?this.Ea.zt(t,e):this.Ea.remove(t),i=this.Sa(this.Ea),o=this.Sa(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this._a.su(s,a).then(function(){n.Ea=r})},t.prototype.ba=function(t){this.Ea.get(t.clientId)&&this.fa(t.onlineState)},t.prototype.Sa=function(t){var e=uw();return t.forEach(function(t,n){e=e.Pe(n.activeTargetIds)}),e},t}(),SS=function(){function t(){this.iu=new ES,this.ru={},this.fa=null,this.k=null}return t.prototype.Ca=function(t){},t.prototype.Na=function(t,e,n){},t.prototype.Fa=function(t){return this.iu.ua(t),this.ru[t]||"not-current"},t.prototype.Ba=function(t,e,n){this.ru[t]=e},t.prototype.ka=function(t){this.iu.ha(t)},t.prototype.Ma=function(t){return this.iu.activeTargetIds.has(t)},t.prototype.La=function(t){delete this.ru[t]},t.prototype.va=function(){return this.iu.activeTargetIds},t.prototype.Da=function(t){return this.iu.activeTargetIds.has(t)},t.prototype.start=function(){return this.iu=new ES,Promise.resolve()},t.prototype.Ua=function(t,e,n){},t.prototype.Qa=function(t){},t.prototype.ko=function(){},t.prototype.B=function(t){},t.prototype.Wa=function(){},t}(),CS=function(){function t(){}return t.prototype.ou=function(t){},t.prototype.ko=function(){},t}(),TS=function(){function t(){var t=this;this.cu=function(){return t.au()},this.uu=function(){return t.hu()},this.lu=[],this._u()}return t.prototype.ou=function(t){this.lu.push(t)},t.prototype.ko=function(){window.removeEventListener("online",this.cu),window.removeEventListener("offline",this.uu)},t.prototype._u=function(){window.addEventListener("online",this.cu),window.addEventListener("offline",this.uu)},t.prototype.au=function(){gy("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.lu;t<e.length;t++)(0,e[t])(0)},t.prototype.hu=function(){gy("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.lu;t<e.length;t++)(0,e[t])(1)},t.Kn=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),IS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},xS=function(){function t(t){this.fu=t.fu,this.du=t.du}return t.prototype.wu=function(t){this.Eu=t},t.prototype.Tu=function(t){this.Iu=t},t.prototype.onMessage=function(t){this.mu=t},t.prototype.close=function(){this.du()},t.prototype.send=function(t){this.fu(t)},t.prototype.Au=function(){this.Eu()},t.prototype.Ru=function(t){this.Iu(t)},t.prototype.Pu=function(t){this.mu(t)},t}(),jS=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.i=e.i,n}return Object(ly.c)(e,t),e.prototype.Su=function(t,e,n,r){return new Promise(function(i,o){var s=new cy;s.listenOnce(sy.COMPLETE,function(){try{switch(s.getLastErrorCode()){case oy.NO_ERROR:var e=s.getResponseJson();gy("Connection","XHR received:",JSON.stringify(e)),i(e);break;case oy.TIMEOUT:gy("Connection",'RPC "'+t+'" timed out'),o(new jy(xy.DEADLINE_EXCEEDED,"Request time out"));break;case oy.HTTP_ERROR:var n=s.getStatus();if(gy("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(xy).indexOf(e)>=0?e:xy.UNKNOWN}(r.status);o(new jy(a,r.message))}else o(new jy(xy.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new jy(xy.UNAVAILABLE,"Connection failed."));break;default:by()}}finally{gy("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.Cu=function(t,e){var n=[this.gu,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new ty,i=rv(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.t.projectId+"/databases/"+this.t.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.i};this.vu(o.initMessageHeaders,e),Object(up.x)()||Object(up.A)()||Object(up.t)()||Object(up.v)()||Object(up.B)()||Object(up.s)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");gy("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new xS({fu:function(t){c?gy("Connection","Not sending because WebChannel is closed:",t):(u||(gy("Connection","Opening WebChannel transport."),a.open(),u=!0),gy("Connection","WebChannel sending:",t),a.send(t))},du:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,uy.EventType.OPEN,function(){c||gy("Connection","WebChannel transport opened.")}),h(a,uy.EventType.CLOSE,function(){c||(c=!0,gy("Connection","WebChannel transport closed"),l.Ru())}),h(a,uy.EventType.ERROR,function(t){c||(c=!0,my("Connection","WebChannel transport errored:",t),l.Ru(new jy(xy.UNAVAILABLE,"The operation could not be completed")))}),h(a,uy.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];_y(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){gy("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=U_[t];if(void 0!==e)return G_(e)}(i),s=r.message;void 0===o&&(o=xy.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Ru(new jy(o,s)),a.close()}else gy("Connection","WebChannel received:",n),l.Pu(n)}}),h(i,ay.STAT_EVENT,function(t){10===t.stat?gy("Connection","Detected buffering proxy"):11===t.stat&&gy("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Au()},0),l},e}(function(){function t(t){this.yu=t,this.t=t.t,this.gu=(t.ssl?"https":"http")+"://"+t.host,this.Vu="projects/"+this.t.projectId+"/databases/"+this.t.database+"/documents"}return t.prototype.pu=function(t,e,n,r){var i=this.bu(t,e);gy("RestConnection","Sending: ",i,n);var o={};return this.vu(o,r),this.Su(t,i,o,n).then(function(t){return gy("RestConnection","Received: ",t),t},function(e){throw my("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Du=function(t,e,n,r){return this.pu(t,e,n,r)},t.prototype.vu=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.2.9",t["Content-Type"]="text/plain",e)for(var n in e.g)e.g.hasOwnProperty(n)&&(t[n]=e.g[n])},t.prototype.bu=function(t,e){return this.gu+"/v1/"+e+":"+IS[t]},t}());function kS(){return"undefined"!=typeof window?window:null}function AS(){return"undefined"!=typeof document?document:null}function NS(t){return new Ow(t,!0)}var PS=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Zr=t,this.fs=e,this.xu=n,this.Nu=r,this.$u=i,this.Fu=0,this.Ou=null,this.ku=Date.now(),this.reset()}return t.prototype.reset=function(){this.Fu=0},t.prototype.Mu=function(){this.Fu=this.$u},t.prototype.Lu=function(t){var e=this;this.cancel();var n=Math.floor(this.Fu+this.Bu()),r=Math.max(0,Date.now()-this.ku),i=Math.max(0,n-r);i>0&&gy("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Fu+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ou=this.Zr.Tr(this.fs,i,function(){return e.ku=Date.now(),t()}),this.Fu*=this.Nu,this.Fu<this.xu&&(this.Fu=this.xu),this.Fu>this.$u&&(this.Fu=this.$u)},t.prototype.qu=function(){null!==this.Ou&&(this.Ou.Rs(),this.Ou=null)},t.prototype.cancel=function(){null!==this.Ou&&(this.Ou.cancel(),this.Ou=null)},t.prototype.Bu=function(){return(Math.random()-.5)*this.Fu},t}(),RS=function(){function t(t,e,n,r,i,o){this.Zr=t,this.Uu=n,this.Qu=r,this.Ku=i,this.listener=o,this.state=0,this.Wu=0,this.ju=null,this.stream=null,this.Gu=new PS(t,e)}return t.prototype.zu=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.Hu=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.Ju()},t.prototype.stop=function(){return Object(ly.b)(this,void 0,void 0,function(){return Object(ly.d)(this,function(t){switch(t.label){case 0:return this.zu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.Yu=function(){this.state=0,this.Gu.reset()},t.prototype.Xu=function(){var t=this;this.Hu()&&null===this.ju&&(this.ju=this.Zr.Tr(this.Uu,6e4,function(){return t.Zu()}))},t.prototype.th=function(t){this.eh(),this.stream.send(t)},t.prototype.Zu=function(){return Object(ly.b)(this,void 0,void 0,function(){return Object(ly.d)(this,function(t){return this.Hu()?[2,this.close(0)]:[2]})})},t.prototype.eh=function(){this.ju&&(this.ju.cancel(),this.ju=null)},t.prototype.close=function(t,e){return Object(ly.b)(this,void 0,void 0,function(){return Object(ly.d)(this,function(n){switch(n.label){case 0:return this.eh(),this.Gu.cancel(),this.Wu++,3!==t?this.Gu.reset():e&&e.code===xy.RESOURCE_EXHAUSTED?(vy(e.toString()),vy("Using maximum backoff delay to prevent overloading the backend."),this.Gu.Mu()):e&&e.code===xy.UNAUTHENTICATED&&this.Ku.p(),null!==this.stream&&(this.nh(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Tu(e)];case 1:return n.sent(),[2]}})})},t.prototype.nh=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.sh(this.Wu),n=this.Wu;this.Ku.getToken().then(function(e){t.Wu===n&&t.ih(e)},function(n){e(function(){var e=new jy(xy.UNKNOWN,"Fetching auth token failed: "+n.message);return t.rh(e)})})},t.prototype.ih=function(t){var e=this,n=this.sh(this.Wu);this.stream=this.oh(t),this.stream.wu(function(){n(function(){return e.state=2,e.listener.wu()})}),this.stream.Tu(function(t){n(function(){return e.rh(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.Ju=function(){var t=this;this.state=4,this.Gu.Lu(function(){return Object(ly.b)(t,void 0,void 0,function(){return Object(ly.d)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.rh=function(t){return gy("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.sh=function(t){var e=this;return function(n){e.Zr.Ps(function(){return e.Wu===t?n():(gy("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),DS=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).Qt=i,s}return Object(ly.c)(e,t),e.prototype.oh=function(t){return this.Qu.Cu("Listen",t)},e.prototype.onMessage=function(t){this.Gu.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:by()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.Bt?(_y(void 0===e||"string"==typeof e),Iy.fromBase64String(e||"")):(_y(void 0===e||e instanceof Uint8Array),Iy.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?xy.UNKNOWN:G_(t.code);return new jy(e,t.message||"")}(a);n=new vw(r,i,o,s||null)}else if("documentChange"in e){i=Aw(t,(r=e.documentChange).document.name),o=Iw(r.document.updateTime);var a=new yb({mapValue:{fields:r.document.fields}}),u=(s=new Eb(i,o,a,{}),r.targetIds||[]);n=new pw(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=Aw(t,(r=e.documentDelete).document),o=r.readTime?Iw(r.readTime):Fy.min(),a=new Ob(i,o),n=new pw([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=Aw(t,(r=e.documentRemove).document),n=new pw([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return by();var c=e.filter;i=new z_(r=c.count||0),n=new gw(o=c.targetId,i)}return n}(this.Qt,t),n=function(t){if(!("targetChange"in t))return Fy.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Fy.min():e.readTime?Iw(e.readTime):Fy.min()}(t);return this.listener.ah(e,n)},e.prototype.uh=function(t){var e={};e.database=Rw(this.Qt),e.addTarget=function(t,e){var n,r=e.target;return(n=jb(r)?{documents:Uw(t,r)}:{query:qw(t,r)}).targetId=e.targetId,e.resumeToken.l()>0?n.resumeToken=Cw(t,e.resumeToken):e.Ot._(Fy.min())>0&&(n.readTime=Sw(t,e.Ot.j())),n}(this.Qt,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return by()}}(0,e.Ft);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.th(e)},e.prototype.hh=function(t){var e={};e.database=Rw(this.Qt),e.removeTarget=t,this.th(e)},e}(RS),MS=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).Qt=i,s.lh=!1,s}return Object(ly.c)(e,t),Object.defineProperty(e.prototype,"_h",{get:function(){return this.lh},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.lh=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.nh=function(){this.lh&&this.fh([])},e.prototype.oh=function(t){return this.Qu.Cu("Write",t)},e.prototype.onMessage=function(t){if(_y(!!t.streamToken),this.lastStreamToken=t.streamToken,this.lh){this.Gu.reset();var e=function(t,e){return t&&t.length>0?(_y(void 0!==e),t.map(function(t){return function(t,e){var n=Iw(t.updateTime?t.updateTime:e);n.isEqual(Fy.min())&&(n=Iw(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new C_(n,r)}(t,e)})):[]}(t.writeResults,t.commitTime),n=Iw(t.commitTime);return this.listener.dh(n,e)}return _y(!t.writeResults||0===t.writeResults.length),this.lh=!0,this.listener.wh()},e.prototype.Eh=function(){var t={};t.database=Rw(this.Qt),this.th(t)},e.prototype.fh=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return Vw(e.Qt,t)})};this.th(n)},e}(RS),LS=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Qu=n,i.Qt=r,i.Th=!1,i}return Object(ly.c)(e,t),e.prototype.Ih=function(){if(this.Th)throw new jy(xy.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.pu=function(t,e,n){var r=this;return this.Ih(),this.credentials.getToken().then(function(i){return r.Qu.pu(t,e,n,i)}).catch(function(t){throw t.code===xy.UNAUTHENTICATED&&r.credentials.p(),t})},e.prototype.Du=function(t,e,n){var r=this;return this.Ih(),this.credentials.getToken().then(function(i){return r.Qu.Du(t,e,n,i)}).catch(function(t){throw t.code===xy.UNAUTHENTICATED&&r.credentials.p(),t})},e.prototype.terminate=function(){this.Th=!1},e}(function(){}),VS=function(){function t(t,e){this._s=t,this.fa=e,this.state="Unknown",this.mh=0,this.Ah=null,this.Rh=!0}return t.prototype.Ph=function(){var t=this;0===this.mh&&(this.yh("Unknown"),this.Ah=this._s.Tr("online_state_timeout",1e4,function(){return t.Ah=null,t.gh("Backend didn't respond within 10 seconds."),t.yh("Offline"),Promise.resolve()}))},t.prototype.Vh=function(t){"Online"===this.state?this.yh("Unknown"):(this.mh++,this.mh>=1&&(this.ph(),this.gh("Connection failed 1 times. Most recent error: "+t.toString()),this.yh("Offline")))},t.prototype.set=function(t){this.ph(),this.mh=0,"Online"===t&&(this.Rh=!1),this.yh(t)},t.prototype.yh=function(t){t!==this.state&&(this.state=t,this.fa(t))},t.prototype.gh=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Rh?(vy(e),this.Rh=!1):gy("OnlineStateTracker",e)},t.prototype.ph=function(){null!==this.Ah&&(this.Ah.cancel(),this.Ah=null)},t}(),FS=function(t,e,n,r,i){var o=this;this.bh=t,this.Sh=e,this._s=n,this.Dh={},this.Ch=[],this.xh=new Map,this.Nh=new Set,this.$h=[],this.Fh=i,this.Fh.ou(function(t){n.Ps(function(){return Object(ly.b)(o,void 0,void 0,function(){return Object(ly.d)(this,function(t){switch(t.label){case 0:return QS(this)?(gy("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(ly.b)(this,void 0,void 0,function(){var e;return Object(ly.d)(this,function(n){switch(n.label){case 0:return(e=wy(t)).Nh.add(4),[4,qS(e)];case 1:return n.sent(),e.Oh.set("Unknown"),e.Nh.delete(4),[4,US(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Oh=new VS(n,r)};function US(t){return Object(ly.b)(this,void 0,void 0,function(){var e,n;return Object(ly.d)(this,function(r){switch(r.label){case 0:if(!QS(t))return[3,4];e=0,n=t.$h,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function qS(t){return Object(ly.b)(this,void 0,void 0,function(){var e,n;return Object(ly.d)(this,function(r){switch(r.label){case 0:e=0,n=t.$h,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function HS(t,e){var n=wy(t);n.xh.has(e.targetId)||(n.xh.set(e.targetId,e),KS(n)?GS(n):cC(n).Hu()&&zS(n,e))}function BS(t,e){var n=wy(t),r=cC(n);n.xh.delete(e),r.Hu()&&WS(n,e),0===n.xh.size&&(r.Hu()?r.Xu():QS(n)&&n.Oh.set("Unknown"))}function zS(t,e){t.kh.on(e.targetId),cC(t).uh(e)}function WS(t,e){t.kh.on(e),cC(t).hh(e)}function GS(t){t.kh=new yw({vn:function(e){return t.Dh.vn(e)},Sn:function(e){return t.xh.get(e)||null}}),cC(t).start(),t.Oh.Ph()}function KS(t){return QS(t)&&!cC(t).zu()&&t.xh.size>0}function QS(t){return 0===wy(t).Nh.size}function $S(t){t.kh=void 0}function YS(t){return Object(ly.b)(this,void 0,void 0,function(){return Object(ly.d)(this,function(e){return t.xh.forEach(function(e,n){zS(t,e)}),[2]})})}function XS(t,e){return Object(ly.b)(this,void 0,void 0,function(){return Object(ly.d)(this,function(n){return $S(t),KS(t)?(t.Oh.Vh(e),GS(t)):t.Oh.set("Unknown"),[2]})})}function JS(t,e,n){return Object(ly.b)(this,void 0,void 0,function(){var r,i,o;return Object(ly.d)(this,function(s){switch(s.label){case 0:if(t.Oh.set("Online"),!(e instanceof vw&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(ly.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(ly.d)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.xh.has(o=i[r])?[4,t.Dh.Mh(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.xh.delete(o),t.kh.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),gy("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,ZS(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof pw?t.kh.dn(e):e instanceof gw?t.kh.Pn(e):t.kh.Tn(e),n.isEqual(Fy.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,KO(t.bh)];case 8:return i=s.sent(),n._(i)>=0?[4,function(t,e){var n=t.kh.Vn(e);return n.$e.forEach(function(n,r){if(n.resumeToken.l()>0){var i=t.xh.get(r);i&&t.xh.set(r,i.Mt(n.resumeToken,e))}}),n.Fe.forEach(function(e){var n=t.xh.get(e);if(n){t.xh.set(e,n.Mt(Iy.T,n.Ot)),WS(t,e);var r=new u_(n.target,e,1,n.sequenceNumber);zS(t,r)}}),t.Dh.Lh(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return gy("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,ZS(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function ZS(t,e,n){return Object(ly.b)(this,void 0,void 0,function(){var r=this;return Object(ly.d)(this,function(i){switch(i.label){case 0:if(!sE(e))throw e;return t.Nh.add(1),[4,qS(t)];case 1:return i.sent(),t.Oh.set("Offline"),n||(n=function(){return KO(t.bh)}),t._s.po(function(){return Object(ly.b)(r,void 0,void 0,function(){return Object(ly.d)(this,function(e){switch(e.label){case 0:return gy("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Nh.delete(1),[4,US(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function tC(t,e){return e().catch(function(n){return ZS(t,n,e)})}function eC(t){return Object(ly.b)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(ly.d)(this,function(s){switch(s.label){case 0:e=wy(t),n=lC(e),r=e.Ch.length>0?e.Ch[e.Ch.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return QS(t)&&t.Ch.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,YO(e.bh,r)];case 3:return null===(i=s.sent())?(0===e.Ch.length&&n.Xu(),[3,7]):(r=i.batchId,function(t,e){t.Ch.push(e);var n=lC(t);n.Hu()&&n._h&&n.fh(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,ZS(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return nC(e)&&rC(e),[2]}})})}function nC(t){return QS(t)&&!lC(t).zu()&&t.Ch.length>0}function rC(t){lC(t).start()}function iC(t){return Object(ly.b)(this,void 0,void 0,function(){return Object(ly.d)(this,function(e){return lC(t).Eh(),[2]})})}function oC(t){return Object(ly.b)(this,void 0,void 0,function(){var e,n,r;return Object(ly.d)(this,function(i){for(e=lC(t),n=0,r=t.Ch;n<r.length;n++)e.fh(r[n].mutations);return[2]})})}function sC(t,e,n){return Object(ly.b)(this,void 0,void 0,function(){var r,i;return Object(ly.d)(this,function(o){switch(o.label){case 0:return r=t.Ch.shift(),i=FE.from(r,e,n),[4,tC(t,function(){return t.Dh.Bh(i)})];case 1:return o.sent(),[4,eC(t)];case 2:return o.sent(),[2]}})})}function aC(t,e){return Object(ly.b)(this,void 0,void 0,function(){return Object(ly.d)(this,function(n){switch(n.label){case 0:return e&&lC(t)._h?[4,function(t,e){return Object(ly.b)(this,void 0,void 0,function(){var n,r;return Object(ly.d)(this,function(i){switch(i.label){case 0:return W_(r=e.code)&&r!==xy.ABORTED?(n=t.Ch.shift(),lC(t).Yu(),[4,tC(t,function(){return t.Dh.qh(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,eC(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return nC(t)&&rC(t),[2]}})})}function uC(t,e){return Object(ly.b)(this,void 0,void 0,function(){var n;return Object(ly.d)(this,function(r){switch(r.label){case 0:return n=wy(t),e?(n.Nh.delete(2),[4,US(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Nh.add(2),[4,qS(n)]);case 3:r.sent(),n.Oh.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function cC(t){var e=this;return t.Uh||(t.Uh=function(t,e,n){var r=wy(t);return r.Ih(),new DS(e,r.Qu,r.credentials,r.Qt,n)}(t.Sh,t._s,{wu:YS.bind(null,t),Tu:XS.bind(null,t),ah:JS.bind(null,t)}),t.$h.push(function(n){return Object(ly.b)(e,void 0,void 0,function(){return Object(ly.d)(this,function(e){switch(e.label){case 0:return n?(t.Uh.Yu(),KS(t)?GS(t):t.Oh.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Uh.stop()];case 2:e.sent(),$S(t),e.label=3;case 3:return[2]}})})})),t.Uh}function lC(t){var e=this;return t.Qh||(t.Qh=function(t,e,n){var r=wy(t);return r.Ih(),new MS(e,r.Qu,r.credentials,r.Qt,n)}(t.Sh,t._s,{wu:iC.bind(null,t),Tu:aC.bind(null,t),wh:oC.bind(null,t),dh:sC.bind(null,t)}),t.$h.push(function(n){return Object(ly.b)(e,void 0,void 0,function(){return Object(ly.d)(this,function(e){switch(e.label){case 0:return n?(t.Qh.Yu(),[4,eC(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qh.stop()];case 3:e.sent(),t.Ch.length>0&&(gy("RemoteStore","Stopping write stream with "+t.Ch.length+" pending writes"),t.Ch=[]),e.label=4;case 4:return[2]}})})})),t.Qh}var hC=function(){this.Kh=void 0,this.listeners=[]},fC=function(){this.queries=new aO(function(t){return r_(t)},n_),this.onlineState="Unknown",this.Wh=new Set};function dC(t,e){return Object(ly.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(ly.d)(this,function(c){switch(c.label){case 0:if(n=wy(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new hC),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.jh(r)];case 2:return s.Kh=c.sent(),[3,4];case 3:return a=c.sent(),u=fE(a,"Initialization of query '"+i_(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.Gh(n.onlineState),o.Kh&&e.zh(o.Kh)&&mC(n),[2]}})})}function pC(t,e){return Object(ly.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(ly.d)(this,function(a){return n=wy(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.Hh(r))]:[2]})})}function gC(t,e){for(var n=wy(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].zh(s)&&(r=!0);a.Kh=s}}r&&mC(n)}function vC(t,e,n){var r=wy(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function mC(t){t.Wh.forEach(function(t){t.next()})}var yC=function(){function t(t,e,n){this.query=t,this.Jh=e,this.Yh=!1,this.Xh=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.zh=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new hw(t.query,t.docs,t.Se,e,t.De,t.fromCache,t.Ce,!0)}var o=!1;return this.Yh?this.Zh(t)&&(this.Jh.next(t),o=!0):this.tl(t,this.onlineState)&&(this.el(t),o=!0),this.Xh=t,o},t.prototype.onError=function(t){this.Jh.error(t)},t.prototype.Gh=function(t){this.onlineState=t;var e=!1;return this.Xh&&!this.Yh&&this.tl(this.Xh,t)&&(this.el(this.Xh),e=!0),e},t.prototype.tl=function(t,e){return!t.fromCache||!(this.options.nl&&"Offline"!==e||t.docs.et()&&"Offline"!==e)},t.prototype.Zh=function(t){return t.docChanges.length>0||!!(t.Ce||this.Xh&&this.Xh.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.el=function(t){t=hw.Ne(t.query,t.docs,t.De,t.fromCache),this.Yh=!0,this.Jh.next(t)},t}(),bC=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.sl=function(){return"metadata"in this.payload},t}(),_C=function(){function t(t){this.Qt=t}return t.prototype.Pc=function(t){return Aw(this.Qt,t)},t.prototype.yc=function(t){return t.metadata.exists?Lw(this.Qt,t.document,!1):new Ob(this.Pc(t.metadata.name),this.gc(t.metadata.readTime))},t.prototype.gc=function(t){return Iw(t)},t}(),wC=function(){function t(t,e,n){this.il=t,this.bh=e,this.Qt=n,this.queries=[],this.documents=[],this.progress=EC(t)}return t.prototype.rl=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.ol=function(t){for(var e=new Map,n=new _C(this.Qt),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.Pc(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||sw()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(ly.b)(this,void 0,void 0,function(){var t,e,n,r,i;return Object(ly.d)(this,function(o){switch(o.label){case 0:return[4,rS(this.bh,new _C(this.Qt),this.documents,this.il.id)];case 1:t=o.sent(),e=this.ol(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,iS(this.bh,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new FO(Object.assign({},this.progress),t))]}})})},t}();function EC(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var OC=function(t){this.key=t},SC=function(t){this.key=t},CC=function(){function t(t,e){this.query=t,this.cl=e,this.al=null,this.Be=!1,this.ul=sw(),this.De=sw(),this.hl=s_(t),this.ll=new cw(this.hl)}return Object.defineProperty(t.prototype,"_l",{get:function(){return this.cl},enumerable:!1,configurable:!0}),t.prototype.fl=function(t,e){var n=this,r=e?e.dl:new lw,i=e?e.ll:this.ll,o=e?e.De:this.De,s=i,a=!1,u=Qb(this.query)&&i.size===this.query.limit?i.last():null,c=$b(this.query)&&i.size===this.query.limit?i.first():null;if(t.Xt(function(t,e){var l=i.get(t),h=e instanceof Eb?e:null;h&&(h=o_(n.query,h)?h:null);var f=!!l&&n.De.has(l.key),d=!!h&&(h.Vt||n.De.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data().isEqual(h.data())?f!==d&&(r.track({type:3,doc:h}),p=!0):n.wl(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.hl(h,u)>0||c&&n.hl(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),Qb(this.query)||$b(this.query))for(;s.size>this.query.limit;){var l=Qb(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{ll:s,dl:r,lc:a,De:o}},t.prototype.wl=function(t,e){return t.Vt&&e.hasCommittedMutations&&!e.Vt},t.prototype.wi=function(t,e,n){var r=this,i=this.ll;this.ll=t.ll,this.De=t.De;var o=t.dl.ve();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return by()}};return n(t)-n(e)}(t.type,e.type)||r.hl(t.doc,e.doc)}),this.El(n);var s=e?this.Tl():[],a=0===this.ul.size&&this.Be?1:0,u=a!==this.al;return this.al=a,0!==o.length||u?{snapshot:new hw(this.query,t.ll,i,o,t.De,0===a,u,!1),Il:s}:{Il:s}},t.prototype.Gh=function(t){return this.Be&&"Offline"===t?(this.Be=!1,this.wi({ll:this.ll,dl:new lw,De:this.De,lc:!1},!1)):{Il:[]}},t.prototype.ml=function(t){return!this.cl.has(t)&&!!this.ll.has(t)&&!this.ll.get(t).Vt},t.prototype.El=function(t){var e=this;t&&(t.qe.forEach(function(t){return e.cl=e.cl.add(t)}),t.Ue.forEach(function(t){}),t.Qe.forEach(function(t){return e.cl=e.cl.delete(t)}),this.Be=t.Be)},t.prototype.Tl=function(){var t=this;if(!this.Be)return[];var e=this.ul;this.ul=sw(),this.ll.forEach(function(e){t.ml(e.key)&&(t.ul=t.ul.add(e.key))});var n=[];return e.forEach(function(e){t.ul.has(e)||n.push(new SC(e))}),this.ul.forEach(function(t){e.has(t)||n.push(new OC(t))}),n},t.prototype.Al=function(t){this.cl=t.Rc,this.ul=sw();var e=this.fl(t.documents);return this.wi(e,!0)},t.prototype.Rl=function(){return hw.Ne(this.query,this.ll,this.De,0===this.al)},t}(),TC=function(t,e,n){this.query=t,this.targetId=e,this.view=n},IC=function(t){this.key=t,this.Pl=!1},xC=function(){function t(t,e,n,r,i,o){this.bh=t,this.yl=e,this.gl=n,this.Vl=r,this.currentUser=i,this.pl=o,this.bl={},this.vl=new aO(function(t){return r_(t)},n_),this.Sl=new Map,this.Dl=new Set,this.Cl=new K_(zy.H),this.xl=new Map,this.Nl=new sS,this.$l={},this.Fl=new Map,this.Ol=vO.Li(),this.onlineState="Unknown",this.kl=void 0}return Object.defineProperty(t.prototype,"Ml",{get:function(){return!0===this.kl},enumerable:!1,configurable:!0}),t}();function jC(t,e){return Object(ly.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(ly.d)(this,function(a){switch(a.label){case 0:return n=iT(t),(i=n.vl.get(e))?(n.Vl.Fa(i.targetId),r=i.view.Rl(),[3,4]):[3,1];case 1:return[4,XO(n.bh,t_(e))];case 2:return o=a.sent(),s=n.Vl.Fa(o.targetId),[4,kC(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.Ml&&HS(n.yl,o),a.label=4;case 4:return[2,r]}})})}function kC(t,e,n,r){return Object(ly.b)(this,void 0,void 0,function(){var i,o,s,a,u,c;return Object(ly.d)(this,function(l){switch(l.label){case 0:return t.Ll=function(e,n,r){return function(t,e,n,r){return Object(ly.b)(this,void 0,void 0,function(){var i,o,s;return Object(ly.d)(this,function(a){switch(a.label){case 0:return(i=e.view.fl(n)).lc?[4,ZO(t.bh,e.query,!1).then(function(t){return e.view.fl(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.$e.get(e.targetId),s=e.view.wi(i,t.Ml,o),[2,(BC(t,e.targetId,s.Il),s.snapshot)]}})})}(t,e,n,r)},[4,ZO(t.bh,e,!0)];case 1:return i=l.sent(),o=new CC(e,i.Rc),s=o.fl(i.documents),a=dw.Le(n,r&&"Offline"!==t.onlineState),u=o.wi(s,t.Ml,a),BC(t,n,u.Il),c=new TC(e,n,o),[2,(t.vl.set(e,c),t.Sl.has(n)?t.Sl.get(n).push(e):t.Sl.set(n,[e]),u.snapshot)]}})})}function AC(t,e){return Object(ly.b)(this,void 0,void 0,function(){var n,r,i;return Object(ly.d)(this,function(o){switch(o.label){case 0:return n=wy(t),r=n.vl.get(e),(i=n.Sl.get(r.targetId)).length>1?[2,(n.Sl.set(r.targetId,i.filter(function(t){return!n_(t,e)})),void n.vl.delete(e))]:n.Ml?(n.Vl.ka(r.targetId),n.Vl.Da(r.targetId)?[3,2]:[4,JO(n.bh,r.targetId,!1).then(function(){n.Vl.La(r.targetId),BS(n.yl,r.targetId),qC(n,r.targetId)}).catch(sO)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return qC(n,r.targetId),[4,JO(n.bh,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function NC(t,e,n){return Object(ly.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(ly.d)(this,function(a){switch(a.label){case 0:r=oT(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=wy(t),i=Vy.now(),o=e.reduce(function(t,e){return t.add(e.key)},sw());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Tc.Xo(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=A_(c,n.get(c.key));null!=l&&s.push(new D_(c.key,l,_b(l.proto.mapValue),T_.exists(!0)))}return r.zo.Ri(t,i,s,e)})}).then(function(t){var e=t.xs(n);return{batchId:t.batchId,ri:e}})}(r.bh,e)];case 2:return i=a.sent(),r.Vl.Ca(i.batchId),function(t,e,n){var r=t.$l[t.currentUser.A()];r||(r=new K_(Sy)),r=r.zt(e,n),t.$l[t.currentUser.A()]=r}(r,i.batchId,n),[4,GC(r,i.ri)];case 3:return a.sent(),[4,eC(r.yl)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=fE(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function PC(t,e){return Object(ly.b)(this,void 0,void 0,function(){var n,r;return Object(ly.d)(this,function(i){switch(i.label){case 0:n=wy(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,QO(n.bh,e)];case 2:return r=i.sent(),e.$e.forEach(function(t,e){var r=n.xl.get(e);r&&(_y(t.qe.size+t.Ue.size+t.Qe.size<=1),t.qe.size>0?r.Pl=!0:t.Ue.size>0?_y(r.Pl):t.Qe.size>0&&(_y(r.Pl),r.Pl=!1))}),[4,GC(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,sO(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function RC(t,e,n){var r=wy(t);if(r.Ml&&0===n||!r.Ml&&1===n){var i=[];r.vl.forEach(function(t,n){var r=n.view.Gh(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=wy(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].Gh(e)&&(r=!0)}),r&&mC(n)}(r.gl,e),i.length&&r.bl.ah(i),r.onlineState=e,r.Ml&&r.Vl.Qa(e)}}function DC(t,e,n){return Object(ly.b)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(ly.d)(this,function(c){switch(c.label){case 0:return(r=wy(t)).Vl.Ba(e,"rejected",n),i=r.xl.get(e),(o=i&&i.key)?(s=(s=new K_(zy.H)).zt(o,new Ob(o,Fy.min())),a=sw().add(o),u=new fw(Fy.min(),new Map,new Y_(Sy),s,a),[4,PC(r,u)]):[3,2];case 1:return c.sent(),r.Cl=r.Cl.remove(o),r.xl.delete(e),WC(r),[3,4];case 2:return[4,JO(r.bh,e,!1).then(function(){return qC(r,e,n)}).catch(sO)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function MC(t,e){return Object(ly.b)(this,void 0,void 0,function(){var n,r,i;return Object(ly.d)(this,function(o){switch(o.label){case 0:n=wy(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,GO(n.bh,e)];case 2:return i=o.sent(),UC(n,r,null),FC(n,r),n.Vl.Na(r,"acknowledged"),[4,GC(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,sO(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function LC(t,e,n){return Object(ly.b)(this,void 0,void 0,function(){var r,i;return Object(ly.d)(this,function(o){switch(o.label){case 0:r=wy(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=wy(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n.zo.Pi(t,e).next(function(e){return _y(null!==e),r=e.keys(),n.zo.Ci(t,e)}).next(function(){return n.zo.$i(t)}).next(function(){return n.Tc.Xo(t,r)})})}(r.bh,e)];case 2:return i=o.sent(),UC(r,e,n),FC(r,e),r.Vl.Na(e,"rejected",n),[4,GC(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,sO(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function VC(t,e){return Object(ly.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(ly.d)(this,function(a){switch(a.label){case 0:QS((n=wy(t)).yl)||gy("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=wy(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.zo.Vi(t)})}(n.bh)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fl.get(r)||[]).push(e),n.Fl.set(r,i),[3,4]);case 3:return o=a.sent(),s=fE(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function FC(t,e){(t.Fl.get(e)||[]).forEach(function(t){t.resolve()}),t.Fl.delete(e)}function UC(t,e,n){var r=wy(t),i=r.$l[r.currentUser.A()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.$l[r.currentUser.A()]=i}}function qC(t,e,n){void 0===n&&(n=null),t.Vl.ka(e);for(var r=0,i=t.Sl.get(e);r<i.length;r++){var o=i[r];t.vl.delete(o),n&&t.bl.Bl(o,n)}t.Sl.delete(e),t.Ml&&t.Nl.Fc(e).forEach(function(e){t.Nl.Fi(e)||HC(t,e)})}function HC(t,e){t.Dl.delete(e.path.rt());var n=t.Cl.get(e);null!==n&&(BS(t.yl,n),t.Cl=t.Cl.remove(e),t.xl.delete(n),WC(t))}function BC(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof OC?(t.Nl.nr(o.key,e),zC(t,o)):o instanceof SC?(gy("SyncEngine","Document no longer in limbo: "+o.key),t.Nl.ir(o.key,e),t.Nl.Fi(o.key)||HC(t,o.key)):by()}}function zC(t,e){var n=e.key,r=n.path.rt();t.Cl.get(n)||t.Dl.has(r)||(gy("SyncEngine","New document in limbo: "+n),t.Dl.add(r),WC(t))}function WC(t){for(;t.Dl.size>0&&t.Cl.size<t.pl;){var e=t.Dl.values().next().value;t.Dl.delete(e);var n=new zy(qy.ot(e)),r=t.Ol.next();t.xl.set(r,new IC(n)),t.Cl=t.Cl.zt(n,r),HS(t.yl,new u_(t_(Kb(n.path)),r,2,Ly.q))}}function GC(t,e,n){return Object(ly.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(ly.d)(this,function(a){switch(a.label){case 0:return r=wy(t),i=[],o=[],s=[],r.vl.et()?[3,3]:(r.vl.forEach(function(t,a){s.push(r.Ll(a,e,n).then(function(t){if(t){r.Ml&&r.Vl.Ba(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=qO.oc(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.bl.ah(i),[4,function(t,e){return Object(ly.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return Object(ly.d)(this,function(l){switch(l.label){case 0:n=wy(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return eE.forEach(e,function(e){return eE.forEach(e.ic,function(r){return n.persistence.Ti.nr(t,e.targetId,r)}).next(function(){return eE.forEach(e.rc,function(r){return n.persistence.Ti.ir(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!sE(r=l.sent()))throw r;return gy("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.fc.get(a),c=u.Lt(u.Ot),n.fc=n.fc.zt(a,c));return[2]}})})}(r.bh,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function KC(t,e){return Object(ly.b)(this,void 0,void 0,function(){var n,r;return Object(ly.d)(this,function(i){switch(i.label){case 0:return(n=wy(t)).currentUser.isEqual(e)?[3,3]:(gy("SyncEngine","User change. New user:",e.A()),[4,WO(n.bh,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fl.forEach(function(t){t.forEach(function(t){t.reject(new jy(xy.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fl.clear()}(n),n.Vl.Ua(e,r.mc,r.Ac),[4,GC(n,r.Ic)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function QC(t,e){var n=wy(t),r=n.xl.get(e);if(r&&r.Pl)return sw().add(r.key);var i=sw(),o=n.Sl.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.vl.get(a[s]);i=i.Pe(u.view._l)}return i}function $C(t,e){return Object(ly.b)(this,void 0,void 0,function(){var n,r,i;return Object(ly.d)(this,function(o){switch(o.label){case 0:return[4,ZO((n=wy(t)).bh,e.query,!0)];case 1:return r=o.sent(),i=e.view.Al(r),[2,(n.Ml&&BC(n,e.targetId,i.Il),i)]}})})}function YC(t){return Object(ly.b)(this,void 0,void 0,function(){var e;return Object(ly.d)(this,function(n){return[2,eS((e=wy(t)).bh).then(function(t){return GC(e,t)})]})})}function XC(t,e,n,r){return Object(ly.b)(this,void 0,void 0,function(){var i,o;return Object(ly.d)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=wy(t),r=wy(n.zo);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.yi(t,e).next(function(e){return e?n.Tc.Xo(t,e):eE.resolve(null)})})}((i=wy(t)).bh,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,eC(i.yl)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(UC(i,e,r||null),FC(i,e),function(t,e){wy(wy(t).zo).xi(e)}(i.bh,e)):by(),s.label=4;case 4:return[4,GC(i,o)];case 5:return s.sent(),[3,7];case 6:gy("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function JC(t,e){return Object(ly.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(ly.d)(this,function(c){switch(c.label){case 0:return iT(n=wy(t)),oT(n),!0!==e||!0===n.kl?[3,3]:(r=n.Vl.va(),[4,ZC(n,r.it())]);case 1:return i=c.sent(),n.kl=!0,[4,uC(n.yl,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)HS(n.yl,s[o]);return[3,7];case 3:return!1!==e||!1===n.kl?[3,7]:(a=[],u=Promise.resolve(),n.Sl.forEach(function(t,e){n.Vl.Ma(e)?a.push(e):u=u.then(function(){return qC(n,e),JO(n.bh,e,!0)}),BS(n.yl,e)}),[4,u]);case 4:return c.sent(),[4,ZC(n,a)];case 5:return c.sent(),function(t){var e=wy(t);e.xl.forEach(function(t,n){BS(e.yl,n)}),e.Nl.Oc(),e.xl=new Map,e.Cl=new K_(zy.H)}(n),n.kl=!1,[4,uC(n.yl,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function ZC(t,e,n){return Object(ly.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,f,d,p;return Object(ly.d)(this,function(g){switch(g.label){case 0:n=wy(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.Sl.get(a=s[o]))&&0!==c.length?[4,XO(n.bh,t_(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(f=n.vl.get(h[l]),[4,$C(n,f)]):[3,6];case 4:(d=g.sent()).snapshot&&i.push(d.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,tS(n.bh,a)];case 8:return p=g.sent(),[4,XO(n.bh,p)];case 9:return u=g.sent(),[4,kC(n,tT(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.bl.ah(i),r)]}})})}function tT(t){return Gb(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function eT(t){var e=wy(t);return wy(wy(e.bh).persistence).Uo()}function nT(t,e,n,r){return Object(ly.b)(this,void 0,void 0,function(){var i,o,s;return Object(ly.d)(this,function(a){switch(a.label){case 0:return(i=wy(t)).kl?(gy("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Sl.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,eS(i.bh)];case 3:return o=a.sent(),s=fw.Me(e,"current"===n),[4,GC(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,JO(i.bh,e,!0)];case 6:return a.sent(),qC(i,e,r),[3,8];case 7:by(),a.label=8;case 8:return[2]}})})}function rT(t,e,n){return Object(ly.b)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return Object(ly.d)(this,function(f){switch(f.label){case 0:if(!(r=iT(t)).kl)return[3,10];i=0,o=e,f.label=1;case 1:return i<o.length?r.Sl.has(s=o[i])?(gy("SyncEngine","Adding an already active target "+s),[3,5]):[4,tS(r.bh,s)]:[3,6];case 2:return a=f.sent(),[4,XO(r.bh,a)];case 3:return u=f.sent(),[4,kC(r,tT(a),u.targetId,!1)];case 4:f.sent(),HS(r.yl,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(ly.d)(this,function(e){switch(e.label){case 0:return r.Sl.has(t)?[4,JO(r.bh,t,!1).then(function(){BS(r.yl,t),qC(r,t)}).catch(sO)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function iT(t){var e=wy(t);return e.yl.Dh.Lh=PC.bind(null,e),e.yl.Dh.vn=QC.bind(null,e),e.yl.Dh.Mh=DC.bind(null,e),e.bl.ah=gC.bind(null,e.gl),e.bl.Bl=vC.bind(null,e.gl),e}function oT(t){var e=wy(t);return e.yl.Dh.Bh=MC.bind(null,e),e.yl.Dh.qh=LC.bind(null,e),e}function sT(t,e,n){var r=wy(t);(function(t,e,n){return Object(ly.b)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(ly.d)(this,function(c){switch(c.label){case 0:return c.trys.push([0,14,,15]),[4,e.getMetadata()];case 1:return r=c.sent(),[4,function(t,e){var n=wy(t),r=Iw(e.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",function(t){return n.wo.Os(t,e.id)}).then(function(t){return!!t&&t.createTime._(r)>=0})}(t.bh,r)];case 2:return c.sent()?[4,e.close()]:[3,4];case 3:return[2,(c.sent(),void n.ql(function(t){return{taskState:"Success",documentsLoaded:t.totalDocuments,bytesLoaded:t.totalBytes,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(r)))];case 4:return n.Ul(EC(r)),i=new wC(r,t.bh,e.Qt),[4,e.Ql()];case 5:o=c.sent(),c.label=6;case 6:return o?[4,i.rl(o)]:[3,10];case 7:return(s=c.sent())&&n.Ul(s),[4,e.Ql()];case 8:o=c.sent(),c.label=9;case 9:return[3,6];case 10:return[4,i.complete()];case 11:return a=c.sent(),[4,GC(t,a.Go,void 0)];case 12:return c.sent(),[4,function(t,e){var n=wy(t);return n.persistence.runTransaction("Save bundle","readwrite",function(t){return n.wo.ks(t,e)})}(t.bh,r)];case 13:return c.sent(),n.ql(a.progress),[3,15];case 14:return my("SyncEngine","Loading bundle failed with "+(u=c.sent())),n.Kl(u),[3,15];case 15:return[2]}})})})(r,e,n).then(function(){r.Vl.Wa()})}var aT=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(ly.b)(this,void 0,void 0,function(){return Object(ly.d)(this,function(e){switch(e.label){case 0:return this.Qt=NS(t.yu.t),this.Vl=this.Wl(t),this.persistence=this.jl(t),[4,this.persistence.start()];case 1:return e.sent(),this.Gl=this.zl(t),this.bh=this.Hl(t),[2]}})})},t.prototype.zl=function(t){return null},t.prototype.Hl=function(t){return zO(this.persistence,new HO,t.Jl,this.Qt)},t.prototype.jl=function(t){return new fS(pS.ia,this.Qt)},t.prototype.Wl=function(t){return new SS},t.prototype.terminate=function(){return Object(ly.b)(this,void 0,void 0,function(){return Object(ly.d)(this,function(t){switch(t.label){case 0:return this.Gl&&this.Gl.stop(),[4,this.Vl.ko()];case 1:return t.sent(),[4,this.persistence.ko()];case 2:return t.sent(),[2]}})})},t}(),uT=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Yl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(ly.c)(e,t),e.prototype.initialize=function(e){return Object(ly.b)(this,void 0,void 0,function(){return Object(ly.d)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,nS(this.bh)];case 2:return n.sent(),[4,this.Yl.initialize(this,e)];case 3:return n.sent(),[4,oT(this.Yl._a)];case 4:return n.sent(),[4,eC(this.Yl.yl)];case 5:return n.sent(),[2]}})})},e.prototype.Hl=function(t){return zO(this.persistence,new HO,t.Jl,this.Qt)},e.prototype.zl=function(t){return new OO(this.persistence.Ti.lr,t._s)},e.prototype.jl=function(t){var e=VO(t.yu.t,t.yu.persistenceKey),n=void 0!==this.cacheSizeBytes?oO.Ys(this.cacheSizeBytes):oO.ti;return new DO(this.synchronizeTabs,e,t.clientId,n,t._s,kS(),AS(),this.Qt,this.Vl,!!this.forceOwnership)},e.prototype.Wl=function(t){return new SS},e}(aT),cT=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Yl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(ly.c)(e,t),e.prototype.initialize=function(e){return Object(ly.b)(this,void 0,void 0,function(){var n,r=this;return Object(ly.d)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Yl._a,this.Vl instanceof OS?(this.Vl._a={eu:XC.bind(null,n),nu:nT.bind(null,n),su:rT.bind(null,n),Uo:eT.bind(null,n),tu:YC.bind(null,n)},[4,this.Vl.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.Ro(function(t){return Object(ly.b)(r,void 0,void 0,function(){return Object(ly.d)(this,function(e){switch(e.label){case 0:return[4,JC(this.Yl._a,t)];case 1:return e.sent(),this.Gl&&(t&&!this.Gl.Er?this.Gl.start(this.bh):t||this.Gl.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Wl=function(t){var e=kS();if(!OS.Kn(e))throw new jy(xy.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=VO(t.yu.t,t.yu.persistenceKey);return new OS(e,t._s,n,t.clientId,t.Jl)},e}(uT),lT=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(ly.b)(this,void 0,void 0,function(){var n=this;return Object(ly.d)(this,function(r){switch(r.label){case 0:return this.bh?[3,2]:(this.bh=t.bh,this.Vl=t.Vl,this.Sh=this.Xl(e),this.yl=this.Zl(e),this.gl=this.t_(e),this._a=this.e_(e,!t.synchronizeTabs),this.Vl.fa=function(t){return RC(n._a,t,1)},this.yl.Dh.n_=KC.bind(null,this._a),[4,uC(this.yl,this._a.Ml)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.t_=function(t){return new fC},t.prototype.Xl=function(t){var e=NS(t.yu.t),n=new jS(t.yu);return function(t,e,n){return new LS(t,e,n)}(t.credentials,n,e)},t.prototype.Zl=function(t){var e,n,r,i,o,s=this;return e=this.bh,n=this.Sh,r=t._s,i=function(t){return RC(s._a,t,0)},o=TS.Kn()?new TS:new CS,new FS(e,n,r,i,o)},t.prototype.e_=function(t,e){return function(t,e,n,r,i,o,s){var a=new xC(t,e,n,r,i,o);return s&&(a.kl=!0),a}(this.bh,this.yl,this.gl,this.Vl,t.Jl,t.pl,e)},t.prototype.terminate=function(){return function(t){return Object(ly.b)(this,void 0,void 0,function(){var e;return Object(ly.d)(this,function(n){switch(n.label){case 0:return e=wy(t),gy("RemoteStore","RemoteStore shutting down."),e.Nh.add(5),[4,qS(e)];case 1:return n.sent(),e.Fh.ko(),e.Oh.set("Unknown"),[2]}})})}(this.yl)},t}();function hT(t,e){void 0===e&&(e=10240);var n=0;return{read:function(){return Object(ly.b)(this,void 0,void 0,function(){var r;return Object(ly.d)(this,function(i){return n<t.byteLength?(r={value:t.slice(n,n+e),done:!1},[2,(n+=e,r)]):[2,{done:!0}]})})},cancel:function(){return Object(ly.b)(this,void 0,void 0,function(){return Object(ly.d)(this,function(t){return[2]})})},releaseLock:function(){}}}var fT=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.s_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.s_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.i_=function(){this.muted=!0},t.prototype.s_=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),dT=function(){function t(t,e){var n=this;this.r_=t,this.Qt=e,this.metadata=new tE,this.buffer=new Uint8Array,this.o_=new TextDecoder("utf-8"),this.c_().then(function(t){t&&t.sl()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}return t.prototype.close=function(){return this.r_.cancel()},t.prototype.getMetadata=function(){return Object(ly.b)(this,void 0,void 0,function(){return Object(ly.d)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Ql=function(){return Object(ly.b)(this,void 0,void 0,function(){return Object(ly.d)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.c_())]}})})},t.prototype.c_=function(){return Object(ly.b)(this,void 0,void 0,function(){var t,e,n,r;return Object(ly.d)(this,function(i){switch(i.label){case 0:return[4,this.a_()];case 1:return null===(t=i.sent())?[2,null]:(e=this.o_.decode(t),n=Number(e),isNaN(n)&&this.u_("length string ("+e+") is not valid number"),[4,this.h_(n)]);case 2:return r=i.sent(),[2,new bC(JSON.parse(r),t.length+n)]}})})},t.prototype.l_=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.a_=function(){return Object(ly.b)(this,void 0,void 0,function(){var t,e;return Object(ly.d)(this,function(n){switch(n.label){case 0:return this.l_()<0?[4,this.__()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.l_())<0&&this.u_("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.h_=function(t){return Object(ly.b)(this,void 0,void 0,function(){var e;return Object(ly.d)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.__()]:[3,3];case 1:n.sent()&&this.u_("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.o_.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.u_=function(t){throw this.r_.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.__=function(){return Object(ly.b)(this,void 0,void 0,function(){var t,e;return Object(ly.d)(this,function(n){switch(n.label){case 0:return[4,this.r_.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})},t}(),pT=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new jy(xy.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.f_=new By(t)}return t.prototype.isEqual=function(t){return this.f_.isEqual(t.f_)},t}(),gT=function(t){this._methodName=t},vT=function(t){this.d_=t};function mT(t,e,n){if(!n)throw new jy(xy.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function yT(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new jy(xy.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function bT(t,e,n,r){if(!0===e&&!0===r)throw new jy(xy.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function _T(t){if(!zy.wt(t))throw new jy(xy.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function wT(t){if(zy.wt(t))throw new jy(xy.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function ET(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":by()}function OT(t,e){if("_delegate"in t&&(t=t.d_),!(t instanceof e)){if(e.name===t.constructor.name)throw new jy(xy.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=ET(t);throw new jy(xy.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function ST(t,e){if(e<=0)throw new jy(xy.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var CT=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new jy(xy.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new jy(xy.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,bT("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),TT=new Map,IT=function(){function t(t,e){this.w_="(lite)",this.E_=new CT({}),this.T_=!1,t instanceof fy?(this.I_=t,this.m_=new Py):(this.A_=t,this.I_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new jy(xy.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fy(t.options.projectId)}(t),this.m_=new Ry(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.A_)throw new jy(xy.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.A_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"R_",{get:function(){return this.T_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"P_",{get:function(){return void 0!==this.y_},enumerable:!1,configurable:!0}),t.prototype.g_=function(t){if(this.T_)throw new jy(xy.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.E_=new CT(t),void 0!==t.credentials&&(this.m_=function(t){if(!t)return new Py;switch(t.type){case"gapi":var e=t.client;return _y(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new My(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new jy(xy.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.V_=function(){return this.E_},t.prototype.p_=function(){return this.T_=!0,this.E_},t.prototype._delete=function(){return this.y_||(this.y_=this.b_()),this.y_},t.prototype.toJSON=function(){return{app:this.A_,t:this.I_,settings:this.E_}},t.prototype.b_=function(){return(t=TT.get(this))&&(gy("ComponentProvider","Removing Datastore"),TT.delete(this),t.terminate()),Promise.resolve();var t},t}(),xT=function(){function t(t,e,n){this.v_=e,this.S_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"D_",{get:function(){return this.S_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.S_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new kT(this.firestore,this.v_,this.S_.path.X())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.S_)},t}(),jT=function(){function t(t,e,n){this.v_=e,this.C_=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.C_)},t}(),kT=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Kb(r))||this).firestore=e,i.D_=r,i.type="collection",i}return Object(ly.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.C_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.C_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.D_.X();return t.et()?null:new xT(this.firestore,null,new zy(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.D_)},e}(jT);function AT(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof vT&&(t=t.d_),mT("collection","path",e),t instanceof IT)return wT(n=qy.ot.apply(qy,Object(ly.g)([e],r))),new kT(t,null,n);if(!(t instanceof xT||t instanceof kT))throw new jy(xy.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return wT(n=qy.ot.apply(qy,Object(ly.g)([t.path],r)).child(qy.ot(e))),new kT(t.firestore,null,n)}function NT(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof vT&&(t=t.d_),1===arguments.length&&(e=Oy.u()),mT("doc","path",e),t instanceof IT)return _T(n=qy.ot.apply(qy,Object(ly.g)([e],r))),new xT(t,null,new zy(n));if(!(t instanceof xT||t instanceof kT))throw new jy(xy.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return _T(n=t.D_.child(qy.ot.apply(qy,Object(ly.g)([e],r)))),new xT(t.firestore,t instanceof kT?t.v_:null,new zy(n))}function PT(t,e){return t instanceof vT&&(t=t.d_),e instanceof vT&&(e=e.d_),(t instanceof xT||t instanceof kT)&&(e instanceof xT||e instanceof kT)&&t.firestore===e.firestore&&t.path===e.path&&t.v_===e.v_}function RT(t,e){return t instanceof vT&&(t=t.d_),e instanceof vT&&(e=e.d_),t instanceof jT&&e instanceof jT&&t.firestore===e.firestore&&n_(t.C_,e.C_)&&t.v_===e.v_}var DT=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new jy(xy.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new jy(xy.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.x_=t,this.N_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.N_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.x_===t.x_&&this.N_===t.N_},t.prototype.toJSON=function(){return{latitude:this.x_,longitude:this.N_}},t.prototype.U=function(t){return Sy(this.x_,t.x_)||Sy(this.N_,t.N_)},t}(),MT=/^__.*__$/,LT=function(){function t(t,e,n){this.data=t,this.Gt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return null!==this.Gt?new D_(t,this.data,this.Gt,e,this.fieldTransforms):new R_(t,this.data,e,this.fieldTransforms)},t}(),VT=function(){function t(t,e,n){this.data=t,this.Gt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return new D_(t,this.data,this.Gt,e,this.fieldTransforms)},t}();function FT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw by()}}var UT=function(){function t(t,e,n,r,i,o){this.settings=t,this.t=e,this.Qt=n,this.ignoreUndefinedProperties=r,void 0===i&&this.O_(),this.fieldTransforms=i||[],this.Gt=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k_",{get:function(){return this.settings.k_},enumerable:!1,configurable:!0}),t.prototype.M_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.t,this.Qt,this.ignoreUndefinedProperties,this.fieldTransforms,this.Gt)},t.prototype.L_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.q_(t),r},t.prototype.U_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.O_(),r},t.prototype.Q_=function(t){return this.M_({path:void 0,B_:!0})},t.prototype.K_=function(t){return sI(t,this.settings.methodName,this.settings.W_||!1,this.path,this.settings.j_)},t.prototype.contains=function(t){return void 0!==this.Gt.find(function(e){return t.nt(e)})||void 0!==this.fieldTransforms.find(function(e){return t.nt(e.field)})},t.prototype.O_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.q_(this.path.get(t))},t.prototype.q_=function(t){if(0===t.length)throw this.K_("Document fields must not be empty");if(FT(this.k_)&&MT.test(t))throw this.K_('Document fields cannot begin and end with "__"')},t}(),qT=function(){function t(t,e,n){this.t=t,this.ignoreUndefinedProperties=e,this.Qt=n||NS(t)}return t.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new UT({k_:t,methodName:e,j_:n,path:By.ct(),B_:!1,W_:r},this.t,this.Qt,this.ignoreUndefinedProperties)},t}();function HT(t){var e=t.p_(),n=NS(t.I_);return new qT(t.I_,!!e.ignoreUndefinedProperties,n)}function BT(t,e,n,r,i,o){void 0===o&&(o={});var s=t.G_(o.merge||o.mergeFields?2:0,e,n,i);nI("Data must be an object, but it was:",s,r);var a,u,c=tI(r,s);if(o.merge)a=new Qy(s.Gt),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=rI(e,f[h],n);if(!s.contains(d))throw new jy(xy.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");aI(l,d)||l.push(d)}a=new Qy(l),u=s.fieldTransforms.filter(function(t){return a.Tt(t.field)})}else a=null,u=s.fieldTransforms;return new LT(new yb(c),a,u)}var zT=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ly.c)(e,t),e.prototype.z_=function(t){if(2!==t.k_)throw t.K_(1===t.k_?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.Gt.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(gT);function WT(t,e,n){return new UT({k_:3,j_:e.settings.j_,methodName:t._methodName,B_:n},e.t,e.Qt,e.ignoreUndefinedProperties)}var GT=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ly.c)(e,t),e.prototype.z_=function(t){return new S_(t.path,new v_)},e.prototype.isEqual=function(t){return t instanceof e},e}(gT),KT=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return Object(ly.c)(e,t),e.prototype.z_=function(t){var e=WT(this,t,!0),n=this.H_.map(function(t){return ZT(t,e)}),r=new m_(n);return new S_(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(gT),QT=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return Object(ly.c)(e,t),e.prototype.z_=function(t){var e=WT(this,t,!0),n=this.H_.map(function(t){return ZT(t,e)}),r=new b_(n);return new S_(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(gT),$T=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).J_=n,r}return Object(ly.c)(e,t),e.prototype.z_=function(t){var e=new w_(t.Qt,h_(t.Qt,this.J_));return new S_(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(gT);function YT(t,e,n,r){var i=t.G_(1,e,n);nI("Data must be an object, but it was:",i,r);var o=[],s=new bb;Gy(r,function(t,r){var a=oI(e,t,n);r instanceof vT&&(r=r.d_);var u=i.U_(a);if(r instanceof zT)o.push(a);else{var c=ZT(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new Qy(o);return new VT(s.Pt(),a,i.fieldTransforms)}function XT(t,e,n,r,i,o){var s=t.G_(1,e,n),a=[rI(e,r,n)],u=[i];if(o.length%2!=0)throw new jy(xy.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(rI(e,o[c])),u.push(o[c+1]);for(var l=[],h=new bb,f=a.length-1;f>=0;--f)if(!aI(l,a[f])){var d=a[f],p=u[f];p instanceof vT&&(p=p.d_);var g=s.U_(d);if(p instanceof zT)l.push(d);else{var v=ZT(p,g);null!=v&&(l.push(d),h.set(d,v))}}var m=new Qy(l);return new VT(h.Pt(),m,s.fieldTransforms)}function JT(t,e,n,r){return void 0===r&&(r=!1),ZT(n,t.G_(r?4:3,e))}function ZT(t,e){if(t instanceof vT&&(t=t.d_),eI(t))return nI("Unsupported field value:",e,t),tI(t,e);if(t instanceof gT)return function(t,e){if(!FT(e.k_))throw e.K_(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.K_(t._methodName+"() is not currently supported inside arrays");var n=t.z_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.Gt.push(e.path),t instanceof Array){if(e.settings.B_&&4!==e.k_)throw e.K_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=ZT(o[i],e.Q_(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof vT&&(t=t.d_),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return h_(e.Qt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Vy.fromDate(t);return{timestampValue:Sw(e.Qt,n)}}if(t instanceof Vy)return n=new Vy(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Sw(e.Qt,n)};if(t instanceof DT)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ky)return{bytesValue:Cw(e.Qt,t.I)};if(t instanceof xT){var r=t.firestore.I_;if(!r.isEqual(n=e.t))throw e.K_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:xw(t.firestore.I_||e.t,t.S_.path)}}throw e.K_("Unsupported field value: "+ET(t))}(t,e)}function tI(t,e){var n={};return Ky(t)?e.path&&e.path.length>0&&e.Gt.push(e.path):Gy(t,function(t,r){var i=ZT(r,e.L_(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function eI(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Vy||t instanceof DT||t instanceof ky||t instanceof xT||t instanceof gT)}function nI(t,e,n){if(!eI(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=ET(n);throw e.K_("an object"===r?t+" a custom object":t+" "+r)}}function rI(t,e,n){if(e instanceof vT&&(e=e.d_),e instanceof pT)return e.f_;if("string"==typeof e)return oI(t,e);throw sI("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var iI=new RegExp("[~\\*/\\[\\]]");function oI(t,e,n){if(e.search(iI)>=0)throw sI("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(pT.bind.apply(pT,Object(ly.g)([void 0],e.split("."))))).f_}catch(r){throw sI("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function sI(t,e,n,r,i){var o=r&&!r.et(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new jy(xy.INVALID_ARGUMENT,(a+=". ")+t+u)}function aI(t,e){return t.some(function(t){return t.isEqual(e)})}var uI=function(){function t(t){this.Sh=t,this.Y_=new Map,this.mutations=[],this.X_=!1,this.Z_=null,this.tf=new Set}return t.prototype.ef=function(t){return Object(ly.b)(this,void 0,void 0,function(){var e,n=this;return Object(ly.d)(this,function(r){switch(r.label){case 0:if(this.nf(),this.mutations.length>0)throw new jy(xy.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(ly.b)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(ly.d)(this,function(u){switch(u.label){case 0:return n=wy(t),r=Rw(n.Qt)+"/documents",i={documents:e.map(function(t){return kw(n.Qt,t)})},[4,n.Du("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){_y(!!e.found);var n=Aw(t,e.found.name),r=Iw(e.found.updateTime),i=new yb({mapValue:{fields:e.found.fields}});return new Eb(n,r,i,{})}(t,e):"missing"in e?function(t,e){_y(!!e.missing),_y(!!e.readTime);var n=Aw(t,e.missing),r=Iw(e.readTime);return new Ob(n,r)}(t,e):by()}(n.Qt,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());_y(!!e),a.push(e)}),a)]}})})}(this.Sh,t)];case 1:return[2,((e=r.sent()).forEach(function(t){t instanceof Ob||t instanceof Eb?n.sf(t):by()}),e)]}})})},t.prototype.set=function(t,e){this.write(e.F_(t,this.jt(t))),this.tf.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.F_(t,this.rf(t)))}catch(t){this.Z_=t}this.tf.add(t.toString())},t.prototype.delete=function(t){this.write(new H_(t,this.jt(t))),this.tf.add(t.toString())},t.prototype.commit=function(){return Object(ly.b)(this,void 0,void 0,function(){var t,e=this;return Object(ly.d)(this,function(n){switch(n.label){case 0:if(this.nf(),this.Z_)throw this.Z_;return t=this.Y_,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=zy._t(n);e.mutations.push(new B_(r,e.jt(r)))}),[4,function(t,e){return Object(ly.b)(this,void 0,void 0,function(){var n,r,i;return Object(ly.d)(this,function(o){switch(o.label){case 0:return n=wy(t),r=Rw(n.Qt)+"/documents",i={writes:e.map(function(t){return Vw(n.Qt,t)})},[4,n.pu("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.Sh,this.mutations)];case 1:return n.sent(),this.X_=!0,[2]}})})},t.prototype.sf=function(t){var e;if(t instanceof Eb)e=t.version;else{if(!(t instanceof Ob))throw by();e=Fy.min()}var n=this.Y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new jy(xy.ABORTED,"Document version changed between two reads.")}else this.Y_.set(t.key.toString(),e)},t.prototype.jt=function(t){var e=this.Y_.get(t.toString());return!this.tf.has(t.toString())&&e?T_.updateTime(e):T_.Kt()},t.prototype.rf=function(t){var e=this.Y_.get(t.toString());if(!this.tf.has(t.toString())&&e){if(e.isEqual(Fy.min()))throw new jy(xy.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return T_.updateTime(e)}return T_.exists(!0)},t.prototype.write=function(t){this.nf(),this.mutations.push(t)},t.prototype.nf=function(){},t}(),cI=function(){function t(t,e,n,r){this._s=t,this.Sh=e,this.updateFunction=n,this.Es=r,this.cf=5,this.Gu=new PS(this._s,"transaction_retry")}return t.prototype.run=function(){this.af()},t.prototype.af=function(){var t=this;this.Gu.Lu(function(){return Object(ly.b)(t,void 0,void 0,function(){var t,e,n=this;return Object(ly.d)(this,function(r){return t=new uI(this.Sh),(e=this.uf(t))&&e.then(function(e){n._s.Ps(function(){return t.commit().then(function(){n.Es.resolve(e)}).catch(function(t){n.hf(t)})})}).catch(function(t){n.hf(t)}),[2]})})})},t.prototype.uf=function(t){try{var e=this.updateFunction(t);return!nb(e)&&e.catch&&e.then?e:(this.Es.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Es.reject(t),null}},t.prototype.hf=function(t){var e=this;this.cf>0&&this.lf(t)?(this.cf-=1,this._s.Ps(function(){return e.af(),Promise.resolve()})):this.Es.reject(t)},t.prototype.lf=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!W_(e)}return!1},t}(),lI=function(){function t(t,e,n){var r=this;this.credentials=t,this._s=e,this.yu=n,this.user=Ay.UNAUTHENTICATED,this.clientId=Oy.u(),this._f=function(){},this.C=new tE,this.credentials.v(function(t){gy("FirestoreClient","Received user=",t.uid),r.user=t,r._f(t),r.C.resolve()})}return t.prototype.getConfiguration=function(){return Object(ly.b)(this,void 0,void 0,function(){return Object(ly.d)(this,function(t){switch(t.label){case 0:return[4,this.C.promise];case 1:return[2,(t.sent(),{_s:this._s,yu:this.yu,clientId:this.clientId,credentials:this.credentials,Jl:this.user,pl:100})]}})})},t.prototype.ff=function(t){var e=this;this._f=t,this.C.promise.then(function(){return e._f(e.user)})},t.prototype.df=function(){if(this._s.wf)throw new jy(xy.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this._s.Ef();var e=new tE;return this._s.Tf(function(){return Object(ly.b)(t,void 0,void 0,function(){var t,n;return Object(ly.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.If?[4,this.If.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.mf?[4,this.mf.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.S(),e.resolve(),[3,6];case 5:return t=r.sent(),n=fE(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function hI(t,e){return Object(ly.b)(this,void 0,void 0,function(){var n,r,i=this;return Object(ly.d)(this,function(o){switch(o.label){case 0:return t._s.Af(),gy("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.Jl,t.ff(function(n){r.isEqual(n)||(r=n,t._s.po(function(){return Object(ly.b)(i,void 0,void 0,function(){return Object(ly.d)(this,function(t){switch(t.label){case 0:return[4,WO(e.bh,n)];case 1:return t.sent(),[2]}})})}))}),e.persistence.Po(function(){return t.terminate()}),t.mf=e,[2]}})})}function fI(t,e){return Object(ly.b)(this,void 0,void 0,function(){var n,r;return Object(ly.d)(this,function(i){switch(i.label){case 0:return t._s.Af(),[4,dI(t)];case 1:return n=i.sent(),gy("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.ff(function(n){return t._s.po(function(){return function(t,e){return Object(ly.b)(this,void 0,void 0,function(){var n,r;return Object(ly.d)(this,function(i){switch(i.label){case 0:return(n=wy(t))._s.Af(),gy("RemoteStore","RemoteStore received new credentials"),r=QS(n),n.Nh.add(3),[4,qS(n)];case 1:return i.sent(),r&&n.Oh.set("Unknown"),[4,n.Dh.n_(e)];case 2:return i.sent(),n.Nh.delete(3),[4,US(n)];case 3:return i.sent(),[2]}})})}(e.yl,n)})}),t.If=e,[2]}})})}function dI(t){return Object(ly.b)(this,void 0,void 0,function(){return Object(ly.d)(this,function(e){switch(e.label){case 0:return t.mf?[3,2]:(gy("FirestoreClient","Using default OfflineComponentProvider"),[4,hI(t,new aT)]);case 1:e.sent(),e.label=2;case 2:return[2,t.mf]}})})}function pI(t){return Object(ly.b)(this,void 0,void 0,function(){return Object(ly.d)(this,function(e){switch(e.label){case 0:return t.If?[3,2]:(gy("FirestoreClient","Using default OnlineComponentProvider"),[4,fI(t,new lT)]);case 1:e.sent(),e.label=2;case 2:return[2,t.If]}})})}function gI(t){return dI(t).then(function(t){return t.persistence})}function vI(t){return dI(t).then(function(t){return t.bh})}function mI(t){return pI(t).then(function(t){return t.yl})}function yI(t){return pI(t).then(function(t){return t._a})}function bI(t){return Object(ly.b)(this,void 0,void 0,function(){var e,n;return Object(ly.d)(this,function(r){switch(r.label){case 0:return[4,pI(t)];case 1:return e=r.sent(),[2,((n=e.gl).jh=jC.bind(null,e._a),n.Hh=AC.bind(null,e._a),n)]}})})}function _I(t,e,n){var r=this;void 0===n&&(n={});var i=new tE;return t._s.Ps(function(){return Object(ly.b)(r,void 0,void 0,function(){var r;return Object(ly.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new fT({next:function(o){e.Ps(function(){return pC(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new jy(xy.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new jy(xy.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new yC(Kb(n.path),o,{includeMetadataChanges:!0,nl:!0});return dC(t,s)},[4,bI(t)];case 1:return[2,r.apply(void 0,[o.sent(),t._s,e,n,i])]}})})}),i.promise}function wI(t,e,n){var r=this;void 0===n&&(n={});var i=new tE;return t._s.Ps(function(){return Object(ly.b)(r,void 0,void 0,function(){var r;return Object(ly.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new fT({next:function(n){e.Ps(function(){return pC(t,s)}),n.fromCache&&"server"===r.source?i.reject(new jy(xy.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new yC(n,o,{includeMetadataChanges:!0,nl:!0});return dC(t,s)},[4,bI(t)];case 1:return[2,r.apply(void 0,[o.sent(),t._s,e,n,i])]}})})}),i.promise}var EI=function(){function t(){var t=this;this.Rf=Promise.resolve(),this.Pf=[],this.yf=!1,this.gf=[],this.Vf=null,this.pf=!1,this.bf=[],this.Gu=new PS(this,"async_queue_retry"),this.vf=function(){var e=AS();e&&gy("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Gu.qu()};var e=AS();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.vf)}return Object.defineProperty(t.prototype,"wf",{get:function(){return this.yf},enumerable:!1,configurable:!0}),t.prototype.Ps=function(t){this.enqueue(t)},t.prototype.Tf=function(t){this.Sf(),this.Df(t)},t.prototype.Ef=function(){if(!this.yf){this.yf=!0;var t=AS();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.vf)}},t.prototype.enqueue=function(t){return this.Sf(),this.yf?new Promise(function(t){}):this.Df(t)},t.prototype.po=function(t){var e=this;this.Ps(function(){return e.Pf.push(t),e.Cf()})},t.prototype.Cf=function(){return Object(ly.b)(this,void 0,void 0,function(){var t,e=this;return Object(ly.d)(this,function(n){switch(n.label){case 0:if(0===this.Pf.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Pf[0]()];case 2:return n.sent(),this.Pf.shift(),this.Gu.reset(),[3,4];case 3:if(!sE(t=n.sent()))throw t;return gy("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Pf.length>0&&this.Gu.Lu(function(){return e.Cf()}),n.label=5;case 5:return[2]}})})},t.prototype.Df=function(t){var e=this,n=this.Rf.then(function(){return e.pf=!0,t().catch(function(t){throw e.Vf=t,e.pf=!1,vy("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.pf=!1,t})});return this.Rf=n,n},t.prototype.Tr=function(t,e,n){var r=this;this.Sf(),this.bf.indexOf(t)>-1&&(e=0);var i=hE.Ts(this,t,e,n,function(t){return r.xf(t)});return this.gf.push(i),i},t.prototype.Sf=function(){this.Vf&&by()},t.prototype.Af=function(){},t.prototype.Nf=function(){return Object(ly.b)(this,void 0,void 0,function(){var t;return Object(ly.d)(this,function(e){switch(e.label){case 0:return[4,t=this.Rf];case 1:e.sent(),e.label=2;case 2:if(t!==this.Rf)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.$f=function(t){for(var e=0,n=this.gf;e<n.length;e++)if(n[e].fs===t)return!0;return!1},t.prototype.Ff=function(t){var e=this;return this.Nf().then(function(){e.gf.sort(function(t,e){return t.ds-e.ds});for(var n=0,r=e.gf;n<r.length;n++){var i=r[n];if(i.Rs(),"all"!==t&&i.fs===t)break}return e.Nf()})},t.prototype.Of=function(t){this.bf.push(t)},t.prototype.xf=function(t){var e=this.gf.indexOf(t);this.gf.splice(e,1)},t}();function OI(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var SI=function(){function t(){this.kf={},this.Mf=new tE,this.Lf={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return t.prototype.onProgress=function(t,e,n){this.kf={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this.Mf.promise.catch(t)},t.prototype.then=function(t,e){return this.Mf.promise.then(t,e)},t.prototype.ql=function(t){this.Ul(t),this.kf.complete&&this.kf.complete(),this.Mf.resolve(t)},t.prototype.Kl=function(t){this.Lf.taskState="Error",this.kf.next&&this.kf.next(this.Lf),this.kf.error&&this.kf.error(t),this.Mf.reject(t)},t.prototype.Ul=function(t){this.Lf=t,this.kf.next&&this.kf.next(t)},t}(),CI=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Bf=new EI,r.w_="name"in e?e.name:"[DEFAULT]",r}return Object(ly.c)(e,t),e.prototype.b_=function(){return this.qf||II(this),this.qf.terminate()},e}(IT);function TI(t){return t.qf||II(t),t.qf.df(),t.qf}function II(t){var e=t.p_(),n=function(t,e,n){return new hy(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.I_,t.w_,e);t.qf=new lI(t.m_,t.Bf,n)}function xI(t,e,n){var r=this,i=new tE;return t._s.enqueue(function(){return Object(ly.b)(r,void 0,void 0,function(){var r;return Object(ly.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,hI(t,n)];case 1:return o.sent(),[4,fI(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===xy.FAILED_PRECONDITION||t.code===xy.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function jI(t){if(t.R_||t.P_)throw new jy(xy.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var kI=function(){function t(){}return t.prototype.Uf=function(t,e){switch(void 0===e&&(e="none"),ob(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Xy(t.integerValue||t.doubleValue);case 3:return this.Qf(t.timestampValue);case 4:return this.Kf(t,e);case 5:return t.stringValue;case 6:return this.Wf(Jy(t.bytesValue));case 7:return this.jf(t.referenceValue);case 8:return this.Gf(t.geoPointValue);case 9:return this.zf(t.arrayValue,e);case 10:return this.Hf(t.mapValue,e);default:throw by()}},t.prototype.Hf=function(t,e){var n=this,r={};return Gy(t.fields||{},function(t,i){r[t]=n.Uf(i,e)}),r},t.prototype.Gf=function(t){return new DT(Xy(t.latitude),Xy(t.longitude))},t.prototype.zf=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.Uf(t,e)})},t.prototype.Kf=function(t,e){switch(e){case"previous":var n=tb(t);return null==n?null:this.Uf(n,e);case"estimate":return this.Qf(eb(t));default:return null}},t.prototype.Qf=function(t){var e=Yy(t);return new Vy(e.seconds,e.nanos)},t.prototype.Jf=function(t,e){var n=qy.ot(t);_y(Zw(n));var r=new fy(n.get(1),n.get(3)),i=new zy(n.Y(5));return r.isEqual(e)||vy("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),AI=function(){function t(t,e,n,r,i){this.Yf=t,this.Xf=e,this.S_=n,this.Zf=r,this.v_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new xT(this.Yf,this.v_,this.S_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.Zf},t.prototype.data=function(){if(this.Zf){if(this.v_){var t=new NI(this.Yf,this.Xf,this.S_,this.Zf,null);return this.v_.fromFirestore(t)}return this.Xf.Uf(this.Zf.bt())}},t.prototype.get=function(t){if(this.Zf){var e=this.Zf.data().field(PI("DocumentSnapshot.get",t));if(null!==e)return this.Xf.Uf(e)}},t}(),NI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ly.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(AI);function PI(t,e){return"string"==typeof e?oI(t,e):e instanceof vT?e.d_.f_:e.f_}function RI(t){if($b(t)&&0===t.xt.length)throw new jy(xy.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var DI=function(){};function MI(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o.td(t)}return t}var LI=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).ed=e,i.nd=n,i.sd=r,i.type="where",i}return Object(ly.c)(e,t),e.prototype.td=function(t){var e=HT(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.ut()){if("array-contains"===o||"array-contains-any"===o)throw new jy(xy.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){zI(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(BI(r,t,l[c]));a={arrayValue:{values:u}}}else a=BI(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||zI(s,o),a=JT(n,"where",s,"in"===o||"not-in"===o);var h=kb.create(i,o,a);return function(t,e){if(e.Ct()){var n=Xb(t);if(null!==n&&!n.isEqual(e.field))throw new jy(xy.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Yb(t);null!==r&&WI(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new jy(xy.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t.C_,0,e,t.firestore.I_,this.ed,this.nd,this.sd);return new jT(t.firestore,t.v_,function(t,e){var n=t.filters.concat([e]);return new Wb(t.path,t.collectionGroup,t.xt.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,n))},e}(DI),VI=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ed=e,r.rd=n,r.type="orderBy",r}return Object(ly.c)(e,t),e.prototype.td=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new jy(xy.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new jy(xy.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new qb(e,n);return function(t,e){if(null===Yb(t)){var n=Xb(t);null!==n&&WI(0,n,e.field)}}(t,r),r}(t.C_,this.ed,this.rd);return new jT(t.firestore,t.v_,function(t,e){var n=t.xt.concat([e]);return new Wb(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,e))},e}(DI),FI=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.od=n,i.ad=r,i}return Object(ly.c)(e,t),e.prototype.td=function(t){return new jT(t.firestore,t.v_,e_(t.C_,this.od,this.ad))},e}(DI),UI=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ud=n,i.hd=r,i}return Object(ly.c)(e,t),e.prototype.td=function(t){var e=HI(t,this.type,this.ud,this.hd);return new jT(t.firestore,t.v_,function(t,e){return new Wb(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t.C_,e))},e}(DI),qI=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ud=n,i.hd=r,i}return Object(ly.c)(e,t),e.prototype.td=function(t){var e=HI(t,this.type,this.ud,this.hd);return new jT(t.firestore,t.v_,function(t,e){return new Wb(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t.C_,e))},e}(DI);function HI(t,e,n,r){if(n[0]instanceof vT&&(n[0]=n[0].d_),n[0]instanceof AI)return function(t,e,n,r,i){if(!r)throw new jy(xy.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Zb(t);s<a.length;s++){var u=a[s];if(u.field.ut())o.push(fb(e,r.key));else{var c=r.field(u.field);if(Zy(c))throw new jy(xy.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.rt();throw new jy(xy.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Fb(o,i)}(t.C_,t.firestore.I_,e,n[0].Zf,r);var i=HT(t.firestore);return function(t,e,n,r,i,o){var s=t.xt;if(i.length>s.length)throw new jy(xy.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.ut()){if("string"!=typeof c)throw new jy(xy.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Jb(t)&&-1!==c.indexOf("/"))throw new jy(xy.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(qy.ot(c));if(!zy.wt(l))throw new jy(xy.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new zy(l);a.push(fb(e,h))}else{var f=JT(n,r,c);a.push(f)}}return new Fb(a,o)}(t.C_,t.firestore.I_,i,e,n,r)}function BI(t,e,n){if(n instanceof vT&&(n=n.d_),"string"==typeof n){if(""===n)throw new jy(xy.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Jb(e)&&-1!==n.indexOf("/"))throw new jy(xy.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(qy.ot(n));if(!zy.wt(r))throw new jy(xy.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return fb(t,new zy(r))}if(n instanceof xT)return fb(t,n.S_);throw new jy(xy.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+ET(n)+".")}function zI(t,e){if(!Array.isArray(t)||0===t.length)throw new jy(xy.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new jy(xy.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function WI(t,e,n){if(!n.isEqual(e))throw new jy(xy.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function GI(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var KI=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(ly.c)(e,t),e.prototype.Wf=function(t){return new ky(t)},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return new xT(this.firestore,null,e)},e}(kI),QI=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),$I=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this).Yf=e,a.ld=e,a.metadata=o,a}return Object(ly.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this.Zf){if(this.v_){var e=new YI(this.Yf,this.Xf,this.S_,this.Zf,this.metadata,null);return this.v_.fromFirestore(e,t)}return this.Xf.Uf(this.Zf.bt(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this.Zf){var n=this.Zf.data().field(PI("DocumentSnapshot.get",t));if(null!==n)return this.Xf.Uf(n,e.serverTimestamps)}},e}(AI),YI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ly.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}($I),XI=function(){function t(t,e,n,r){this.Yf=t,this.Xf=e,this._d=r,this.metadata=new QI(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._d.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._d.docs.forEach(function(r){t.call(e,new YI(n.Yf,n.Xf,r.key,r,new QI(n._d.De.has(r.key),n._d.fromCache),n.query.v_))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._d.xe)throw new jy(xy.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.fd&&this.dd===e||(this.fd=function(t,e){if(t._d.Se.et()){var n=0;return t._d.docChanges.map(function(e){return{type:"added",doc:new YI(t.Yf,t.Xf,e.doc.key,e.doc,new QI(t._d.De.has(e.doc.key),t._d.fromCache),t.query.v_),oldIndex:-1,newIndex:n++}})}var r=t._d.Se;return t._d.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new YI(t.Yf,t.Xf,e.doc.key,e.doc,new QI(t._d.De.has(e.doc.key),t._d.fromCache),t.query.v_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:JI(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this.dd=e),this.fd},t}();function JI(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return by()}}function ZI(t,e){return t instanceof $I&&e instanceof $I?t.Yf===e.Yf&&t.S_.isEqual(e.S_)&&(null===t.Zf?null===e.Zf:t.Zf.isEqual(e.Zf))&&t.v_===e.v_:t instanceof XI&&e instanceof XI&&t.Yf===e.Yf&&RT(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._d.isEqual(e._d)}var tx=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(ly.c)(e,t),e.prototype.Wf=function(t){return new ky(t)},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return new xT(this.firestore,null,e)},e}(kI);function ex(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=OT(t,xT);var o=OT(t.firestore,CI),s=HT(o);return e instanceof vT&&(e=e.d_),rx(o,[("string"==typeof e||e instanceof pT?XT(s,"updateDoc",t.S_,e,n,r):YT(s,"updateDoc",t.S_,e)).F_(t.S_,T_.exists(!0))])}function nx(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof vT&&(t=t.d_);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||OI(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(OI(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof xT)c=OT(t.firestore,CI),l=Kb(t.S_.path),u={next:function(e){i[a]&&i[a](ix(c,t,e))},error:i[a+1],complete:i[a+2]};else{var d=OT(t,jT);c=OT(d.firestore,CI),l=d.C_;var p=new tx(c);u={next:function(t){i[a]&&i[a](new XI(c,p,d,t))},error:i[a+1],complete:i[a+2]},RI(t.C_)}return function(t,e,n,r){var i=this,o=new fT(r),s=new yC(e,o,n);return t._s.Ps(function(){return Object(ly.b)(i,void 0,void 0,function(){var e;return Object(ly.d)(this,function(n){switch(n.label){case 0:return e=dC,[4,bI(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.i_(),t._s.Ps(function(){return Object(ly.b)(i,void 0,void 0,function(){var e;return Object(ly.d)(this,function(n){switch(n.label){case 0:return e=pC,[4,bI(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(TI(c),l,h,u)}function rx(t,e){return function(t,e){var n=this,r=new tE;return t._s.Ps(function(){return Object(ly.b)(n,void 0,void 0,function(){var n;return Object(ly.d)(this,function(i){switch(i.label){case 0:return n=NC,[4,yI(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(TI(t),e)}function ix(t,e,n){var r=n.docs.get(e.S_),i=new tx(t);return new $I(t,i,e.S_,r,new QI(n.hasPendingWrites,n.fromCache),e.v_)}var ox=function(){function t(t,e){this.Yf=t,this.wd=e,this.Ed=[],this.Td=!1,this.Id=HT(t)}return t.prototype.set=function(t,e,n){this.md();var r=sx(t,this.Yf),i=GI(r.v_,e,n),o=BT(this.Id,"WriteBatch.set",r.S_,i,null!==r.v_,n);return this.Ed.push(o.F_(r.S_,T_.Kt())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.md();var o,s=sx(t,this.Yf);return e instanceof vT&&(e=e.d_),o="string"==typeof e||e instanceof pT?XT(this.Id,"WriteBatch.update",s.S_,e,n,r):YT(this.Id,"WriteBatch.update",s.S_,e),this.Ed.push(o.F_(s.S_,T_.exists(!0))),this},t.prototype.delete=function(t){this.md();var e=sx(t,this.Yf);return this.Ed=this.Ed.concat(new H_(e.S_,T_.Kt())),this},t.prototype.commit=function(){return this.md(),this.Td=!0,this.Ed.length>0?this.wd(this.Ed):Promise.resolve()},t.prototype.md=function(){if(this.Td)throw new jy(xy.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function sx(t,e){if(t instanceof vT&&(t=t.d_),t.firestore!==e)throw new jy(xy.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var ax=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Yf=e,r}return Object(ly.c)(e,t),e.prototype.get=function(e){var n=this,r=sx(e,this.Yf),i=new tx(this.Yf);return t.prototype.get.call(this,e).then(function(t){return new $I(n.Yf,i,r.S_,t.Zf,new QI(!1,!1),r.v_)})},e}(function(){function t(t,e){this.Yf=t,this.Ad=e,this.Id=HT(t)}return t.prototype.get=function(t){var e=this,n=sx(t,this.Yf),r=new KI(this.Yf);return this.Ad.ef([n.S_]).then(function(t){if(!t||1!==t.length)return by();var i=t[0];if(i instanceof Ob)return new AI(e.Yf,r,n.S_,null,n.v_);if(i instanceof Eb)return new AI(e.Yf,r,i.key,i,n.v_);throw by()})},t.prototype.set=function(t,e,n){var r=sx(t,this.Yf),i=GI(r.v_,e,n),o=BT(this.Id,"Transaction.set",r.S_,i,null!==r.v_,n);return this.Ad.set(r.S_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=sx(t,this.Yf);return e instanceof vT&&(e=e.d_),o="string"==typeof e||e instanceof pT?XT(this.Id,"Transaction.update",s.S_,e,n,r):YT(this.Id,"Transaction.update",s.S_,e),this.Ad.update(s.S_,o),this},t.prototype.delete=function(t){var e=sx(t,this.Yf);return this.Ad.delete(e.S_),this},t}());function ux(){if("undefined"==typeof Uint8Array)throw new jy(xy.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function cx(){if("undefined"==typeof atob)throw new jy(xy.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var lx=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ly.c)(e,t),e.fromBase64String=function(t){return cx(),new e(ky.fromBase64String(t))},e.fromUint8Array=function(t){return ux(),new e(ky.fromUint8Array(t))},e.prototype.toBase64=function(){return cx(),this.d_.toBase64()},e.prototype.toUint8Array=function(){return ux(),this.d_.toUint8Array()},e.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(vT),hx=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){jI(t=OT(t,CI));var n=TI(t),r=t.p_(),i=new lT;return xI(n,i,new uT(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t.d_,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){jI(t=OT(t,CI));var e=TI(t),n=t.p_(),r=new lT;return xI(e,r,new cT(r,n.cacheSizeBytes))}(t.d_)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t.R_&&!t.P_)throw new jy(xy.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new tE;return t.Bf.Tf(function(){return Object(ly.b)(e,void 0,void 0,function(){var e;return Object(ly.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(ly.b)(this,void 0,void 0,function(){return Object(ly.d)(this,function(e){switch(e.label){case 0:return rE.Kn()?[4,rE.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(VO(t.I_,t.w_))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t.d_)},t}(),fx=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).Rd=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof fy||(i.Pd=e),i}return Object(ly.c)(e,t),Object.defineProperty(e.prototype,"I_",{get:function(){return this.d_.I_},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this.d_.V_()),t)).merge,this.d_.g_(t)},e.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=OT(t,IT)).V_();"firestore.googleapis.com"!==r.host&&r.host!==e&&my("Host has been set in both settings() and useEmulator(), emulator host will be used"),t.g_(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this.d_,t,e)},e.prototype.enableNetwork=function(){return function(t){var e=this;return t._s.enqueue(function(){return Object(ly.b)(e,void 0,void 0,function(){var e,n;return Object(ly.d)(this,function(r){switch(r.label){case 0:return[4,gI(t)];case 1:return e=r.sent(),[4,mI(t)];case 2:return n=r.sent(),[2,(e.yo(!0),function(t){var e=wy(t);return e.Nh.delete(0),US(e)}(n))]}})})})}(TI(OT(this.d_,CI)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t._s.enqueue(function(){return Object(ly.b)(e,void 0,void 0,function(){var e,n;return Object(ly.d)(this,function(r){switch(r.label){case 0:return[4,gI(t)];case 1:return e=r.sent(),[4,mI(t)];case 2:return n=r.sent(),[2,(e.yo(!1),function(t){return Object(ly.b)(this,void 0,void 0,function(){var e;return Object(ly.d)(this,function(n){switch(n.label){case 0:return(e=wy(t)).Nh.add(0),[4,qS(e)];case 1:return n.sent(),e.Oh.set("Offline"),[2]}})})}(n))]}})})})}(TI(OT(this.d_,CI)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&bT("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Rd.enableMultiTabIndexedDbPersistence(this):this.Rd.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Rd.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.Pd&&(this.Pd._removeServiceInstance("firestore"),this.Pd._removeServiceInstance("firestore-exp")),this.d_._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new tE;return t._s.Ps(function(){return Object(ly.b)(e,void 0,void 0,function(){var e;return Object(ly.d)(this,function(r){switch(r.label){case 0:return e=VC,[4,yI(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(TI(OT(this.d_,CI)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new fT(e);return t._s.Ps(function(){return Object(ly.b)(n,void 0,void 0,function(){var e;return Object(ly.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){wy(t).Wh.add(e),e.next()},[4,bI(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.i_(),t._s.Ps(function(){return Object(ly.b)(n,void 0,void 0,function(){var e;return Object(ly.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){wy(t).Wh.delete(e)},[4,bI(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(TI(t=OT(t,CI)),OI(e)?e:{next:e})}(this.d_,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.Pd)throw new jy(xy.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Pd},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Tx(this,AT(this.d_,t))}catch(t){throw yx(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new mx(this,NT(this.d_,t))}catch(t){throw yx(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new Ox(this,function(t,e){if(t=OT(t,IT),mT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new jy(xy.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new jT(t,null,function(t){return new Wb(qy.ct(),t)}(e))}(this.d_,t))}catch(t){throw yx(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new tE;return t._s.Ps(function(){return Object(ly.b)(n,void 0,void 0,function(){var n;return Object(ly.d)(this,function(i){switch(i.label){case 0:return[4,function(t){return pI(t).then(function(t){return t.Sh})}(t)];case 1:return n=i.sent(),new cI(t._s,n,e,r).run(),[2]}})})}),r.promise}(TI(t),function(n){return e(new ax(t,n))})}(this.d_,function(n){return t(new px(e,n))})},e.prototype.batch=function(){var t=this;return TI(this.d_),new gx(new ox(this.d_,function(e){return rx(t.d_,e)}))},e.prototype.loadBundle=function(t){throw new jy(xy.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new jy(xy.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(vT),dx=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(ly.c)(e,t),e.prototype.Wf=function(t){return new lx(new ky(t))},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return mx.yd(e,this.firestore,null)},e}(kI),px=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r.Xf=new dx(e),r}return Object(ly.c)(e,t),e.prototype.get=function(t){var e=this,n=Ix(t);return this.d_.get(n).then(function(t){return new wx(e.Yf,new $I(e.Yf.d_,e.Xf,t.S_,t.Zf,t.metadata,n.v_))})},e.prototype.set=function(t,e,n){var r=Ix(t);return n?(yT("Transaction.set",n),this.d_.set(r,e,n)):this.d_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Ix(t);return 2===arguments.length?this.d_.update(s,e):(r=this.d_).update.apply(r,Object(ly.g)([s,e,n],i)),this},e.prototype.delete=function(t){var e=Ix(t);return this.d_.delete(e),this},e}(vT),gx=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ly.c)(e,t),e.prototype.set=function(t,e,n){var r=Ix(t);return n?(yT("WriteBatch.set",n),this.d_.set(r,e,n)):this.d_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Ix(t);return 2===arguments.length?this.d_.update(s,e):(r=this.d_).update.apply(r,Object(ly.g)([s,e,n],i)),this},e.prototype.delete=function(t){var e=Ix(t);return this.d_.delete(e),this},e.prototype.commit=function(){return this.d_.commit()},e}(vT),vx=function(t){function e(e,n,r){var i=this;return(i=t.call(this,r)||this).Yf=e,i.Xf=n,i}return Object(ly.c)(e,t),e.prototype.fromFirestore=function(t,e){var n=new YI(this.Yf.d_,this.Xf,t.S_,t.Zf,t.metadata,null);return this.d_.fromFirestore(new Ex(this.Yf,n),null!=e?e:{})},e.prototype.toFirestore=function(t,e){return e?this.d_.toFirestore(t,e):this.d_.toFirestore(t)},e.gd=function(t,n){var r=e.Vd,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new dx(t),n),i.set(n,o)),o},e}(vT);vx.Vd=new WeakMap;var mx=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Xf=new dx(e),r}return Object(ly.c)(e,t),e.pd=function(t,n,r){if(t.length%2!=0)throw new jy(xy.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.rt()+" has "+t.length);return new e(n,new xT(n.d_,r,new zy(t)))},e.yd=function(t,n,r){return new e(n,new xT(n.d_,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Tx(this.firestore,this.d_.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Tx(this.firestore,AT(this.d_,t))}catch(t){throw yx(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof vT&&(t=t.d_),t instanceof xT&&PT(this.d_,t)},e.prototype.set=function(t,e){e=yT("DocumentReference.set",e);try{return function(t,e,n){t=OT(t,xT);var r=OT(t.firestore,CI),i=GI(t.v_,e,n);return rx(r,[BT(HT(r),"setDoc",t.S_,i,null!==t.v_,n).F_(t.S_,T_.Kt())])}(this.d_,t,e)}catch(t){throw yx(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?ex(this.d_,t):ex.apply(void 0,Object(ly.g)([this.d_,t,e],n))}catch(t){throw yx(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return rx(OT((t=this.d_).firestore,CI),[new H_(t.S_,T_.Kt())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=bx(e),i=_x(e,function(e){return new wx(t.firestore,new $I(t.firestore.d_,t.Xf,e.S_,e.Zf,e.metadata,t.d_.v_))});return nx(this.d_,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=OT(t,xT);var e=OT(t.firestore,CI),n=TI(e),r=new tx(e);return function(t,e){var n=this,r=new tE;return t._s.Ps(function(){return Object(ly.b)(n,void 0,void 0,function(){var n;return Object(ly.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(ly.b)(this,void 0,void 0,function(){var r,i;return Object(ly.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=wy(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Tc.Ho(t,e)})}(t,e)];case 1:return(i=o.sent())instanceof Eb?n.resolve(i):i instanceof Ob?n.resolve(null):n.reject(new jy(xy.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=fE(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,vI(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t.S_).then(function(n){return new $I(e,r,t.S_,n,new QI(n instanceof Eb&&n.Vt,!0),t.v_)})}(this.d_):"server"===(null==t?void 0:t.source)?function(t){t=OT(t,xT);var e=OT(t.firestore,CI);return _I(TI(e),t.S_,{source:"server"}).then(function(n){return ix(e,t,n)})}(this.d_):function(t){t=OT(t,xT);var e=OT(t.firestore,CI);return _I(TI(e),t.S_).then(function(n){return ix(e,t,n)})}(this.d_)).then(function(t){return new wx(e.firestore,new $I(e.firestore.d_,e.Xf,t.S_,t.Zf,t.metadata,e.d_.v_))})},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(vx.gd(this.firestore,t)))},e}(vT);function yx(t,e,n){return t.message=t.message.replace(e,n),t}function bx(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!OI(r))return r}return{}}function _x(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=OI(t[0])?t[0]:OI(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var wx=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return Object(ly.c)(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new mx(this.Yf,this.d_.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this.d_.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this.d_.data(t)},e.prototype.get=function(t,e){return this.d_.get(t,e)},e.prototype.isEqual=function(t){return ZI(this.d_,t.d_)},e}(vT),Ex=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ly.c)(e,t),e.prototype.data=function(t){return this.d_.data(t)},e}(wx),Ox=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Xf=new dx(e),r}return Object(ly.c)(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,MI(this.d_,function(t,e,n){var r=e,i=PI("where",t);return new LI(i,r,n)}(t,n,r)))}catch(t){throw yx(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,MI(this.d_,function(t,e){void 0===e&&(e="asc");var n=e,r=PI("orderBy",t);return new VI(r,n)}(t,n)))}catch(t){throw yx(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,MI(this.d_,function(t){return ST("limit",t),new FI("limit",t,"F")}(t)))}catch(t){throw yx(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,MI(this.d_,function(t){return ST("limitToLast",t),new FI("limitToLast",t,"L")}(t)))}catch(t){throw yx(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,MI(this.d_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new UI("startAt",t,!0)}).apply(void 0,t)))}catch(t){throw yx(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,MI(this.d_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new UI("startAfter",t,!1)}).apply(void 0,t)))}catch(t){throw yx(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,MI(this.d_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new qI("endBefore",t,!0)}).apply(void 0,t)))}catch(t){throw yx(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,MI(this.d_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new qI("endAt",t,!1)}).apply(void 0,t)))}catch(t){throw yx(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return RT(this.d_,t.d_)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=OT(t,jT);var e=OT(t.firestore,CI),n=TI(e),r=new tx(e);return function(t,e){var n=this,r=new tE;return t._s.Ps(function(){return Object(ly.b)(n,void 0,void 0,function(){var n;return Object(ly.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(ly.b)(this,void 0,void 0,function(){var r,i,o,s,a;return Object(ly.d)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,ZO(t,e,!0)];case 1:return a=u.sent(),r=new CC(e,a.Rc),i=r.fl(a.documents),o=r.wi(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=fE(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,vI(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t.C_).then(function(n){return new XI(e,r,t,n)})}(this.d_):"server"===(null==t?void 0:t.source)?function(t){t=OT(t,jT);var e=OT(t.firestore,CI),n=TI(e),r=new tx(e);return wI(n,t.C_,{source:"server"}).then(function(n){return new XI(e,r,t,n)})}(this.d_):function(t){t=OT(t,jT);var e=OT(t.firestore,CI),n=TI(e),r=new tx(e);return RI(t.C_),wI(n,t.C_).then(function(n){return new XI(e,r,t,n)})}(this.d_)).then(function(t){return new Cx(e.firestore,new XI(e.firestore.d_,e.Xf,e.d_,t._d))})},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=bx(e),i=_x(e,function(e){return new Cx(t.firestore,new XI(t.firestore.d_,t.Xf,t.d_,e._d))});return nx(this.d_,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(vx.gd(this.firestore,t)))},e}(vT),Sx=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return Object(ly.c)(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this.d_.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new Ex(this.Yf,this.d_.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this.d_.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this.d_.newIndex},enumerable:!1,configurable:!0}),e}(vT),Cx=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return Object(ly.c)(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new Ox(this.Yf,this.d_.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.d_.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this.d_.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this.d_.docs.map(function(e){return new Ex(t.Yf,e)})},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this.d_.docChanges(t).map(function(t){return new Sx(e.Yf,t)})},e.prototype.forEach=function(t,e){var n=this;this.d_.forEach(function(r){t.call(e,new Ex(n.Yf,r))})},e.prototype.isEqual=function(t){return ZI(this.d_,t.d_)},e}(vT),Tx=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r.d_=n,r}return Object(ly.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.d_.parent;return t?new mx(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new mx(this.firestore,void 0===t?NT(this.d_):NT(this.d_,t))}catch(t){throw yx(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=OT(t.firestore,CI),r=NT(t),i=GI(t.v_,e);return rx(n,[BT(HT(t.firestore),"addDoc",r.S_,i,null!==t.v_,{}).F_(r.S_,T_.exists(!1))]).then(function(){return r})}(this.d_,t).then(function(t){return new mx(e.firestore,t)})},e.prototype.isEqual=function(t){return PT(this.d_,t.d_)},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(vx.gd(this.firestore,t)))},e}(Ox);function Ix(t){return t instanceof vT&&(t=t.d_),OT(t,xT)}var xx,jx,kx=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(pT.bind.apply(pT,Object(ly.g)([void 0],e))))||this}return Object(ly.c)(e,t),e.documentId=function(){return new e(By.ht().rt())},e.prototype.isEqual=function(t){return t instanceof vT&&(t=t.d_),t instanceof pT&&this.d_.f_.isEqual(t.f_)},e}(vT),Ax=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ly.c)(e,t),e.serverTimestamp=function(){var t=new GT("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new zT("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new KT("arrayUnion",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new QT("arrayRemove",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new $T("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},e}(vT),Nx=n("/6Yf"),Px={Firestore:fx,GeoPoint:DT,Timestamp:Vy,Blob:lx,Transaction:px,WriteBatch:gx,DocumentReference:mx,DocumentSnapshot:wx,Query:Ox,QueryDocumentSnapshot:Ex,QuerySnapshot:Cx,CollectionReference:Tx,FieldPath:kx,FieldValue:Ax,setLogLevel:function(t){dy.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new Nx.a("firestore",function(t){return function(t,e){return new fx(t,new CI(t,e),new hx)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},Px)))})(xx=sp.a),xx.registerVersion("@firebase/firestore","2.1.7"),(jx=fx).prototype.loadBundle=function(t){return function(t,e){var n=TI(t=OT(t,CI)),r=new SI;return function(t,e,n,r){var i=this,o=function(t,e){return function(t,e){return new dT(t,e)}(function(t,e){if(t instanceof Uint8Array)return hT(t,e);if(t instanceof ArrayBuffer)return hT(new Uint8Array(t),e);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof t?(new TextEncoder).encode(t):t),e)}(n,NS(e));t._s.Ps(function(){return Object(ly.b)(i,void 0,void 0,function(){var e;return Object(ly.d)(this,function(n){switch(n.label){case 0:return e=sT,[4,yI(t)];case 1:return e.apply(void 0,[n.sent(),o,r]),[2]}})})})}(n,t.I_,e,r),r}(this.d_,t)},jx.prototype.namedQuery=function(t){var e,n,r=this;return(e=this.d_,n=t,function(t,e){var n=this;return t._s.enqueue(function(){return Object(ly.b)(n,void 0,void 0,function(){var n;return Object(ly.d)(this,function(r){switch(r.label){case 0:return n=function(t,e){var n=wy(t);return n.persistence.runTransaction("Get named query","readonly",function(t){return n.wo.Ms(t,e)})},[4,vI(t)];case 1:return[2,n.apply(void 0,[r.sent(),e])]}})})})}(TI(e=OT(e,CI)),n).then(function(t){return t?new jT(e,null,t.query):null})).then(function(t){return t?new Ox(r,t):null})};var Rx={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Dx=function(t){function e(n,r,i){var o=t.call(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o.code=n,o.details=i,o}return Object(ly.c)(e,t),e}(Error),Mx=function(){function t(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then(function(t){return n.auth=t},function(){}),this.messaging||e.get().then(function(t){return n.messaging=t},function(){})}return t.prototype.getAuthToken=function(){return Object(ly.b)(this,void 0,void 0,function(){var t;return Object(ly.d)(this,function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(t=e.sent())?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}})})},t.prototype.getInstanceIdToken=function(){return Object(ly.b)(this,void 0,void 0,function(){return Object(ly.d)(this,function(t){if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];try{return[2,this.messaging.getToken()]}catch(xx){return[2,void 0]}return[2]})})},t.prototype.getContext=function(){return Object(ly.b)(this,void 0,void 0,function(){var t,e;return Object(ly.d)(this,function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}})})},t}();function Lx(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var Vx,Fx,Ux,qx=function(){function t(){}return t.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map(function(t){return e.encode(t)});if("function"==typeof t||"object"==typeof t)return Lx(t,function(t){return e.encode(t)});throw new Error("Data cannot be encoded in JSON: "+t)},t.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(function(t){return e.decode(t)}):"function"==typeof t||"object"==typeof t?Lx(t,function(t){return e.decode(t)}):t},t}(),Hx=function(){function t(t,e,n,r,i){var o=this;void 0===r&&(r="us-central1"),this.app_=t,this.fetchImpl=i,this.serializer=new qx,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(o.deleteService())}},this.contextProvider=new Mx(e,n),this.cancelAllRequests=new Promise(function(t){o.deleteService=function(){return t()}});try{var s=new URL(r);this.customDomain=s.origin,this.region="us-central1"}catch(xx){this.customDomain=null,this.region=r}}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),t.prototype._url=function(t){var e=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t:null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t},t.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},t.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},t.prototype.httpsCallable=function(t,e){var n=this;return function(r){return n.call(t,r,e||{})}},t.prototype.postJSON=function(t,e,n){return Object(ly.b)(this,void 0,void 0,function(){var r,i;return Object(ly.d)(this,function(o){switch(o.label){case 0:n["Content-Type"]="application/json",o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 2:return r=o.sent(),[3,4];case 3:return o.sent(),[2,{status:0,json:null}];case 4:i=null,o.label=5;case 5:return o.trys.push([5,7,,8]),[4,r.json()];case 6:return i=o.sent(),[3,8];case 7:return o.sent(),[3,8];case 8:return[2,{status:r.status,json:i}]}})})},t.prototype.call=function(t,e,n){return Object(ly.b)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h,f;return Object(ly.d)(this,function(d){switch(d.label){case 0:return r=this._url(t),e=this.serializer.encode(e),i={data:e},o={},[4,this.contextProvider.getContext()];case 1:return(s=d.sent()).authToken&&(o.Authorization="Bearer "+s.authToken),s.instanceIdToken&&(o["Firebase-Instance-ID-Token"]=s.instanceIdToken),a=function(t){var e,n=new Promise(function(n,r){e=setTimeout(function(){r(new Dx("deadline-exceeded","deadline-exceeded"))},t)});return{timer:e,promise:n}}(n.timeout||7e4),u=a.timer,c=a.promise,[4,Promise.race([Bx(u,this.postJSON(r,i,o)),c,Bx(u,this.cancelAllRequests)])];case 2:if(!(l=d.sent()))throw new Dx("cancelled","Firebase Functions instance was deleted.");if(h=function(t,e,n){var r=function(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var s=e&&e.error;if(s){var a=s.status;if("string"==typeof a){if(!Rx[a])return new Dx("internal","internal");r=Rx[a],i=a}var u=s.message;"string"==typeof u&&(i=u),void 0!==(o=s.details)&&(o=n.decode(o))}}catch(xx){}return"ok"===r?null:new Dx(r,i,o)}(l.status,l.json,this.serializer))throw h;if(!l.json)throw new Dx("internal","Response is not valid JSON object.");if(void 0===(f=l.json.data)&&(f=l.json.result),void 0===f)throw new Dx("internal","Response is missing data field.");return[2,{data:this.serializer.decode(f)}]}})})},t}();function Bx(t,e){return Object(ly.b)(this,void 0,void 0,function(){var n;return Object(ly.d)(this,function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),clearTimeout(t),[2,n]}})})}Vx=sp.a,Fx=fetch.bind(self),Ux={Functions:Hx},Vx.INTERNAL.registerComponent(new Nx.a("functions",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("messaging");return new Hx(n,r,i,e,Fx)},"PUBLIC").setServiceProps(Ux).setMultipleInstances(!0)),sp.a.registerVersion("@firebase/functions","0.6.2");var zx,Wx=n("nbvr"),Gx="w:0.4.20",Kx=((zx={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',zx["not-registered"]="Firebase Installation is not registered.",zx["installation-not-found"]="Firebase Installation not found.",zx["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',zx["app-offline"]="Could not process request. Application offline.",zx["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",zx),Qx=new up.b("installations","Installations",Kx);function $x(t){return t instanceof up.c&&t.code.includes("request-failed")}function Yx(t){return"https://firebaseinstallations.googleapis.com/v1/projects/"+t.projectId+"/installations"}function Xx(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function Jx(t,e){return Object(ly.b)(this,void 0,void 0,function(){var n,r;return Object(ly.d)(this,function(i){switch(i.label){case 0:return[4,e.json()];case 1:return n=i.sent(),[2,Qx.create("request-failed",{requestName:t,serverCode:(r=n.error).code,serverMessage:r.message,serverStatus:r.status})]}})})}function Zx(t){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey})}function tj(t,e){var n=e.refreshToken,r=Zx(t);return r.append("Authorization",function(t){return"FIS_v2 "+t}(n)),r}function ej(t){return Object(ly.b)(this,void 0,void 0,function(){var e;return Object(ly.d)(this,function(n){switch(n.label){case 0:return[4,t()];case 1:return(e=n.sent()).status>=500&&e.status<600?[2,t()]:[2,e]}})})}function nj(t,e){var n=e.fid;return Object(ly.b)(this,void 0,void 0,function(){var e,r,i,o,s;return Object(ly.d)(this,function(a){switch(a.label){case 0:return e=Yx(t),r=Zx(t),i={method:"POST",headers:r,body:JSON.stringify({fid:n,authVersion:"FIS_v2",appId:t.appId,sdkVersion:Gx})},[4,ej(function(){return fetch(e,i)})];case 1:return(o=a.sent()).ok?[4,o.json()]:[3,3];case 2:return[2,{fid:(s=a.sent()).fid||n,registrationStatus:2,refreshToken:s.refreshToken,authToken:Xx(s.authToken)}];case 3:return[4,Jx("Create Installation",o)];case 4:throw a.sent()}})})}function rj(t){return new Promise(function(e){setTimeout(e,t)})}var ij=/^[cdef][\w-]{21}$/;function oj(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return(e=t,btoa(String.fromCharCode.apply(String,Object(ly.f)(e))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var e}(t);return ij.test(e)?e:""}catch(n){return""}}function sj(t){return t.appName+"!"+t.appId}var aj=new Map;function uj(t,e){var n=sj(t);cj(n,e),function(t,e){var n=hj();n&&n.postMessage({key:t,fid:e}),fj()}(n,e)}function cj(t,e){var n,r,i=aj.get(t);if(i)try{for(var o=Object(ly.h)(i),s=o.next();!s.done;s=o.next())(0,s.value)(e)}catch(a){n={error:a}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var lj=null;function hj(){return!lj&&"BroadcastChannel"in self&&((lj=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){cj(t.data.key,t.data.fid)}),lj}function fj(){0===aj.size&&lj&&(lj.close(),lj=null)}var dj,pj="firebase-installations-store",gj=null;function vj(){return gj||(gj=Object(Wx.openDb)("firebase-installations-database",1,function(t){switch(t.oldVersion){case 0:t.createObjectStore(pj)}})),gj}function mj(t,e){return Object(ly.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(ly.d)(this,function(a){switch(a.label){case 0:return n=sj(t),[4,vj()];case 1:return r=a.sent(),i=r.transaction(pj,"readwrite"),[4,(o=i.objectStore(pj)).get(n)];case 2:return s=a.sent(),[4,o.put(e,n)];case 3:return a.sent(),[4,i.complete];case 4:return a.sent(),s&&s.fid===e.fid||uj(t,e.fid),[2,e]}})})}function yj(t){return Object(ly.b)(this,void 0,void 0,function(){var e,n,r;return Object(ly.d)(this,function(i){switch(i.label){case 0:return e=sj(t),[4,vj()];case 1:return n=i.sent(),[4,(r=n.transaction(pj,"readwrite")).objectStore(pj).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function bj(t,e){return Object(ly.b)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(ly.d)(this,function(u){switch(u.label){case 0:return n=sj(t),[4,vj()];case 1:return r=u.sent(),i=r.transaction(pj,"readwrite"),[4,(o=i.objectStore(pj)).get(n)];case 2:return s=u.sent(),void 0!==(a=e(s))?[3,4]:[4,o.delete(n)];case 3:return u.sent(),[3,6];case 4:return[4,o.put(a,n)];case 5:u.sent(),u.label=6;case 6:return[4,i.complete];case 7:return u.sent(),!a||s&&s.fid===a.fid||uj(t,a.fid),[2,a]}})})}function _j(t){return Object(ly.b)(this,void 0,void 0,function(){var e,n,r;return Object(ly.d)(this,function(i){switch(i.label){case 0:return[4,bj(t,function(n){var r=function(t){return Oj(t||{fid:oj(),registrationStatus:0})}(n),i=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(Qx.create("app-offline"))};var n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(t,e){return Object(ly.b)(this,void 0,void 0,function(){var n,r;return Object(ly.d)(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,nj(t,e)];case 1:return n=i.sent(),[2,mj(t,n)];case 2:return $x(r=i.sent())&&409===r.customData.serverCode?[4,yj(t)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,mj(t,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}})})}(t,n)}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:wj(t)}:{installationEntry:e}}(t,r);return e=i.registrationPromise,i.installationEntry})];case 1:return""!==(n=i.sent()).fid?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}})})}function wj(t){return Object(ly.b)(this,void 0,void 0,function(){var e,n,r,i;return Object(ly.d)(this,function(o){switch(o.label){case 0:return[4,Ej(t)];case 1:e=o.sent(),o.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,rj(100)];case 3:return o.sent(),[4,Ej(t)];case 4:return e=o.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,_j(t)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,e]}})})}function Ej(t){return bj(t,function(t){if(!t)throw Qx.create("installation-not-found");return Oj(t)})}function Oj(t){return 1===(e=t).registrationStatus&&e.registrationTime+1e4<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function Sj(t,e){var n=t.appConfig,r=t.platformLoggerProvider;return Object(ly.b)(this,void 0,void 0,function(){var t,i,o,s,a;return Object(ly.d)(this,function(u){switch(u.label){case 0:return t=function(t,e){var n=e.fid;return Yx(t)+"/"+n+"/authTokens:generate"}(n,e),i=tj(n,e),(o=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),s={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:Gx}})},[4,ej(function(){return fetch(t,s)})];case 1:return(a=u.sent()).ok?[4,a.json()]:[3,3];case 2:return[2,Xx(u.sent())];case 3:return[4,Jx("Generate Auth Token",a)];case 4:throw u.sent()}})})}function Cj(t,e){return void 0===e&&(e=!1),Object(ly.b)(this,void 0,void 0,function(){var n,r,i;return Object(ly.d)(this,function(o){switch(o.label){case 0:return[4,bj(t.appConfig,function(r){if(!Ij(r))throw Qx.create("not-registered");var i,o=r.authToken;if(!e&&2===(i=o).requestStatus&&!function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+36e5}(i))return r;if(1===o.requestStatus)return n=function(t,e){return Object(ly.b)(this,void 0,void 0,function(){var n,r;return Object(ly.d)(this,function(i){switch(i.label){case 0:return[4,Tj(t.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,rj(100)];case 3:return i.sent(),[4,Tj(t.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,Cj(t,e)]:[2,r]}})})}(t,e),r;if(!navigator.onLine)throw Qx.create("app-offline");var s=function(t){var e={requestStatus:1,requestTime:Date.now()};return Object(ly.a)(Object(ly.a)({},t),{authToken:e})}(r);return n=function(t,e){return Object(ly.b)(this,void 0,void 0,function(){var n,r,i;return Object(ly.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,Sj(t,e)];case 1:return n=o.sent(),i=Object(ly.a)(Object(ly.a)({},e),{authToken:n}),[4,mj(t.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!$x(r=o.sent())||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,yj(t.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=Object(ly.a)(Object(ly.a)({},e),{authToken:{requestStatus:0}}),[4,mj(t.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}})})}(t,s),s})];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}})})}function Tj(t){return bj(t,function(t){if(!Ij(t))throw Qx.create("not-registered");var e;return 1===(e=t.authToken).requestStatus&&e.requestTime+1e4<Date.now()?Object(ly.a)(Object(ly.a)({},t),{authToken:{requestStatus:0}}):t})}function Ij(t){return void 0!==t&&2===t.registrationStatus}function xj(t){return Object(ly.b)(this,void 0,void 0,function(){var e;return Object(ly.d)(this,function(n){switch(n.label){case 0:return[4,_j(t)];case 1:return(e=n.sent().registrationPromise)?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})}function jj(t,e){return Object(ly.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(ly.d)(this,function(s){switch(s.label){case 0:return n=function(t,e){var n=e.fid;return Yx(t)+"/"+n}(t,e),r=tj(t,e),i={method:"DELETE",headers:r},[4,ej(function(){return fetch(n,i)})];case 1:return(o=s.sent()).ok?[3,3]:[4,Jx("Delete Installation",o)];case 2:throw s.sent();case 3:return[2]}})})}function kj(t){return Qx.create("missing-app-config-values",{valueName:t})}!function(t){t.INTERNAL.registerComponent(new Nx.a("installations",function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw kj("App Configuration");if(!t.name)throw kj("App Name");try{for(var r=Object(ly.h)(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw kj(o)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return function(t){return Object(ly.b)(this,void 0,void 0,function(){var e,n,r;return Object(ly.d)(this,function(i){switch(i.label){case 0:return[4,_j(t.appConfig)];case 1:return e=i.sent(),n=e.installationEntry,(r=e.registrationPromise)?r.catch(console.error):Cj(t).catch(console.error),[2,n.fid]}})})}(n)},getToken:function(t){return function(t,e){return void 0===e&&(e=!1),Object(ly.b)(this,void 0,void 0,function(){return Object(ly.d)(this,function(n){switch(n.label){case 0:return[4,xj(t.appConfig)];case 1:return n.sent(),[4,Cj(t,e)];case 2:return[2,n.sent().token]}})})}(n,t)},delete:function(){return function(t){return Object(ly.b)(this,void 0,void 0,function(){var e,n;return Object(ly.d)(this,function(r){switch(r.label){case 0:return[4,bj(e=t.appConfig,function(t){if(!t||0!==t.registrationStatus)return t})];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw Qx.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw Qx.create("app-offline");case 3:return[4,jj(e,n)];case 4:return r.sent(),[4,yj(e)];case 5:r.sent(),r.label=6;case 6:return[2]}})})}(n)},onIdChange:function(t){return function(t,e){var n=t.appConfig;return function(t,e){hj();var n=sj(t),r=aj.get(n);r||(r=new Set,aj.set(n,r)),r.add(e)}(n,e),function(){!function(t,e){var n=sj(t),r=aj.get(n);r&&(r.delete(e),0===r.size&&aj.delete(n),fj())}(n,e)}}(n,t)}}},"PUBLIC")),t.registerVersion("@firebase/installations","0.4.20")}(sp.a);var Aj=((dj={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',dj["only-available-in-window"]="This method is available in a Window context.",dj["only-available-in-sw"]="This method is available in a service worker context.",dj["permission-default"]="The notification permission was not granted and dismissed instead.",dj["permission-blocked"]="The notification permission was not granted and blocked instead.",dj["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",dj["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",dj["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",dj["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",dj["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",dj["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",dj["token-update-no-token"]="FCM returned no token when updating the user to push.",dj["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",dj["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",dj["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",dj["invalid-vapid-key"]="The public VAPID key must be a string.",dj["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",dj),Nj=new up.b("messaging","Messaging",Aj),Pj="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Rj=function(t){return t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked",t}({});function Dj(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,Object(ly.f)(e))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Mj(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}var Lj="fcm_token_details_db",Vj="fcm_token_object_Store";function Fj(t){return Object(ly.b)(this,void 0,void 0,function(){var e,n=this;return Object(ly.d)(this,function(r){switch(r.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(!r.sent().map(function(t){return t.name}).includes(Lj))return[2,null];r.label=2;case 2:return e=null,[4,Object(Wx.openDb)(Lj,5,function(r){return Object(ly.b)(n,void 0,void 0,function(){var n,i,o,s;return Object(ly.d)(this,function(a){switch(a.label){case 0:return r.oldVersion<2?[2]:r.objectStoreNames.contains(Vj)?[4,(n=r.transaction.objectStore(Vj)).index("fcmSenderId").get(t)]:[2];case 1:return i=a.sent(),[4,n.clear()];case 2:if(a.sent(),!i)return[2];if(2===r.oldVersion){if(!(o=i).auth||!o.p256dh||!o.endpoint)return[2];e={token:o.fcmToken,createTime:null!==(s=o.createTime)&&void 0!==s?s:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"==typeof o.vapidKey?o.vapidKey:Dj(o.vapidKey)}}}else(3===r.oldVersion||4===r.oldVersion)&&(e={token:(o=i).fcmToken,createTime:o.createTime,subscriptionOptions:{auth:Dj(o.auth),p256dh:Dj(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:Dj(o.vapidKey)}});return[2]}})})})];case 3:return r.sent().close(),[4,Object(Wx.deleteDb)(Lj)];case 4:return r.sent(),[4,Object(Wx.deleteDb)("fcm_vapid_details_db")];case 5:return r.sent(),[4,Object(Wx.deleteDb)("undefined")];case 6:return r.sent(),[2,Uj(e)?e:null]}})})}function Uj(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}var qj="firebase-messaging-store",Hj=null;function Bj(){return Hj||(Hj=Object(Wx.openDb)("firebase-messaging-database",1,function(t){switch(t.oldVersion){case 0:t.createObjectStore(qj)}})),Hj}function zj(t){return Object(ly.b)(this,void 0,void 0,function(){var e,n,r;return Object(ly.d)(this,function(i){switch(i.label){case 0:return e=Kj(t),[4,Bj()];case 1:return[4,i.sent().transaction(qj).objectStore(qj).get(e)];case 2:return(n=i.sent())?[2,n]:[3,3];case 3:return[4,Fj(t.appConfig.senderId)];case 4:return(r=i.sent())?[4,Wj(t,r)]:[3,6];case 5:return i.sent(),[2,r];case 6:return[2]}})})}function Wj(t,e){return Object(ly.b)(this,void 0,void 0,function(){var n,r,i;return Object(ly.d)(this,function(o){switch(o.label){case 0:return n=Kj(t),[4,Bj()];case 1:return r=o.sent(),[4,(i=r.transaction(qj,"readwrite")).objectStore(qj).put(e,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,e]}})})}function Gj(t){return Object(ly.b)(this,void 0,void 0,function(){var e,n,r;return Object(ly.d)(this,function(i){switch(i.label){case 0:return e=Kj(t),[4,Bj()];case 1:return n=i.sent(),[4,(r=n.transaction(qj,"readwrite")).objectStore(qj).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function Kj(t){return t.appConfig.appId}function Qj(t,e){return Object(ly.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(ly.d)(this,function(a){switch(a.label){case 0:return[4,Jj(t)];case 1:n=a.sent(),r=Zj(e),i={method:"POST",headers:n,body:JSON.stringify(r)},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(Xj(t.appConfig),i)];case 3:return[4,a.sent().json()];case 4:return o=a.sent(),[3,6];case 5:throw s=a.sent(),Nj.create("token-subscribe-failed",{errorInfo:s});case 6:if(o.error)throw Nj.create("token-subscribe-failed",{errorInfo:o.error.message});if(!o.token)throw Nj.create("token-subscribe-no-token");return[2,o.token]}})})}function $j(t,e){return Object(ly.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(ly.d)(this,function(a){switch(a.label){case 0:return[4,Jj(t)];case 1:n=a.sent(),r=Zj(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(Xj(t.appConfig)+"/"+e.token,i)];case 3:return[4,a.sent().json()];case 4:return o=a.sent(),[3,6];case 5:throw s=a.sent(),Nj.create("token-update-failed",{errorInfo:s});case 6:if(o.error)throw Nj.create("token-update-failed",{errorInfo:o.error.message});if(!o.token)throw Nj.create("token-update-no-token");return[2,o.token]}})})}function Yj(t,e){return Object(ly.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(ly.d)(this,function(s){switch(s.label){case 0:return[4,Jj(t)];case 1:n=s.sent(),r={method:"DELETE",headers:n},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(Xj(t.appConfig)+"/"+e,r)];case 3:return[4,s.sent().json()];case 4:if((i=s.sent()).error)throw Nj.create("token-unsubscribe-failed",{errorInfo:i.error.message});return[3,6];case 5:throw o=s.sent(),Nj.create("token-unsubscribe-failed",{errorInfo:o});case 6:return[2]}})})}function Xj(t){return"https://fcmregistrations.googleapis.com/v1/projects/"+t.projectId+"/registrations"}function Jj(t){var e=t.appConfig,n=t.installations;return Object(ly.b)(this,void 0,void 0,function(){var t;return Object(ly.d)(this,function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return t=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":"FIS "+t})]}})})}function Zj(t){var e=t.vapidKey,n={web:{endpoint:t.endpoint,auth:t.auth,p256dh:t.p256dh}};return e!==Pj&&(n.web.applicationPubKey=e),n}function tk(t,e,n){return Object(ly.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(ly.d)(this,function(a){switch(a.label){case 0:if("granted"!==Notification.permission)throw Nj.create("permission-blocked");return[4,ik(e,n)];case 1:return r=a.sent(),[4,zj(t)];case 2:return i=a.sent(),o={vapidKey:n,swScope:e.scope,endpoint:r.endpoint,auth:Dj(r.getKey("auth")),p256dh:Dj(r.getKey("p256dh"))},i?[3,3]:[2,rk(t,o)];case 3:if(l=(c=o).endpoint===(u=i.subscriptionOptions).endpoint,c.vapidKey===u.vapidKey&&l&&c.auth===u.auth&&c.p256dh===u.p256dh)return[3,8];a.label=4;case 4:return a.trys.push([4,6,,7]),[4,Yj(t,i.token)];case 5:return a.sent(),[3,7];case 6:return s=a.sent(),console.warn(s),[3,7];case 7:return[2,rk(t,o)];case 8:return Date.now()>=i.createTime+6048e5?[2,nk({token:i.token,createTime:Date.now(),subscriptionOptions:o},t,e)]:[2,i.token];case 9:return[2]}var u,c,l})})}function ek(t,e){return Object(ly.b)(this,void 0,void 0,function(){var n,r;return Object(ly.d)(this,function(i){switch(i.label){case 0:return[4,zj(t)];case 1:return(n=i.sent())?[4,Yj(t,n.token)]:[3,4];case 2:return i.sent(),[4,Gj(t)];case 3:i.sent(),i.label=4;case 4:return[4,e.pushManager.getSubscription()];case 5:return(r=i.sent())?[2,r.unsubscribe()]:[2,!0]}})})}function nk(t,e,n){return Object(ly.b)(this,void 0,void 0,function(){var r,i,o;return Object(ly.d)(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,5]),[4,$j(e,t)];case 1:return r=s.sent(),i=Object(ly.a)(Object(ly.a)({},t),{token:r,createTime:Date.now()}),[4,Wj(e,i)];case 2:return s.sent(),[2,r];case 3:return o=s.sent(),[4,ek(e,n)];case 4:throw s.sent(),o;case 5:return[2]}})})}function rk(t,e){return Object(ly.b)(this,void 0,void 0,function(){var n,r;return Object(ly.d)(this,function(i){switch(i.label){case 0:return[4,Qj(t,e)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:e},[4,Wj(t,r)];case 2:return i.sent(),[2,r.token]}})})}function ik(t,e){return Object(ly.b)(this,void 0,void 0,function(){var n;return Object(ly.d)(this,function(r){switch(r.label){case 0:return[4,t.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Mj(e)})]}})})}function ok(t){return"object"==typeof t&&!!t&&"google.c.a.c_id"in t}function sk(t){return new Promise(function(e){setTimeout(e,t)})}var ak=function(){function t(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(t){t.waitUntil(e.onPush(t))}),self.addEventListener("pushsubscriptionchange",function(t){t.waitUntil(e.onSubChange(t))}),self.addEventListener("notificationclick",function(t){t.waitUntil(e.onNotificationClick(t))})}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!=typeof t)throw Nj.create("invalid-bg-handler");this.bgMessageHandler=t},t.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},t.prototype.getToken=function(){var t,e;return Object(ly.b)(this,void 0,void 0,function(){var n;return Object(ly.d)(this,function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,zj(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(e=null===(t=null==n?void 0:n.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==e?e:Pj,r.label=2;case 2:return[2,tk(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},t.prototype.deleteToken=function(){return ek(this.firebaseDependencies,self.registration)},t.prototype.requestPermission=function(){throw Nj.create("only-available-in-window")},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw Nj.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw Nj.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(){throw Nj.create("only-available-in-window")},t.prototype.onMessage=function(){throw Nj.create("only-available-in-window")},t.prototype.onTokenRefresh=function(){throw Nj.create("only-available-in-window")},t.prototype.onPush=function(t){return Object(ly.b)(this,void 0,void 0,function(){var e,n,r,i;return Object(ly.d)(this,function(o){switch(o.label){case 0:return(e=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(n){return null}}(t))?[4,hk()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return function(t){return t.some(function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")})}(n=o.sent())?[2,lk(n,e)]:(r=!1,e.notification?[4,fk(uk(e))]:[3,3]);case 2:o.sent(),r=!0,o.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(i=function(t){var e={from:t.from,collapseKey:t.collapse_key};return function(t,e){if(e.notification){t.notification={};var n=e.notification.title;n&&(t.notification.title=n);var r=e.notification.body;r&&(t.notification.body=r);var i=e.notification.image;i&&(t.notification.image=i)}}(e,t),function(t,e){e.data&&(t.data=e.data)}(e,t),function(t,e){if(e.fcmOptions){t.fcmOptions={};var n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);var r=e.fcmOptions.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}}(e,t),e}(e),"function"==typeof this.bgMessageHandler?this.bgMessageHandler(i):this.bgMessageHandler.next(i)),[4,sk(1e3)]);case 4:return o.sent(),[2]}})})},t.prototype.onSubChange=function(t){var e,n;return Object(ly.b)(this,void 0,void 0,function(){var r;return Object(ly.d)(this,function(i){switch(i.label){case 0:return t.newSubscription?[3,2]:[4,ek(this.firebaseDependencies,self.registration)];case 1:return i.sent(),[2];case 2:return[4,zj(this.firebaseDependencies)];case 3:return r=i.sent(),[4,ek(this.firebaseDependencies,self.registration)];case 4:return i.sent(),[4,tk(this.firebaseDependencies,self.registration,null!==(n=null===(e=null==r?void 0:r.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==n?n:Pj)];case 5:return i.sent(),[2]}})})},t.prototype.onNotificationClick=function(t){var e,n;return Object(ly.b)(this,void 0,void 0,function(){var r,i,o,s,a;return Object(ly.d)(this,function(u){switch(u.label){case 0:return(r=null===(n=null===(e=t.notification)||void 0===e?void 0:e.data)||void 0===n?void 0:n.FCM_MSG)?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),(i=function(t){var e,n,r;return(null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=t.notification)||void 0===r?void 0:r.click_action)||(ok(t.data)?self.location.origin:null)}(r))?(o=new URL(i,self.location.href),s=new URL(self.location.origin),o.host!==s.host?[2]:[4,ck(o)]):[2]):[2];case 1:return(a=u.sent())?[3,4]:[4,self.clients.openWindow(i)];case 2:return a=u.sent(),[4,sk(3e3)];case 3:return u.sent(),[3,6];case 4:return[4,a.focus()];case 5:a=u.sent(),u.label=6;case 6:return a?(r.messageType=Rj.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,a.postMessage(r)]):[2]}})})},t}();function uk(t){var e,n=Object(ly.a)({},t.notification);return n.data=((e={}).FCM_MSG=t,e),n}function ck(t){return Object(ly.b)(this,void 0,void 0,function(){var e,n,r,i,o,s,a;return Object(ly.d)(this,function(u){switch(u.label){case 0:return[4,hk()];case 1:e=u.sent();try{for(n=Object(ly.h)(e),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),t.host===o.host)return[2,i]}catch(c){s={error:c}}finally{try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(s)throw s.error}}return[2,null]}})})}function lk(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=Rj.PUSH_RECEIVED;try{for(var i=Object(ly.h)(t),o=i.next();!o.done;o=i.next())o.value.postMessage(e)}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function hk(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function fk(t){var e,n=t.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(e=t.title)&&void 0!==e?e:"",t)}var dk=function(){function t(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(t){return e.messageEventListener(t)})}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.messageEventListener=function(t){return Object(ly.b)(this,void 0,void 0,function(){var e,n;return Object(ly.d)(this,function(r){switch(r.label){case 0:return(e=t.data).isFirebaseMessaging?(this.onMessageCallback&&e.messageType===Rj.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback(function(t){return delete t.messageType,delete t.isFirebaseMessaging,t}(Object.assign({},e))):this.onMessageCallback.next(Object.assign({},e))),ok(n=e.data)&&"1"===n["google.c.a.e"]?[4,this.logEvent(e.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.getVapidKey=function(){return this.vapidKey},t.prototype.getSwReg=function(){return this.swRegistration},t.prototype.getToken=function(t){return Object(ly.b)(this,void 0,void 0,function(){return Object(ly.d)(this,function(e){switch(e.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:e.sent(),e.label=2;case 2:if("granted"!==Notification.permission)throw Nj.create("permission-blocked");return[4,this.updateVapidKey(null==t?void 0:t.vapidKey)];case 3:return e.sent(),[4,this.updateSwReg(null==t?void 0:t.serviceWorkerRegistration)];case 4:return e.sent(),[2,tk(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}})})},t.prototype.updateVapidKey=function(t){return Object(ly.b)(this,void 0,void 0,function(){return Object(ly.d)(this,function(e){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=Pj),[2]})})},t.prototype.updateSwReg=function(t){return Object(ly.b)(this,void 0,void 0,function(){return Object(ly.d)(this,function(e){switch(e.label){case 0:return t||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:if(!t&&this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw Nj.create("invalid-sw-registration");return this.swRegistration=t,[2]}})})},t.prototype.registerDefaultSw=function(){return Object(ly.b)(this,void 0,void 0,function(){var t,e;return Object(ly.d)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return t.swRegistration=n.sent(),this.swRegistration.update().catch(function(){}),[3,3];case 2:throw e=n.sent(),Nj.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}})})},t.prototype.deleteToken=function(){return Object(ly.b)(this,void 0,void 0,function(){return Object(ly.d)(this,function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,ek(this.firebaseDependencies,this.swRegistration)]}})})},t.prototype.requestPermission=function(){return Object(ly.b)(this,void 0,void 0,function(){var t;return Object(ly.d)(this,function(e){switch(e.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(t=e.sent()))return[2];throw Nj.create("denied"===t?"permission-blocked":"permission-default")}})})},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw Nj.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw Nj.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw Nj.create("invalid-sw-registration");if(this.swRegistration)throw Nj.create("use-sw-after-get-token");this.swRegistration=t},t.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},t.prototype.setBackgroundMessageHandler=function(){throw Nj.create("only-available-in-sw")},t.prototype.onBackgroundMessage=function(){throw Nj.create("only-available-in-sw")},t.prototype.onTokenRefresh=function(){return function(){}},t.prototype.logEvent=function(t,e){return Object(ly.b)(this,void 0,void 0,function(){var n;return Object(ly.d)(this,function(r){switch(r.label){case 0:return n=function(t){switch(t){case Rj.NOTIFICATION_CLICKED:return"notification_open";case Rj.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:e["google.c.a.c_id"],message_name:e["google.c.a.c_l"],message_time:e["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},t}();function pk(t){return Nj.create("missing-app-config-values",{valueName:t})}var gk={isSupported:vk};function vk(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}sp.a.INTERNAL.registerComponent(new Nx.a("messaging",function(t){var e=t.getProvider("app").getImmediate(),n={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw pk("App Configuration Object");if(!t.name)throw pk("App Name");var r=t.options;try{for(var i=Object(ly.h)(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var s=o.value;if(!r[s])throw pk(s)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!vk())throw Nj.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new ak(n):new dk(n)},"PUBLIC").setServiceProps(gk));var mk="firebasestorage.googleapis.com",yk=function(t){function e(n,r){var i=t.call(this,bk(n),"Firebase Storage: "+r+" ("+bk(n)+")")||this;return i.customData={serverResponse:null},Object.setPrototypeOf(i,e.prototype),i}return Object(ly.c)(e,t),e.prototype._codeEquals=function(t){return bk(t)===this.code},Object.defineProperty(e.prototype,"message",{get:function(){return this.customData.serverResponse?this.message+"\n"+this.customData.serverResponse:this.message},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t},enumerable:!1,configurable:!0}),e}(up.c);function bk(t){return"storage/"+t}function _k(){return new yk("unknown","An unknown error occurred, please check the error payload for server response.")}function wk(){return new yk("canceled","User canceled the upload/download.")}function Ek(){return new yk("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Ok(t){return new yk("invalid-argument",t)}function Sk(){return new yk("app-deleted","The Firebase app was deleted.")}function Ck(t){return new yk("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Tk(t,e){return new yk("invalid-format","String does not match format '"+t+"': "+e)}function Ik(t){throw new yk("internal-error","Internal error: "+t)}var xk={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},jk=function(){return function(t,e){this.data=t,this.contentType=e||null}}();function kk(t,e){switch(t){case xk.RAW:return new jk(Ak(e));case xk.BASE64:case xk.BASE64URL:return new jk(Nk(t,e));case xk.DATA_URL:return new jk((n=new Pk(e)).base64?Nk(xk.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(xx){throw Tk(xk.DATA_URL,"Malformed data URL.")}return Ak(e)}(n.rest),new Pk(e).contentType)}var n;throw _k()}function Ak(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,o=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Nk(t,e){switch(t){case xk.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw Tk(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case xk.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw Tk(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(xx){throw Tk(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var Pk=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw Tk(xk.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(n=i).length>=(r=";base64").length&&n.substring(n.length-r.length)===r,this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)}}(),Rk={STATE_CHANGED:"state_changed"},Dk={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Mk(t){switch(t){case"running":case"pausing":case"canceling":return Dk.RUNNING;case"paused":return Dk.PAUSED;case"success":return Dk.SUCCESS;case"canceled":return Dk.CANCELED;case"error":default:return Dk.ERROR}}var Lk=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}({}),Vk=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Lk.NO_ERROR,this.sendPromise_=new Promise(function(e){t.xhr_.addEventListener("abort",function(){t.errorCode_=Lk.ABORT,e(t)}),t.xhr_.addEventListener("error",function(){t.errorCode_=Lk.NETWORK_ERROR,e(t)}),t.xhr_.addEventListener("load",function(){e(t)})})}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw Ik("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw Ik("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw Ik("cannot .getStatus() before sending");try{return this.xhr_.status}catch(xx){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw Ik("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),Fk=function(){function t(){}return t.prototype.createXhrIo=function(){return new Vk},t}();function Uk(t){return"string"==typeof t||t instanceof String}function qk(t){return Hk()&&t instanceof Blob}function Hk(){return"undefined"!=typeof Blob}function Bk(t,e,n,r){if(r<e)throw Ok("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw Ok("Invalid value for '"+t+"'. Expected "+n+" or less.")}function zk(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Wk(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=zk();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(Hk())return new Blob(t);throw new yk("unsupported-environment","This browser doesn't seem to support creating Blobs")}var Gk=function(){function t(t,e){var n=0,r="";qk(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(qk(this.data_)){var r=(o=e,s=n,(i=this.data_).webkitSlice?i.webkitSlice(o,s):i.mozSlice?i.mozSlice(o,s):i.slice?i.slice(o,s):null);return null===r?null:new t(r)}var i,o,s;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(Hk()){var r=e.map(function(e){return e instanceof t?e.data_:e});return new t(Wk.apply(null,r))}var i=e.map(function(t){return Uk(t)?kk(xk.RAW,t).data:t.data_}),o=0;i.forEach(function(t){o+=t.byteLength});var s=new Uint8Array(o),a=0;return i.forEach(function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]}),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}(),Kk=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch(xx){return new t(e,"")}if(""===n.path)return n;throw new yk("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e){var n=null,r="([A-Za-z0-9.\\-_]+)",i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(t){t.path_=decodeURIComponent(t.path)}for(var s=mk.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/"+r+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/"+r+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:o}],u=0;u<a.length;u++){var c=a[u],l=c.regex.exec(e);if(l){var h=l[c.indices.path];h||(h=""),n=new t(l[c.indices.bucket],h),c.postModify(n);break}}if(null==n)throw function(t){return new yk("invalid-url","Invalid URL '"+t+"'.")}(e);return n},t}();function Qk(t){var e,n;try{e=JSON.parse(t)}catch(xx){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}function $k(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function Yk(t){return"https://"+mk+"/v0"+t}function Xk(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}function Jk(t,e){return e}var Zk=function(){return function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||Jk}}(),tA=null;function eA(){if(tA)return tA;var t=[];t.push(new Zk("bucket")),t.push(new Zk("generation")),t.push(new Zk("metageneration")),t.push(new Zk("name","fullPath",!0));var e=new Zk("name");e.xform=function(t,e){return function(t){return!Uk(t)||t.length<2?t:$k(t)}(e)},t.push(e);var n=new Zk("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new Zk("timeCreated")),t.push(new Zk("updated")),t.push(new Zk("md5Hash",null,!0)),t.push(new Zk("cacheControl",null,!0)),t.push(new Zk("contentDisposition",null,!0)),t.push(new Zk("contentEncoding",null,!0)),t.push(new Zk("contentLanguage",null,!0)),t.push(new Zk("contentType",null,!0)),t.push(new Zk("metadata","customMetadata",!0)),tA=t}function nA(t,e,n){var r=Qk(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new Kk(t.bucket,t.fullPath);return e._makeStorageReference(n)}})}(r,t),r}(t,r,n)}function rA(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var iA=function(){return function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function oA(t){if(!t)throw _k()}function sA(t,e){return function(n,r){var i=nA(t,r,e);return oA(null!==i),i}}function aA(t){return function(e,n){var r;return(r=401===e.getStatus()?new yk("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new yk("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new yk("unauthorized","User does not have permission to access '"+t.path+"'."):n).serverResponse=n.serverResponse,r}}function uA(t){var e=aA(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new yk("object-not-found","Object '"+t.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function cA(t,e,n){var r=Yk(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new iA(r,"GET",sA(t,n),i);return o.errorHandler=uA(e),o}function lA(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var hA=function(){return function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}}();function fA(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(xx){oA(!1)}return oA(!!n&&-1!==(e||["active"]).indexOf(n)),n}var dA=262144,pA=function(){return function(t,e,n){if("function"==typeof t||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}}}();function gA(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then(function(){return t.apply(void 0,e)})}}var vA=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=eA(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise(function(t,e){r._resolve=t,r._reject=e,r._start()}),this._promise.then(null,function(){})}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;this._ref.storage._getAuthToken().then(function(n){switch(e._state){case"running":t(n);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}})},t.prototype._createResumable=function(){var t=this;this._resolveToken(function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=lA(e,r,i),a={name:s.fullPath},u=Yk(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},l=rA(s,n),h=new iA(u,"POST",function(t){var e;fA(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(xx){oA(!1)}return oA(Uk(e)),e},t.maxUploadRetryTime);return h.urlParams=a,h.headers=c,h.body=l,h.errorHandler=aA(e),h}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then(function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()},t._errorHandler)})},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken(function(n){var r=function(t,e,n,r){var i=new iA(n,"POST",function(t){var e=fA(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(xx){oA(!1)}n||oA(!1);var i=Number(n);return oA(!isNaN(i)),new hA(i,r.size(),"final"===e)},t.maxUploadRetryTime);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=aA(e),i}(t._ref.storage,t._ref._location,e,t._blob),i=t._ref.storage._makeRequest(r,n);t._request=i,i.getPromise().then(function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()},t._errorHandler)})},t.prototype._continueUpload=function(){var t=this,e=dA*this._chunkMultiplier,n=new hA(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken(function(i){var o;try{o=function(t,e,n,r,i,o,s,a){var u=new hA(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new yk("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},d=r.slice(h,h+l);if(null===d)throw Ek();var p=new iA(n,"POST",function(t,n){var i,s=fA(t,["active","final"]),a=u.current+l,c=r.size();return i="final"===s?sA(e,o)(t,n):null,new hA(a,c,"final"===s,i)},e.maxUploadRetryTime);return p.headers=f,p.body=d.uploadData(),p.progressCallback=a||null,p.errorHandler=aA(t),p}(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(xx){return t._error=xx,void t._transition("error")}var s=t._ref.storage._makeRequest(o,i);t._request=s,s.getPromise().then(function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()},t._errorHandler)})},t.prototype._increaseMultiplier=function(){dA*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken(function(e){var n=cA(t._ref.storage,t._ref._location,t._mappings),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._transition("success")},t._metadataErrorHandler)})},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken(function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=lA(e,r,i),c=rA(u,n),l=Gk.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+a+"--");if(null===l)throw Ek();var h={name:u.fullPath},f=Yk(o),d=t.maxUploadRetryTime,p=new iA(f,"POST",sA(t,n),d);return p.urlParams=h,p.headers=s,p.body=l.uploadData(),p.errorHandler=aA(e),p}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")},t._errorHandler)})},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=wk(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=Mk(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new pA(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach(function(e){t._notifyObserver(e)})},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(Mk(this._state)){case Dk.SUCCESS:gA(this._resolve.bind(null,this.snapshot))();break;case Dk.CANCELED:case Dk.ERROR:gA(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(Mk(this._state)){case Dk.RUNNING:case Dk.PAUSED:t.next&&gA(t.next.bind(t,this.snapshot))();break;case Dk.SUCCESS:t.complete&&gA(t.complete.bind(t))();break;case Dk.CANCELED:case Dk.ERROR:t.error&&gA(t.error.bind(t,this._error))();break;default:t.error&&gA(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),mA=function(){function t(t,e){this._service=t,this._location=e instanceof Kk?e:Kk.makeFromUrl(e)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new Kk(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return $k(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new Kk(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw Ck(t)},t}();function yA(t){var e={prefixes:[],items:[]};return bA(t,e).then(function(){return e})}function bA(t,e,n){return Object(ly.b)(this,void 0,void 0,function(){var r,i,o;return Object(ly.d)(this,function(s){switch(s.label){case 0:return[4,_A(t,{pageToken:n})];case 1:return r=s.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,bA(t,e,r.nextPageToken)];case 2:s.sent(),s.label=3;case 3:return[2]}})})}function _A(t,e){return Object(ly.b)(this,void 0,void 0,function(){var n,r,i;return Object(ly.d)(this,function(o){switch(o.label){case 0:return null!=e&&"number"==typeof e.maxResults&&Bk("options.maxResults",1,1e3,e.maxResults),[4,t.storage._getAuthToken()];case 1:return n=o.sent(),i=function(t,e,n,r,i){var o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=Yk(e.bucketOnlyServerUrl()),a=t.maxOperationRetryTime,u=new iA(s,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=Qk(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t._makeStorageReference(new Kk(e,s));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++)a=t._makeStorageReference(new Kk(e,c[u].name)),r.items.push(a);return r}(t,e,r)}(t,e,r);return oA(null!==i),i}}(t,e.bucket),a);return u.urlParams=o,u.errorHandler=aA(e),u}(t.storage,t._location,"/",(r=e||{}).pageToken,r.maxResults),[2,t.storage._makeRequest(i,n).getPromise()]}})})}function wA(t,e){var n=function(t,e){var n=e.split("/").filter(function(t){return t.length>0}).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new Kk(t._location.bucket,n);return new mA(t.storage,r)}var EA=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),OA=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new EA(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then(function(e){if(t)return t(new EA(e,n,n._ref))},e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new EA(t,i,i._ref))}:{next:e.next?function(t){return e.next(new EA(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),SA=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map(function(e){return new CA(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map(function(e){return new CA(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),CA=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(wA(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new OA(function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new vA(t,new Gk(e),n)}(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=xk.RAW),this._throwIfRoot("putString");var r=kk(e,t),i=Object(ly.a)({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new OA(new vA(this._delegate,new Gk(r.data,!0),i),this)},t.prototype.listAll=function(){var t=this;return yA(this._delegate).then(function(e){return new SA(e,t.storage)})},t.prototype.list=function(t){var e=this;return _A(this._delegate,t).then(function(t){return new SA(t,e.storage)})},t.prototype.getMetadata=function(){return function(t){return Object(ly.b)(this,void 0,void 0,function(){var e,n;return Object(ly.d)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("getMetadata"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=cA(t.storage,t._location,eA()),[2,t.storage._makeRequest(n,e).getPromise()]}})})}(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return Object(ly.b)(this,void 0,void 0,function(){var n,r;return Object(ly.d)(this,function(i){switch(i.label){case 0:return t._throwIfRoot("updateMetadata"),[4,t.storage._getAuthToken()];case 1:return n=i.sent(),r=function(t,e,n,r){var i=Yk(e.fullServerUrl()),o=rA(n,r),s=t.maxOperationRetryTime,a=new iA(i,"PATCH",sA(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=uA(e),a}(t.storage,t._location,e,eA()),[2,t.storage._makeRequest(r,n).getPromise()]}})})}(this._delegate,t)},t.prototype.getDownloadURL=function(){return function(t){return Object(ly.b)(this,void 0,void 0,function(){var e,n;return Object(ly.d)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("getDownloadURL"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=function(t,e,n){var r=Yk(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new iA(r,"GET",function(t,e){return function(n,r){var i=nA(t,r,e);return oA(null!==i),function(t,e){var n=Qk(e);if(null===n)return null;if(!Uk(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map(function(e){var n=t.fullPath;return Yk("/b/"+i(t.bucket)+"/o/"+i(n))+Xk({alt:"media",token:e})})[0]}(i,r)}}(t,n),i);return o.errorHandler=uA(e),o}(t.storage,t._location,eA()),[2,t.storage._makeRequest(n,e).getPromise().then(function(t){if(null===t)throw new yk("no-download-url","The given file does not have any download URLs.");return t})]}})})}(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),function(t){return Object(ly.b)(this,void 0,void 0,function(){var e,n;return Object(ly.d)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("deleteObject"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=function(t,e){var n=Yk(e.fullServerUrl()),r=new iA(n,"DELETE",function(t,e){},t.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=uA(e),r}(t.storage,t._location),[2,t.storage._makeRequest(n,e).getPromise()]}})})}(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw Ck(t)},t}(),TA=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}(),IA=function(){function t(t,e,n,r,i,o,s,a,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise(function(t,e){h.resolve_=t,h.reject_=e,h.start_()})}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.xhr;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());void 0!==a?i(a):i()}catch(xx){o(xx)}else null!==s?((r=_k()).serverResponse=s.getResponseText(),o(t.errorCallback_?t.errorCallback_(s,r):r)):o(r=n.canceled?t.appDelete_?Sk():wk():new yk("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new xA(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,o=null,s=!1,a=0;function u(){return 2===a}var c=!1;function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c||(c=!0,n.apply(null,t))}function h(e){o=setTimeout(function(){o=null,function(e,n){if(n)e(!1,new xA(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then(function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===Lk.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new xA(s,n))}else{var a=n.getErrorCode()===Lk.ABORT;e(!1,new xA(!1,null,a))}})}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}(f,u())},e)}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)l.call.apply(l,Object(ly.g)([null,t],e));else{var r;u()||s?l.call.apply(l,Object(ly.g)([null,t],e)):(i<64&&(i*=2),1===a?(a=2,r=0):r=1e3*(i+Math.random()),h(r))}}var d=!1;function p(t){d||(d=!0,c||(null!==o?(t||(a=2),clearTimeout(o),h(0)):t||(a=1)))}return h(0),setTimeout(function(){s=!0,p(!0)},r),p}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),xA=function(){return function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}}();function jA(t){return/^[A-Za-z]+:\/\//.test(t)}function kA(t,e){if(t instanceof NA){var n=t;if(null==n._bucket)throw new yk("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new mA(n,n._bucket);return null!=e?kA(r,e):r}if(void 0!==e){if(e.includes(".."))throw Ok('`path` param cannot contain ".."');return wA(t,e)}return t}function AA(t,e){if(e&&jA(e)){if(t instanceof NA)return new mA(t,e);throw Ok("To use ref(service, url), the first argument must be a Storage instance.")}return kA(t,e)}var NA=function(){function t(t,e,n,r,i){var o,s;this.app=t,this._authProvider=e,this._pool=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Kk.makeFromBucketSpec(r):null==(s=null==(o=this.app.options)?void 0:o.storageBucket)?null:Kk.makeFromBucketSpec(s)}return Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){Bk("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){Bk("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return Object(ly.b)(this,void 0,void 0,function(){var t,e;return Object(ly.d)(this,function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}})})},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach(function(t){return t.cancel()}),this._requests.clear(),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new mA(this,t)},t.prototype._makeRequest=function(t,e){var n=this;if(this._deleted)return new TA(Sk());var r=function(t,e,n,r,i){var o=Xk(t.urlParams),s=t.url+o,a=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(a,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(a,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(a,i),new IA(s,t.method,a,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}(t,this._appId,e,this._pool,this._firebaseVersion);return this._requests.add(r),r.getPromise().then(function(){return n._requests.delete(r)},function(){return n._requests.delete(r)}),r},t}(),PA=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(jA(t))throw Ok("ref() expected a child path but got a URL, use refFromURL instead.");return new CA(AA(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!jA(t))throw Ok("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Kk.makeFromUrl(t)}catch(xx){throw Ok("refFromUrl() expected a valid full URL but got an invalid one.")}return new CA(AA(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t}();function RA(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return new PA(n,new NA(n,r,new Fk,e,sp.a.SDK_VERSION))}!function(t){var e={TaskState:Dk,TaskEvent:Rk,StringFormat:xk,Storage:NA,Reference:CA};t.INTERNAL.registerComponent(new Nx.a("storage",RA,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage","0.4.3")}(sp.a);var DA,MA,LA,VA="0.4.6",FA=VA,UA="FB-PERF-TRACE-MEASURE",qA="_wt_",HA="_fcp",BA="_fid",zA="@firebase/performance/config",WA="@firebase/performance/configexpire",GA="Performance",KA=((DA={})["trace started"]="Trace {$traceName} was started before.",DA["trace stopped"]="Trace {$traceName} is not running.",DA["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",DA["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",DA["no window"]="Window is not available.",DA["no app id"]="App id is not available.",DA["no project id"]="Project id is not available.",DA["no api key"]="Api key is not available.",DA["invalid cc log"]="Attempted to queue invalid cc event",DA["FB not default"]="Performance can only start when Firebase app instance is the default one.",DA["RC response not ok"]="RC response is not ok",DA["invalid attribute name"]="Attribute name {$attributeName} is invalid.",DA["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",DA["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",DA["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",DA),QA=new up.b("performance",GA,KA),$A=new ap.b(GA);$A.logLevel=ap.a.INFO;var YA,XA=function(){function t(t){if(this.window=t,!t)throw QA.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return t.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},t.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},t.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},t.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},t.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},t.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},t.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!Object(up.w)()||($A.info("IndexedDB is not supported by current browswer"),!1):($A.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},t.prototype.setupObserver=function(t,e){this.PerformanceObserver&&new this.PerformanceObserver(function(t){for(var n=0,r=t.getEntries();n<r.length;n++)e(r[n])}).observe({entryTypes:[t]})},t.getInstance=function(){return void 0===MA&&(MA=new t(LA)),MA},t}();function JA(t,e){var n=t.length-e.length;if(n<0||n>1)throw QA.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var ZA,tN=function(){function t(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=JA("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=JA("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return t.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw QA.create("no app id");return t},t.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw QA.create("no project id");return t},t.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw QA.create("no api key");return t},t.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},t.getInstance=function(){return void 0===YA&&(YA=new t),YA},t}();function eN(){return ZA}var nN=function(t){return t[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN",t}({}),rN=["firebase_","google_","ga_"],iN=new RegExp("^[a-zA-Z]\\w*$");function oN(){var t=XA.getInstance().navigator;return"serviceWorker"in t?t.serviceWorker.controller?2:3:1}function sN(){switch(XA.getInstance().document.visibilityState){case"visible":return nN.VISIBLE;case"hidden":return nN.HIDDEN;default:return nN.UNKNOWN}}function aN(){var t=XA.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function uN(t){if(!t)return t;var e=tN.getInstance(),n=t.entries||{};return e.loggingEnabled=void 0===n.fpr_enabled||"true"===String(n.fpr_enabled),n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=cN(e.tracesSamplingRate),e.logNetworkAfterSampling=cN(e.networkRequestsSamplingRate),t}function cN(t){return Math.random()<=t}var lN,hN=1;function fN(){return hN=2,lN=lN||function(){var t=XA.getInstance().document;return new Promise(function(e){if(t&&"complete"!==t.readyState){var n=function(){"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()})}().then(function(){return(t=tN.getInstance().installationsService.getId()).then(function(t){ZA=t}),t;var t}).then(function(t){return function(t){var e=function(){var t=XA.getInstance().localStorage;if(t){var e=t.getItem(WA);if(e&&Number(e)>Date.now()){var n=t.getItem(zA);if(n)try{return JSON.parse(n)}catch(r){return}}}}();return e?(uN(e),Promise.resolve()):function(t){return(e=tN.getInstance().installationsService.getToken(),e.then(function(t){}),e).then(function(e){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+tN.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+tN.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:"FIREBASE_INSTALLATIONS_AUTH "+e},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:tN.getInstance().getAppId(),app_version:FA,sdk_version:"0.0.1"})});return fetch(r).then(function(t){if(t.ok)return t.json();throw QA.create("RC response not ok")})}).catch(function(){$A.info("Could not fetch config, will use default configs")});var e}(t).then(uN).then(function(t){return function(t){var e=XA.getInstance().localStorage;t&&e&&(e.setItem(zA,JSON.stringify(t)),e.setItem(WA,String(Date.now()+60*tN.getInstance().configTimeToLive*60*1e3)))}(t)},function(){})}(t)}).then(function(){return dN()},function(){return dN()})}function dN(){hN=3}var pN,gN=1e4,vN=3,mN=[],yN=!1;function bN(t){setTimeout(function(){var t,e;if(0!==vN)return mN.length?(e=(t=mN.splice(0,1e3)).map(function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}}),void function(t,e){return function(t){var e=tN.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(t).then(function(t){return t.ok||$A.info("Call to Firebase backend failed."),t.json()}).then(function(t){var n=Number(t.nextRequestWaitMillis),r=gN;isNaN(n)||(r=Math.max(n,r));var i=t.logResponseDetails;Array.isArray(i)&&i.length>0&&"RETRY_REQUEST_LATER"===i[0].responseAction&&(mN=Object(ly.g)(e,mN),$A.info("Retry transport request later.")),vN=3,bN(r)})}({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:tN.getInstance().logSource,log_event:e},t).catch(function(){mN=Object(ly.g)(t,mN),vN--,$A.info("Tries left: "+vN+"."),bN(gN)})):bN(gN)},t)}function _N(t){if(!t.eventTime||!t.message)throw QA.create("invalid cc log");mN=Object(ly.g)(mN,[t])}function wN(t,e){var n;pN||(n=SN,pN=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];_N({message:n.apply(void 0,t),eventTime:Date.now()})}),pN(t,e)}function EN(t){var e=tN.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&XA.getInstance().requiredApisAvailable()&&(t.isAuto&&sN()!==nN.VISIBLE||(3===hN?ON(t):fN().then(function(){return ON(t)},function(){return ON(t)})))}function ON(t){if(eN()){var e=tN.getInstance();e.loggingEnabled&&e.logTraceAfterSampling&&setTimeout(function(){return wN(t,1)},0)}}function SN(t,e){return 0===e?(r={url:(n=t).url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},i={application_info:CN(),network_request_metric:r},JSON.stringify(i)):function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:CN(),trace_metric:e};return JSON.stringify(r)}(t);var n,r,i}function CN(){return{google_app_id:tN.getInstance().getAppId(),app_instance_id:eN(),web_app_info:{sdk_version:FA,page_url:XA.getInstance().getUrl(),service_worker_status:oN(),visibility_state:sN(),effective_connection_type:aN()},application_process_state:0}}var TN=["_fp",HA,BA],IN=function(){function t(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=XA.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||"FB-PERF-TRACE-MEASURE-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return t.prototype.start=function(){if(1!==this.state)throw QA.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},t.prototype.stop=function(){if(2!==this.state)throw QA.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),EN(this)},t.prototype.record=function(t,e,n){if(t<=0)throw QA.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw QA.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=Object(ly.a)({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}EN(this)},t.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),this.putMetric(t,void 0===this.counters[t]?e:this.counters[t]+e)},t.prototype.putMetric=function(t,e){if(o=this.name,0===(i=t).length||i.length>100||!(o&&o.startsWith(qA)&&TN.indexOf(i)>-1)&&i.startsWith("_"))throw QA.create("invalid custom metric name",{customMetricName:t});var n,r,i,o;this.counters[t]=(n=e,(r=Math.floor(n))<n&&$A.info("Metric value should be an Integer, setting the value as : "+r+"."),r)},t.prototype.getMetric=function(t){return this.counters[t]||0},t.prototype.putAttribute=function(t,e){var n,r=!(0===(n=t).length||n.length>40||rN.some(function(t){return n.startsWith(t)})||!n.match(iN)),i=function(t){return 0!==t.length&&t.length<=100}(e);if(r&&i)this.customAttributes[t]=e;else{if(!r)throw QA.create("invalid attribute name",{attributeName:t});if(!i)throw QA.create("invalid attribute value",{attributeValue:e})}},t.prototype.getAttribute=function(t){return this.customAttributes[t]},t.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},t.prototype.getAttributes=function(){return Object(ly.a)({},this.customAttributes)},t.prototype.setStartTime=function(t){this.startTimeUs=t},t.prototype.setDuration=function(t){this.durationUs=t},t.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},t.createOobTrace=function(e,n,r){var i=XA.getInstance().getUrl();if(i){var o=new t(qA+i,!0),s=Math.floor(1e3*XA.getInstance().getTimeOrigin());if(o.setStartTime(s),e&&e[0]&&(o.setDuration(Math.floor(1e3*e[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd))),n){var a=n.find(function(t){return"first-paint"===t.name});a&&a.startTime&&o.putMetric("_fp",Math.floor(1e3*a.startTime));var u=n.find(function(t){return"first-contentful-paint"===t.name});u&&u.startTime&&o.putMetric(HA,Math.floor(1e3*u.startTime)),r&&o.putMetric(BA,Math.floor(1e3*r))}EN(o)}},t.createUserTimingTrace=function(e){EN(new t(e,!1,e))},t}();function xN(t){var e=t;if(e&&void 0!==e.responseStart){var n=XA.getInstance().getTimeOrigin(),r=Math.floor(1e3*(e.startTime+n)),i=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,o=Math.floor(1e3*(e.responseEnd-e.startTime));!function(t){var e=tN.getInstance();if(e.instrumentationEnabled){var n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout(function(){return wN(t,0)},0)}}({url:e.name&&e.name.split("?")[0],responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o})}}function jN(){eN()&&(setTimeout(function(){return function(){var t=XA.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout(function(){IN.createOobTrace(e,n),r=void 0},5e3);t.onFirstInputDelay(function(t){r&&(clearTimeout(r),IN.createOobTrace(e,n,t))})}else IN.createOobTrace(e,n)}()},0),setTimeout(function(){return function(){for(var t=XA.getInstance(),e=0,n=t.getEntriesByType("resource");e<n.length;e++)xN(n[e]);t.setupObserver("resource",xN)}()},0),setTimeout(function(){return function(){for(var t=XA.getInstance(),e=0,n=t.getEntriesByType("measure");e<n.length;e++)kN(n[e]);t.setupObserver("measure",kN)}()},0))}function kN(t){var e=t.name;e.substring(0,UA.length)!==UA&&IN.createUserTimingTrace(e)}var AN=function(){function t(t){this.app=t,XA.getInstance().requiredApisAvailable()&&Object(up.N)().then(function(t){t&&(yN||(bN(5500),yN=!0),fN().then(jN,jN))}).catch(function(t){$A.info("Environment doesn't support IndexedDB: "+t)})}return t.prototype.trace=function(t){return new IN(t)},Object.defineProperty(t.prototype,"instrumentationEnabled",{get:function(){return tN.getInstance().instrumentationEnabled},set:function(t){tN.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataCollectionEnabled",{get:function(){return tN.getInstance().dataCollectionEnabled},set:function(t){tN.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),t}();!function(t){t.INTERNAL.registerComponent(new Nx.a("performance",function(t){return function(t,e){if("[DEFAULT]"!==t.name)throw QA.create("FB not default");if("undefined"==typeof window)throw QA.create("no window");return function(t){LA=t}(window),tN.getInstance().firebaseAppInstance=t,tN.getInstance().installationsService=e,new AN(t)}(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())},"PUBLIC")),t.registerVersion("@firebase/performance",VA)}(sp.a);var NN,PN="https://www.googletagmanager.com/gtag/js",RN=function(t){return t.EVENT="event",t.SET="set",t.CONFIG="config",t}({}),DN=function(t){return t.ADD_SHIPPING_INFO="add_shipping_info",t.ADD_PAYMENT_INFO="add_payment_info",t.ADD_TO_CART="add_to_cart",t.ADD_TO_WISHLIST="add_to_wishlist",t.BEGIN_CHECKOUT="begin_checkout",t.CHECKOUT_PROGRESS="checkout_progress",t.EXCEPTION="exception",t.GENERATE_LEAD="generate_lead",t.LOGIN="login",t.PAGE_VIEW="page_view",t.PURCHASE="purchase",t.REFUND="refund",t.REMOVE_FROM_CART="remove_from_cart",t.SCREEN_VIEW="screen_view",t.SEARCH="search",t.SELECT_CONTENT="select_content",t.SELECT_ITEM="select_item",t.SELECT_PROMOTION="select_promotion",t.SET_CHECKOUT_OPTION="set_checkout_option",t.SHARE="share",t.SIGN_UP="sign_up",t.TIMING_COMPLETE="timing_complete",t.VIEW_CART="view_cart",t.VIEW_ITEM="view_item",t.VIEW_ITEM_LIST="view_item_list",t.VIEW_PROMOTION="view_promotion",t.VIEW_SEARCH_RESULTS="view_search_results",t}({}),MN=new ap.b("@firebase/analytics");function LN(t,e,n,r,i,o){return Object(ly.b)(this,void 0,void 0,function(){var s,a,u,c;return Object(ly.d)(this,function(l){switch(l.label){case 0:s=r[i],l.label=1;case 1:return l.trys.push([1,7,,8]),s?[4,e[s]]:[3,3];case 2:return l.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return a=l.sent(),(u=a.find(function(t){return t.measurementId===i}))?[4,e[u.appId]]:[3,6];case 5:l.sent(),l.label=6;case 6:return[3,8];case 7:return c=l.sent(),MN.error(c),[3,8];case 8:return t(RN.CONFIG,i,o),[2]}})})}function VN(t,e,n,r,i){return Object(ly.b)(this,void 0,void 0,function(){var o,s,a,u,c,l,h;return Object(ly.d)(this,function(f){switch(f.label){case 0:return f.trys.push([0,4,,5]),o=[],i&&i.send_to?(s=i.send_to,Array.isArray(s)||(s=[s]),[4,Promise.all(n)]):[3,2];case 1:for(a=f.sent(),u=function(t){var n=a.find(function(e){return e.measurementId===t}),r=n&&e[n.appId];if(!r)return o=[],"break";o.push(r)},c=0,l=s;c<l.length&&"break"!==u(l[c]);c++);f.label=2;case 2:return 0===o.length&&(o=Object.values(e)),[4,Promise.all(o)];case 3:return f.sent(),t(RN.EVENT,r,i||{}),[3,5];case 4:return h=f.sent(),MN.error(h),[3,5];case 5:return[2]}})})}var FN=((NN={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",NN["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",NN["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",NN["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",NN["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",NN["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",NN["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",NN["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',NN["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',NN),UN=new up.b("analytics","Analytics",FN),qN=new(function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}return t.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},t.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},t.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},t}());function HN(t){var e;return Object(ly.b)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(ly.d)(this,function(u){switch(u.label){case 0:return n=t.appId,r={method:"GET",headers:(c=t.apiKey,new Headers({Accept:"application/json","x-goog-api-key":c}))},i="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),[4,fetch(i,r)];case 1:if(200===(o=u.sent()).status||304===o.status)return[3,6];s="",u.label=2;case 2:return u.trys.push([2,4,,5]),[4,o.json()];case 3:return a=u.sent(),(null===(e=a.error)||void 0===e?void 0:e.message)&&(s=a.error.message),[3,5];case 4:return u.sent(),[3,5];case 5:throw UN.create("config-fetch-failed",{httpStatus:o.status,responseMessage:s});case 6:return[2,o.json()]}var c})})}function BN(t,e,n,r){var i=e.throttleEndTimeMillis,o=e.backoffCount;return void 0===r&&(r=qN),Object(ly.b)(this,void 0,void 0,function(){var e,s,a,u,c,l,h;return Object(ly.d)(this,function(f){switch(f.label){case 0:e=t.appId,s=t.measurementId,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,zN(n,i)];case 2:return f.sent(),[3,4];case 3:if(a=f.sent(),s)return MN.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+a.message+"]"),[2,{appId:e,measurementId:s}];throw a;case 4:return f.trys.push([4,6,,7]),[4,HN(t)];case 5:return u=f.sent(),r.deleteThrottleMetadata(e),[2,u];case 6:if(!function(t){if(!(t instanceof up.c&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(c=f.sent())){if(r.deleteThrottleMetadata(e),s)return MN.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+c.message+"]"),[2,{appId:e,measurementId:s}];throw c}return l=503===Number(c.customData.httpStatus)?Object(up.j)(o,r.intervalMillis,30):Object(up.j)(o,r.intervalMillis),h={throttleEndTimeMillis:Date.now()+l,backoffCount:o+1},r.setThrottleMetadata(e,h),MN.debug("Calling attemptFetch again in "+l+" millis"),[2,BN(t,h,n,r)];case 7:return[2]}})})}function zN(t,e){return new Promise(function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener(function(){clearTimeout(o),r(UN.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}var WN,GN,KN=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},t}(),QN={},$N=[],YN={},XN="dataLayer",JN="gtag",ZN=!1;function tP(t){if(ZN)throw UN.create("already-initialized");t.dataLayerName&&(XN=t.dataLayerName),t.gtagName&&(JN=t.gtagName)}var eP="analytics";function nP(){return Object(ly.b)(this,void 0,void 0,function(){return Object(ly.d)(this,function(t){switch(t.label){case 0:if(Object(up.s)())return[2,!1];if(!Object(up.e)())return[2,!1];if(!Object(up.w)())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Object(up.N)()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}})})}!function(t){t.INTERNAL.registerComponent(new Nx.a(eP,function(t){return function(t,e){!function(){var t=[];if(Object(up.s)()&&t.push("This is a browser extension environment."),Object(up.e)()||t.push("Cookies are not available."),t.length>0){var e=t.map(function(t,e){return"("+(e+1)+") "+t}).join(" "),n=UN.create("invalid-analytics-context",{errorInfo:e});MN.warn(n.message)}}();var n,r,i=t.options.appId;if(!i)throw UN.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw UN.create("no-api-key");MN.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=QN[i])throw UN.create("already-exists",{id:i});if(!ZN){n=XN,r=[],Array.isArray(window[n])?r=window[n]:window[n]=r;var o=function(t,e,n,r,i){var o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=function(t,e,n,r){return function(i,o,s){return Object(ly.b)(this,void 0,void 0,function(){var a;return Object(ly.d)(this,function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),i!==RN.EVENT?[3,2]:[4,VN(t,e,n,o,s)];case 1:return u.sent(),[3,5];case 2:return i!==RN.CONFIG?[3,4]:[4,LN(t,e,n,r,o,s)];case 3:return u.sent(),[3,5];case 4:t(RN.SET,o),u.label=5;case 5:return[3,7];case 6:return a=u.sent(),MN.error(a),[3,7];case 7:return[2]}})})}}(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}(QN,$N,YN,XN,JN);GN=o.wrappedGtag,WN=o.gtagCore,ZN=!0}return QN[i]=function(t,e,n,r,i,o){return Object(ly.b)(this,void 0,void 0,function(){var s,a,u,c,l,h,f;return Object(ly.d)(this,function(d){switch(d.label){case 0:return(s=function(t,e,n){return void 0===e&&(e=qN),Object(ly.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u=this;return Object(ly.d)(this,function(c){if(i=(n=t.options).apiKey,o=n.measurementId,!(r=n.appId))throw UN.create("no-app-id");if(!i){if(o)return[2,{measurementId:o,appId:r}];throw UN.create("no-api-key")}return s=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new KN,setTimeout(function(){return Object(ly.b)(u,void 0,void 0,function(){return Object(ly.d)(this,function(t){return a.abort(),[2]})})},6e4),[2,BN({appId:r,apiKey:i,measurementId:o},s,a,e)]})})}(t)).then(function(e){n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&MN.warn("The measurement ID in the local Firebase config ("+t.options.measurementId+") does not match the measurement ID fetched from the server ("+e.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(function(t){return MN.error(t)}),e.push(s),a=function(){return Object(ly.b)(this,void 0,void 0,function(){var t;return Object(ly.d)(this,function(e){switch(e.label){case 0:return Object(up.w)()?[3,1]:(MN.warn(UN.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return e.trys.push([1,3,,4]),[4,Object(up.N)()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),MN.warn(UN.create("indexeddb-unavailable",{errorInfo:t}).message),[2,!1];case 4:return[2,!0]}})})}().then(function(t){return t?r.getId():void 0}),[4,Promise.all([s,a])];case 1:return u=d.sent(),c=u[0],l=u[1],function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(PN))return r}return null}()||function(t,e){var n=document.createElement("script");n.src=PN+"?l="+t+"&id="+e,n.async=!0,document.head.appendChild(n)}(o,c.measurementId),i("js",new Date),(f={}).origin="firebase",f.update=!0,h=f,null!=l&&(h.firebase_id=l),i(RN.CONFIG,c.measurementId,h),[2,c.measurementId]}})})}(t,$N,YN,e,WN,XN),{app:t,logEvent:function(t,e,n){(function(t,e,n,r,i){return Object(ly.b)(this,void 0,void 0,function(){var o,s;return Object(ly.d)(this,function(a){switch(a.label){case 0:return i&&i.global?(t(RN.EVENT,n,r),[2]):[3,1];case 1:return[4,e];case 2:o=a.sent(),s=Object(ly.a)(Object(ly.a)({},r),{send_to:o}),t(RN.EVENT,n,s),a.label=3;case 3:return[2]}})})})(GN,QN[i],t,e,n).catch(function(t){return MN.error(t)})},setCurrentScreen:function(t,e){(function(t,e,n,r){return Object(ly.b)(this,void 0,void 0,function(){var i;return Object(ly.d)(this,function(o){switch(o.label){case 0:return r&&r.global?(t(RN.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(RN.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}})})})(GN,QN[i],t,e).catch(function(t){return MN.error(t)})},setUserId:function(t,e){(function(t,e,n,r){return Object(ly.b)(this,void 0,void 0,function(){var i;return Object(ly.d)(this,function(o){switch(o.label){case 0:return r&&r.global?(t(RN.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(RN.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}})})})(GN,QN[i],t,e).catch(function(t){return MN.error(t)})},setUserProperties:function(t,e){(function(t,e,n,r){return Object(ly.b)(this,void 0,void 0,function(){var i,o,s,a,u;return Object(ly.d)(this,function(c){switch(c.label){case 0:if(!r||!r.global)return[3,1];for(i={},o=0,s=Object.keys(n);o<s.length;o++)i["user_properties."+(a=s[o])]=n[a];return t(RN.SET,i),[2,Promise.resolve()];case 1:return[4,e];case 2:u=c.sent(),t(RN.CONFIG,u,{update:!0,user_properties:n}),c.label=3;case 3:return[2]}})})})(GN,QN[i],t,e).catch(function(t){return MN.error(t)})},setAnalyticsCollectionEnabled:function(t){(function(t,e){return Object(ly.b)(this,void 0,void 0,function(){var n;return Object(ly.d)(this,function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),window["ga-disable-"+n]=!e,[2]}})})})(QN[i],t).catch(function(t){return MN.error(t)})},INTERNAL:{delete:function(){return delete QN[i],Promise.resolve()}}}}(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())},"PUBLIC").setServiceProps({settings:tP,EventName:DN,isSupported:nP})),t.INTERNAL.registerComponent(new Nx.a("analytics-internal",function(t){try{return{logEvent:t.getProvider(eP).getImmediate().logEvent}}catch(xx){throw UN.create("interop-component-reg-failed",{reason:xx})}},"PRIVATE")),t.registerVersion("@firebase/analytics","0.6.4")}(sp.a);var rP,iP=function(){function t(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}return t.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},t.prototype.fetch=function(t){return Object(ly.b)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(ly.d)(this,function(s){switch(s.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=s.sent(),n=e[0],(r=e[1])&&this.isCachedDataFresh(t.cacheMaxAgeMillis,n)?[2,r]:(t.eTag=r&&r.eTag,[4,this.client.fetch(t)]);case 2:return i=s.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return s.sent(),[2,i]}})})},t}(),oP=((rP={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",rP["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",rP["registration-api-key"]="Undefined API key. Check Firebase app initialization.",rP["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",rP["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",rP["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",rP["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",rP["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",rP["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",rP["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',rP["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',rP["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",rP["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",rP),sP=new up.b("remoteconfig","Remote Config",oP),aP=function(){function t(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return t.prototype.fetch=function(t){return Object(ly.b)(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,l,h,f,d,p,g,v;return Object(ly.d)(this,function(m){switch(m.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:e=m.sent(),n=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",r=n+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,i={sdk_version:this.sdkVersion,app_instance_id:e[0],app_instance_id_token:e[1],app_id:this.appId,language_code:(void 0===y&&(y=navigator),y.languages&&y.languages[0]||y.language)},o={method:"POST",headers:{"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},body:JSON.stringify(i)},s=fetch(r,o),a=new Promise(function(e,n){t.signal.addEventListener(function(){var t=new Error("The operation was aborted.");t.name="AbortError",n(t)})}),m.label=2;case 2:return m.trys.push([2,5,,6]),[4,Promise.race([s,a])];case 3:return m.sent(),[4,s];case 4:return u=m.sent(),[3,6];case 5:throw c=m.sent(),l="fetch-client-network","AbortError"===c.name&&(l="fetch-timeout"),sP.create(l,{originalErrorMessage:c.message});case 6:if(h=u.status,f=u.headers.get("ETag")||void 0,200!==u.status)return[3,11];g=void 0,m.label=7;case 7:return m.trys.push([7,9,,10]),[4,u.json()];case 8:return g=m.sent(),[3,10];case 9:throw v=m.sent(),sP.create("fetch-client-parse",{originalErrorMessage:v.message});case 10:d=g.entries,p=g.state,m.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===p?h=500:"NO_CHANGE"===p?h=304:"NO_TEMPLATE"!==p&&"EMPTY_CONFIG"!==p||(d={}),304!==h&&200!==h)throw sP.create("fetch-status",{httpStatus:h});return[2,{status:h,eTag:f,config:d}]}var y})})},t}(),uP=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},t}(),cP=["1","true","t","yes","y","on"],lP=function(){function t(t,e){void 0===e&&(e=""),this._source=t,this._value=e}return t.prototype.asString=function(){return this._value},t.prototype.asBoolean=function(){return"static"!==this._source&&cP.indexOf(this._value.toLowerCase())>=0},t.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},t.prototype.getSource=function(){return this._source},t}(),hP=function(){function t(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return t.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=ap.a.DEBUG;break;case"silent":this._logger.logLevel=ap.a.SILENT;break;default:this._logger.logLevel=ap.a.ERROR}},Object.defineProperty(t.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),t.prototype.activate=function(){return Object(ly.b)(this,void 0,void 0,function(){var t,e,n;return Object(ly.d)(this,function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=r.sent(),n=t[1],(e=t[0])&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}})})},t.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){t._isInitializationComplete=!0})),this._initializePromise},t.prototype.fetch=function(){return Object(ly.b)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(ly.d)(this,function(i){switch(i.label){case 0:t=new uP,setTimeout(function(){return Object(ly.b)(r,void 0,void 0,function(){return Object(ly.d)(this,function(e){return t.abort(),[2]})})},this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return e=i.sent(),n=function(t,e){return t instanceof up.c&&-1!==t.code.indexOf("fetch-throttle")}(e)?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),e;case 6:return[2]}})})},t.prototype.fetchAndActivate=function(){return Object(ly.b)(this,void 0,void 0,function(){return Object(ly.d)(this,function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}})})},t.prototype.getAll=function(){var t,e,n=this;return(t=this._storageCache.getActiveConfig(),e=this.defaultConfig,void 0===t&&(t={}),void 0===e&&(e={}),Object.keys(Object(ly.a)(Object(ly.a)({},t),e))).reduce(function(t,e){return t[e]=n.getValue(e),t},{})},t.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},t.prototype.getNumber=function(t){return this.getValue(t).asNumber()},t.prototype.getString=function(t){return this.getValue(t).asString()},t.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new lP("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new lP("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new lP("static"))},t}();function fP(t,e){var n=t.target.error||void 0;return sP.create(e,{originalErrorMessage:n&&n.message})}var dP="app_namespace_store",pP=function(){function t(t,e,n,r){void 0===r&&(r=new Promise(function(t,e){var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(t){e(fP(t,"storage-open"))},n.onsuccess=function(e){t(e.target.result)},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(dP,{keyPath:"compositeKey"})}}})),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}return t.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},t.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},t.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},t.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},t.prototype.getActiveConfig=function(){return this.get("active_config")},t.prototype.setActiveConfig=function(t){return this.set("active_config",t)},t.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},t.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},t.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},t.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},t.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},t.prototype.get=function(t){return Object(ly.b)(this,void 0,void 0,function(){var e,n=this;return Object(ly.d)(this,function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise(function(r,i){var o=e.transaction([dP],"readonly").objectStore(dP),s=n.createCompositeKey(t);try{var a=o.get(s);a.onerror=function(t){i(fP(t,"storage-get"))},a.onsuccess=function(t){var e=t.target.result;r(e?e.value:void 0)}}catch(xx){i(sP.create("storage-get",{originalErrorMessage:xx&&xx.message}))}})]}})})},t.prototype.set=function(t,e){return Object(ly.b)(this,void 0,void 0,function(){var n,r=this;return Object(ly.d)(this,function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise(function(i,o){var s=n.transaction([dP],"readwrite").objectStore(dP),a=r.createCompositeKey(t);try{var u=s.put({compositeKey:a,value:e});u.onerror=function(t){o(fP(t,"storage-set"))},u.onsuccess=function(){i()}}catch(xx){o(sP.create("storage-set",{originalErrorMessage:xx&&xx.message}))}})]}})})},t.prototype.delete=function(t){return Object(ly.b)(this,void 0,void 0,function(){var e,n=this;return Object(ly.d)(this,function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise(function(r,i){var o=e.transaction([dP],"readwrite").objectStore(dP),s=n.createCompositeKey(t);try{var a=o.delete(s);a.onerror=function(t){i(fP(t,"storage-delete"))},a.onsuccess=function(){r()}}catch(xx){i(sP.create("storage-delete",{originalErrorMessage:xx&&xx.message}))}})]}})})},t.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},t}(),gP=function(){function t(t){this.storage=t}return t.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},t.prototype.getActiveConfig=function(){return this.activeConfig},t.prototype.loadFromStorage=function(){return Object(ly.b)(this,void 0,void 0,function(){var t,e,n,r,i,o;return Object(ly.d)(this,function(s){switch(s.label){case 0:return t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,t];case 1:return(r=s.sent())&&(this.lastFetchStatus=r),[4,e];case 2:return(i=s.sent())&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return(o=s.sent())&&(this.activeConfig=o),[2]}})})},t.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},t.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},t}();function vP(t,e){return new Promise(function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener(function(){clearTimeout(o),r(sP.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}var mP,yP=function(){function t(t,e){this.client=t,this.storage=e}return t.prototype.fetch=function(t){return Object(ly.b)(this,void 0,void 0,function(){var e;return Object(ly.d)(this,function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,e)]}})})},t.prototype.attemptFetch=function(t,e){var n=e.throttleEndTimeMillis,r=e.backoffCount;return Object(ly.b)(this,void 0,void 0,function(){var e,i,o;return Object(ly.d)(this,function(s){switch(s.label){case 0:return[4,vP(t.signal,n)];case 1:s.sent(),s.label=2;case 2:return s.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return e=s.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return s.sent(),[2,e];case 5:if(!function(t){if(!(t instanceof up.c&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(i=s.sent()))throw i;return o={throttleEndTimeMillis:Date.now()+Object(up.j)(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(o)];case 6:return s.sent(),[2,this.attemptFetch(t,o)];case 7:return[2]}})})},t}(),bP="@firebase/remote-config";(mP=sp.a).INTERNAL.registerComponent(new Nx.a("remoteConfig",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw sP.create("registration-window");var i=n.options,o=i.projectId,s=i.apiKey,a=i.appId;if(!o)throw sP.create("registration-project-id");if(!s)throw sP.create("registration-api-key");if(!a)throw sP.create("registration-app-id");var u=new pP(a,n.name,e=e||"firebase"),c=new gP(u),l=new ap.b(bP);l.logLevel=ap.a.ERROR;var h=new aP(r,mP.SDK_VERSION,e,o,s,a),f=new yP(h,u),d=new iP(f,u,c,l),p=new hP(n,d,c,u,l);return p.ensureInitialized(),p},"PUBLIC").setMultipleInstances(!0)),mP.registerVersion(bP,"0.1.31"),sp.a.registerVersion("firebase","8.2.10","app"),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),sp.a.registerVersion("firebase","8.2.10");let _P=(()=>{class t{constructor(t,e){this.router=t,this.activatedRouter=e}inicioSesion(t){sp.a.auth().signInWithEmailAndPassword(t.email,t.password).then(t=>{console.log(t),this.router.navigate(["/inicio"])}).catch(t=>{console.log(t)})}isAuthenticated(){return!!sp.a.auth().currentUser}logout(){sp.a.auth().signOut()}}return t.\u0275fac=function(e){return new(e||t)(un(xh),un(cl))},t.\u0275prov=v({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),wP=(()=>{class t{}return t.\u0275mod=X({type:t}),t.\u0275inj=m({factory:function(e){return new(e||t)},providers:[_P],imports:[[ru,Ru,Hh,ep,np,jf]]}),t})(),EP=(()=>{class t{constructor(t){this.http=t,this.presURL="https://gibuild-9c83c-default-rtdb.europe-west1.firebasedatabase.app/personajes"}postPersonaje(t){const e=JSON.stringify(t),n=new Zh({"Content-type":"application/json"});return this.http.post(`${this.presURL}.json`,e,{headers:n}).pipe(Object(Bu.a)(t=>(console.log(t),t)))}}return t.\u0275fac=function(e){return new(e||t)(un(pf))},t.\u0275prov=v({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),OP=(()=>{class t{constructor(t){this.http=t,this.presURL="https://gibuild-9c83c-default-rtdb.europe-west1.firebasedatabase.app/personajes"}putPersonaje(t,e){const n=JSON.stringify(t),r=new Zh({"Content-Type":"application/json"});return this.http.put(`${this.presURL}/${e}.json`,n,{headers:r}).pipe(Object(Bu.a)(t=>(console.log(t),t)))}delPersonaje(t){return this.http.delete(`${this.presURL}/${t}.json`).pipe(Object(Bu.a)(t=>t))}}return t.\u0275fac=function(e){return new(e||t)(un(pf))},t.\u0275prov=v({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),SP=(()=>{class t{}return t.\u0275mod=X({type:t}),t.\u0275inj=m({factory:function(e){return new(e||t)},providers:[EP,OP],imports:[[ru,Ru,Hh,ep,np,jf]]}),t})();function CP(t,e){1&t&&(Mi(0,"button",12),no(1,"Inicio sesi\xf3n"),Li())}function TP(t,e){if(1&t){const t=Fi();Mi(0,"button",13),Hi("click",function(){return Vt(t),Wi().onLogout()}),no(1,"Cerrar sesi\xf3n"),Li()}}let IP=(()=>{class t{constructor(t,e,n){this.authenticationService=t,this.router=e,this.activatedRouter=n}ngOnInit(){}isAuth(){return this.authenticationService.isAuthenticated()}onLogout(){return this.router.navigate(["/inicio"]),this.authenticationService.logout()}}return t.\u0275fac=function(e){return new(e||t)(Pi(_P),Pi(xh),Pi(cl))},t.\u0275cmp=K({type:t,selectors:[["app-header"]],decls:13,vars:3,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light"],["routerLink","#",1,"navbar-brand"],[3,"src"],["type","button","data-toggle","collapse","data-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","mr-auto"],[1,"nav-item"],["routerLink","/personajes",1,"nav-link"],[1,"form-inline","my-2","my-lg-0"],["class","btn btn-success","routerLink","/login",4,"ngIf"],["class","btn btn-danger","routerLink","/logout",3,"click",4,"ngIf"],["routerLink","/login",1,"btn","btn-success"],["routerLink","/logout",1,"btn","btn-danger",3,"click"]],template:function(t,e){1&t&&(Mi(0,"nav",0),Mi(1,"a",1),Vi(2,"img",2),Li(),Mi(3,"button",3),Vi(4,"span",4),Li(),Mi(5,"div",5),Mi(6,"ul",6),Mi(7,"li",7),Mi(8,"a",8),no(9,"Personajes"),Li(),Li(),Li(),Mi(10,"form",9),Ni(11,CP,2,0,"button",10),Ni(12,TP,2,0,"button",11),Li(),Li(),Li()),2&t&&(cr(2),Ri("src","../../assets/Logos/logo.png",bn),cr(9),Ri("ngIf",!e.isAuth()),cr(1),Ri("ngIf",e.isAuth()))},directives:[kh,Kd,od,Gd,Xa,jh],styles:["nav[_ngcontent-%COMP%]{margin-bottom:40px}"]}),t})(),xP=(()=>{class t{ngOnInit(){sp.a.initializeApp({apiKey:"AIzaSyD9RbrTF2zbsMR1XNTQPbeb9mlx128EIEM",authDomain:"gibuild-9c83c.firebaseapp.com"})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=K({type:t,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"container"]],template:function(t,e){1&t&&(Vi(0,"app-header"),Mi(1,"div",0),Vi(2,"router-outlet"),Li())},directives:[IP,Nh],styles:[""]}),t})(),jP=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=K({type:t,selectors:[["app-inicio"]],decls:2,vars:0,template:function(t,e){1&t&&(Mi(0,"p"),no(1,"inicio works!"),Li())},styles:[""]}),t})();function kP(t,e){1&t&&(Mi(0,"a",4),no(1,"A\xf1adir nuevo personaje"),Li())}function AP(t,e){1&t&&Vi(0,"td",16)}function NP(t,e){1&t&&Vi(0,"td",17)}function PP(t,e){1&t&&Vi(0,"td",18)}function RP(t,e){1&t&&Vi(0,"td",19)}function DP(t,e){1&t&&Vi(0,"td",20)}function MP(t,e){1&t&&Vi(0,"td",21)}function LP(t,e){1&t&&Vi(0,"td",22)}function VP(t,e){if(1&t&&(Mi(0,"td"),Mi(1,"button",23),no(2," Editar "),Li(),Li()),2&t){const t=Wi().$implicit;cr(1),Ki("routerLink","/editpers/",t.id$,"")}}function FP(t,e){if(1&t){const t=Fi();Mi(0,"td"),Mi(1,"button",24),Hi("click",function(){Vt(t);const e=Wi().$implicit;return Wi().eliminarPersonaje(e.id$)}),no(2," Eliminar "),Li(),Li()}}function UP(t,e){if(1&t&&(Mi(0,"tr",5),Mi(1,"td",6),Vi(2,"img",7),Li(),Ni(3,AP,1,0,"td",8),Ni(4,NP,1,0,"td",9),Ni(5,PP,1,0,"td",10),Ni(6,RP,1,0,"td",11),Ni(7,DP,1,0,"td",12),Ni(8,MP,1,0,"td",13),Ni(9,LP,1,0,"td",14),Mi(10,"td"),no(11),Li(),Ni(12,VP,3,1,"td",15),Ni(13,FP,3,0,"td",15),Li()),2&t){const t=e.$implicit,n=Wi();Ri("ngSwitch",t.elemento),cr(2),Gi("alt",t.nombre),Ri("src","../../../assets/characterIcon/"+t.imagen+".png",bn),cr(1),Ri("ngSwitchCase","pyro"),cr(1),Ri("ngSwitchCase","anemo"),cr(1),Ri("ngSwitchCase","cryo"),cr(1),Ri("ngSwitchCase","electro"),cr(1),Ri("ngSwitchCase","geo"),cr(1),Ri("ngSwitchCase","dendro"),cr(1),Ri("ngSwitchCase","hydro"),cr(2),ro(t.estilo),cr(1),Ri("ngIf",n.isAuth()),cr(1),Ri("ngIf",n.isAuth())}}let qP=(()=>{class t{constructor(t,e,n){this.authenticationService=t,this.personajeService=e,this.editpersService=n,this.personajes=[],this.recargarPersonaje()}ngOnInit(){}eliminarPersonaje(t){this.editpersService.delPersonaje(t).subscribe(t=>{this.personajes=[],this.recargarPersonaje()})}recargarPersonaje(){this.personajeService.getPersonajes().subscribe(t=>{for(const e in t)t[e].id$=e,this.personajes.push(t[e])})}isAuth(){return this.authenticationService.isAuthenticated()}}return t.\u0275fac=function(e){return new(e||t)(Pi(_P),Pi(rp),Pi(OP))},t.\u0275cmp=K({type:t,selectors:[["app-personaje"]],decls:8,vars:2,consts:[[1,"col-10","col-md-12"],["class","btn btn-primary float-md-right","routerLink","/addpers",4,"ngIf"],[1,"table","table-striped","table-hover",2,"margin-top","40px"],[3,"ngSwitch",4,"ngFor","ngForOf"],["routerLink","/addpers",1,"btn","btn-primary","float-md-right"],[3,"ngSwitch"],[1,"imagenSize"],[1,"img-thumbnail",3,"src","alt"],["class","pyro",4,"ngSwitchCase"],["class","anemo",4,"ngSwitchCase"],["class","cryo",4,"ngSwitchCase"],["class","electro",4,"ngSwitchCase"],["class","geo",4,"ngSwitchCase"],["class","dendro",4,"ngSwitchCase"],["class","hydro",4,"ngSwitchCase"],[4,"ngIf"],[1,"pyro"],[1,"anemo"],[1,"cryo"],[1,"electro"],[1,"geo"],[1,"dendro"],[1,"hydro"],["type","button",1,"btn","btn-success",3,"routerLink"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(t,e){1&t&&(Mi(0,"div",0),Ni(1,kP,2,0,"a",1),Mi(2,"h3"),no(3,"Listado de personajes"),Li(),Li(),Mi(4,"div",0),Mi(5,"table",2),Mi(6,"tbody"),Ni(7,UP,14,13,"tr",3),Li(),Li(),Li()),2&t&&(cr(1),Ri("ngIf",e.isAuth()),cr(6),Ri("ngForOf",e.personajes))},directives:[Xa,$a,kh,eu,nu,jh],styles:[".pyro[_ngcontent-%COMP%]{background-image:url(elementPyro.f9073e556841177dc77d.png);background-position-x:10px;background-position-y:10px;background-position:50%;background-repeat:no-repeat}.anemo[_ngcontent-%COMP%], .pyro[_ngcontent-%COMP%]{max-width:90px;height:90px;margin-top:30px}.anemo[_ngcontent-%COMP%]{background-image:url(elementAnemo.7de35360cb32f62f7c00.png);background-position-x:10px;background-position-y:10px;background-position:50%;background-repeat:no-repeat}.cryo[_ngcontent-%COMP%]{background-image:url(elementCryo.fe670ef606211a4c3115.png);background-position-x:10px;background-position-y:10px;background-position:50%;background-repeat:no-repeat}.cryo[_ngcontent-%COMP%], .geo[_ngcontent-%COMP%]{max-width:90px;height:90px;margin-top:30px}.geo[_ngcontent-%COMP%]{background-image:url(elementGeo.ea0e65b3ca8fe9dfdce4.png);background-position-x:10px;background-position-y:10px;background-position:50%;background-repeat:no-repeat}.dendro[_ngcontent-%COMP%]{background-image:url(elementDendro.9453d01b1f2159a3f7f6.png);background-position-x:10px;background-position-y:10px;background-position:50%;background-repeat:no-repeat}.dendro[_ngcontent-%COMP%], .electro[_ngcontent-%COMP%]{max-width:90px;height:90px;margin-top:30px}.electro[_ngcontent-%COMP%]{background-image:url(elementElectro.fb29ea3b4a486746225f.png);background-position-x:10px;background-position-y:10px;background-position:50%;background-repeat:no-repeat}.hydro[_ngcontent-%COMP%]{max-width:90px;height:90px;background-image:url(elementHydro.3da35d510054379a96ef.png);background-position-x:10px;background-position-y:10px;background-position:50%;background-repeat:no-repeat;margin-top:30px}.table[_ngcontent-%COMP%]   t[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]{vertical-align:middle;text-align:center;border-collapse:collapse;caption-side:top;border-bottom:1px solid #999;border-radius:0}.table[_ngcontent-%COMP%]{border-style:none}.imagenSize[_ngcontent-%COMP%]{max-width:90px;height:90px;background-position-x:10px;background-position-y:10px;background-position:50%;background-repeat:no-repeat;margin-top:30px}"]}),t})();function HP(t,e){1&t&&(Mi(0,"p",8),no(1," El usuario o contrase\xf1a no es correcto "),Li())}let BP=(()=>{class t{constructor(t,e,n,r){this.formBuilder=t,this.authenticationService=e,this.router=n,this.activatedRouter=r,this.errorSesion=!1,this.correctaSesion=!1}ngOnInit(){this.loginForm=this.formBuilder.group({email:["",[Hf.required,Hf.email]],password:["",[Hf.required]]})}onSubmit(){this.userdata=this.saveUserdata(),this.authenticationService.inicioSesion(this.userdata),setTimeout(()=>{!1===this.isAuth()&&(this.errorSesion=!0)},2e3)}saveUserdata(){return{email:this.loginForm.get("email").value,password:this.loginForm.get("password").value}}isAuth(){return this.authenticationService.isAuthenticated()}}return t.\u0275fac=function(e){return new(e||t)(Pi(tp),Pi(_P),Pi(xh),Pi(cl))},t.\u0275cmp=K({type:t,selectors:[["app-log-in"]],decls:17,vars:3,consts:[[1,"row"],[1,"col","col-md"],[1,"col-10","col-md-6"],[3,"formGroup","ngSubmit"],["class","alert alert-danger",4,"ngIf"],["type","mail","id","inputEmail","autofocus","","formControlName","email",1,"form-control"],["type","password","id","inputPasswpord","formControlName","password",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"alert","alert-danger"]],template:function(t,e){1&t&&(Mi(0,"div",0),Vi(1,"div",1),Mi(2,"div",2),Mi(3,"form",3),Hi("ngSubmit",function(){return e.onSubmit()}),Mi(4,"h4"),no(5,"Introduzca sus datos"),Li(),Ni(6,HP,2,0,"p",4),Mi(7,"label"),no(8,"Correo electronico"),Li(),Vi(9,"input",5),Mi(10,"label"),no(11,"Contrase\xf1a"),Li(),Vi(12,"input",6),Vi(13,"hr"),Mi(14,"button",7),no(15,"Iniciar sesi\xf3n"),Li(),Li(),Li(),Vi(16,"div",1),Li()),2&t&&(cr(3),Ri("formGroup",e.loginForm),cr(3),Ri("ngIf",e.errorSesion),cr(8),Ri("disabled",!e.loginForm.valid))},directives:[Kd,od,Yd,Xa,Mf,id,Jd],styles:[""]}),t})();function zP(t,e){1&t&&(Mi(0,"p",30),no(1," Por favor complete todos los campos obligatorios "),Li())}function WP(t,e){1&t&&Vi(0,"i",31)}function GP(t,e){1&t&&Vi(0,"i",32)}function KP(t,e){if(1&t&&(Mi(0,"p",30),no(1),Li()),2&t){const t=Wi();cr(1),io(" ",t.erroresForm.nombre," ")}}function QP(t,e){1&t&&Vi(0,"i",31)}function $P(t,e){1&t&&Vi(0,"i",32)}function YP(t,e){1&t&&(Mi(0,"p",30),no(1," El campo elemento es obligatorio "),Li())}function XP(t,e){1&t&&Vi(0,"i",31)}function JP(t,e){1&t&&Vi(0,"i",32)}function ZP(t,e){1&t&&(Mi(0,"p",30),no(1," El campo estilo es obligatorio "),Li())}function tR(t,e){1&t&&Vi(0,"i",31)}function eR(t,e){1&t&&Vi(0,"i",32)}function nR(t,e){1&t&&(Mi(0,"p",30),no(1," Por favor complete todos los campos obligatorios "),Li())}function rR(t,e){1&t&&Vi(0,"i",31)}function iR(t,e){1&t&&Vi(0,"i",32)}function oR(t,e){if(1&t&&(Mi(0,"p",30),no(1),Li()),2&t){const t=Wi();cr(1),io(" ",t.erroresForm.nombre," ")}}function sR(t,e){1&t&&Vi(0,"i",31)}function aR(t,e){1&t&&Vi(0,"i",32)}function uR(t,e){1&t&&Vi(0,"i",31)}function cR(t,e){1&t&&Vi(0,"i",32)}function lR(t,e){1&t&&Vi(0,"i",31)}function hR(t,e){1&t&&Vi(0,"i",32)}const fR=[{path:"",component:jP},{path:"personajes",component:qP},{path:"addpers",component:(()=>{class t{constructor(t,e,n,r){this.formBuilder=t,this.addpersService=e,this.router=n,this.activatedRouter=r,this.erroresForm={nombre:""},this.mensajesValidacion={nombre:{required:"Nombre personaje Obligatorio",pattern:"El nombre del personaje solo puede contener letras"}}}ngOnInit(){this.personajeForm=this.formBuilder.group({nombre:["",[Hf.required,Hf.pattern("[a-zA-Z ]*")]],elemento:["",Hf.required],estilo:["",Hf.required],imagen:["",Hf.required]}),this.onValueChanged()}onChange(){this.personajeForm.valueChanges.subscribe(t=>{this.nombre=t.nombre,this.imagen=t.imagen,this.elemento=t.elemento,this.estilo=t.estilo})}onValueChanged(t){if(!this.personajeForm)return;const e=this.personajeForm;for(const n in this.erroresForm){this.erroresForm[n]="";const t=e.get(n);if(t&&t.dirty&&!t.valid){const e=this.mensajesValidacion[n];for(const r in t.errors)this.erroresForm[n]+=e[r]+" "}else this.onChange()}}onSubmit(){this.personaje=this.savePersonaje(),this.addpersService.postPersonaje(this.personaje).subscribe(t=>{this.router.navigate(["/personajes"])}),this.personajeForm.reset()}savePersonaje(){return{nombre:this.personajeForm.get("nombre").value,imagen:this.personajeForm.get("imagen").value,elemento:this.personajeForm.get("elemento").value,estilo:this.personajeForm.get("estilo").value}}}return t.\u0275fac=function(e){return new(e||t)(Pi(tp),Pi(EP),Pi(xh),Pi(cl))},t.\u0275cmp=K({type:t,selectors:[["app-addpers"]],decls:64,vars:14,consts:[[1,"row"],[1,"col","col-md"],[1,"col-10","col-md-8"],["routerLink","/personajes",1,"btn","btn-primary","float-md-right"],["class","alert alert-danger",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","nombre"],["class","fa fa-check-circle check",4,"ngIf"],["class","fa fa-exclamation-circle uncheck",4,"ngIf"],["type","text","id","nombre","formControlName","nombre",1,"form-control"],["for","elemento"],["id","elemento","formControlName","elemento",1,"form-control"],["value",""],["value","pyro"],["value","anemo"],["value","electro"],["value","hydro"],["value","cryo"],["value","dendro"],["value","geo"],["for","estilo"],["id","estilo","formControlName","estilo",1,"form-control"],["value","main-dps"],["value","sub-dps"],["value","support"],["for","imagen"],["type","text","id","imagen","formControlName","imagen",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],["routerLink","/personajes",1,"btn","btn-danger"],[1,"alert","alert-danger"],[1,"fa","fa-check-circle","check"],[1,"fa","fa-exclamation-circle","uncheck"]],template:function(t,e){1&t&&(Mi(0,"div",0),Mi(1,"div",1),Mi(2,"div",2),Mi(3,"a",3),no(4," Regresar al listado "),Li(),Mi(5,"h2"),no(6,"A\xf1adir personaje"),Li(),Ni(7,zP,2,0,"p",4),Mi(8,"form",5),Hi("ngSubmit",function(){return e.onSubmit()}),Mi(9,"div",6),Mi(10,"label",7),no(11,"Nombre"),Li(),Ni(12,WP,1,0,"i",8),Ni(13,GP,1,0,"i",9),Vi(14,"input",10),Ni(15,KP,2,1,"p",4),Li(),Mi(16,"div",6),Mi(17,"label",11),no(18,"Tipo de Elemto"),Li(),Ni(19,QP,1,0,"i",8),Ni(20,$P,1,0,"i",9),Mi(21,"select",12),Mi(22,"option",13),no(23,"Seleccione..."),Li(),Mi(24,"option",14),no(25," Pyro"),Li(),Mi(26,"option",15),no(27," Anemo"),Li(),Mi(28,"option",16),no(29," Electro"),Li(),Mi(30,"option",17),no(31," Hydro"),Li(),Mi(32,"option",18),no(33," Cryo"),Li(),Mi(34,"option",19),no(35," Dendro"),Li(),Mi(36,"option",20),no(37," Geo"),Li(),Li(),Ni(38,YP,2,0,"p",4),Li(),Mi(39,"div",6),Mi(40,"label",21),no(41,"Estilo Personaje"),Li(),Ni(42,XP,1,0,"i",8),Ni(43,JP,1,0,"i",9),Mi(44,"select",22),Mi(45,"option",13),no(46,"Seleccione..."),Li(),Mi(47,"option",23),no(48," Main-DPS"),Li(),Mi(49,"option",24),no(50," Sub-DPS"),Li(),Mi(51,"option",25),no(52," Support"),Li(),Li(),Ni(53,ZP,2,0,"p",4),Li(),Mi(54,"div",6),Mi(55,"label",26),no(56,"Ruta Imag\xe9n"),Li(),Ni(57,tR,1,0,"i",8),Ni(58,eR,1,0,"i",9),Vi(59,"input",27),Li(),Mi(60,"button",28),no(61," A\xf1adir Personaje "),Li(),Mi(62,"a",29),no(63," Cancelar "),Li(),Li(),Li(),Li(),Li()),2&t&&(cr(7),Ri("ngIf",!e.personajeForm.valid),cr(1),Ri("formGroup",e.personajeForm),cr(4),Ri("ngIf",e.personajeForm.controls.nombre.valid),cr(1),Ri("ngIf",e.personajeForm.controls.nombre.invalid&&e.personajeForm.controls.nombre.touched),cr(2),Ri("ngIf",e.erroresForm.nombre),cr(4),Ri("ngIf",e.personajeForm.controls.elemento.valid),cr(1),Ri("ngIf",e.personajeForm.controls.elemento.invalid&&e.personajeForm.controls.elemento.touched),cr(18),Ri("ngIf",e.personajeForm.controls.elemento.invalid&&e.personajeForm.controls.elemento.touched),cr(4),Ri("ngIf",e.personajeForm.controls.estilo.valid),cr(1),Ri("ngIf",e.personajeForm.controls.estilo.invalid&&e.personajeForm.controls.estilo.touched),cr(10),Ri("ngIf",e.personajeForm.controls.estilo.invalid&&e.personajeForm.controls.estilo.touched),cr(4),Ri("ngIf",e.personajeForm.controls.imagen.valid),cr(1),Ri("ngIf",e.personajeForm.controls.imagen.invalid&&e.personajeForm.controls.imagen.touched),cr(2),Ri("disabled",!e.personajeForm.valid))},directives:[kh,Xa,Kd,od,Yd,Mf,id,Jd,gd,vd,_d],styles:["input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-left:5px solid #a94442}input.ng-valid.ng-dirty[_ngcontent-%COMP%]{border-left:5px solid #42a948}.check[_ngcontent-%COMP%]{color:#42a948}.uncheck[_ngcontent-%COMP%]{color:#a94442}"]}),t})()},{path:"editpers/:id",component:(()=>{class t{constructor(t,e,n,r,i){this.formBuilder=t,this.editpersService=e,this.personajeService=n,this.router=r,this.activatedRouter=i,this.erroresForm={nombre:""},this.mensajesValidacion={nombre:{required:"Nombre personaje Obligatorio",pattern:"El nombre del personaje solo puede contener letras"}},this.activatedRouter.params.subscribe(t=>{this.id=t.id,this.personajeService.getPersonaje(this.id).subscribe(t=>this.personajes=t)})}ngOnInit(){this.personajeForm=this.formBuilder.group({nombre:["",[Hf.required,Hf.pattern("[a-zA-Z ]*")]],imagen:["",Hf.required],elemento:["",Hf.required],estilo:["",Hf.required]}),this.onValueChanged()}onValueChanged(t){if(!this.personajeForm)return;const e=this.personajeForm;for(const n in this.erroresForm){this.erroresForm[n]="";const t=e.get(n);if(t&&t.dirty&&!t.valid){const e=this.mensajesValidacion[n];for(const r in t.errors)this.erroresForm[n]+=e[r]+" "}else this.onChange()}}onChange(){this.personajeForm.valueChanges.subscribe(t=>{this.nombre=t.personaje,this.imagen=t.imagen,this.elemento=t.elemento,this.estilo=t.estilo})}onSubmit(){this.personajes=this.savePersonaje(),this.editpersService.putPersonaje(this.personajes,this.id).subscribe(t=>{this.router.navigate(["/personajes"])}),this.personajeForm.reset()}savePersonaje(){return{nombre:this.personajeForm.get("nombre").value,imagen:this.personajeForm.get("imagen").value,elemento:this.personajeForm.get("elemento").value,estilo:this.personajeForm.get("estilo").value}}}return t.\u0275fac=function(e){return new(e||t)(Pi(tp),Pi(OP),Pi(rp),Pi(xh),Pi(cl))},t.\u0275cmp=K({type:t,selectors:[["app-editpers"]],decls:62,vars:16,consts:[[1,"row"],[1,"col","col-md"],[1,"col-10","col-md-8"],["routerLink","/personajes",1,"btn","btn-primary","float-md-right"],["class","alert alert-danger",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","nombre"],["class","fa fa-check-circle check",4,"ngIf"],["class","fa fa-exclamation-circle uncheck",4,"ngIf"],["type","text","id","nombre","formControlName","nombre",1,"form-control",3,"ngModel","ngModelChange"],["for","elemento"],["id","elemento","formControlName","elemento",1,"form-control",3,"ngModel","ngModelChange"],["value",""],["value","pyro"],["value","anemo"],["value","electro"],["value","hydro"],["value","cryo"],["value","dendro"],["value","geo"],["for","estilo"],["id","estilo","formControlName","estilo",1,"form-control",3,"ngModel","ngModelChange"],["value","main-dps"],["value","sub-dps"],["value","support"],["for","imagen"],["type","text","id","imagen","formControlName","imagen",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary",3,"disabled"],["routerLink","/personajes",1,"btn","btn-danger"],[1,"alert","alert-danger"],[1,"fa","fa-check-circle","check"],[1,"fa","fa-exclamation-circle","uncheck"]],template:function(t,e){1&t&&(Mi(0,"div",0),Mi(1,"div",1),Mi(2,"div",2),Mi(3,"a",3),no(4," Regresar al listado "),Li(),Mi(5,"h2"),no(6,"Editar personaje"),Li(),Ni(7,nR,2,0,"p",4),Mi(8,"form",5),Hi("ngSubmit",function(){return e.onSubmit()}),Mi(9,"div",6),Mi(10,"label",7),no(11,"Nombre"),Li(),Ni(12,rR,1,0,"i",8),Ni(13,iR,1,0,"i",9),Mi(14,"input",10),Hi("ngModelChange",function(t){return e.personajes.nombre=t}),Li(),Ni(15,oR,2,1,"p",4),Li(),Mi(16,"div",6),Mi(17,"label",11),no(18,"Tipo de Elemento"),Li(),Ni(19,sR,1,0,"i",8),Ni(20,aR,1,0,"i",9),Mi(21,"select",12),Hi("ngModelChange",function(t){return e.personajes.elemento=t}),Mi(22,"option",13),no(23,"Seleccione..."),Li(),Mi(24,"option",14),no(25," Pyro"),Li(),Mi(26,"option",15),no(27," Anemo"),Li(),Mi(28,"option",16),no(29," Electro"),Li(),Mi(30,"option",17),no(31," Hydro"),Li(),Mi(32,"option",18),no(33," Cryo"),Li(),Mi(34,"option",19),no(35," Dendro"),Li(),Mi(36,"option",20),no(37," Geo"),Li(),Li(),Li(),Mi(38,"div",6),Mi(39,"label",21),no(40,"Estilo Personaje"),Li(),Ni(41,uR,1,0,"i",8),Ni(42,cR,1,0,"i",9),Mi(43,"select",22),Hi("ngModelChange",function(t){return e.personajes.estilo=t}),Mi(44,"option",13),no(45,"Seleccione..."),Li(),Mi(46,"option",23),no(47," Main-DPS"),Li(),Mi(48,"option",24),no(49," Sub-DPS"),Li(),Mi(50,"option",25),no(51," Support"),Li(),Li(),Li(),Mi(52,"div",6),Mi(53,"label",26),no(54,"Ruta imag\xe9n"),Li(),Ni(55,lR,1,0,"i",8),Ni(56,hR,1,0,"i",9),Mi(57,"input",27),Hi("ngModelChange",function(t){return e.personajes.imagen=t}),Li(),Li(),Mi(58,"button",28),no(59," Guardar Cambios "),Li(),Mi(60,"a",29),no(61," Cancelar "),Li(),Li(),Li(),Li(),Li()),2&t&&(cr(7),Ri("ngIf",!e.personajeForm.valid),cr(1),Ri("formGroup",e.personajeForm),cr(4),Ri("ngIf",e.personajeForm.controls.nombre.valid),cr(1),Ri("ngIf",e.personajeForm.controls.nombre.invalid&&e.personajeForm.controls.nombre.touched),cr(1),Ri("ngModel",e.personajes.nombre),cr(1),Ri("ngIf",e.erroresForm.nombre),cr(4),Ri("ngIf",e.personajeForm.controls.elemento.valid),cr(1),Ri("ngIf",e.personajeForm.controls.elemento.invalid&&e.personajeForm.controls.elemento.touched),cr(1),Ri("ngModel",e.personajes.elemento),cr(20),Ri("ngIf",e.personajeForm.controls.nombre.valid),cr(1),Ri("ngIf",e.personajeForm.controls.estilo.invalid&&e.personajeForm.controls.estilo.touched),cr(1),Ri("ngModel",e.personajes.estilo),cr(12),Ri("ngIf",e.personajeForm.controls.imagen.valid),cr(1),Ri("ngIf",e.personajeForm.controls.imagen.invalid&&e.personajeForm.controls.imagen.touched),cr(1),Ri("ngModel",e.personajes.imagen),cr(1),Ri("disabled",!e.personajeForm.valid))},directives:[kh,Xa,Kd,od,Yd,Mf,id,Jd,gd,vd,_d],styles:["input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-left:5px solid #a94442}input.ng-valid.ng-dirty[_ngcontent-%COMP%]{border-left:5px solid #42a948}.check[_ngcontent-%COMP%]{color:#42a948}.uncheck[_ngcontent-%COMP%]{color:#a94442}"]}),t})()},{path:"login",component:BP},{path:"**",component:jP}];let dR=(()=>{class t{}return t.\u0275mod=X({type:t,bootstrap:[xP]}),t.\u0275inj=m({factory:function(e){return new(e||t)},providers:[],imports:[[Ru,Hh.forRoot(fR),ep,np,jf,ip,op,wP,SP]]}),t})();(function(){if(sa)throw new Error("Cannot enable prod mode after platform setup.");oa=!1})(),Nu().bootstrapModule(dR).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return u});var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD");class s extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(!e.closed)return t instanceof i.a?t.subscribe(e):Object(o.a)(t)(e)}}},[[0,0]]]);